<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Glibc Security Patch Causes More Serious Vulnerabilities - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="In early June, the widely used GNU C Library (glibc) released a patch to fix a relatively minor security vulnerability (CVE-2021-33574). Fixing the security issue should have been a good thing, but unfortunately this security patch introduced a new and more serious vulnerability (CVE-2021-38604).
Siddhesh Poyarekar, a Red Hat software engineer, said that if an attacker wanted to exploit the initial security vulnerability to launch a minimal attack, he would need many prerequisites before he could exploit the vulnerability to crash the program." /><meta name="keywords" content="glibc" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-08/glibc-security-fix-created-a-nastier-linux-bug/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Glibc Security Patch Causes More Serious Vulnerabilities" />
<meta property="og:description" content="In early June, the widely used GNU C Library (glibc) released a patch to fix a relatively minor security vulnerability (CVE-2021-33574). Fixing the security issue should have been a good thing, but unfortunately this security patch introduced a new and more serious vulnerability (CVE-2021-38604).
Siddhesh Poyarekar, a Red Hat software engineer, said that if an attacker wanted to exploit the initial security vulnerability to launch a minimal attack, he would need many prerequisites before he could exploit the vulnerability to crash the program." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-08/glibc-security-fix-created-a-nastier-linux-bug/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-08-20T11:16:11+08:00" />
<meta property="article:modified_time" content="2021-08-20T11:16:11+08:00" />

<meta itemprop="name" content="Glibc Security Patch Causes More Serious Vulnerabilities">
<meta itemprop="description" content="In early June, the widely used GNU C Library (glibc) released a patch to fix a relatively minor security vulnerability (CVE-2021-33574). Fixing the security issue should have been a good thing, but unfortunately this security patch introduced a new and more serious vulnerability (CVE-2021-38604).
Siddhesh Poyarekar, a Red Hat software engineer, said that if an attacker wanted to exploit the initial security vulnerability to launch a minimal attack, he would need many prerequisites before he could exploit the vulnerability to crash the program."><meta itemprop="datePublished" content="2021-08-20T11:16:11+08:00" />
<meta itemprop="dateModified" content="2021-08-20T11:16:11+08:00" />
<meta itemprop="wordCount" content="446">
<meta itemprop="keywords" content="glibc," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Glibc Security Patch Causes More Serious Vulnerabilities"/>
<meta name="twitter:description" content="In early June, the widely used GNU C Library (glibc) released a patch to fix a relatively minor security vulnerability (CVE-2021-33574). Fixing the security issue should have been a good thing, but unfortunately this security patch introduced a new and more serious vulnerability (CVE-2021-38604).
Siddhesh Poyarekar, a Red Hat software engineer, said that if an attacker wanted to exploit the initial security vulnerability to launch a minimal attack, he would need many prerequisites before he could exploit the vulnerability to crash the program."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Glibc Security Patch Causes More Serious Vulnerabilities</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-08-20 11:16:11 </span>
        <div class="post-category">
            <a href="/categories/information/"> information </a>
            </div>
          <span class="more-meta"> 446 words </span>
          <span class="more-meta"> 3 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents"></nav>
  </div>
</div>
    <div class="post-content">
      <p>In early June, the widely used GNU C Library (glibc) released a patch to fix a relatively minor security vulnerability (<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-33574">CVE-2021-33574</a>). Fixing the security issue should have been a good thing, but unfortunately this security patch introduced a new and more serious vulnerability (<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-38604">CVE-2021-38604</a>).</p>
<p>Siddhesh Poyarekar, a Red Hat software engineer, <a href="https://sourceware.org/bugzilla/show_bug.cgi?id=27896#c4">said</a> that if an attacker wanted to exploit the initial security vulnerability to launch a minimal attack, he would need many prerequisites before he could exploit the vulnerability to crash the program. Nonetheless, since the security vulnerability was found it needs to be addressed.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/20/bb8228bccfec40888ce486800f7e566e.png" alt=" "></p>
<p>However, after glibc was patched to fix this security vulnerability, it caused a more serious and easily exploited vulnerability. While checking for patches, Nikita Popov from the CloudLinux TuxCare team <a href="https://blog.tuxcare.com/cve/tuxcare-team-identifies-cve-2021-38604-a-new-vulnerability-in-glibc">discovered that the new vulnerability</a> could potentially cause a segmentation fault to be triggered within the library, which could cause any program using the glibc library to crash and create a denial of service (DoS) issue. More importantly, this vulnerability is more likely to be triggered than the old one.</p>
<p>RedHat gave this vulnerability a score of 7.5 in its <a href="https://access.redhat.com/security/cve/cve-2021-38604">Common Vulnerability Scoring System (CVSS)</a>, which is already a &ldquo;high&rdquo; score, meaning that an attack using this vulnerability is easy to build and does not require privileges.</p>
<p>This vulnerability was introduced by an upstream fix patch, specifically in the mq_notify.c file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="err">@@</span> <span class="o">-</span><span class="mi">133</span><span class="p">,</span><span class="mi">8</span> <span class="o">+</span><span class="mi">133</span><span class="p">,</span><span class="mi">11</span> <span class="err">@@</span> <span class="n">helper_thread</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">)</span>
            <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">__pthread_barrier_wait</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">notify_barrier</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">raw</span><span class="p">[</span><span class="n">NOTIFY_COOKIE_LEN</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">NOTIFY_REMOVED</span><span class="p">)</span>
<span class="o">-</span>       <span class="cm">/* The only state we keep is the copy of the thread attributes.  */</span>
<span class="o">-</span>       <span class="n">free</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">attr</span><span class="p">);</span>
<span class="o">+</span>       <span class="p">{</span>
<span class="o">+</span>         <span class="cm">/* The only state we keep is the copy of the thread attributes.  */</span>
<span class="o">+</span>         <span class="n">pthread_attr_destroy</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">attr</span><span class="p">);</span>
<span class="o">+</span>         <span class="n">free</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">attr</span><span class="p">);</span>
<span class="o">+</span>       <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Nikita Popov discovered this problem while performing a &ldquo;port of the security patch CVE-2021-33574 to a supported distribution&rsquo;s routine&rdquo; and found that null pointers could be passed in some cases.</p>
<p>According to Nikita Popov, glibc provides the main system primitives and is associated with most other Linux applications, including other language compilers and interpreters. It is the second most important component of the system after the kernel, so a problem with glibc could have a very large impact.</p>
<p>A patch for this vulnerability (<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-38604">CVE-2021-38604</a>), and a fix for it, has been submitted to the glibc development team and has been integrated into the glibc library. In addition, a new test has been submitted to glibc&rsquo;s automated test suite to detect this condition and prevent it from happening again in the future. glibc development team recommends that users upgrade to the latest stable version of glibc 2.34 or higher.</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/glibc/">glibc</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-08/microsoft-publish-first-win11-iso/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Microsoft Publish First Win11 Iso</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-08/intel-publish-alder-lake-details/">
            <span class="next-text nav-default">Intel announces details about next-generation client architecture &#34;Alder Lake&#34;</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
