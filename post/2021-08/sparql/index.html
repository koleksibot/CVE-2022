<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>A First Look at RDF and SPARQL: Using Wikidata as an Example - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="Wikipedia has a sister project called &amp;ldquo;Wikidata&amp;rdquo; (Wikidata). You can click on it from the left sidebar of Wikipedia. &amp;ldquo;Wikidata takes all of Wikipedia&amp;rsquo;s data and organizes it into a machine-processable database for easy access. For example, which is the most populous region in Shanxi Province? This kind of question is very time-consuming to query in Wikipedia, and you have to manually extract information from each entry. However, Wikidata can" /><meta name="keywords" content="rdf,sparql" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-08/sparql/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="A First Look at RDF and SPARQL: Using Wikidata as an Example" />
<meta property="og:description" content="Wikipedia has a sister project called &ldquo;Wikidata&rdquo; (Wikidata). You can click on it from the left sidebar of Wikipedia. &ldquo;Wikidata takes all of Wikipedia&rsquo;s data and organizes it into a machine-processable database for easy access. For example, which is the most populous region in Shanxi Province? This kind of question is very time-consuming to query in Wikipedia, and you have to manually extract information from each entry. However, Wikidata can" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-08/sparql/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-08-17T14:56:06+08:00" />
<meta property="article:modified_time" content="2021-08-17T14:56:06+08:00" />

<meta itemprop="name" content="A First Look at RDF and SPARQL: Using Wikidata as an Example">
<meta itemprop="description" content="Wikipedia has a sister project called &ldquo;Wikidata&rdquo; (Wikidata). You can click on it from the left sidebar of Wikipedia. &ldquo;Wikidata takes all of Wikipedia&rsquo;s data and organizes it into a machine-processable database for easy access. For example, which is the most populous region in Shanxi Province? This kind of question is very time-consuming to query in Wikipedia, and you have to manually extract information from each entry. However, Wikidata can"><meta itemprop="datePublished" content="2021-08-17T14:56:06+08:00" />
<meta itemprop="dateModified" content="2021-08-17T14:56:06+08:00" />
<meta itemprop="wordCount" content="2172">
<meta itemprop="keywords" content="rdf,sparql," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="A First Look at RDF and SPARQL: Using Wikidata as an Example"/>
<meta name="twitter:description" content="Wikipedia has a sister project called &ldquo;Wikidata&rdquo; (Wikidata). You can click on it from the left sidebar of Wikipedia. &ldquo;Wikidata takes all of Wikipedia&rsquo;s data and organizes it into a machine-processable database for easy access. For example, which is the most populous region in Shanxi Province? This kind of question is very time-consuming to query in Wikipedia, and you have to manually extract information from each entry. However, Wikidata can"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">A First Look at RDF and SPARQL: Using Wikidata as an Example</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-08-17 14:56:06 </span>
        <div class="post-category">
            <a href="/categories/skills/"> skills </a>
            </div>
          <span class="more-meta"> 2172 words </span>
          <span class="more-meta"> 5 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#meaning-of-rdf">Meaning of RDF</a></li>
        <li><a href="#example-of-rdf-syntax">Example of RDF syntax</a></li>
        <li><a href="#sparql-query-language">SPARQL Query Language</a></li>
        <li><a href="#example-of-wikidata-query-most-populated-areas-in-shanxi-province">Example of Wikidata query: Most populated areas in Shanxi Province</a></li>
        <li><a href="#example-of-a-wiki-data-query-programmer-directory">Example of a wiki data query: Programmer Directory</a></li>
        <li><a href="#reference-links">Reference Links</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>Wikipedia has a sister project called <a href="https://www.wikidata.org/">&ldquo;Wikidata&rdquo;</a> (Wikidata). You can click on it from the left sidebar of Wikipedia.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/90005eb6353a419cbc02d2ac9eb4ac9d.png" alt=" "></p>
<p>&ldquo;Wikidata takes all of Wikipedia&rsquo;s data and organizes it into a machine-processable database for easy access. For example, which is the most populous region in Shanxi Province?</p>
<p>This kind of question is very time-consuming to query in Wikipedia, and you have to manually extract information from each entry. However, Wikidata can execute just one command and return the answer (see later for details). Because it provides structured data, it can be queried by machine.</p>
<p>However, Wikidata is not a relational database, but an RDF database; the query language is not SQL, but SPARQL. I learned a little bit of RDF and SPARQL in a rough way, and this article is a learning note to demonstrate how to use Wikidata to query information.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/71e63ff61ffc4a9c8b3ddabd8a7d095e.png" alt=" "></p>
<h2 id="meaning-of-rdf">Meaning of RDF</h2>
<p>As we all know, relational databases are the most widely used databases today, abstracting data into a tabular relationship of rows and columns.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/e92c8d33822247818a49facbf67ed169.png" alt=" "></p>
<p>However, the real world is less like a table and more like a network. Various things are connected together in a web through intricate relationships.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/895190df67d745e0ac6f2d52c0265305.png" alt=" "></p>
<p>A network is called a graph in mathematics, and each thing is a node of a graph, and the relationship between the nodes is the edge that connects them together. If a database stores data as a graph, it is called a graph database.</p>
<p><strong>RDF is a way of describing graph databases, or a protocol for using them. It describes the direct relationship between things in a &ldquo;triple&rdquo; fashion.</strong></p>
<p>A &ldquo;triple&rdquo; is the core concept of RDF, which refers to two things and the relationship between them, syntactically rendered as &ldquo;subject + predicate + object&rdquo;.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">The sky is blue.
</code></pre></td></tr></table>
</div>
</div><p>The above sentence is an RDF triplet.&rdquo; sky&quot; (subject) and &ldquo;blue&rdquo; (object) are two things that are connected by a color relation (predicate).</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/60f78f3d18f746ababcbb30190f59054.png" alt=" "></p>
<p>RDF requires that predicates (i.e., relationships between things) must be clearly defined. Think of it this way, if the predicate is given, you can use the subject to query the object, or the object to query the subject. For example, if the color relationship is given, then the following query can be made to the database.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">Query 1: sky + color = ?

Query 2: ? + color = blue
</code></pre></td></tr></table>
</div>
</div><p>RDF requires that each set of predicates must have an explicit URL that distinguishes between the different predicates, and RDF officially defines a set of common predicates with the following URLs.</p>
<p><a href="https://www.w3.org/1999/02/22-rdf-syntax-ns">https://www.w3.org/1999/02/22-rdf-syntax-ns</a></p>
<p>When you use a URL, just refer to it so that others know which set of predicates is being used.</p>
<p>RDF allows you to specify a prefix that represents the URL address, such as the URL of the official predicate above, which is usually represented by the prefix <code>rdf</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns&gt;
</code></pre></td></tr></table>
</div>
</div><p>Each URL can contain multiple predicates, distinguished by the &ldquo;prefix : predicate&rdquo; form. For example, the official definition of a &ldquo;type&rdquo; predicate, which specifies the type of the subject, can be represented by <code>rdf:type</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">XiaoMing is a student.
</code></pre></td></tr></table>
</div>
</div><p>The above sentence, written as an RDF triplet, is of the following form.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns&gt;

Xiaoming rdf:type Student.
</code></pre></td></tr></table>
</div>
</div><p>Since <code>rdf:type</code> is a common predicate, RDF allows it to be abbreviated to <code>a</code>, so that &ldquo;Xiao Ming is a student&rdquo; can in turn be expressed as <code>Xiao Ming a student</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns&gt;

Xiaoming a student.
</code></pre></td></tr></table>
</div>
</div><p>Note that each RDF triplet ends with an English period to distinguish multiple triples.</p>
<h2 id="example-of-rdf-syntax">Example of RDF syntax</h2>
<p>Here is an example to demonstrate how RDF defines the relationship between things.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">The Beatles were a band consisting of John Lennon, Paul McCartney, Ringo Starr and George Harrison, all artists, who released an album in 1963, 《Please Please Me》, which contained the single 《Love Me Do》, 125 seconds long.
</code></pre></td></tr></table>
</div>
</div><p>The above passage is a natural language text. We start by drawing a network relationship diagram.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/85da063df64648cba5b1d46ea3e4cc13.png" alt=" "></p>
<p>然后，它被转换为一个RDF三元组。首先，给出谓词的URL，以及相应的前缀。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">PREFIX : &lt;http://foo.com/tutorial/&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns&gt;
</code></pre></td></tr></table>
</div>
</div><p>In the above example, there are two URLs, indicating that two sets of predicates are used. One set is the official predicate, represented using the prefix <code>rdf</code>; the other set is self-defined, with an empty prefix, indicating that this is the default prefix.</p>
<p>The phrase &ldquo;The Beatles are a band with John Lennon, Paul McCartney, Ringo Starr, and George Harrison.&rdquo; corresponds to the following triplet.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">Beatles rdf:type Band .
Beatles :name &#34;Beatles&#34; .
Beatles :member John_Lennon .
Beatles :member Paul_McCartney .
Beatles :member Ringo_Starr .
Beatles :member George_Harrison .
</code></pre></td></tr></table>
</div>
</div><p>In the above example, <code>rdf:type</code>, <code>:name</code>, and <code>:member</code> are all predicates. Since these triples have the same subject, RDF allows them to be merged.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">Beatles a band ;
      :name &#34;Beatles&#34; ;
      :member John_Lennon, Paul_McCartney, George_Harrison, Ringo_Starr .
</code></pre></td></tr></table>
</div>
</div><p>In the above code, the triples with the same subject are written in a merged way, each triple is separated by a semicolon, and the last triple is terminated by a period.</p>
<p>The rest of the RDF triples are as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">John_Lennon      a artists .
Paul_McCartney   a artists .
Ringo_Starr      a artists .
George_Harrison  a artists .
Please_Please_Me a album;
                 :name &#34;Please Please Me&#34; ;
                 :date &#34;1963&#34; ;
                 :artist &#34;artists&#34; ;
                 :track Love_Me_Do .
Love_Me_Do       a Song ;
                 :name &#34;Love Me Do&#34; ;
                 :length 125 .
</code></pre></td></tr></table>
</div>
</div><h2 id="sparql-query-language">SPARQL Query Language</h2>
<p>SPARQL is a query language for RDF databases, much like the syntax of SQL. The core idea is to extract the eligible subject or object from a triple according to the given predicate verb.</p>
<p>The syntax of a SPARQL query is as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="o">&lt;</span><span class="n">variables</span><span class="o">&gt;</span><span class="w">
</span><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="err">{</span><span class="w">
</span><span class="w">   </span><span class="o">&lt;</span><span class="n">graph</span><span class="w"> </span><span class="n">pattern</span><span class="o">&gt;</span><span class="w">
</span><span class="w"></span><span class="err">}</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>In the above code, <code>&lt;variables&gt;</code> is the subject or object to be extracted, and <code>&lt;graph pattern&gt;</code> is the triple pattern to be queried.</p>
<p>For example, query all albums in the database.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="o">?</span><span class="n">album</span><span class="w">
</span><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="err">{</span><span class="w">
</span><span class="w">   </span><span class="o">?</span><span class="n">album</span><span class="w"> </span><span class="n">rdf</span><span class="p">:</span><span class="k">type</span><span class="w"> </span><span class="p">:</span><span class="n">Album</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w"></span><span class="err">}</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>In the above code, <code>?album</code> is a variable with any name you want, but the first character must be a question mark <code>?</code> . The query condition is that the variable <code>?album</code> is the subject, and according to the predicate <code>rdf:type</code>, the object <code>:Album</code> can be obtained. This object also has a prefix indicating that this is defined by the current database.</p>
<p>The variable can be replaced by an asterisk <code>*</code> if all the records that match the condition are returned, and the keyword <code>WHERE</code> can be omitted inside the <code>SELECT</code> query, as well as the period at the end of the last triple, so the above query can also be written as the following.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="o">?</span><span class="n">album</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="err">：</span><span class="n">Album</span><span class="w"> </span><span class="err">}</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>In addition to the album name, if you want to return the artist of the album, you can add a variable <code>?artist</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="o">?</span><span class="n">album</span><span class="w"> </span><span class="o">?</span><span class="n">artist</span><span class="w">
</span><span class="w"></span><span class="err">{</span><span class="w">
</span><span class="w">   </span><span class="o">?</span><span class="n">album</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">:</span><span class="n">Album</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w">   </span><span class="o">?</span><span class="n">album</span><span class="w"> </span><span class="p">:</span><span class="n">artist</span><span class="w"> </span><span class="o">?</span><span class="n">artist</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w"></span><span class="err">}</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>In the above code, the variable <code>?artist</code> must be the object of <code>?album</code> (subject) and <code>:artist</code> (predicate).</p>
<h2 id="example-of-wikidata-query-most-populated-areas-in-shanxi-province">Example of Wikidata query: Most populated areas in Shanxi Province</h2>
<p>The following is a further study of SPARQL syntax by looking up &ldquo;which is the most populous region in Shanxi Province&rdquo; through Wikidata.</p>
<p>First, go to the Wikidata website (<a href="https://www.wikidata.org/">https://www.wikidata.org/</a>), and search for &ldquo;Shanxi&rdquo; in the search field at the top of the page. Alternatively, Wikipedia&rsquo;s &ldquo;Shanxi Province&rdquo; page has a link to Wikidata in the left column.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/61aa215133f84d53b6774efd22202e10.png" alt=" "></p>
<p>Then, go to the <a href="https://www.wikidata.org/wiki/Q46913">page of Shanxi Province</a>.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/6d61c65945804acb80ed12a30b7e809e.png" alt=" "></p>
<p>At this point, look for the URL of this page.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">https://www.wikidata.org/wiki/Q46913
</code></pre></td></tr></table>
</div>
</div><p>The <code>Q46913</code> at the end of the URL above is the number (i.e. the subject) of the entry for Shanxi Province in the wiki data, which will be used later.</p>
<p>Next, scroll down the page and find the section &ldquo;contains administrative territorial entity&rdquo;, which lists the regions under Shanxi Province.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/9a94999957d44ffa95cdd6debbd76414.png" alt=" "></p>
<p>Click on the title &ldquo;contains administrative territorial entity&rdquo; to go to its page, and look for the URL as well.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">https://www.wikidata.org/wiki/Property:P150
</code></pre></td></tr></table>
</div>
</div><p>The last part of the URL above, <code>P150</code>, is the number of the predicate verb &ldquo;administrative entity included&rdquo;.</p>
<p>Now, you can start the query. Go to Wikidata&rsquo;s online query page <a href="https://query.wikidata.org/">query.wikidata.org</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/09214ccb85c4483da0df7560e06fdcb8.png" alt=" "></p>
<p>In the query box, enter the following SPARQL statement.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="o">?</span><span class="n">area</span><span class="w">
</span><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="err">{</span><span class="w">
</span><span class="w">   </span><span class="n">wd</span><span class="p">:</span><span class="n">Q46913</span><span class="w">  </span><span class="n">wdt</span><span class="p">:</span><span class="n">P150</span><span class="w"> </span><span class="o">?</span><span class="n">area</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w"></span><span class="err">}</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>The above code requires the return of the variable <code>?area</code>, which must satisfy the subject <code>Shanxi Province</code> (<code>wd:Q46913</code>) and the predicate <code>administrative entity contained</code> (<code>wdt:P150</code>). The prefix <code>wd</code> indicates that this is a wiki data entry, while the prefix <code>wdt</code> indicates that this is a predicate relationship defined by the wiki data.</p>
<p>Click the triangular Run button in the left sidebar to get the results of the query at the bottom of the page.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/0eff8bbdc7424e71a908ffc96a1c9335.png" alt=" "></p>
<p>As you can see from the above image, the returned entries are numbered. Modify the query statement to add a column of text labels.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">area</span><span class="w">
</span><span class="w">  </span><span class="o">?</span><span class="n">areaLabel</span><span class="w">
</span><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="err">{</span><span class="w">
</span><span class="w">   </span><span class="n">wd</span><span class="p">:</span><span class="n">Q46913</span><span class="w">  </span><span class="n">wdt</span><span class="p">:</span><span class="n">P150</span><span class="w"> </span><span class="o">?</span><span class="n">area</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w">   </span><span class="o">?</span><span class="n">area</span><span class="w"> </span><span class="n">rdfs</span><span class="p">:</span><span class="n">label</span><span class="w"> </span><span class="o">?</span><span class="n">areaLabel</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w">   </span><span class="n">FILTER</span><span class="p">(</span><span class="n">LANGMATCHES</span><span class="p">(</span><span class="n">LANG</span><span class="p">(</span><span class="o">?</span><span class="n">areaLabel</span><span class="p">),</span><span class="w"> </span><span class="s2">&#34;zh-CN&#34;</span><span class="p">))</span><span class="w"> 
</span><span class="w"></span><span class="err">}</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>In the above code, add a returned variable <code>?areaLabel</code> which is the text label of the previous variable <code>?area</code> (satisfying the predicate <code>rdfs:label</code>), and add a filter statement <code>FILTER</code> which requires only Chinese labels to be returned.</p>
<p>Run this query and you will see the Chinese names for each area.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/01270271c91b464392a0d0035f748cc7.png" alt=" "></p>
<p>Next, add a population variable <code>?popTotal</code> that returns the total number of people in each region.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">area</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">areaLabel</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">popTotal</span><span class="w">
</span><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="err">{</span><span class="w">
</span><span class="w">   </span><span class="n">wd</span><span class="p">:</span><span class="n">Q46913</span><span class="w">  </span><span class="n">wdt</span><span class="p">:</span><span class="n">P150</span><span class="w"> </span><span class="o">?</span><span class="n">area</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w">   </span><span class="o">?</span><span class="n">area</span><span class="w"> </span><span class="n">rdfs</span><span class="p">:</span><span class="n">label</span><span class="w"> </span><span class="o">?</span><span class="n">areaLabel</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w">   </span><span class="n">FILTER</span><span class="p">(</span><span class="n">LANGMATCHES</span><span class="p">(</span><span class="n">LANG</span><span class="p">(</span><span class="o">?</span><span class="n">areaLabel</span><span class="p">),</span><span class="w"> </span><span class="s2">&#34;zh-CN&#34;</span><span class="p">))</span><span class="w"> 
</span><span class="w">
</span><span class="w">   </span><span class="o">?</span><span class="n">area</span><span class="w"> </span><span class="n">wdt</span><span class="p">:</span><span class="n">P1082</span><span class="w"> </span><span class="o">?</span><span class="n">popTotal</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w"></span><span class="err">}</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>Run this code and you will see the population total.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/ead5fd9354544af8a95492b20a97d701.png" alt=" "></p>
<p>Then, add a sort clause <code>order by</code> to sort by the population in reverse order.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">area</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">areaLabel</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">popTotal</span><span class="w">
</span><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="err">{</span><span class="w">
</span><span class="w">   </span><span class="n">wd</span><span class="p">:</span><span class="n">Q46913</span><span class="w">  </span><span class="n">wdt</span><span class="p">:</span><span class="n">P150</span><span class="w"> </span><span class="o">?</span><span class="n">area</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w">   </span><span class="o">?</span><span class="n">area</span><span class="w"> </span><span class="n">rdfs</span><span class="p">:</span><span class="n">label</span><span class="w"> </span><span class="o">?</span><span class="n">areaLabel</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w">   </span><span class="n">FILTER</span><span class="p">(</span><span class="n">LANGMATCHES</span><span class="p">(</span><span class="n">LANG</span><span class="p">(</span><span class="o">?</span><span class="n">areaLabel</span><span class="p">),</span><span class="w"> </span><span class="s2">&#34;zh-CN&#34;</span><span class="p">))</span><span class="w"> 
</span><span class="w">
</span><span class="w">   </span><span class="o">?</span><span class="n">area</span><span class="w"> </span><span class="n">wdt</span><span class="p">:</span><span class="n">P1082</span><span class="w"> </span><span class="o">?</span><span class="n">popTotal</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w"></span><span class="err">}</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>The results of the run are as follows.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/b0f18ff038434238bf23fb3862817bfb.png" alt=" "></p>
<p>Finally, add a <code>limit 1</code> clause to return only the first piece of data.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">area</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">areaLabel</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">popTotal</span><span class="w">
</span><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="err">{</span><span class="w">
</span><span class="w">   </span><span class="n">wd</span><span class="p">:</span><span class="n">Q46913</span><span class="w">  </span><span class="n">wdt</span><span class="p">:</span><span class="n">P150</span><span class="w"> </span><span class="o">?</span><span class="n">area</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w">   </span><span class="o">?</span><span class="n">area</span><span class="w"> </span><span class="n">rdfs</span><span class="p">:</span><span class="n">label</span><span class="w"> </span><span class="o">?</span><span class="n">areaLabel</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w">   </span><span class="n">FILTER</span><span class="p">(</span><span class="n">LANGMATCHES</span><span class="p">(</span><span class="n">LANG</span><span class="p">(</span><span class="o">?</span><span class="n">areaLabel</span><span class="p">),</span><span class="w"> </span><span class="s2">&#34;zh-CN&#34;</span><span class="p">))</span><span class="w"> 
</span><span class="w">
</span><span class="w">   </span><span class="o">?</span><span class="n">area</span><span class="w"> </span><span class="n">wdt</span><span class="p">:</span><span class="n">P1082</span><span class="w"> </span><span class="o">?</span><span class="n">popTotal</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w"></span><span class="err">}</span><span class="w">
</span><span class="w"></span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="k">desc</span><span class="p">(</span><span class="o">?</span><span class="n">popTotal</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/afed7be599164378a9c2abd14bf6032f.png" alt=" "></p>
<p>This gives us the most populated area in Shanxi Province.</p>
<h2 id="example-of-a-wiki-data-query-programmer-directory">Example of a wiki data query: Programmer Directory</h2>
<p>Here is another example to find out all programmers of Wikipedia revenue.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="w">
</span><span class="w"></span><span class="k">SELECT</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">programmer</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">programmerLabel</span><span class="w">
</span><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="err">{</span><span class="w">
</span><span class="w">  </span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="n">wdt</span><span class="p">:</span><span class="n">P106</span><span class="w"> </span><span class="n">wd</span><span class="p">:</span><span class="n">Q5482740</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w">  </span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="n">rdfs</span><span class="p">:</span><span class="n">label</span><span class="w"> </span><span class="o">?</span><span class="n">programmerLabel</span><span class="w"> </span><span class="p">.</span><span class="w">  
</span><span class="w">  </span><span class="n">FILTER</span><span class="w"> </span><span class="p">(</span><span class="n">LANGMATCHES</span><span class="p">(</span><span class="n">LANG</span><span class="p">(</span><span class="o">?</span><span class="n">programmerLabel</span><span class="p">),</span><span class="w"> </span><span class="s2">&#34;zh-CN&#34;</span><span class="p">))</span><span class="w">
</span><span class="w"></span><span class="err">}</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>In the above code, <a href="https://www.wikidata.org/wiki/Q5482740">Q5482740</a> is the programmer and <a href="https://www.wikidata.org/wiki/Property:P106">P106</a> is the occupation.</p>
<p>Run this query and you will see the list of programmers.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/b77c115f633d4fc2a3a955aa718927d5.png" alt=" "></p>
<p>Note that only programmers with Chinese names are returned here. If there is no Chinese name of the programmer inside the database, it will not be returned here.</p>
<p>Then, query the main achievements of each programmer.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="w">
</span><span class="w"></span><span class="k">SELECT</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">programmer</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">programmerLabel</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">notableworkLabel</span><span class="w">
</span><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="err">{</span><span class="w">
</span><span class="w">  </span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="n">wdt</span><span class="p">:</span><span class="n">P106</span><span class="w"> </span><span class="n">wd</span><span class="p">:</span><span class="n">Q5482740</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w">  </span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="n">rdfs</span><span class="p">:</span><span class="n">label</span><span class="w"> </span><span class="o">?</span><span class="n">programmerLabel</span><span class="w"> </span><span class="p">.</span><span class="w">  
</span><span class="w">  </span><span class="n">FILTER</span><span class="w"> </span><span class="p">(</span><span class="n">LANGMATCHES</span><span class="p">(</span><span class="n">LANG</span><span class="p">(</span><span class="o">?</span><span class="n">programmerLabel</span><span class="p">),</span><span class="w"> </span><span class="s2">&#34;zh-CN&#34;</span><span class="p">))</span><span class="w">
</span><span class="w">
</span><span class="w">  </span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="n">wdt</span><span class="p">:</span><span class="n">P800</span><span class="w"> </span><span class="o">?</span><span class="n">notablework</span><span class="w"> </span><span class="p">.</span><span class="w">  
</span><span class="w">  </span><span class="o">?</span><span class="n">notablework</span><span class="w"> </span><span class="n">rdfs</span><span class="p">:</span><span class="n">label</span><span class="w"> </span><span class="o">?</span><span class="n">notableworkLabel</span><span class="w"> </span><span class="p">.</span><span class="w">  
</span><span class="w">  </span><span class="n">FILTER</span><span class="p">(</span><span class="n">LANGMATCHES</span><span class="p">(</span><span class="n">LANG</span><span class="p">(</span><span class="o">?</span><span class="n">notableworkLabel</span><span class="p">),</span><span class="w"> </span><span class="s2">&#34;zh-CN&#34;</span><span class="p">))</span><span class="w">
</span><span class="w"></span><span class="err">}</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>The results of the run are as follows.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/3a10381882394c67ac05a75257852591.png" alt=" "></p>
<p>Some programmers have multiple achievements, for example, John Carmack has two achievements, &ldquo;Doom&rdquo; and &ldquo;Thor&rsquo;s Hammer&rdquo;. You can use the <code>GROUP BY</code> clause to combine them together.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="w">
</span><span class="w"></span><span class="k">SELECT</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">programmer</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">programmerLabel</span><span class="w"> 
</span><span class="w">  </span><span class="p">(</span><span class="n">GROUP_CONCAT</span><span class="p">(</span><span class="o">?</span><span class="n">notableworkLabel</span><span class="p">;</span><span class="w"> </span><span class="n">separator</span><span class="o">=</span><span class="s2">&#34;; &#34;</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="o">?</span><span class="n">works</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="err">{</span><span class="w">
</span><span class="w">  </span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="n">wdt</span><span class="p">:</span><span class="n">P106</span><span class="w"> </span><span class="n">wd</span><span class="p">:</span><span class="n">Q5482740</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w">  </span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="n">rdfs</span><span class="p">:</span><span class="n">label</span><span class="w"> </span><span class="o">?</span><span class="n">programmerLabel</span><span class="w"> </span><span class="p">.</span><span class="w">  
</span><span class="w">  </span><span class="n">FILTER</span><span class="p">(</span><span class="n">LANGMATCHES</span><span class="p">(</span><span class="n">LANG</span><span class="p">(</span><span class="o">?</span><span class="n">programmerLabel</span><span class="p">),</span><span class="w"> </span><span class="s2">&#34;zh-CN&#34;</span><span class="p">))</span><span class="w">
</span><span class="w">
</span><span class="w">  </span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="n">wdt</span><span class="p">:</span><span class="n">P800</span><span class="w"> </span><span class="o">?</span><span class="n">notablework</span><span class="w"> </span><span class="p">.</span><span class="w">  
</span><span class="w">  </span><span class="o">?</span><span class="n">notablework</span><span class="w"> </span><span class="n">rdfs</span><span class="p">:</span><span class="n">label</span><span class="w"> </span><span class="o">?</span><span class="n">notableworkLabel</span><span class="w"> </span><span class="p">.</span><span class="w">  
</span><span class="w">  </span><span class="n">FILTER</span><span class="w"> </span><span class="p">(</span><span class="n">LANGMATCHES</span><span class="p">(</span><span class="n">LANG</span><span class="p">(</span><span class="o">?</span><span class="n">notableworkLabel</span><span class="p">),</span><span class="w"> </span><span class="s2">&#34;zh-CN&#34;</span><span class="p">))</span><span class="w">
</span><span class="w"></span><span class="err">}</span><span class="w">
</span><span class="w"></span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="o">?</span><span class="n">programmerLabel</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>In the above code, the <code>GROUP_CONCAT</code> function is used to merge multiple <code>?notableworkLabel</code> variables into a new column <code>works</code>.</p>
<p>The result is as follows.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/24c17ad3e66b4729aaa20c320c7dcd4a.png" alt=" "></p>
<p>In the picture above, &ldquo;Doom&rdquo; and &ldquo;Thor&rsquo;s Hammer&rdquo; have been combined into one cell.</p>
<p>Next, add an avatar photo for each person.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">programmer</span><span class="w">
</span><span class="w">  </span><span class="o">?</span><span class="n">programmerLabel</span><span class="w"> 
</span><span class="w">  </span><span class="p">(</span><span class="n">GROUP_CONCAT</span><span class="p">(</span><span class="o">?</span><span class="n">notableworkLabel</span><span class="p">;</span><span class="w"> </span><span class="n">separator</span><span class="o">=</span><span class="s2">&#34;; &#34;</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="o">?</span><span class="n">works</span><span class="p">)</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">image</span><span class="w">
</span><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="err">{</span><span class="w">
</span><span class="w">  </span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="n">wdt</span><span class="p">:</span><span class="n">P106</span><span class="w"> </span><span class="n">wd</span><span class="p">:</span><span class="n">Q5482740</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w">  </span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="n">rdfs</span><span class="p">:</span><span class="n">label</span><span class="w"> </span><span class="o">?</span><span class="n">programmerLabel</span><span class="w"> </span><span class="p">.</span><span class="w">  
</span><span class="w">  </span><span class="n">FILTER</span><span class="p">(</span><span class="n">LANGMATCHES</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">LANG</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">?</span><span class="n">programmerLabel</span><span class="w"> </span><span class="p">),</span><span class="w"> </span><span class="s2">&#34;zh-CN&#34;</span><span class="p">))</span><span class="w">
</span><span class="w">
</span><span class="w">  </span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="n">wdt</span><span class="p">:</span><span class="n">P800</span><span class="w"> </span><span class="o">?</span><span class="n">notablework</span><span class="w"> </span><span class="p">.</span><span class="w">  
</span><span class="w">  </span><span class="o">?</span><span class="n">notablework</span><span class="w"> </span><span class="n">rdfs</span><span class="p">:</span><span class="n">label</span><span class="w"> </span><span class="o">?</span><span class="n">notableworkLabel</span><span class="w"> </span><span class="p">.</span><span class="w">  
</span><span class="w">  </span><span class="n">FILTER</span><span class="w"> </span><span class="p">(</span><span class="n">LANGMATCHES</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">LANG</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">?</span><span class="n">notableworkLabel</span><span class="w"> </span><span class="p">),</span><span class="w"> </span><span class="s2">&#34;zh-CN&#34;</span><span class="p">))</span><span class="w">
</span><span class="w">
</span><span class="w">  </span><span class="n">OPTIONAL</span><span class="w"> </span><span class="err">{</span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="n">wdt</span><span class="p">:</span><span class="n">P18</span><span class="w"> </span><span class="o">?</span><span class="n">image</span><span class="err">}</span><span class="w">
</span><span class="w"></span><span class="err">}</span><span class="w">
</span><span class="w"></span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="o">?</span><span class="n">programmerLabel</span><span class="w"> </span><span class="o">?</span><span class="n">image</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>In the above code, the return value adds a photo variable <code>?image</code>. Since not everyone has a photo, the photo requirement is placed in the <code>OPTIONAL</code> condition, indicating that this item is optional.</p>
<p>After getting the query result, switch the table view of the result to the image grid.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/08e28c7980874d5ba77dffe8e31e5311.png" alt=" "></p>
<p>At this point, the photo is ready to be displayed.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/51ace78334404c319184a25aaa9533cf.png" alt=" "></p>
<p>Finally, we want to know where they are from, and the wiki data provides their place of birth.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="o">?</span><span class="n">programmer</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">programmerLabel</span><span class="w"> 
</span><span class="w">  </span><span class="p">(</span><span class="n">GROUP_CONCAT</span><span class="p">(</span><span class="o">?</span><span class="n">notableworkLabel</span><span class="p">;</span><span class="w"> </span><span class="n">separator</span><span class="o">=</span><span class="s2">&#34;; &#34;</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="o">?</span><span class="n">works</span><span class="p">)</span><span class="w"> 
</span><span class="w">  </span><span class="o">?</span><span class="n">image</span><span class="w">
</span><span class="w">  </span><span class="o">?</span><span class="n">cood</span><span class="w">
</span><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="err">{</span><span class="w">
</span><span class="w">  </span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="n">wdt</span><span class="p">:</span><span class="n">P106</span><span class="w"> </span><span class="n">wd</span><span class="p">:</span><span class="n">Q5482740</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w">  </span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="n">rdfs</span><span class="p">:</span><span class="n">label</span><span class="w"> </span><span class="o">?</span><span class="n">programmerLabel</span><span class="w"> </span><span class="p">.</span><span class="w">  
</span><span class="w">  </span><span class="n">FILTER</span><span class="p">(</span><span class="n">LANGMATCHES</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">LANG</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">?</span><span class="n">programmerLabel</span><span class="w"> </span><span class="p">),</span><span class="w"> </span><span class="s2">&#34;zh-CN&#34;</span><span class="p">))</span><span class="w">
</span><span class="w">
</span><span class="w">  </span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="n">wdt</span><span class="p">:</span><span class="n">P800</span><span class="w"> </span><span class="o">?</span><span class="n">notablework</span><span class="w"> </span><span class="p">.</span><span class="w">  
</span><span class="w">  </span><span class="o">?</span><span class="n">notablework</span><span class="w"> </span><span class="n">rdfs</span><span class="p">:</span><span class="n">label</span><span class="w"> </span><span class="o">?</span><span class="n">notableworkLabel</span><span class="w"> </span><span class="p">.</span><span class="w">  
</span><span class="w">  </span><span class="n">FILTER</span><span class="w"> </span><span class="p">(</span><span class="n">LANGMATCHES</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">LANG</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">?</span><span class="n">notableworkLabel</span><span class="w"> </span><span class="p">),</span><span class="w"> </span><span class="s2">&#34;zh-CN&#34;</span><span class="p">))</span><span class="w">
</span><span class="w">
</span><span class="w">  </span><span class="n">OPTIONAL</span><span class="w"> </span><span class="err">{</span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="n">wdt</span><span class="p">:</span><span class="n">P18</span><span class="w"> </span><span class="o">?</span><span class="n">image</span><span class="err">}</span><span class="w">
</span><span class="w">
</span><span class="w">  </span><span class="n">OPTIONAL</span><span class="w"> </span><span class="err">{</span><span class="w">
</span><span class="w">    </span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="n">wdt</span><span class="p">:</span><span class="n">P19</span><span class="w"> </span><span class="o">?</span><span class="n">birthplace</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w">    </span><span class="o">?</span><span class="n">birthplace</span><span class="w"> </span><span class="n">wdt</span><span class="p">:</span><span class="n">P625</span><span class="w"> </span><span class="o">?</span><span class="n">cood</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="w">  </span><span class="err">}</span><span class="w">
</span><span class="w"></span><span class="err">}</span><span class="w">
</span><span class="w"></span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="o">?</span><span class="n">programmer</span><span class="w"> </span><span class="o">?</span><span class="n">programmerLabel</span><span class="w"> </span><span class="o">?</span><span class="n">image</span><span class="w"> </span><span class="o">?</span><span class="n">cood</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>上面的代码在返回值中加入了坐标变量<code>cood</code>，首先查询了程序员的出生地，然后查询了出生地的地理坐标。</p>
<p>运行查询后，坐标出现在默认的表视图中。</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/f8c0e83dc563446084a4e3515a80d2f7.png" alt=" "></p>
<p>Switch the view to map.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/63ce0972b8cc49f7aa84d1140980432d.png" alt=" "></p>
<p>This is where you can see where these programmers are located on the world map.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/6e7413b57113481283196e86792342e5.png" alt=" "></p>
<p>This tutorial ends here, there are many more ways to query wiki data, you can continue learning by clicking the <code>Examples</code> button in the header of <a href="https://query.wikidata.org/">Query Page</a> to see the official examples provided.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/17/8bf576da2b3e4eb2b060c3317583464a.png" alt=" "></p>
<h2 id="reference-links">Reference Links</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/RDF">RDF</a>, Wikipedia</li>
<li><a href="https://www.stardog.com/tutorials/data-model">RDF Graph Data Model</a>, Stardog</li>
<li><a href="https://www.stardog.com/tutorials/sparql/">Learn SPARQL</a>, Stardog</li>
<li><a href="https://www.cambridgesemantics.com/blog/semantic-university/learn-sparql/sparql-nuts-bolts/">SPARQL Nuts &amp; Bolts</a>, Cambridge Semantics</li>
<li><a href="https://towardsdatascience.com/how-to-extract-knowledge-from-wikipedia-data-science-style-35f50f095d1a">How to Extract Knowledge from Wikipedia, Data Science Style</a>, Michael Li</li>
</ul>
<hr>
<p>Reference <code>https://www.ruanyifeng.com/blog/2020/02/sparql.html</code></p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/rdf/">rdf</a>
          <a href="/tags/sparql/">sparql</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-08/pine64-pinenote/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">PineNote: an e-ink screen reader that runs Linux</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-08/local-https-solution/">
            <span class="next-text nav-default">Local https quick solution - mkcert</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
