<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Local https quick solution - mkcert - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="In Local Development, sometimes we often need to emulate an https environment, for example, PWA applications that require https access. In the traditional solution, we need to use self-signed certificate, and then use self-signed certificate in http server. Since self-signed certificates are not trusted by browsers, to solve the browser trust problem we need to add the CA certificate used by self-signed certificates to the trusted CA certificate of the" /><meta name="keywords" content="local,https,mkcert" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-08/local-https-solution/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Local https quick solution - mkcert" />
<meta property="og:description" content="In Local Development, sometimes we often need to emulate an https environment, for example, PWA applications that require https access. In the traditional solution, we need to use self-signed certificate, and then use self-signed certificate in http server. Since self-signed certificates are not trusted by browsers, to solve the browser trust problem we need to add the CA certificate used by self-signed certificates to the trusted CA certificate of the" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-08/local-https-solution/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-08-16T19:01:07+08:00" />
<meta property="article:modified_time" content="2021-08-16T19:01:07+08:00" />

<meta itemprop="name" content="Local https quick solution - mkcert">
<meta itemprop="description" content="In Local Development, sometimes we often need to emulate an https environment, for example, PWA applications that require https access. In the traditional solution, we need to use self-signed certificate, and then use self-signed certificate in http server. Since self-signed certificates are not trusted by browsers, to solve the browser trust problem we need to add the CA certificate used by self-signed certificates to the trusted CA certificate of the"><meta itemprop="datePublished" content="2021-08-16T19:01:07+08:00" />
<meta itemprop="dateModified" content="2021-08-16T19:01:07+08:00" />
<meta itemprop="wordCount" content="1461">
<meta itemprop="keywords" content="https,mkcert," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Local https quick solution - mkcert"/>
<meta name="twitter:description" content="In Local Development, sometimes we often need to emulate an https environment, for example, PWA applications that require https access. In the traditional solution, we need to use self-signed certificate, and then use self-signed certificate in http server. Since self-signed certificates are not trusted by browsers, to solve the browser trust problem we need to add the CA certificate used by self-signed certificates to the trusted CA certificate of the"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Local https quick solution - mkcert</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-08-16 19:01:07 </span>
        <div class="post-category">
            <a href="/categories/skills/"> skills </a>
            <a href="/categories/tools/"> tools </a>
            </div>
          <span class="more-meta"> 1461 words </span>
          <span class="more-meta"> 3 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#mkcert-introduction">mkcert Introduction</a></li>
        <li><a href="#mkcert-basic-usage">mkcert Basic Usage</a>
          <ul>
            <li><a href="#add-ca-certificate-to-local-trusted-ca">Add CA certificate to local trusted CA</a></li>
            <li><a href="#generate-self-signed-certificate">Generate self-signed certificate</a></li>
          </ul>
        </li>
        <li><a href="#using-the-generated-certificate-file">Using the generated certificate file</a></li>
        <li><a href="#for-use-within-a-local-area-network">For use within a local area network</a></li>
        <li><a href="#some-other-advanced-uses">Some other advanced uses</a></li>
        <li><a href="#summary">Summary</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>In Local Development, sometimes we often need to emulate an https environment, for example, PWA applications that require https access. In the traditional solution, we need to use self-signed certificate, and then use self-signed certificate in http server. Since self-signed certificates are not trusted by browsers, to solve the browser trust problem we need to add the CA certificate used by self-signed certificates to the trusted CA certificate of the system or browser to circumvent this problem.</p>
<p>Previously these steps required a series of tedious openssl commands to generate, although there are scripted solutions to help us simplify entering these commands. But it still feels less friendly for local development and a bit cumbersome. In this article, we will introduce a simpler and more friendly way to generate local https certificates and trust self-signed CAs - mkcert.</p>
<h2 id="mkcert-introduction">mkcert Introduction</h2>
<p><a href="https://github.com/FiloSottile/mkcert">mkcert</a> is a small program written in go language to generate local self-signed books, with cross-platform, easy to use, support for multiple domains, automatic trust CA and a series of convenient features for local development when quickly create https environment to use.</p>
<p>Installation is also very simple, due to the static compilation of go language and cross-platform features, the official platform to provide pre-compiled version, directly downloaded to the local, give executable permissions (Linux/Unix need) can be. Download at: <a href="https://github.com/FiloSottile/mkcert/releases/latest">https://github.com/FiloSottile/mkcert/releases/latest</a></p>
<p>In addition, mkcert has been pushed to <a href="https://brew.sh/">Homebrew</a>, <a href="https://www.macports.org/">MacPorts</a>, <a href="http://linuxbrew.sh/">Linuxbrew</a>, Chocolatey, Scoop and other package management platforms, or you can install them directly with the corresponding package management platform. For example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">brew install mkcert  <span class="c1"># Homebrew/Linuxbrew</span>
choco install mkcert  <span class="c1"># Chocolatey</span>
</code></pre></td></tr></table>
</div>
</div><p>After successful installation, you should be able to use the mkcert command:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">PS C:<span class="se">\U</span>sers<span class="se">\a</span>bcfy<span class="se">\p</span>rojects&gt; mkcert
Using the <span class="nb">local</span> CA at <span class="s2">&#34;C:\Users\abcfy\AppData\Local\mkcert&#34;</span> ✨
Usage of mkcert:

        $ mkcert -install
        Install the <span class="nb">local</span> CA in the system trust store.

        $ mkcert example.org
        Generate <span class="s2">&#34;example.org.pem&#34;</span> and <span class="s2">&#34;example.org-key.pem&#34;</span>.

        $ mkcert example.com myapp.dev localhost 127.0.0.1 ::1
        Generate <span class="s2">&#34;example.com+4.pem&#34;</span> and <span class="s2">&#34;example.com+4-key.pem&#34;</span>.

        $ mkcert <span class="s2">&#34;*.example.it&#34;</span>
        Generate <span class="s2">&#34;_wildcard.example.it.pem&#34;</span> and <span class="s2">&#34;_wildcard.example.it-key.pem&#34;</span>.

        $ mkcert -uninstall
        Uninstall the <span class="nb">local</span> CA <span class="o">(</span>but <span class="k">do</span> not delete it<span class="o">)</span>.

For more options, run <span class="s2">&#34;mkcert -help&#34;</span>.
</code></pre></td></tr></table>
</div>
</div><h2 id="mkcert-basic-usage">mkcert Basic Usage</h2>
<p>From the help output above, <code>mkcert</code> already gives a basic workflow that circumvents the complicated <code>openssl</code> command, and a few simple parameters can generate a local trusted https certificate. For more detailed usage, just look at the <a href="https://github.com/FiloSottile/mkcert#mkcert">official documentation</a>.</p>
<h3 id="add-ca-certificate-to-local-trusted-ca">Add CA certificate to local trusted CA</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ mkcert -install
Using the <span class="nb">local</span> CA at <span class="s2">&#34;C:\Users\abcfy\AppData\Local\mkcert&#34;</span> ✨
</code></pre></td></tr></table>
</div>
</div><p>This simple command helps us to add the root certificate used by mkcert to the local trusted CA, so that certificates issued by this CA will be trusted in <strong>local</strong>.</p>
<p>You can find this certificate in the list of trusted CAs in Windows:</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/16/b12ccbc92a8542cb86d97b4383b1cb12.png" alt=" "></p>
<p>The same can be found in the list of certificates for MacOS:</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/16/ffac092ece4140deaf4da1fb824eccbf.png" alt=" "></p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/16/6d8c143bf58d4d05949d1a219b2c7e47.png" alt=" "></p>
<p>Similarly, the effect is similar on Linux systems, so we won&rsquo;t demonstrate it here.</p>
<h3 id="generate-self-signed-certificate">Generate self-signed certificate</h3>
<p>The command to generate a self-signed certificate is very simple:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">mkcert domain1 [domain2 [...]]
</code></pre></td></tr></table>
</div>
</div><p>Directly follow multiple domains or ip&rsquo;s to be issued, e.g. issue a certificate for local access only (accessible via 127.0.0.1 and localhost, and ipv6 address::1)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"> mkcert localhost 127.0.0.1 ::1
Using the <span class="nb">local</span> CA at <span class="s2">&#34;C:\Users\abcfy\AppData\Local\mkcert&#34;</span> ✨

Created a new certificate valid <span class="k">for</span> the following names 📜
 - <span class="s2">&#34;localhost&#34;</span>
 - <span class="s2">&#34;127.0.0.1&#34;</span>
 - <span class="s2">&#34;::1&#34;</span>

The certificate is at <span class="s2">&#34;./localhost+2.pem&#34;</span> and the key at <span class="s2">&#34;./localhost+2-key.pem&#34;</span> ✅
</code></pre></td></tr></table>
</div>
</div><p>Through the output, we can see that the localhost+2.pem certificate file and localhost+2-key.pem private key file are successfully generated, just use these two files on the web server.</p>
<h2 id="using-the-generated-certificate-file">Using the generated certificate file</h2>
<p>The default generated certificate format is PEM (Privacy Enhanced Mail) format, which can be used by any program that supports PEM format certificates. For example, the common Apache or Nginx, etc. Here we use python comes with SimpleHttpServer to demonstrate the effect of this certificate (code reference from: <a href="https://gist.github.com/RichardBronosky/644cdfea681518403f5409fa16823c1f">https://gist.github.com/RichardBronosky/644cdfea681518403f5409fa16823c1f</a>):</p>
<p>python2 version (the version that comes with MacOS):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="ch">#!/usr/bin/env python2</span>

<span class="kn">import</span> <span class="nn">BaseHTTPServer</span><span class="o">,</span> <span class="nn">SimpleHTTPServer</span>
<span class="kn">import</span> <span class="nn">ssl</span>

<span class="n">httpd</span> <span class="o">=</span> <span class="n">BaseHTTPServer</span><span class="o">.</span><span class="n">HTTPServer</span><span class="p">((</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="mi">443</span><span class="p">),</span> <span class="n">SimpleHTTPServer</span><span class="o">.</span><span class="n">SimpleHTTPRequestHandler</span><span class="p">)</span>
<span class="n">httpd</span><span class="o">.</span><span class="n">socket</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">wrap_socket</span><span class="p">(</span><span class="n">httpd</span><span class="o">.</span><span class="n">socket</span><span class="p">,</span> <span class="n">certfile</span><span class="o">=</span><span class="s1">&#39;./localhost+2.pem&#39;</span><span class="p">,</span> <span class="n">keyfile</span><span class="o">=</span><span class="s1">&#39;./localhost+2-key.pem&#39;</span><span class="p">,</span> <span class="n">server_side</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ssl_version</span><span class="o">=</span><span class="n">ssl</span><span class="o">.</span><span class="n">PROTOCOL_TLSv1_2</span><span class="p">)</span>
<span class="n">httpd</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>python3 version:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="ch">#!/usr/bin/env python3</span>

<span class="kn">import</span> <span class="nn">http.server</span>
<span class="kn">import</span> <span class="nn">ssl</span>

<span class="n">httpd</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">HTTPServer</span><span class="p">((</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="mi">443</span><span class="p">),</span> <span class="n">http</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">SimpleHTTPRequestHandler</span><span class="p">)</span>
<span class="n">httpd</span><span class="o">.</span><span class="n">socket</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">wrap_socket</span><span class="p">(</span><span class="n">httpd</span><span class="o">.</span><span class="n">socket</span><span class="p">,</span> <span class="n">certfile</span><span class="o">=</span><span class="s1">&#39;./localhost+2.pem&#39;</span><span class="p">,</span> <span class="n">keyfile</span><span class="o">=</span><span class="s1">&#39;./localhost+2-key.pem&#39;</span><span class="p">,</span> <span class="n">server_side</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ssl_version</span><span class="o">=</span><span class="n">ssl</span><span class="o">.</span><span class="n">PROTOCOL_TLSv1_2</span><span class="p">)</span>
<span class="n">httpd</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>Just run it with <code>python simple-https-server.py</code> (note that binding to port 443 on Linux/Unix requires root privileges, you may need to use <code>sudo</code> to raise privileges)</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/16/1cbd82b3b802496785d5e6103e81671c.png" alt=" "></p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/16/9cae0a95ce564432a07b5f03be5f0a6e.png" alt=" "></p>
<h2 id="for-use-within-a-local-area-network">For use within a local area network</h2>
<p>Sometimes we need to test https applications on the LAN, and this environment may not be external, so we cannot use a free certificate solution like <code>Let's encrypt</code> to issue a trusted certificate to the LAN, and <code>Let's encrypt</code> itself does not support authentication Ip.</p>
<p>First, let&rsquo;s recall the three elements of a trusted certificate:</p>
<ul>
<li>Issued by a trusted CA</li>
<li>The access address matches the certificate authentication address</li>
<li>The certificate is valid</li>
</ul>
<p>If we expect our self-signed certificate to be used on the LAN, all three of these conditions need to be met. Obviously the self-signed certificate must meet the certificate within the validity period, then the last two need to be ensured. The certificate we issue must match the address bar of the browser, such as the IP or domain name of the LAN, and we also need to trust the CA.</p>
<p>Let&rsquo;s reissue the certificate and add the local LAN ip authentication:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"> mkcert localhost 127.0.0.1 ::1 192.168.31.170
Using the <span class="nb">local</span> CA at <span class="s2">&#34;C:\Users\abcfy\AppData\Local\mkcert&#34;</span> ✨

Created a new certificate valid <span class="k">for</span> the following names 📜
 - <span class="s2">&#34;localhost&#34;</span>
 - <span class="s2">&#34;127.0.0.1&#34;</span>
 - <span class="s2">&#34;::1&#34;</span>
 - <span class="s2">&#34;192.168.31.170&#34;</span>

The certificate is at <span class="s2">&#34;./localhost+3.pem&#34;</span> and the key at <span class="s2">&#34;./localhost+3-key.pem&#34;</span> ✅
</code></pre></td></tr></table>
</div>
</div><p>Verify again and find that local access using <code>https://192.168.31.170</code> is also trusted. Then we need to issue the CA certificate to other users in the LAN.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"> mkcert -CAROOT
C:<span class="se">\U</span>sers<span class="se">\a</span>bcfy<span class="se">\A</span>ppData<span class="se">\L</span>ocal<span class="se">\m</span>kcert
</code></pre></td></tr></table>
</div>
</div><p>Use mkcert -CAROOT command to list the storage path of CA certificate</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"> ls <span class="k">$(</span>mkcert -CAROOT<span class="k">)</span>


    目录: C:<span class="se">\U</span>sers<span class="se">\a</span>bcfy<span class="se">\A</span>ppData<span class="se">\L</span>ocal<span class="se">\m</span>kcert


Mode                LastWriteTime         Length Name
----                -------------         ------ ----
-a----  2019-04-09-星期二  上午 <span class="m">1</span>           <span class="m">2484</span> rootCA-key.pem
                             2:16
-a----  2019-04-09-星期二  上午 <span class="m">1</span>           <span class="m">1651</span> rootCA.pem
                             2:16
</code></pre></td></tr></table>
</div>
</div><p>You can see there are two files rootCA-key.pem and rootCA.pem under CA path, users need to trust the file rootCA.pem. Make a copy of rootCA.pem and name it rootCA.crt (because windows does not recognize the pem extension and Ubuntu does not treat the pem extension as CA certificate file), distribute the rootCA.crt file to other users and import it manually.</p>
<p>To import a certificate into windows, double-click the file and import the certificate into a trusted root certificate authority in the Certificate Import Wizard:</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/08/16/6070560728d64670afe9bd8d2d48c82a.png" alt=" "></p>
<p>MacOS does the same thing, again choosing to import the CA certificate to a trusted root certificate authority.</p>
<p>For Ubuntu, you can put the certificate file (must have <code>crt</code> suffix) into <code>/usr/local/share/ca-certificates/</code> and then execute <code>sudo update-ca-certificates</code>.</p>
<p>For Android and IOS trust CA certificates, refer to the <a href="https://github.com/FiloSottile/mkcert#mobile-devices">official documentation</a>.</p>
<p>Other computers on the LAN will be able to access https without alarm. I tested the results on another virtual machine Ubuntu using curl:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">$ curl -I https://192.168.31.170
HTTP/1.0 200 OK
Server: SimpleHTTP/0.6 Python/3.6.8
Date: Tue, 09 Apr 2019 05:22:12 GMT
Content-type: text/html; charset=utf-8
Content-Length: 1794
</code></pre></td></tr></table>
</div>
</div><p>No warning, plus the -v parameter output will also tell that the certificate is trusted.</p>
<h2 id="some-other-advanced-uses">Some other advanced uses</h2>
<p>The above demonstrates some of the most basic uses of <code>mkcert</code>, which are very simple. If we open <code>mkcert --help</code> and read the help, we can find many more advanced uses.</p>
<p>For example, <code>-cert-file FILE, -key-file FILE, -p12-file FILE</code> can define the output certificate file name.</p>
<p><code>-client</code> can generate client-side authentication certificates for two-way SSL authentication.</p>
<p>The <code>-pkcs12</code> command can generate certificates in <code>PKCS12</code> format. java programs usually do not support certificates in <code>PEM</code> format, but they do support certificates in <code>PKCS12</code> format. With this program, we can easily generate <code>PKCS12</code> format certificates for Java programs directly, so we will not demonstrate it here.</p>
<p>Other advanced usage will not be introduced, you can discover it according to your actual needs and scenarios if you are interested.</p>
<h2 id="summary">Summary</h2>
<p>This article we introduced a good little tool <a href="https://github.com/FiloSottile/mkcert">mkcert</a>, simplify the complexity of our local build https environment, no need to operate the complicated openssl to achieve self-signed certificates, this small program can help us self-signed certificates, in local use It will also automatically trust the CA, very convenient.</p>
<hr>
<p>Reference <code>https://blog.dteam.top/posts/2019-04/%E6%9C%AC%E5%9C%B0https%E5%BF%AB%E9%80%9F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88mkcert.html</code></p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/https/">https</a>
          <a href="/tags/mkcert/">mkcert</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-08/sparql/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">A First Look at RDF and SPARQL: Using Wikidata as an Example</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-08/ssh-certificate/">
            <span class="next-text nav-default">SSH Certificate Login Tutorial</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
