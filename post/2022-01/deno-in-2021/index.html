<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Deno 2021 review: optimizing the core, Node.js compatibility, in preparation for Deno 2 - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="The official Deno blog review gives an overview of the major events and important features added to the project in 2021. The blog mentions that Deno has released 44 versions in 2021 (11 minor updates and 33 patch updates), adding many important features, fixing numerous bugs, and optimizing performance.
Deno Deploy In the summer of 2021, Deno Deploy released its first Beta version, a modern serverless cloud built from the ground up by the Deno team that allows users to very quickly deploy JavaScript, TypeScript, and WASM services to data centers around the world." /><meta name="keywords" content="deno, 2021" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-01/deno-in-2021/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Deno 2021 review: optimizing the core, Node.js compatibility, in preparation for Deno 2" />
<meta property="og:description" content="The official Deno blog review gives an overview of the major events and important features added to the project in 2021. The blog mentions that Deno has released 44 versions in 2021 (11 minor updates and 33 patch updates), adding many important features, fixing numerous bugs, and optimizing performance.
Deno Deploy In the summer of 2021, Deno Deploy released its first Beta version, a modern serverless cloud built from the ground up by the Deno team that allows users to very quickly deploy JavaScript, TypeScript, and WASM services to data centers around the world." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-01/deno-in-2021/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-01-27T09:41:09+08:00" />
<meta property="article:modified_time" content="2022-01-27T09:41:09+08:00" />

<meta itemprop="name" content="Deno 2021 review: optimizing the core, Node.js compatibility, in preparation for Deno 2">
<meta itemprop="description" content="The official Deno blog review gives an overview of the major events and important features added to the project in 2021. The blog mentions that Deno has released 44 versions in 2021 (11 minor updates and 33 patch updates), adding many important features, fixing numerous bugs, and optimizing performance.
Deno Deploy In the summer of 2021, Deno Deploy released its first Beta version, a modern serverless cloud built from the ground up by the Deno team that allows users to very quickly deploy JavaScript, TypeScript, and WASM services to data centers around the world."><meta itemprop="datePublished" content="2022-01-27T09:41:09+08:00" />
<meta itemprop="dateModified" content="2022-01-27T09:41:09+08:00" />
<meta itemprop="wordCount" content="714">
<meta itemprop="keywords" content="deno," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Deno 2021 review: optimizing the core, Node.js compatibility, in preparation for Deno 2"/>
<meta name="twitter:description" content="The official Deno blog review gives an overview of the major events and important features added to the project in 2021. The blog mentions that Deno has released 44 versions in 2021 (11 minor updates and 33 patch updates), adding many important features, fixing numerous bugs, and optimizing performance.
Deno Deploy In the summer of 2021, Deno Deploy released its first Beta version, a modern serverless cloud built from the ground up by the Deno team that allows users to very quickly deploy JavaScript, TypeScript, and WASM services to data centers around the world."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Deno 2021 review: optimizing the core, Node.js compatibility, in preparation for Deno 2</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-01-27 09:41:09 </span>
        <div class="post-category">
            <a href="/categories/news/"> news </a>
            </div>
          <span class="more-meta"> 714 words </span>
          <span class="more-meta"> 4 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li>
          <ul>
            <li><a href="#deno-deploy">Deno Deploy</a></li>
            <li><a href="#optimizing-the-deno-core">Optimizing the Deno Core</a></li>
            <li><a href="#native-http">Native HTTP</a></li>
            <li><a href="#mdn-compatibility-tables">MDN Compatibility Tables</a></li>
            <li><a href="#foreign-function-interface">Foreign Function Interface</a></li>
            <li><a href="#slack--next-generation-platform">Slack &amp; Next Generation Platform</a></li>
            <li><a href="#nodejs-compatibility">Node.js compatibility</a></li>
            <li><a href="#deno-2">Deno 2</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>The official Deno blog <a href="https://deno.com/blog/deno-in-2021">review</a> gives an overview of the major events and important features added to the project in 2021. The blog mentions that Deno has released 44 versions in 2021 (11 minor updates and 33 patch updates), adding many important features, fixing numerous bugs, and optimizing performance.</p>
<h3 id="deno-deploy">Deno Deploy</h3>
<p>In the summer of 2021, <a href="https://deno.com/deploy">Deno Deploy</a> released its first Beta version, a modern serverless cloud built from the ground up by the Deno team that allows users to very quickly deploy JavaScript, TypeScript, and WASM services to data centers around the world.</p>
<h3 id="optimizing-the-deno-core">Optimizing the Deno Core</h3>
<p>The Deno core provides the &ldquo;opcalls&rdquo; function (similar to syscalls, aka), which allows JavaScript to call the runtime(fs/net/url-parsing/&hellip;) function provided by Rust. Prior to the 1.9 release, developers grouped opcall values by using a mix of JSON and binary buffers.</p>
<p>The efficiency of the op-layer was a key factor in determining the overall performance of the runtime. opcalls, which used to have 4000ns of overhead per call, have been reduced to about 1% of their original size, taking only 40ns per call. most of these efficiency gains are due to serde_v8, which was designed and delivered by the development team in v1.9 to maximize efficient bijection between Rust and V8 values. The development team maximized efficient bijection between Rust and V8 values in v1.9.</p>
<p>With this feature, the development team has reduced the overhead of common operations such as URL parsing by more than 3x and made Deno a mature and fast JavaScript runtime.</p>
<p><a href="https://deno.com/blog/v1.9">See the Deno 1.9 release notes for more information</a>.</p>
<h3 id="native-http">Native HTTP</h3>
<p>In Deno 1.9, the development team released native HTTP server bindings, a feature that was later brought to a stable state in Deno 1.13. High-performance <a href="https://github.com/hyperium/hyper"><code>hyper</code></a> HTTP servers can be created with just a few lines of code using these bindings, and since these bindings are built on <a href="https://github.com/hyperium/hyper"><code>hyper</code></a>, they provide great throughput.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">serve</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;https://deno.land/std@0.121.0/http/server.ts&#34;</span><span class="p">;</span>
<span class="nx">serve</span><span class="p">((</span><span class="nx">_req</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="s2">&#34;Hello, world&#34;</span><span class="p">),</span> <span class="p">{</span> <span class="nx">port</span><span class="o">:</span> <span class="mi">3000</span> <span class="p">});</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Listening on http://localhost:3000&#34;</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="mdn-compatibility-tables">MDN Compatibility Tables</h3>
<p><a href="https://deno.com/blog/deno-on-mdn">Deno on MDN</a></p>
<p>In August 2021, Deno was added to the <a href="https://developer.mozilla.org/pl/">MDN compatibility tables</a>.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/27/e3a44d15ad4d4528af517dcb7e1cc146.png" alt="sobyte"></p>
<h3 id="foreign-function-interface">Foreign Function Interface</h3>
<p>In <a href="https://deno.com/blog/v1.13#experimental-ffi-replaces-native-plugin-system">Deno v1.13</a>, the development team replaced the unstable The development team has replaced the unstable plug-in system with the new Foreign Function Interface API. Although FFI is still unstable, this is a significant improvement.</p>
<p>The native plug-in system prior to 1.13 allowed the distribution of dynamic libraries written in Rust. Due to the instability of the Rust ABI and the restriction of API authors to a single language, the Deno team decided to replace this system with a generic FFI API. This API allows developers to write &ldquo;extensions&rdquo; for Deno runtime in any language that uses the C calling convention.</p>
<p>Some interesting projects using the FFI API have already been born, demonstrating the power of the FFI API.</p>
<ul>
<li><a href="https://github.com/astrodon/astrodon">Desktop app framework</a></li>
<li><a href="https://github.com/denosaurs/deno_python">Python interpreter bindings</a></li>
<li><a href="https://github.com/littledivy/deno_sdl2">SDL2 bindings</a></li>
<li><a href="https://github.com/DjDeveloperr/deno_serial">SerialPort bindings</a></li>
<li><a href="https://github.com/denodrivers/sqlite3">SQLite bindings</a></li>
</ul>
<h3 id="slack--next-generation-platform">Slack &amp; Next Generation Platform</h3>
<p>In November 2021, Slack announced its next-generation development platform based on Deno, which the Deno team says provides a solid foundation for Deno Deploy&rsquo;s &ldquo;isolation as a service&rdquo; for</p>
<ul>
<li>Modern edge hosting</li>
<li>User extensible platform (bots, plugins, apps, etc&hellip;)</li>
<li>Low-code solutions</li>
</ul>
<h3 id="nodejs-compatibility">Node.js compatibility</h3>
<p>In Q4 2021, the Deno team started working on delivering best-in-class Node.js compatibility, allowing Deno to run applications and libraries developed for Node.js (NPM packages) directly in Deno. In <a href="https://deno.com/blog/v1.15">Deno v1.15</a>, the team released the first preview of &ldquo;compat mode&rdquo;. Although this feature is still unstable, it can be enabled using the <code>--compat</code> flag. Most of the work involves providing polyfills in <a href="https://deno.land/std/node">std/node</a>.</p>
<p>Some key modules such as <code>tls</code> and <code>zlib</code> are still incomplete, but in their current form it is still possible to run non-trivial types of applications. The team has stated that the goal is to release the first iteration for all users in the coming months.</p>
<h3 id="deno-2">Deno 2</h3>
<p>For Deno 2, the team says it will address a number of minor API changes, as well as optimizing Deno&rsquo;s workflow. They will soon release a roadmap for Deno 2, which they hope to launch in the first half of this year. deno will focus on providing better NPM eco-compatibility, better DX for common workflows, and exploring alternative package management solutions.</p>
<p><a href="https://deno.com/blog/deno-in-2021">click here for the original article</a>.</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/deno/">deno</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-01/linus-play-a-trick-of-github-vulnerability/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">&#34;I Deleted Linux&#34;, Linus Releases Prank README Using GitHub Vulnerability</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-01/android-malware-can-factory-reset/">
            <span class="next-text nav-default">Android malware not only steals victims&#39; money, but also restores phones to factory settings</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
