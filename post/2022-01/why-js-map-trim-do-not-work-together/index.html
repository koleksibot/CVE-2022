<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Why can&#39;t I use String.prototype.trim in a JS map? - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="Suppose we have an array of strings [&#39; some &#39;, &#39; strings &#39;] and we need to clear the whitespace before and after the strings, the first thought is. 1 [&amp;#39; some &amp;#39;, &amp;#39; strings &amp;#39;].map(s =&amp;gt; s.trim()) For further optimization, consider removing the wrapped function from the map and using String.prototype.trim directly. however, the problem arises. 1 2 3 [&amp;#39; some &amp;#39;, &amp;#39; strings &amp;#39;].map(String.prototype.trim) // TypeError: String.prototye.trim called" /><meta name="keywords" content="Wjsvascriptebsocket" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-01/why-js-map-trim-do-not-work-together/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Why can&#39;t I use String.prototype.trim in a JS map?" />
<meta property="og:description" content="Suppose we have an array of strings [&#39; some &#39;, &#39; strings &#39;] and we need to clear the whitespace before and after the strings, the first thought is. 1 [&#39; some &#39;, &#39; strings &#39;].map(s =&gt; s.trim()) For further optimization, consider removing the wrapped function from the map and using String.prototype.trim directly. however, the problem arises. 1 2 3 [&#39; some &#39;, &#39; strings &#39;].map(String.prototype.trim) // TypeError: String.prototye.trim called" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-01/why-js-map-trim-do-not-work-together/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-01-15T12:56:09+08:00" />
<meta property="article:modified_time" content="2022-01-15T12:56:09+08:00" />

<meta itemprop="name" content="Why can&#39;t I use String.prototype.trim in a JS map?">
<meta itemprop="description" content="Suppose we have an array of strings [&#39; some &#39;, &#39; strings &#39;] and we need to clear the whitespace before and after the strings, the first thought is. 1 [&#39; some &#39;, &#39; strings &#39;].map(s =&gt; s.trim()) For further optimization, consider removing the wrapped function from the map and using String.prototype.trim directly. however, the problem arises. 1 2 3 [&#39; some &#39;, &#39; strings &#39;].map(String.prototype.trim) // TypeError: String.prototye.trim called"><meta itemprop="datePublished" content="2022-01-15T12:56:09+08:00" />
<meta itemprop="dateModified" content="2022-01-15T12:56:09+08:00" />
<meta itemprop="wordCount" content="874">
<meta itemprop="keywords" content="jsvascript," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Why can&#39;t I use String.prototype.trim in a JS map?"/>
<meta name="twitter:description" content="Suppose we have an array of strings [&#39; some &#39;, &#39; strings &#39;] and we need to clear the whitespace before and after the strings, the first thought is. 1 [&#39; some &#39;, &#39; strings &#39;].map(s =&gt; s.trim()) For further optimization, consider removing the wrapped function from the map and using String.prototype.trim directly. however, the problem arises. 1 2 3 [&#39; some &#39;, &#39; strings &#39;].map(String.prototype.trim) // TypeError: String.prototye.trim called"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Why can&#39;t I use String.prototype.trim in a JS map?</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-01-15 12:56:09 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 874 words </span>
          <span class="more-meta"> 2 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#the-second-argument-of-map">The second argument of map</a></li>
        <li><a href="#jss-methods-and-prototype">JS&rsquo;s <em>methods</em> and prototype</a></li>
        <li><a href="#functionprototypecall">Function.prototype.call</a></li>
        <li><a href="#summary">Summary</a></li>
        <li><a href="#legacy-issues">Legacy issues</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>Suppose we have an array of strings <code>[' some ', ' strings ']</code> and we need to clear the whitespace before and after the strings, the first thought is.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="p">[</span><span class="s1">&#39; some &#39;</span><span class="p">,</span> <span class="s1">&#39; strings &#39;</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nx">s</span> <span class="p">=&gt;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">trim</span><span class="p">())</span>
</code></pre></td></tr></table>
</div>
</div><p>For further optimization, consider removing the wrapped function from the map and using String.prototype.trim directly. however, the problem arises.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="p">[</span><span class="s1">&#39; some &#39;</span><span class="p">,</span> <span class="s1">&#39; strings &#39;</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">trim</span><span class="p">)</span>
<span class="c1">// TypeError: String.prototye.trim called on null or undefined (Chrome)
</span><span class="c1">// TypeError: can&#39;t convert undefined to object (Firefox)
</span></code></pre></td></tr></table>
</div>
</div><h2 id="the-second-argument-of-map">The second argument of map</h2>
<p>The reason for the error is that Array.prototype.map has a second argument that is easily overlooked.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">new_array</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">currentValue</span><span class="p">[,</span> <span class="nx">index</span><span class="p">[,</span> <span class="nx">array</span><span class="p">]])</span> <span class="p">{</span>
    <span class="c1">// Return element for new_array
</span><span class="c1"></span><span class="p">}[,</span> <span class="nx">thisArg</span><span class="p">])</span>
</code></pre></td></tr></table>
</div>
</div><p>where thisArg specifies the value of this to be bound when the callback is executed, and we print this this out as follows</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="p">[</span><span class="s1">&#39; some &#39;</span><span class="p">,</span> <span class="s1">&#39; strings &#39;</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="c1">// 全局对象或者 undefined
</span><span class="c1"></span>  <span class="k">return</span> <span class="nx">s</span>
<span class="p">})</span> <span class="c1">// [&#39; some &#39;, &#39; strings &#39;]
</span><span class="c1"></span>
<span class="p">[</span><span class="s1">&#39; some &#39;</span><span class="p">,</span> <span class="s1">&#39; strings &#39;</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="c1">// &#39;hello world&#39;
</span><span class="c1"></span>  <span class="k">return</span> <span class="nx">s</span>
<span class="p">},</span> <span class="s1">&#39;hello world&#39;</span><span class="p">)</span> <span class="c1">// [&#39; some &#39;, &#39; strings &#39;]
</span></code></pre></td></tr></table>
</div>
</div><h2 id="jss-methods-and-prototype">JS&rsquo;s <em>methods</em> and prototype</h2>
<p>We know that trim, map, and other methods are defined in built-in objects such as String, Array, and so on. The implementation of these methods is integrated into the JS runtime environment. Here is a reference to a polyfill of String.prototype.trim.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">trim</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div><p>When we call <code>&quot; str &quot;.trim()</code>, the string literal is converted to a String object and the <code>.</code> operator binds this object to the this value of String.prototype.trim() and executes this function. As you can see, the string that trim operates on is the value of this, not the argument passed in to the function. Without explicit binding, it appears that this in functions defined on the built-in object prototype will have a default initial value. For example.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">r</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span> <span class="p">}</span>
<span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">r</span><span class="p">()</span> <span class="c1">// String { &#34;&#34; }
</span><span class="c1"></span><span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">r</span><span class="p">()</span> <span class="k">instanceof</span> <span class="nb">String</span> <span class="c1">// 但这里是 false
</span><span class="c1"></span>
<span class="c1">// trim 操作的是 this 的值，并非传入的参数
</span><span class="c1"></span><span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">trim</span><span class="p">()</span> <span class="c1">// &#34;&#34;
</span><span class="c1"></span><span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span><span class="s2">&#34; abc &#34;</span><span class="p">)</span> <span class="c1">// &#34;&#34;
</span></code></pre></td></tr></table>
</div>
</div><p>The second parameter in Array.prototype.map is just another way to bind this, usually we don&rsquo;t pass this parameter, and this in the map callback function is undefined. this in String.prototype.trim is tied to undefined, resulting in a TypeError, which is equivalent to the following case.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">trim</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="kc">undefined</span><span class="p">)()</span>
<span class="c1">// TypeError: String.prototye.trim called on null or undefined
</span></code></pre></td></tr></table>
</div>
</div><h2 id="functionprototypecall">Function.prototype.call</h2>
<p>There is one solution.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="p">[</span><span class="s1">&#39; some &#39;</span><span class="p">,</span> <span class="s1">&#39; strings &#39;</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">call</span><span class="p">,</span> <span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">trim</span><span class="p">)</span>
<span class="c1">// [&#39;some&#39;, &#39;strings&#39;]
</span></code></pre></td></tr></table>
</div>
</div><p>Function.prototype.call is another way to modify the this bound to a function call.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="s2">&#34; str&#34;</span><span class="p">.</span><span class="nx">trim</span><span class="p">()</span> <span class="c1">// &#34;str&#34;
</span><span class="c1">// 等价于以下函数调用
</span><span class="c1"></span><span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">trim</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s2">&#34; str&#34;</span><span class="p">)</span> <span class="c1">// &#34;str&#34;
</span><span class="c1"></span><span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">trim</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&#34; str&#34;</span><span class="p">)()</span> <span class="c1">// &#34;str
</span></code></pre></td></tr></table>
</div>
</div><p>We pass Function.prototype.call in the first parameter of the map, where this is bound to the second parameter passed String.prototype.trim, similar to the following code.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="p">[</span><span class="s1">&#39; some &#39;</span><span class="p">,</span> <span class="s1">&#39; strings &#39;</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="c1">// String.prototype.trim
</span><span class="c1"></span>  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
<span class="p">},</span> <span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">trim</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="summary">Summary</h2>
<p>The above solution is fantastic, and the actual development should avoid similar enigmatic code. The recommended method for this specific scenario is <code>[' some ', ' strings '].map(s =&gt; s.trim()</code>.</p>
<p>However, learning about this issue helps to deepen your understanding of JS prototype and language features such as functions.</p>
<p>We generally refer to functions that &ldquo;belong&rdquo; to an object as methods. JS implements such a mechanism semantically through the prototype mechanism. In practice, however, a method defined in an object is not fundamentally different from a normal function, except that the object happens to hold a reference to that function. Even if a normal function can manipulate this, there is no direct connection between the value bound to this and the object it contains.</p>
<p>JS&rsquo;s this, prototype, and other mechanisms should be designed to implement the object-oriented paradigm in dynamic languages. Functions (methods) implement object-oriented &ldquo;artifacts&rdquo; by manipulating this instead of the function&rsquo;s arguments, and by calling methods like <code>s.trim()</code>. A recent look at Python&rsquo;s classes shows some similarities. The functions in a class are related to each other only by self, very similar to JS&rsquo;s this, except that Python&rsquo;s &ldquo;method&rdquo; lists self explicitly as an argument to a function, whereas JS&rsquo;s this is implicit and can be tampered with in some special way. JS&rsquo;s this is implicit and can be tampered with in some special way, making it somewhat elusive.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">class</span> <span class="nx">SomeJob</span><span class="p">()</span><span class="o">:</span>
  <span class="nx">def</span> <span class="nx">__init__</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">date</span><span class="p">)</span><span class="o">:</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">date</span> <span class="o">=</span> <span class="nx">date</span>
  <span class="nx">def</span> <span class="nx">run</span><span class="p">(</span><span class="nx">self</span><span class="p">)</span><span class="o">:</span>
    <span class="nx">print</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">date</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>map is the classic set of functional styles. Ideally, a map function should be a pure function, e.g. it is more elegant to call jQuery&rsquo;s trim function.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="p">[</span><span class="s1">&#39; some &#39;</span><span class="p">,</span> <span class="s1">&#39; strings &#39;</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">trim</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>However, String.prototype.trim in the JS standard library operates on this and is not a pure function, which leads to the problem described in this article.</p>
<h2 id="legacy-issues">Legacy issues</h2>
<p>Testing in Firefox 61 it seems that the second argument of map is invalid.</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/jsvascript/">jsvascript</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-01/kotlin-coroutine-context-scope/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Talking about the Context and Scope of Kotlin Coroutine</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-01/kotlin-flow-introduction/">
            <span class="next-text nav-default">Getting Started with Kotlin Flow</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
