<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Several ways to communicate across tabs in the browser - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="The need for cross-tab communication is common in scenarios where there is a lot of content to browse or manipulate (e.g. blogs or CMS systems) and data consistency needs to be maintained. Most of these scenarios can be solved by bringing in a back-end service to keep the data consistent across multiple tabs by polling and so on. This article describes a pure front-end solution for cross-tab communication without introducing" /><meta name="keywords" content="browser, Across Tabs, communicate" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-01/across-tabs-in-the-browser/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Several ways to communicate across tabs in the browser" />
<meta property="og:description" content="The need for cross-tab communication is common in scenarios where there is a lot of content to browse or manipulate (e.g. blogs or CMS systems) and data consistency needs to be maintained. Most of these scenarios can be solved by bringing in a back-end service to keep the data consistent across multiple tabs by polling and so on. This article describes a pure front-end solution for cross-tab communication without introducing" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-01/across-tabs-in-the-browser/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-01-17T11:07:19+08:00" />
<meta property="article:modified_time" content="2022-01-17T11:07:19+08:00" />

<meta itemprop="name" content="Several ways to communicate across tabs in the browser">
<meta itemprop="description" content="The need for cross-tab communication is common in scenarios where there is a lot of content to browse or manipulate (e.g. blogs or CMS systems) and data consistency needs to be maintained. Most of these scenarios can be solved by bringing in a back-end service to keep the data consistent across multiple tabs by polling and so on. This article describes a pure front-end solution for cross-tab communication without introducing"><meta itemprop="datePublished" content="2022-01-17T11:07:19+08:00" />
<meta itemprop="dateModified" content="2022-01-17T11:07:19+08:00" />
<meta itemprop="wordCount" content="940">
<meta itemprop="keywords" content="javascript,browser," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Several ways to communicate across tabs in the browser"/>
<meta name="twitter:description" content="The need for cross-tab communication is common in scenarios where there is a lot of content to browse or manipulate (e.g. blogs or CMS systems) and data consistency needs to be maintained. Most of these scenarios can be solved by bringing in a back-end service to keep the data consistent across multiple tabs by polling and so on. This article describes a pure front-end solution for cross-tab communication without introducing"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Several ways to communicate across tabs in the browser</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-01-17 11:07:19 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 940 words </span>
          <span class="more-meta"> 2 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#cookies--indexeddb">Cookies &amp; IndexedDB</a>
          <ul>
            <li><a href="#implementation-idea">Implementation idea</a></li>
          </ul>
        </li>
        <li><a href="#localstorage-event">localStorage Event</a></li>
        <li><a href="#broadcast-channel">Broadcast Channel</a></li>
        <li><a href="#serviceworker">ServiceWorker</a></li>
        <li><a href="#windowpostmessage">window.postMessage</a></li>
        <li><a href="#summary">Summary</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>The need for cross-tab communication is common in scenarios where there is a lot of content to browse or manipulate (e.g. blogs or CMS systems) and data consistency needs to be maintained. Most of these scenarios can be solved by bringing in a back-end service to keep the data consistent across multiple tabs by polling and so on. This article describes a pure front-end solution for cross-tab communication without introducing back-end services</p>
<h2 id="cookies--indexeddb">Cookies &amp; IndexedDB</h2>
<p>To achieve consistency in data, it is easy to think of a unified data store. When there is a backend on board, the backend is really a unified data store for the frontend. In a pure front-end environment, the more common data stores include</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies">cookie</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/localStorage">localStorage</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/sessionStorage">sessionStorage</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API">IndexedDB</a></li>
</ul>
<p>sessionStorage cannot be used for cross-tab communication as it only lives in a single tab session. localStorage has other applications, which will be analysed in depth below. So in this section we will focus on cookies and IndexedDB.</p>
<h3 id="implementation-idea">Implementation idea</h3>
<p>The implementation is really quite simple - poll the data source to ensure that the data in each tab is up to date.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">// Cookie Way
</span><span class="c1">// Producer Tab, 当然你也可以用js-cookie这种库更高效的操作cookie
</span><span class="c1"></span><span class="nb">document</span><span class="p">.</span><span class="nx">cookie</span> <span class="o">=</span> <span class="s2">&#34;blabla&#34;</span>

<span class="c1">// Consumer Tab
</span><span class="c1"></span><span class="nx">setInterval</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">cookie</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">cookie</span><span class="p">;</span>
  <span class="c1">//Use Cookie to do something
</span><span class="c1"></span>  <span class="nx">doSomething</span><span class="p">(</span><span class="nx">cookie</span><span class="p">)</span>
<span class="p">},</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1">// IndexedDB way
</span><span class="c1">// Producer Tab
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">([</span><span class="s2">&#34;customers&#34;</span><span class="p">],</span> <span class="s2">&#34;readwrite&#34;</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">objectStore</span> <span class="o">=</span> <span class="nx">transaction</span><span class="p">.</span><span class="nx">objectStore</span><span class="p">(</span><span class="s2">&#34;customers&#34;</span><span class="p">);</span>
<span class="nx">customerData</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">customer</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">objectStore</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">customer</span><span class="p">);</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">onsuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do some callback
</span><span class="c1"></span>  <span class="p">};</span>
<span class="p">});</span>

<span class="c1">// Consumer Tab
</span><span class="c1"></span><span class="nx">setInterval</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">([</span><span class="s2">&#34;customers&#34;</span><span class="p">]);</span>
  <span class="kr">const</span> <span class="nx">objectStore</span> <span class="o">=</span> <span class="nx">transaction</span><span class="p">.</span><span class="nx">objectStore</span><span class="p">(</span><span class="s2">&#34;customers&#34;</span><span class="p">);</span>
  <span class="kr">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">objectStore</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;444-44-4444&#34;</span><span class="p">);</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">onsuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">doSomething</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
<span class="p">};</span>
<span class="p">},</span> <span class="mi">1000</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>It is important to note that cookies are read and written synchronously and may block the main thread when the cookie is large causing the page to lag. The IndexedDB API is asynchronous, so there are no performance issues with cookies being read or written synchronously.</p>
<p>The idea of using a unified data source for cross-tab communication is relatively simple, but polling is inefficient when data changes are infrequent (essentially a consumer pull). Therefore, it would be better to use events to drive the response from the consumer (in the form of a producer push).</p>
<h2 id="localstorage-event">localStorage Event</h2>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/17/61b4c90b9fe347b49a72403c768ba56d.png" alt="image"></p>
<p>LocalStorage is also essentially a data source, but unlike the two data sources mentioned above, when the contents of localStorage change, a corresponding event is raised and all tabs under the same source can receive the event.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">// Producer Tab
</span><span class="c1"></span><span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s2">&#34;foo&#34;</span><span class="p">,</span> <span class="s2">&#34;bar&#34;</span><span class="p">);</span>

<span class="c1">// Consumer Tab
</span><span class="c1"></span><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;storage&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
 <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">storageArea</span> <span class="o">!=</span> <span class="nx">localStorage</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
 <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">key</span> <span class="o">===</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">// Do something with event.newValue
</span><span class="c1"></span> <span class="p">}</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><p>Of course, there are some disadvantages to this approach, which need to be noted when using</p>
<ul>
<li>Similar to cookies, localStorage reads and writes are synchronous, so when the amount of storage data is large, reading and writing may itself block the main thread and cause the page to lag.</li>
<li>The value of localStorage only supports string, which is a bit troublesome when passing complex data.</li>
<li>The page that triggers setItem will not receive the storage event (FYI: <a href="https://developer.mozilla.org/en-US/docs/Web/API/StorageEvent)">https://developer.mozilla.org/en-US/docs/Web/API/StorageEvent)</a>.</li>
</ul>
<h2 id="broadcast-channel">Broadcast Channel</h2>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/17/1a897fe959714f398b72bc836d32bc3b.png" alt="image"></p>
<p>Broadcast Channel is a web API that enables communication across tabs, windows, frames, iframes and even workers from the same source, and unlike localStorage, the message object sent can be of any Object type, making it ideal for cross-tab communication.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">// Producer Tab
</span><span class="c1">// init channel
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">bc</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BroadcastChannel</span><span class="p">(</span><span class="s1">&#39;test_channel&#39;</span><span class="p">);</span>
<span class="c1">// send message
</span><span class="c1"></span><span class="nx">bc</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="s1">&#39;This is a test message.&#39;</span><span class="p">);</span>

<span class="c1">// Consumer Tab
</span><span class="c1"></span><span class="nx">bc</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">ev</span><span class="p">)</span> <span class="p">{</span> <span class="nx">doSomething</span><span class="p">(</span><span class="nx">ev</span><span class="p">);</span> <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>The downside of Broadcast Channel is its browser compatibility. As of this writing, Safari does not support Broadcast Channel (FYI <a href="https://caniuse.com/?search=broadcast)">https://caniuse.com/?search=broadcast)</a>.</p>
<h2 id="serviceworker">ServiceWorker</h2>
<p>The more common scenario for ServiceWorker is probably caching data and loading data to improve page loading speed. However, ServiceWorker itself also supports sending messages and can therefore be used to communicate across tabs.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">// Producer Tab
</span><span class="c1"></span><span class="nx">navigator</span><span class="p">.</span><span class="nx">serviceWorker</span><span class="p">.</span><span class="nx">controller</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span>
 <span class="nx">broadcast</span><span class="o">:</span> <span class="nx">data</span>
<span class="p">});</span>

<span class="c1">// Consumer Tab
</span><span class="c1"></span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
 <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;boadcast&#39;</span> <span class="k">in</span> <span class="nx">event</span><span class="p">.</span><span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">allClients</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">clients</span><span class="p">.</span><span class="nx">matchAll</span><span class="p">();</span>
  <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">client</span> <span class="k">of</span> <span class="nx">allClients</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">client</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">broadcast</span><span class="p">);</span>
  <span class="p">}</span>
 <span class="p">}</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><p>The downside of using ServiceWorker for cross-tab communication is that you need to learn and understand ServiceWorker, and if your site doesn&rsquo;t use ServiceWorker in the first place, using it just for cross-tab communication might be putting the cart before the horse.</p>
<h2 id="windowpostmessage">window.postMessage</h2>
<p>If you want to communicate across tabs from different sources, you will have to use window.postMessage.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">// Producer Tab
</span><span class="c1"></span><span class="nx">targetWindow</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="nx">targetOrigin</span><span class="p">)</span>

<span class="c1">// Consumer Tab
</span><span class="c1"></span><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;message&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">origin</span> <span class="o">!==</span> <span class="nx">targetOrigin</span><span class="p">)</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="c1">// Do something
</span><span class="c1"></span><span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="summary">Summary</h2>
<ul>
<li>Cross-tab communication is simple with cookies or IndexedDB, but polling performance needs to be considered</li>
<li>LocalStorage Event can be used to transfer across tabs, but performance and some boundary scenarios need to be considered.</li>
<li>If there are no browser compatibility requirements, Broadcast Channel is probably the best choice.</li>
<li>ServiceWorker can also communicate across tabs, but you need to evaluate the cost of introducing ServiceWorker in advance</li>
<li>If you need to communicate across tabs across domains, you can only choose window.postMessage</li>
</ul>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/javascript/">javascript</a>
          <a href="/tags/browser/">browser</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-01/file-system/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Explanation of basic file system concepts and common operations</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-01/use-callback-misunderstanding/">
            <span class="next-text nav-default">Myths about useCallback</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
