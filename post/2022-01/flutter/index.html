<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>FlutterFragment use of Flutter mixed development - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="We know that there are two main ways to integrate Flutter with native Android. One is to create a flutter module, and then rely on it as a native module; the other is to package the flutter module into aar, and then rely on the aar package in the native project, which is officially recommended. aar way to access. 1. Android native engineering In Android native development, there are usually" /><meta name="keywords" content="Flutter, FlutterFragment, mixed development" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-01/flutter/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="FlutterFragment use of Flutter mixed development" />
<meta property="og:description" content="We know that there are two main ways to integrate Flutter with native Android. One is to create a flutter module, and then rely on it as a native module; the other is to package the flutter module into aar, and then rely on the aar package in the native project, which is officially recommended. aar way to access. 1. Android native engineering In Android native development, there are usually" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-01/flutter/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-01-10T15:18:22+08:00" />
<meta property="article:modified_time" content="2022-01-10T15:18:22+08:00" />

<meta itemprop="name" content="FlutterFragment use of Flutter mixed development">
<meta itemprop="description" content="We know that there are two main ways to integrate Flutter with native Android. One is to create a flutter module, and then rely on it as a native module; the other is to package the flutter module into aar, and then rely on the aar package in the native project, which is officially recommended. aar way to access. 1. Android native engineering In Android native development, there are usually"><meta itemprop="datePublished" content="2022-01-10T15:18:22+08:00" />
<meta itemprop="dateModified" content="2022-01-10T15:18:22+08:00" />
<meta itemprop="wordCount" content="1775">
<meta itemprop="keywords" content="flutter," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="FlutterFragment use of Flutter mixed development"/>
<meta name="twitter:description" content="We know that there are two main ways to integrate Flutter with native Android. One is to create a flutter module, and then rely on it as a native module; the other is to package the flutter module into aar, and then rely on the aar package in the native project, which is officially recommended. aar way to access. 1. Android native engineering In Android native development, there are usually"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">FlutterFragment use of Flutter mixed development</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-01-10 15:18:22 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 1775 words </span>
          <span class="more-meta"> 4 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1-android-native-engineering">1. Android native engineering</a></li>
        <li><a href="#2-introducing-flutter-module">2. Introducing Flutter Module</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>We know that there are two main ways to integrate Flutter with native Android. One is to create a flutter module, and then rely on it as a native module; the other is to package the flutter module into aar, and then rely on the aar package in the native project, which is officially recommended. aar way to access.</p>
<h2 id="1-android-native-engineering">1. Android native engineering</h2>
<p>In Android native development, there are usually three ways to implement bottom Tab navigation, namely:</p>
<ul>
<li>RadioGroup + ViewPager + Fragment: Ability to preload adjacent Fragments</li>
<li>FragmentTabHost + Fragment: Load the selected Fragment</li>
<li>BottomNavigationView: has a selected animation effect</li>
</ul>
<p>Here, we use BottomNavigationView to implement bottom tab navigation. First, we create a new Android native project, and then create three new Fragments. The activity_main.xml layout code is as follows:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;androidx.constraintlayout.widget.ConstraintLayout</span> <span class="na">xmlns:android=</span><span class="s">&#34;http://schemas.android.com/apk/res/android&#34;</span>
    <span class="na">xmlns:app=</span><span class="s">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
    <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
    <span class="na">android:layout_height=</span><span class="s">&#34;match_parent&#34;</span>
    <span class="na">android:paddingTop=</span><span class="s">&#34;?attr/actionBarSize&#34;</span><span class="nt">&gt;</span>


    <span class="nt">&lt;FrameLayout</span>
        <span class="na">android:id=</span><span class="s">&#34;@+id/fl_container&#34;</span>
        <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
        <span class="na">android:layout_height=</span><span class="s">&#34;0dp&#34;</span>
        <span class="na">app:layout_constraintBottom_toTopOf=</span><span class="s">&#34;@id/bottom_navigation&#34;</span>
        <span class="na">app:layout_constraintLeft_toLeftOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintTop_toTopOf=</span><span class="s">&#34;parent&#34;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;com.google.android.material.bottomnavigation.BottomNavigationView</span>
        <span class="na">android:id=</span><span class="s">&#34;@+id/bottom_navigation&#34;</span>
        <span class="na">android:layout_width=</span><span class="s">&#34;0dp&#34;</span>
        <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
        <span class="na">android:layout_marginStart=</span><span class="s">&#34;0dp&#34;</span>
        <span class="na">android:layout_marginEnd=</span><span class="s">&#34;0dp&#34;</span>
        <span class="na">android:background=</span><span class="s">&#34;?android:attr/windowBackground&#34;</span>
        <span class="na">app:itemTextColor=</span><span class="s">&#34;@color/tab_text_color&#34;</span>
        <span class="na">app:layout_constraintBottom_toBottomOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintLeft_toLeftOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintRight_toRightOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:menu=</span><span class="s">&#34;@menu/bottom_nav_menu&#34;</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>The code introduces a bottom_nav_menu.xml layout, the code is as follows:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;menu</span> <span class="na">xmlns:android=</span><span class="s">&#34;http://schemas.android.com/apk/res/android&#34;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span>
        <span class="na">android:id=</span><span class="s">&#34;@+id/nav_home&#34;</span>
        <span class="na">android:icon=</span><span class="s">&#34;@drawable/tab_home&#34;</span>
        <span class="na">android:title=</span><span class="s">&#34;@string/tab_home&#34;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;item</span>
        <span class="na">android:id=</span><span class="s">&#34;@+id/nav_car&#34;</span>
        <span class="na">android:icon=</span><span class="s">&#34;@drawable/tab_car&#34;</span>
        <span class="na">android:title=</span><span class="s">&#34;@string/tab_car&#34;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;item</span>
        <span class="na">android:id=</span><span class="s">&#34;@+id/nav_me&#34;</span>
        <span class="na">android:icon=</span><span class="s">&#34;@drawable/tab_mine&#34;</span>
        <span class="na">android:title=</span><span class="s">&#34;@string/tab_me&#34;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/menu&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>Among them, the commonly used properties of BottomNavigationView are as follows:</p>
<p>app:iteamBackground: refers to the background color of the bottom navigation bar, the default is the color of the theme
app:menu: refers to the bottom menu (text and pictures are written in this, it is recommended to use vector graphics)
app:itemTextColor: refers to the color of the navigation bar text
app:itemIconTint: refers to the color of the image in the navigation bar
Finally, implement Tab switching in MainActivity.java, the code is as follows:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">MainActivity</span> <span class="o">:</span> <span class="n">AppCompatActivity</span><span class="o">()</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">var</span> <span class="n">fragments</span> <span class="o">=</span> <span class="n">mutableListOf</span><span class="o">&lt;</span><span class="n">Fragment</span><span class="o">&gt;()</span>
    <span class="kd">private</span> <span class="n">var</span> <span class="n">lastfragment</span> <span class="o">=</span> <span class="n">0</span>

    <span class="n">override</span> <span class="n">fun</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">:</span> <span class="n">Bundle</span><span class="o">?)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">)</span>
        <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">)</span>

        <span class="n">initFragment</span><span class="o">()</span>
        <span class="n">initNavigationSelectedListener</span><span class="o">()</span>
    <span class="o">}</span>


    <span class="kd">private</span> <span class="n">fun</span> <span class="nf">initFragment</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">val</span> <span class="n">homeFragment</span> <span class="o">=</span> <span class="n">HomeFragment</span><span class="o">()</span>
        <span class="n">val</span> <span class="n">carFragment</span> <span class="o">=</span> <span class="n">CarFragment</span><span class="o">()</span>
        <span class="n">val</span> <span class="n">mineFragment</span> <span class="o">=</span> <span class="n">MineFragment</span><span class="o">()</span>
        <span class="n">fragments</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">homeFragment</span><span class="o">)</span>
        <span class="n">fragments</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">carFragment</span><span class="o">)</span>
        <span class="n">fragments</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">mineFragment</span><span class="o">)</span>

        <span class="n">supportFragmentManager</span><span class="o">.</span><span class="na">beginTransaction</span><span class="o">()</span>
            <span class="o">.</span><span class="na">replace</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">fl_container</span><span class="o">,</span> <span class="n">homeFragment</span><span class="o">)</span>
            <span class="o">.</span><span class="na">show</span><span class="o">(</span><span class="n">homeFragment</span><span class="o">)</span>
            <span class="o">.</span><span class="na">commit</span><span class="o">()</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">fun</span> <span class="nf">switchFragment</span><span class="o">(</span><span class="n">index</span><span class="o">:</span> <span class="n">Int</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">lastfragment</span> <span class="o">!=</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">val</span> <span class="n">transaction</span> <span class="o">=</span> <span class="n">supportFragmentManager</span><span class="o">.</span><span class="na">beginTransaction</span><span class="o">()</span>
            <span class="c1">//隐藏上个Fragment
</span><span class="c1"></span>            <span class="n">transaction</span><span class="o">.</span><span class="na">hide</span><span class="o">(</span><span class="n">fragments</span><span class="o">[</span><span class="n">lastfragment</span><span class="o">])</span>
            <span class="k">if</span> <span class="o">(!</span><span class="n">fragments</span><span class="o">[</span><span class="n">index</span><span class="o">].</span><span class="na">isAdded</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">transaction</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">fl_container</span><span class="o">,</span> <span class="n">fragments</span><span class="o">[</span><span class="n">index</span><span class="o">])</span>
            <span class="o">}</span>
            <span class="n">transaction</span><span class="o">.</span><span class="na">show</span><span class="o">(</span><span class="n">fragments</span><span class="o">[</span><span class="n">index</span><span class="o">]).</span><span class="na">commitAllowingStateLoss</span><span class="o">()</span>
            <span class="n">lastfragment</span> <span class="o">=</span> <span class="n">index</span>
        <span class="o">}</span>
    <span class="o">}</span>


    <span class="kd">private</span> <span class="n">fun</span> <span class="nf">initNavigationSelectedListener</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">findViewById</span><span class="o">&lt;</span><span class="n">BottomNavigationView</span><span class="o">&gt;(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">bottom_navigation</span><span class="o">).</span><span class="na">setOnNavigationItemSelectedListener</span> <span class="o">{</span> <span class="n">item</span> <span class="o">-&gt;</span>
            <span class="n">when</span> <span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">nav_home</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">switchFragment</span><span class="o">(</span><span class="n">0</span><span class="o">)</span>
                    <span class="k">return</span><span class="nd">@setOnNavigationItemSelectedListener</span> <span class="kc">true</span>
                <span class="o">}</span>
                <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">nav_car</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">switchFragment</span><span class="o">(</span><span class="n">1</span><span class="o">)</span>
                    <span class="k">return</span><span class="nd">@setOnNavigationItemSelectedListener</span> <span class="kc">true</span>
                <span class="o">}</span>
                <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">nav_me</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">switchFragment</span><span class="o">(</span><span class="n">2</span><span class="o">)</span>
                    <span class="k">return</span><span class="nd">@setOnNavigationItemSelectedListener</span> <span class="kc">true</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="kc">false</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="2-introducing-flutter-module">2. Introducing Flutter Module</h2>
<p>First, create a Flutter Module project. There are two ways to create a Flutter Module, one is to use Android Studio to generate it, and the other is to use the command line directly. Use the command line to create a flutter module as follows:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">flutter create -t module flutter_module
</code></pre></td></tr></table>
</div>
</div><p>Then, enter the flutter_module, and execute the flutter build aar command to generate the aar package. If there is no error, the <code>/flutter_module/.android/Flutter/build/outputs</code> directory, as shown below.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/10/bbfdb77e9a5640bf9720cacf028dfb4e.png" alt="image"></p>
<p>Next, we copy the generated aar package to the libs of the Android project, and then open app/build.grade to add local dependencies.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">repositories {
    flatDir {
        dirs &#39;libs&#39;
    }
}

dependencies {
    ...
    //添加本地依赖
    implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])
    implementation(name: &#39;flutter_relaese-1.0&#39;, ext: &#39;aar&#39;)
    implementation &#39;io.flutter:flutter_embedding_debug:1.0.0-f0826da7ef2d301eb8f4ead91aaf026aa2b52881&#39;
    implementation &#39;io.flutter:armeabi_v7a_debug:1.0.0-f0826da7ef2d301eb8f4ead91aaf026aa2b52881&#39;
    implementation &#39;io.flutter:arm64_v8a_debug:1.0.0-f0826da7ef2d301eb8f4ead91aaf026aa2b52881&#39;
    implementation &#39;io.flutter:x86_64_debug:1.0.0-f0826da7ef2d301eb8f4ead91aaf026aa2b52881&#39;
}
</code></pre></td></tr></table>
</div>
</div><p>Then declare it as a local dependency in the outer build.gradle, the code is as follows:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">buildscript {
repositories {
   ... 
    maven {
        url &#34;http://download.flutter.io&#34;        //flutter依赖
    }
  }
  
dependencies {
    classpath &#39;com.android.tools.build:gradle:4.0.0&#39;
  }
}
</code></pre></td></tr></table>
</div>
</div><p>##s 3. Use Flutter Module</p>
<p>By default, Android provides FlutterActivity, Fragment and FlutterView views. In this example, we are talking about the use of Fragment.</p>
<p>First, we create a FlutterEngineGroup object. FlutterEngineGroup can be used to manage multiple FlutterEngine objects, and multiple FlutterEngines can share resources in order to reduce the resource occupation of FlutterEngine. The code of MyApplication is as follows:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">MyApplication</span> <span class="o">:</span> <span class="n">Application</span><span class="o">()</span> <span class="o">{</span>

    <span class="n">lateinit</span> <span class="n">var</span> <span class="n">engineGroup</span><span class="o">:</span> <span class="n">FlutterEngineGroup</span>

    <span class="n">override</span> <span class="n">fun</span> <span class="nf">onCreate</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">()</span>
        <span class="c1">// 创建FlutterEngineGroup对象
</span><span class="c1"></span>        <span class="n">engineGroup</span> <span class="o">=</span> <span class="n">FlutterEngineGroup</span><span class="o">(</span><span class="k">this</span><span class="o">)</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Next, create a FlutterEngineManager cache management class, and create a static method flutterEngine in FlutterEngineManager to cache FlutterEngine.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dart" data-lang="dart"><span class="n">object</span> <span class="n">FlutterEngineManager</span> <span class="p">{</span>

    <span class="n">fun</span> <span class="n">flutterEngine</span><span class="p">(</span><span class="nl">context:</span> <span class="n">Context</span><span class="p">,</span> <span class="nl">engineId:</span> <span class="kt">String</span><span class="p">,</span> <span class="nl">entryPoint:</span> <span class="kt">String</span><span class="p">)</span><span class="o">:</span> <span class="n">FlutterEngine</span> <span class="p">{</span>
        <span class="c1">// 1. 从缓存中获取FlutterEngine
</span><span class="c1"></span>        <span class="kd">var</span> <span class="n">engine</span> <span class="o">=</span> <span class="n">FlutterEngineCache</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="kd">get</span><span class="p">(</span><span class="n">engineId</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">engine</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// 如果缓存中没有FlutterEngine
</span><span class="c1"></span>            <span class="c1">// 1. 新建FlutterEngine，执行的入口函数是entryPoint
</span><span class="c1"></span>            <span class="n">val</span> <span class="n">app</span> <span class="o">=</span> <span class="n">context</span><span class="p">.</span><span class="n">applicationContext</span> <span class="o">as</span> <span class="n">MyApplication</span>
            <span class="n">val</span> <span class="n">dartEntrypoint</span> <span class="o">=</span> <span class="n">DartExecutor</span><span class="p">.</span><span class="n">DartEntrypoint</span><span class="p">(</span>
                <span class="n">FlutterInjector</span><span class="p">.</span><span class="n">instance</span><span class="p">().</span><span class="n">flutterLoader</span><span class="p">().</span><span class="n">findAppBundlePath</span><span class="p">(),</span> <span class="n">entryPoint</span>
            <span class="p">)</span>
            <span class="n">engine</span> <span class="o">=</span> <span class="n">app</span><span class="p">.</span><span class="n">engineGroup</span><span class="p">.</span><span class="n">createAndRunEngine</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">dartEntrypoint</span><span class="p">)</span>
            <span class="c1">// 2. 存入缓存
</span><span class="c1"></span>            <span class="n">FlutterEngineCache</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">put</span><span class="p">(</span><span class="n">engineId</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">engine</span><span class="o">!!</span>
    <span class="p">}</span>
    
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>In the above code, we will first get the cached FlutterEngine from it, if not, create a new FlutterEngine, and then cache it.</p>
<p>Next, we bind FlutterEngine and FlutterFragment. If no route is provided by default, then the routing homepage of the flutter module is opened. If you want to specify the home page of the flutter module, you can use the setInitialRoute() method.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dart" data-lang="dart"><span class="kd">class</span> <span class="nc">HomeFragment</span> <span class="o">:</span> <span class="n">Fragment</span><span class="p">()</span> <span class="p">{</span>

    <span class="c1">// 1. FlutterEngine对象
</span><span class="c1"></span>    <span class="n">private</span> <span class="n">lateinit</span> <span class="kd">var</span> <span class="nl">engine:</span> <span class="n">FlutterEngine</span>
    <span class="n">private</span> <span class="kd">var</span> <span class="n">engineId</span><span class="o">=</span><span class="s2">&#34;home_fra&#34;</span>

    <span class="n">override</span> <span class="n">fun</span> <span class="n">onCreate</span><span class="p">(</span><span class="nl">savedInstanceState:</span> <span class="n">Bundle</span><span class="o">?</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>
        <span class="c1">// 2. 通过FBFlutterEngineManager获取FlutterEngine对象
</span><span class="c1"></span>        <span class="n">engine</span> <span class="o">=</span> <span class="n">FlutterEngineManager</span><span class="p">.</span><span class="n">flutterEngine</span><span class="p">(</span><span class="n">requireActivity</span><span class="p">(),</span> <span class="n">engineId</span><span class="p">,</span> <span class="s2">&#34;main&#34;</span><span class="p">)</span>
        <span class="c1">// 3. 用FlutterEngine对象构建出一个FlutterFragment
</span><span class="c1"></span>        <span class="n">val</span> <span class="n">flutterFragment</span> <span class="o">=</span> <span class="n">FlutterFragment</span><span class="p">.</span><span class="n">withCachedEngine</span><span class="p">(</span><span class="n">engineId</span><span class="p">).</span><span class="n">build</span><span class="o">&lt;</span><span class="n">FlutterFragment</span><span class="o">&gt;</span><span class="p">()</span>
        <span class="c1">// 4. 显示FlutterFragment
</span><span class="c1"></span>        <span class="n">parentFragmentManager</span><span class="p">.</span><span class="n">beginTransaction</span><span class="p">().</span><span class="n">replace</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">home_fl</span><span class="p">,</span> <span class="n">flutterFragment</span><span class="p">).</span><span class="n">commit</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="n">override</span> <span class="n">fun</span> <span class="n">onCreateView</span><span class="p">(</span>
        <span class="nl">inflater:</span> <span class="n">LayoutInflater</span><span class="p">,</span>
        <span class="nl">container:</span> <span class="n">ViewGroup</span><span class="o">?</span><span class="p">,</span>
        <span class="nl">savedInstanceState:</span> <span class="n">Bundle</span><span class="o">?</span>
    <span class="p">)</span><span class="o">:</span> <span class="n">View</span><span class="o">?</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">inflater</span><span class="p">.</span><span class="n">inflate</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">fragment_home</span><span class="p">,</span> <span class="n">container</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>We use the cached FlutterEngine here to save resources, because when the Fragment of the Bottom Navigation Activity is switched back and forth, the Fragment will be re-created and destroyed, which consumes more resources.</p>
<p>If we enter the second-level page and return, we also need to hide the BottomNavigationView in activity_main.xml. The code involved is as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dart" data-lang="dart"><span class="kd">class</span> <span class="nc">MainActivity</span> <span class="o">:</span> <span class="n">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>

   <span class="p">...</span><span class="c1">//省略其他代码
</span><span class="c1"></span>
    <span class="n">fun</span> <span class="n">switchBottomView</span><span class="p">(</span><span class="nl">show:</span> <span class="n">Boolean</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">val</span> <span class="nl">navView:</span> <span class="n">BottomNavigationView</span> <span class="o">=</span> <span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">nav_view</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">show</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">navView</span><span class="p">.</span><span class="n">visibility</span> <span class="o">=</span> <span class="n">View</span><span class="p">.</span><span class="n">VISIBLE</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">navView</span><span class="p">.</span><span class="n">visibility</span> <span class="o">=</span> <span class="n">View</span><span class="p">.</span><span class="n">GONE</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>If we want to interact with Flutter, we can use MethodChannel, and then use setMethodCallHandler to call back Android data to Flutter. The code is as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dart" data-lang="dart"><span class="kd">class</span> <span class="nc">HomeFragment</span> <span class="o">:</span> <span class="n">Fragment</span><span class="p">()</span> <span class="p">{</span>

    <span class="c1">// 1. FlutterEngine对象
</span><span class="c1"></span>    <span class="n">private</span> <span class="n">lateinit</span> <span class="kd">var</span> <span class="nl">engine:</span> <span class="n">FlutterEngine</span>
    <span class="n">private</span> <span class="kd">var</span> <span class="n">engineId</span><span class="o">=</span><span class="s2">&#34;home_fra&#34;</span>
    <span class="n">private</span> <span class="n">lateinit</span> <span class="kd">var</span> <span class="nl">channel:</span> <span class="n">MethodChannel</span>


    <span class="n">override</span> <span class="n">fun</span> <span class="n">onCreate</span><span class="p">(</span><span class="nl">savedInstanceState:</span> <span class="n">Bundle</span><span class="o">?</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>

        <span class="n">initEngine</span><span class="p">()</span>
        <span class="n">initChannel</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="n">private</span> <span class="n">fun</span> <span class="n">initEngine</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// 2. 通过FBFlutterEngineManager获取FlutterEngine对象
</span><span class="c1"></span>        <span class="n">engine</span> <span class="o">=</span> <span class="n">FlutterEngineManager</span><span class="p">.</span><span class="n">flutterEngine</span><span class="p">(</span><span class="n">requireActivity</span><span class="p">(),</span> <span class="n">engineId</span><span class="p">,</span> <span class="s2">&#34;main&#34;</span><span class="p">)</span>
        <span class="c1">// 3. 用FlutterEngine对象构建出一个FlutterFragment
</span><span class="c1"></span>        <span class="n">val</span> <span class="n">flutterFragment</span> <span class="o">=</span> <span class="n">FlutterFragment</span><span class="p">.</span><span class="n">withCachedEngine</span><span class="p">(</span><span class="n">engineId</span><span class="p">).</span><span class="n">build</span><span class="o">&lt;</span><span class="n">FlutterFragment</span><span class="o">&gt;</span><span class="p">()</span>
        <span class="c1">// 4. 显示FlutterFragment
</span><span class="c1"></span>        <span class="n">parentFragmentManager</span><span class="p">.</span><span class="n">beginTransaction</span><span class="p">().</span><span class="n">replace</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">home_fl</span><span class="p">,</span> <span class="n">flutterFragment</span><span class="p">).</span><span class="n">commit</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="n">private</span> <span class="n">fun</span> <span class="n">initChannel</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="n">MethodChannel</span><span class="p">(</span><span class="n">engine</span><span class="p">.</span><span class="n">dartExecutor</span><span class="p">.</span><span class="n">binaryMessenger</span><span class="p">,</span> <span class="s2">&#34;tab_switch&#34;</span><span class="p">)</span>
        <span class="n">channel</span><span class="p">.</span><span class="n">setMethodCallHandler</span> <span class="p">{</span> <span class="n">call</span><span class="p">,</span> <span class="n">result</span> <span class="o">-&gt;</span>
            <span class="n">when</span> <span class="p">(</span><span class="n">call</span><span class="p">.</span><span class="n">method</span><span class="p">)</span> <span class="p">{</span>
                <span class="s2">&#34;showTab&#34;</span> <span class="o">-&gt;</span> <span class="p">{</span>
                    <span class="n">val</span> <span class="n">activity</span> <span class="o">=</span> <span class="n">requireActivity</span><span class="p">()</span> <span class="o">as</span> <span class="n">MainActivity</span>
                    <span class="n">activity</span><span class="p">.</span><span class="n">switchBottomView</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
                    <span class="n">result</span><span class="p">.</span><span class="n">success</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="s2">&#34;hideTab&#34;</span> <span class="o">-&gt;</span> <span class="p">{</span>
                    <span class="n">val</span> <span class="n">activity</span> <span class="o">=</span> <span class="n">requireActivity</span><span class="p">()</span> <span class="o">as</span> <span class="n">MainActivity</span>
                    <span class="n">activity</span><span class="p">.</span><span class="n">switchBottomView</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
                    <span class="n">result</span><span class="p">.</span><span class="n">success</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="o">-&gt;</span> <span class="p">{</span>
                    <span class="n">result</span><span class="p">.</span><span class="n">notImplemented</span><span class="p">()</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">override</span> <span class="n">fun</span> <span class="n">onCreateView</span><span class="p">(</span>
        <span class="nl">inflater:</span> <span class="n">LayoutInflater</span><span class="p">,</span>
        <span class="nl">container:</span> <span class="n">ViewGroup</span><span class="o">?</span><span class="p">,</span>
        <span class="nl">savedInstanceState:</span> <span class="n">Bundle</span><span class="o">?</span>
    <span class="p">)</span><span class="o">:</span> <span class="n">View</span><span class="o">?</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">inflater</span><span class="p">.</span><span class="n">inflate</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">fragment_home</span><span class="p">,</span> <span class="n">container</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Then in Flutter, there is an invokeMethod method to inject.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dart" data-lang="dart"><span class="kd">class</span> <span class="nc">PluginManager</span> <span class="p">{</span>
  <span class="kd">static</span> <span class="kd">const</span> <span class="n">MethodChannel</span> <span class="n">_channel</span> <span class="o">=</span> <span class="n">MethodChannel</span><span class="p">(</span><span class="s1">&#39;tab_switch&#39;</span><span class="p">);</span>

  <span class="kd">static</span> <span class="n">Future</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span> <span class="n">showTab</span><span class="p">(</span><span class="n">Map</span> <span class="n">params</span><span class="p">)</span> <span class="kd">async</span> <span class="p">{</span>
    <span class="kt">String</span> <span class="n">resultStr</span> <span class="o">=</span> <span class="kd">await</span> <span class="n">_channel</span><span class="p">.</span><span class="n">invokeMethod</span><span class="p">(</span><span class="s1">&#39;showTab&#39;</span><span class="p">,</span> <span class="n">params</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">resultStr</span><span class="p">;</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>At present, native mobile APP can integrate multiple Flutter Modules in the application, which facilitates our modular development of multiple services. In addition to FlutterActivity and Fragment, it is a little more complicated to use FlutterView in Android. A FlutterView needs to be bound to the life cycle, and developers need to manage the FlutterView life cycle by themselves.</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/flutter/">flutter</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-01/bumblebee/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Solo.io open source BumbleBee, use eBPF with a Docker-like experience</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-01/sbe/">
            <span class="next-text nav-default">Simple Binary Encoding</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
