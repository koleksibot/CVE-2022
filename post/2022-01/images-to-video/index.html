<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Stitching images to video using ffmpeg - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="This article describes how to use ffmpeg to stitch a large number of images into a video, and introduces the meaning of some of the parameters. Before using ffmpeg to stitch images into a video, you need to pre-process the image file name, the file name must have a number to mark out its order, here I directly renamed the image using numbers, as follows. Directly use the command ffmpeg" /><meta name="keywords" content="Images, Video, ffmpeg" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-01/images-to-video/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Stitching images to video using ffmpeg" />
<meta property="og:description" content="This article describes how to use ffmpeg to stitch a large number of images into a video, and introduces the meaning of some of the parameters. Before using ffmpeg to stitch images into a video, you need to pre-process the image file name, the file name must have a number to mark out its order, here I directly renamed the image using numbers, as follows. Directly use the command ffmpeg" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-01/images-to-video/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-01-08T13:17:29+08:00" />
<meta property="article:modified_time" content="2022-01-08T13:17:29+08:00" />

<meta itemprop="name" content="Stitching images to video using ffmpeg">
<meta itemprop="description" content="This article describes how to use ffmpeg to stitch a large number of images into a video, and introduces the meaning of some of the parameters. Before using ffmpeg to stitch images into a video, you need to pre-process the image file name, the file name must have a number to mark out its order, here I directly renamed the image using numbers, as follows. Directly use the command ffmpeg"><meta itemprop="datePublished" content="2022-01-08T13:17:29+08:00" />
<meta itemprop="dateModified" content="2022-01-08T13:17:29+08:00" />
<meta itemprop="wordCount" content="803">
<meta itemprop="keywords" content="ffmpeg," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Stitching images to video using ffmpeg"/>
<meta name="twitter:description" content="This article describes how to use ffmpeg to stitch a large number of images into a video, and introduces the meaning of some of the parameters. Before using ffmpeg to stitch images into a video, you need to pre-process the image file name, the file name must have a number to mark out its order, here I directly renamed the image using numbers, as follows. Directly use the command ffmpeg"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Stitching images to video using ffmpeg</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-01-08 13:17:29 </span>
        <div class="post-category">
            <a href="/categories/skills/"> skills </a>
            </div>
          <span class="more-meta"> 803 words </span>
          <span class="more-meta"> 2 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#-r-adjust-frame-rate">-r Adjust frame rate</a></li>
        <li><a href="#-bv-adjust-the-bitrate-of-the-video">-b:v adjust the bitrate of the video</a></li>
        <li><a href="#-crf-adjust-video-quality">-crf Adjust video quality</a></li>
        <li><a href="#-cv-adjusts-the-codec-of-video">-c:v adjusts the codec of video</a></li>
        <li><a href="#-vf-scale-adjusts-the-video-resolution">-vf scale adjusts the video resolution</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>This article describes how to use ffmpeg to stitch a large number of images into a video, and introduces the meaning of some of the parameters.</p>
<p>Before using ffmpeg to stitch images into a video, you need to pre-process the image file name, the file name must have a number to mark out its order, here I directly renamed the image using numbers, as follows.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/08/615014fa7a6a4372b486bda64c079e34.png" alt="image"></p>
<p>Directly use the command <code>ffmpeg -f image2 -i %d.jpeg output.mp4</code> to convert it to mp4 video, the %d in the command is a numbered placeholder, ffmpeg will load 1-250.jpeg in order as input. Here we don&rsquo;t specify how to use other parameters, so ffmpeg uses the default parameters, for example, the frame rate is 25fps, the video is encoded in h264, and the resolution is directly the original resolution of the picture &hellip;&hellip;</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">Input #0, mov,mp4,m4a,3gp,3g2,mj2, from &amp;#039;output.mp4&amp;#039;:
  Metadata:
    major_brand     : isom
    minor_version   : 512
    compatible_brands: isomiso2avc1mp41
    encoder         : Lavf58.76.100
  Duration: 00:00:10.00, start: 0.000000, bitrate: 28144 kb/s
  Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuvj420p(pc, bt470bg/unknown/unknown), 2816x2160 [SAR 1:1 DAR 176:135], 28141 kb/s, 25 fps, 25 tbr, 12800 tbn, 50 tbc (default)
    Metadata:
      handler_name    : VideoHandler
      vendor_id       : [0][0][0][0]
</code></pre></td></tr></table>
</div>
</div><p>We can adjust its parameters to generate videos that better meet our needs, here are a few common parameters.</p>
<h2 id="-r-adjust-frame-rate">-r Adjust frame rate</h2>
<p>If we don&rsquo;t specify the frame rate, ffmpeg will use the default 25 fps, which is 25 images stitched in 1 second, we can control the final length of the generated video by adjusting the frame rate.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">ffmpeg -r <span class="m">10</span> -f image2 -i %d.jpeg output1.mp4
</code></pre></td></tr></table>
</div>
</div><p>The command as above will stitch 10 images per second, 250 images will eventually generate 25 seconds of video.
**Note the position of the <code>-r 10</code> parameter here, the effect is different before and after <code>-i %d.jpeg</code>. For example, if <code>ffmpeg -f image2 -i %d.jpeg -r 10 output1.mp4</code>, 250 images will still generate only 10s of video, but the video playback rate will be reduced to 10.</p>
<h2 id="-bv-adjust-the-bitrate-of-the-video">-b:v adjust the bitrate of the video</h2>
<p>-b:v bitrate of video. If the original image is large, the default parameter will generate a larger video size. For example, the images I used above are 2k HD images, and the final generated 10s video is 35MB, with a bitrate of nearly 30Mb/s (bitrate is the amount of data broadcast over only 1s, note that the unit here is small b).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">ffmpeg -r <span class="m">10</span> -f image2 -i %d.jpeg -b:v 4M output2.mp4
</code></pre></td></tr></table>
</div>
</div><p>Here is an additional reminder that changing the bitrate will affect the video clarity, but it doesn&rsquo;t mean that the video with high bitrate is necessarily sharper than the video with low bitrate, it also depends on the video encoding format, for example, h265 encoding can generate the same video quality of h264 with smaller bitrate, and encodings like av1, v8, v9, etc. are also better than h264.</p>
<h2 id="-crf-adjust-video-quality">-crf Adjust video quality</h2>
<p>-crf Constant Rate Factor, a parameter to balance the video quality and file size, is 0-51 in FFMPEG, the higher the value the more content loss and the worse the video quality. The default value of ffmpeg is 23, the recommended range is 17-28.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">ffmpeg -r <span class="m">10</span> -f image2 -i %d.jpeg output3.mp4
</code></pre></td></tr></table>
</div>
</div><h2 id="-cv-adjusts-the-codec-of-video">-c:v adjusts the codec of video</h2>
<p>-c:v codec of video. ffmpeg currently uses h264 by default for mp4, you can use <code>-c:v libx265</code> to generate h265 video with the same quality, but smaller files.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">ffmpeg -f image2 -i %d.jpeg -c:v libx265 output4.mp4
</code></pre></td></tr></table>
</div>
</div><p>output4.mp4 is 60% smaller in video file size compared to the output.mp4 generated above, but the video quality remains the same. You can also use <code>-c:v libvpx</code> <code>-c:v libvpx-vp9</code> to generate webm files with v8 and v9 encoding respectively.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">ffmpeg -f image2 -i %d.jpeg -c:v libvpx output-v8.webm <span class="c1">#注意webm默认生成的是低质量的视频，可使用-crf或者-b:v参数调整视频质量。</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="-vf-scale-adjusts-the-video-resolution">-vf scale adjusts the video resolution</h2>
<p>-vf scale: Video Filter Scale</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">ffmpeg -f image2 -i %d.jpeg -s 640x480 output5.mp4
</code></pre></td></tr></table>
</div>
</div><p>The above command will resize the video directly to 640x480 resolution, if the original image is not 4:3 it will definitely stretch the original image. You can use the following command to scale it equally</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">ffmpeg -f image2 -i %d.jpeg -vf <span class="nv">scale</span><span class="o">=</span>-1:480 output5.mp4 <span class="c1">#-1表示比例缩放，也可-vf scale=640:-1固定宽度缩放高度</span>
</code></pre></td></tr></table>
</div>
</div><p>These are a few commonly used parameters, these parameters are not only limited to pictures to video, video to video can also be used.</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/ffmpeg/">ffmpeg</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-01/android-ios-proxy-vpn/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Android/iOS determine whether to use a proxy or VPN</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-01/prevent-https-from-exposing-the-domain-name-bound-on-the-server/">
            <span class="next-text nav-default">Prevent HTTPS from exposing the domain name bound on the server</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
