<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>IPv6 Dynamic Address Allocation Mechanism Explained - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="IPv6 supports multiple addresses, making address assignment more flexible and convenient. Unlike IPv4, which relied solely on the DHCP protocol for address assignment, IPv6 incorporates a native stateless address autoconfiguration (Sateless Address Autoconfiguration, abbreviated SLAAC) protocol. SLAAC can either work alone to provide IPv6 addresses to hosts, or it can work with DHCPv6 to generate new assignment schemes. Here is a comprehensive analysis of the dynamic address allocation mechanism for IPv6." /><meta name="keywords" content="ipv6, Addressing" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-01/ipv6-addressing/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="IPv6 Dynamic Address Allocation Mechanism Explained" />
<meta property="og:description" content="IPv6 supports multiple addresses, making address assignment more flexible and convenient. Unlike IPv4, which relied solely on the DHCP protocol for address assignment, IPv6 incorporates a native stateless address autoconfiguration (Sateless Address Autoconfiguration, abbreviated SLAAC) protocol. SLAAC can either work alone to provide IPv6 addresses to hosts, or it can work with DHCPv6 to generate new assignment schemes. Here is a comprehensive analysis of the dynamic address allocation mechanism for IPv6." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-01/ipv6-addressing/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-01-10T10:43:03+08:00" />
<meta property="article:modified_time" content="2022-01-10T10:43:03+08:00" />

<meta itemprop="name" content="IPv6 Dynamic Address Allocation Mechanism Explained">
<meta itemprop="description" content="IPv6 supports multiple addresses, making address assignment more flexible and convenient. Unlike IPv4, which relied solely on the DHCP protocol for address assignment, IPv6 incorporates a native stateless address autoconfiguration (Sateless Address Autoconfiguration, abbreviated SLAAC) protocol. SLAAC can either work alone to provide IPv6 addresses to hosts, or it can work with DHCPv6 to generate new assignment schemes. Here is a comprehensive analysis of the dynamic address allocation mechanism for IPv6."><meta itemprop="datePublished" content="2022-01-10T10:43:03+08:00" />
<meta itemprop="dateModified" content="2022-01-10T10:43:03+08:00" />
<meta itemprop="wordCount" content="4362">
<meta itemprop="keywords" content="ipv6," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="IPv6 Dynamic Address Allocation Mechanism Explained"/>
<meta name="twitter:description" content="IPv6 supports multiple addresses, making address assignment more flexible and convenient. Unlike IPv4, which relied solely on the DHCP protocol for address assignment, IPv6 incorporates a native stateless address autoconfiguration (Sateless Address Autoconfiguration, abbreviated SLAAC) protocol. SLAAC can either work alone to provide IPv6 addresses to hosts, or it can work with DHCPv6 to generate new assignment schemes. Here is a comprehensive analysis of the dynamic address allocation mechanism for IPv6."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">IPv6 Dynamic Address Allocation Mechanism Explained</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-01-10 10:43:03 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 4362 words </span>
          <span class="more-meta"> 21 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#ipv6-address-overview">IPv6 Address Overview</a>
          <ul>
            <li><a href="#address-composition">Address Composition</a></li>
            <li><a href="#address-types">Address types</a></li>
          </ul>
        </li>
        <li><a href="#dynamic-allocation-scheme">Dynamic allocation scheme</a>
          <ul>
            <li><a href="#ndp-protocol">NDP Protocol</a></li>
            <li><a href="#message-timing">Message Timing</a></li>
            <li><a href="#slaac">SLAAC</a></li>
            <li><a href="#slaac--stateless-dhcpv6">SLAAC + Stateless DHCPv6</a></li>
            <li><a href="#stateful-dhcpv6">Stateful DHCPv6</a></li>
            <li><a href="#summary-comparison">Summary comparison</a></li>
          </ul>
        </li>
        <li><a href="#troubleshooting-guide">Troubleshooting Guide</a></li>
        <li><a href="#references">References</a>
          <ul>
            <li><a href="#ipv6-product-certification-testing">IPv6 Product Certification Testing</a></li>
            <li><a href="#ipv6-core-protocol-rfc-list">IPv6 Core Protocol RFC List</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>IPv6 supports multiple addresses, making address assignment more flexible and convenient. Unlike IPv4, which relied solely on the DHCP protocol for address assignment, IPv6 incorporates a native stateless address autoconfiguration (<a href="https://tools.ietf.org/html/rfc4862">Sateless Address Autoconfiguration</a>, abbreviated SLAAC) protocol. SLAAC can either work alone to provide IPv6 addresses to hosts, or it can work with <a href="https://tools.ietf.org/html/rfc8415">DHCPv6</a> to generate new assignment schemes. Here is a comprehensive analysis of the dynamic address allocation mechanism for IPv6.</p>
<h2 id="ipv6-address-overview">IPv6 Address Overview</h2>
<h3 id="address-composition">Address Composition</h3>
<p>The most significant difference between IPv6 and IPv4 is its large address space. 32 bits (4 bytes) of IPv4 allow for approximately 4.29 billion (232) addresses. IPv6, on the other hand, defines 128 bits (16 bytes) and supports approximately 340 x 10<sup>36</sup> addresses. This is a considerable number, and there will be no address exhaustion for the foreseeable future. A typical IPv6 address can be divided into two parts. The first 64 bits are used to represent the network and the next 64 bits are used as the interface identifier, as shown in the figure below.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/10/e8d4719c3fdd47efb3454539ed4370c5.png" alt="image"></p>
<p>Interface identifiers can be generated in a number of ways.</p>
<ul>
<li>Static manual setting</li>
<li><a href="https://en.wikipedia.org/wiki/IPv6_address#Modified_EUI-64">Link layer address (MAC) converted to 64 bits EUI-64</a></li>
<li>Specified by DHCPv6</li>
<li>Generated by privacy extensions or encryption protocols</li>
</ul>
<p>For ease of writing, IPv6 recommends a compressed format tag with the network prefix length at the end, whereby the above address can be shortened to: 2001:db8:130f <strong>::</strong> 7000: <strong>0</strong> :140b/ <strong>64</strong></p>
<h3 id="address-types">Address types</h3>
<p><a href="https://tools.ietf.org/html/rfc4291">RFC 4291</a> distinguishes between three IPv6 address types.</p>
<ol>
<li>unicast (unicast): network address and network node correspond to each other, point-to-point connection</li>
<li>anycast: the sending address corresponds to a group of receiving nodes, but only the most recent one is received</li>
<li>multicast: the sending address corresponds to a group of nodes that can receive replicated information</li>
</ol>
<p>Note that IPv6 eliminates the broadcast address type, and the corresponding IPv4 broadcast function can be better implemented by multicast. Anycast addresses are not different from unicast and have very limited applications. A typical application for anycast is to set up a DNS root server to allow hosts to look up domain names in close proximity. For unicast and multicast addresses, they can be identified by different network prefixes.</p>
<table>
<thead>
<tr>
<th>Address Type</th>
<th>English Name</th>
<th>Binary</th>
<th>Hexadecimal</th>
<th>Application</th>
</tr>
</thead>
<tbody>
<tr>
<td>Link local address (unicast)</td>
<td>Link-local address</td>
<td>1111 1110 10</td>
<td>fe80::/10</td>
<td>single-link communication</td>
</tr>
<tr>
<td>unique local address</td>
<td>Unique local address</td>
<td>1111 1101</td>
<td>fd00::/8</td>
<td>local network communication</td>
</tr>
<tr>
<td>Global unicast address</td>
<td>Global unicast address</td>
<td>001</td>
<td>2000::/3</td>
<td>Internet communications</td>
</tr>
<tr>
<td>multicast address</td>
<td>Multicast address</td>
<td>1111 1111</td>
<td>ff00::/8</td>
<td>group communication, streaming video</td>
</tr>
</tbody>
</table>
<p>Each interface of a host must have a link-local address, and in addition interfaces can be manually or dynamically autoconfigured to obtain a unique local address and a global unicast address. Thus, IPv6 interfaces naturally have multiple unicast addresses. The unique local address is managed by the local network administrator, while the global unicast address is assigned by the IANA-designated regional registry. Referring to the following diagram, all current global unicast addresses are assigned from the 2000::/3 address block, with the first 48 bits of the address identifying the service provider&rsquo;s global routing network and the next 16 bits identifying the enterprise or campus internal subnet.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/10/f7301fa058974068b94e890f404370cc.png" alt="image"></p>
<p>Because an IPv6 multicast address can only be used as a destination address, its bit definition is different from that of unicast. See RFC 4291 for a multicast address containing 4 bits of the feature flag bit, 4 bits of the application range flag, and the last 112 bits of the group identifier.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/10/2f357addd698426cbce2d7a3b952d17d.png" alt="image"></p>
<p>In addition the same protocol specifies a number of <a href="https://tools.ietf.org/html/rfc4291#page-15">reserved IPv6 multicast addresses</a>, the most important of which are</p>
<ul>
<li>All nodes in the local segment - ff02::1</li>
<li>All routers in the local segment - ff02::2</li>
<li>Local request node address: ff02::1:ffxx:xxxx</li>
</ul>
<h2 id="dynamic-allocation-scheme">Dynamic allocation scheme</h2>
<h3 id="ndp-protocol">NDP Protocol</h3>
<p>Dynamic IPv6 address assignment relies on the Neighbor Discovery Protocol (<a href="https://tools.ietf.org/html/rfc4861">Neighbor Discovery Protocol</a>, or NDP). NDP acts at the data link layer and is responsible for discovering other nodes and corresponding IPv6 addresses on the link, determining available routes and maintaining information accessibility to other active nodes. It provides the IPv6 network with the equivalent of the Address Resolution Protocol (ARP) and ICMP router discovery and redirection protocols in IPv4 networks. However, NDP adds many improvements and new features. NDP defines five <a href="https://tools.ietf.org/html/rfc4443">ICMPv6</a> message types.</p>
<ul>
<li>Router Solicitation (RS)</li>
<li>Router Advertisement (RA)</li>
<li>Neighbor Solicitation</li>
<li>Neighbor Advertisement</li>
<li>Redirect</li>
</ul>
<p>The first two message types, RS and RA, are the keys to implementing dynamic address assignment for IPv6. The host sends an RS message to the multicast address ff02::2 of all routers in the local network segment to request routing information. When the router receives the RS from the network node, it sends an immediate RA response, which has the following message format.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Type      |     Code      |          Checksum             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Cur Hop Limit |M|O|  Reserved |       Router Lifetime         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Reachable Time                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                          Retrans Timer                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Options ...
+-+-+-+-+-+-+-+-+-+-+-+-
</code></pre></td></tr></table>
</div>
</div><p>It defines two special bits, M and O, with the following meaning.</p>
<ul>
<li>M - Supervised address configuration flag, set to 1 when the address is obtained from DHCPv6.</li>
<li>O - Other configuration flag, set to 1 to indicate that other configuration information is obtained from DHCPv6</li>
</ul>
<p>The RA message ends with the Options section, which initially had three options: Source Link Layer Address, MTU, and Prefix Information. Later, <a href="https://tools.ietf.org/html/rfc8106">RFC 8106</a> (replacing RFC 6106) added the Recursive Domain Name Server (RDNSS) and Domain Name Service Search List (DNSSL) options. This has a prefix information option that directly determines the dynamic address configuration of the host interface, which has the following format.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Type      |    Length     | Prefix Length |L|A| Reserved1 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Valid Lifetime                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Preferred Lifetime                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           Reserved2                           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                                                               +
|                                                               |
+                            Prefix                             +
|                                                               |
+                                                               +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</code></pre></td></tr></table>
</div>
</div><p>Here the Prefix Length and the Prefix jointly determine the network prefix of the IPv6 address. In addition, the Prefix Information option also defines two special bits, L and A.</p>
<ul>
<li>L - the on-link flag, which when set to 1 indicates that the prefix is available for &ldquo;on-link&rdquo; determination</li>
<li>A - the automatic address configuration flag, set to 1 to indicate that the prefix can be used for SLAAC</li>
</ul>
<p>Similar to the IPv4 subnet mask feature, the purpose of the &ldquo;on-link&rdquo; determination is to allow the host to determine which networks an interface can access. By default, the host only considers the network where the link-local address is located as &ldquo;on-link&rdquo;. If the &ldquo;on-link&rdquo; status of a destination address cannot be determined, the host forwards the IPv6 datagram to the default gateway (or default router) by default. When the host receives an RA message, if the &ldquo;On Link&rdquo; flag for a prefix information option is set to 1 and the Valid Lifetime is also a non-zero value, the host creates a new prefix network entry for it in the prefix list. All unexpired prefix network entries are &ldquo;on-link&rdquo;.</p>
<h3 id="message-timing">Message Timing</h3>
<p>After understanding the NDP protocol and the information conveyed by the RA messages, let&rsquo;s see how they guide the network nodes to achieve dynamic address assignment.</p>
<p>Routers in the network periodically send RA messages to all node multicast addresses (ff02::1) in the local network segment. However, to avoid latency, the host sends one or more RS messages to all routers in the local segment as soon as it has finished booting. The protocol requires the routers to respond to the RA messages within 0.5 seconds. Then, based on the values of the M/O/A bits in the received RA messages, the host decides how to dynamically configure the unique local and global unicast addresses of the interface and how to obtain other configuration information. With certain combinations of bit fetch values, the host needs to run DHCPv6 client software to connect to the server to obtain address assignment and/or other configuration information. The entire process is shown in the following message timing diagram.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/10/88650330cb5e416e82a36dbcdbd14545.png" alt="image"></p>
<blockquote>
<p><strong>Note:</strong> Unlike the IPv4 DHCP protocol, DHCPv6 clients use UDP port 546 and servers use UDP port 547.</p>
</blockquote>
<p>The following explains in detail the three dynamic allocation schemes determined by the combination of the values of the M/O/A bits.</p>
<ul>
<li>SLAAC</li>
<li>SLAAC + stateless DHCPv6</li>
<li>Stateful DHCPv6</li>
</ul>
<h3 id="slaac">SLAAC</h3>
<p>SLAAC is the simplest automatic IPv6 address assignment scheme and does not require any server. It works by sending an RS message request after the host starts up and the router sends back RA messages to all nodes in the local segment. If the RA message contains the following settings.</p>
<ul>
<li><strong>The M bits and O bits of the <mark> prefix are cleared</mark></strong></li>
<li><strong>The L and A bits of the prefix information option are set to 1</strong>.</li>
</ul>
<p>Then the host receives this RA message and does the following to implement SLAAC.</p>
<ol>
<li>combine the network prefix with the local interface identifier to generate a unique local address or global unicast address</li>
<li>install the default gateway (or default route) to point to the router address (source address of the RA message)</li>
<li>set this interface as the &ldquo;on-link&rdquo; corresponding to the network prefix, which is also the next-hop interface of the default gateway above</li>
<li>if the RDNSS and/or DNSSL options are included, install the name servers and domain name suffixes</li>
</ol>
<p>This way, the host gets one or more IPv6 unique local addresses or global unicast addresses, as well as the default gateway and domain name service information to complete various Internet connections.</p>
<p>The following is an example of SLAAC configuration on a Cisco Catalyst 9300 Multilayer Access Switch.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">ipv6 unicast-routing
interface Vlan10
    ipv6 enable
    ipv6 address 2001:ABCD:1000::1/64
    ipv6 nd ra dns server 2001:4860:4860::8888 infinite
    ipv6 nd ra dns search-list example.com
</code></pre></td></tr></table>
</div>
</div><p>The Layer 3 interface of the Cisco Multilayer Switch provides routing functionality. As you can see, when IPv6 is activated on the Layer 3 interface in VLAN 10, its default address auto-assignment scheme is SLAAC. the control bits of RA messages from this interface are all set according to the SLAAC scheme, and the network prefixes for each IPv6 address it configures are automatically added to the RA prefix information options list. Of course, the network administrator can also exclude certain network prefixes with a separate interface configuration command. The last two lines of the example configuration command specify RDNSS and DNSSL, which are also added to the RA message options.</p>
<p>If a host accesses a port in VLAN 10, it immediately gets a network prefix of 2001:ABCD:1000::/64 global unicast address, and its default gateway address is set to 2001:ABCD:1000::1. Open a browser and type in a URL, and it will send a message to the specified domain name server 2001:4860:4860:: 8888 (Google&rsquo;s public domain name server address) to obtain the IPv6 address of the destination URL to establish a connection.</p>
<h3 id="slaac--stateless-dhcpv6">SLAAC + Stateless DHCPv6</h3>
<p>SLAAC automatic address assignment is fast and easy, providing a plug-and-play IPv6 deployment solution for small and medium-sized network deployments. However, if a network node needs access to additional configuration information, such as NTP/SNTP server, TFTP server and SIP server addresses, or if its functionality relies on certain vendor-specific Information Options, it must choose the SLAAC + stateless DHCPv6 option.</p>
<p>This option still uses SLAAC automatic address assignment, but the router instructs the host to connect to a DHCPv6 server for additional configuration information. The RA message settings sent back by the router then become.</p>
<ul>
<li><strong>The M bit of the prefix is cleared to zero and the <mark>O bit is set to 1</mark></strong></li>
<li><strong>The L and A bits of the prefix information option are set to 1</strong></li>
</ul>
<p>When the host receives this RA message, it does the following.</p>
<ol>
<li>Combine the network prefix with the local interface identifier to generate a unique local address or global unicast address</li>
<li>Install the default gateway (or default route) to point to the router address (source address of the RA message)</li>
<li>Set this interface as the &ldquo;on-link&rdquo; corresponding to the network prefix, which is also the next-hop interface of the default gateway above</li>
<li>If the RDNSS and/or DNSSL options are included, install the name servers and domain suffixes</li>
<li><mark>Start DHCPv6 client, connect to DHCPv6 server to request additional configuration information</mark></li>
<li><mark>Save additional configuration information that the DHCPv6 server replies to</mark></li>
</ol>
<p>As you can see, SLAAC + stateless DHCPv6 does not differ from SLAAC in terms of address assignment. DHCPv6 only provides additional configuration information and does not assign IPv6 addresses. So the DHCPv6 server does not track the address assignment status of the network nodes, which is what is meant by &ldquo;stateless&rdquo;.</p>
<p>The corresponding configuration commands on the Catalyst 9300 switch are as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">ipv6 unicast-routing
ipv6 dhcp pool vlan-10-clients
    dns-server 2001:4860:4860::8888
    domain-name example.com
    sntp address 2001:DB8:2000:2000::33
interface Vlan10
    ipv6 enable
    ipv6 address 2001:ABCD:1000::1/64
    ipv6 nd other-config-flag
    ipv6 dhcp server vlan-10-clients
    # ipv6 dhcp relay destination 2001:9:6:40::1
</code></pre></td></tr></table>
</div>
</div><p>The difference with the SLAAC example is that the VLAN 10 interface configuration command <code>ipv6 nd other-config-flag</code> explicitly specifies the O-bit that sets the RA message. Its next command, <code>ipv6 dhcp server vlan-10-clients</code>, activates the DHCPv6 server response function of the interface, which corresponds to a server with the shared resource name <code>vlan-10-clients</code>. The DHCPv6 server is configured at the top of the interface configuration, starting at <code>ipv6 dhcp pool vlan-10-clients</code>, and contains DNS clients` and contains the DNS server address, DNS domain name, and SNTP server address.</p>
<p>If you are using a DHCPv6 server located on a segment other than the switch, you can remove the <code>ipv6 dhcp server</code> command and enable the <code>ipv6 dhcp relay destination</code> command on the next line of the example to specify the address to forward DHCPv6 requests to the external server.</p>
<h3 id="stateful-dhcpv6">Stateful DHCPv6</h3>
<p>Many large enterprises use DHCP to manage the IPv4 addresses of their devices, so deploying DHCPv6 to centrally assign and manage IPv6 addresses is a natural preference. This is where stateful DHCPv6 comes into play. This solution also requires RA messages from the router, but does not rely solely on network prefixes for automatic address assignment. the control bits of the RA messages are set to</p>
<ul>
<li><strong>The M bits of the <mark> prefix are set to 1</mark> and the O bits are indifferent</strong></li>
<li><strong>The L/A bit of the prefix message option can be set to 1 or 0 as desired</strong></li>
</ul>
<p>Upon receipt of this RA message, the host performs the following actions.</p>
<ul>
<li>Generate a unique local address or global unicast address in combination if there is a prefix information option A bit set to 1</li>
<li>Install the default gateway (or default route) to point to the router address (source address of the RA message)</li>
<li>If there is a prefix information option L with a ratio of 1, set this interface to &ldquo;on link&rdquo; for the corresponding network prefix</li>
<li>If the RDNSS and/or DNSSL option is included, install the domain name server and domain name suffix</li>
<li><mark>Start DHCPv6 client, connect to server to request address and other configuration information</mark></li>
<li><mark>Set the address assigned by the DHCPv6 server to this interface</mark></li>
<li><mark>Save other configuration information that the DHCPv6 server replies to</mark></li>
</ul>
<p>Examples of stateful DHCPv6 configuration commands on the Catalyst 9300 switch are as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">ipv6 unicast-routing
ipv6 dhcp pool vlan-10-clients
    address prefix FD09:9:5:90::/64
    address prefix 2001:9:5:90::/64
    dns-server 2001:9:5:90::115
    domain-name test.com
interface Vlan10
    ipv6 enable
    ipv6 address 2001:ABCD:1:1::1/64
    ipv6 nd prefix 2001:ABCD:1:1::/64 no-advertise
    ipv6 nd managed-config-flag
    ipv6 dhcp server vlan-10-clients
</code></pre></td></tr></table>
</div>
</div><p>Compared to SLAAC + stateless DHCPv6, the interface configuration here removes the <code>ipv6 nd other-config-flag</code> and uses the <code>ipv6 nd managed-config-flag</code> command instead. This corresponds to setting the M bit of the RA message header to 1. The DHCPv6 server configuration adds two <code>address prefix</code> commands to set the network prefix. Also the <code>ipv6 nd prefix 2001:ABCD:1:1::/64 no-advertise</code> configured for the interface specifies that the router does not include the 2001:ABCD:1:1::/64 prefix information option in the RA. So, this example host interface will not generate SLAAC addresses, but only two addresses from DHPCv6: a unique local address with the network prefix FD09:9:5:90::/64, and a global unicast address with the network prefix 2001:9:5:90::/64. The interface identifier for each of these two addresses is also specified by DHPCv6.</p>
<p>How can I tell the source of the dynamically assigned address for the host interface? The method is simple. One thing to remember is that DHPCv6 does not send the network prefix length to the requester, so the network prefix length of the addresses received from DHPCv6 is 128, whereas the network prefix length of the addresses generated by SLAAC will not be 128. See the following example of the wired0 interface on a Linux host.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">ifconfig wired0
wired0    Link encap:Ethernet  HWaddr A0:EC:F9:6C:D9:30  
          inet6 addr: 2001:20::53c7:1364:a4d8:fd91/128 Scope:Global
          inet6 addr: 2001:20::a2ec:f9ff:fe6c:d930/64 Scope:Global
          inet6 addr: fe80::a2ec:f9ff:fe6c:d930/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:510 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1213 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:93670 (91.4 KiB)  TX bytes:271979 (265.6 KiB)
</code></pre></td></tr></table>
</div>
</div><p>We can immediately determine that the interface uses a stateful DHCPv6 address assignment, but also generates the SLAAC address with the same network prefix 2001:20::/64 received:</p>
<ul>
<li>2001:20::53c7:1364:a4d8:fd91/128 - the interface identifier is a random number.</li>
<li>2001:20::53c7:1364:a4d8:fd91/128 - DHCPv6 address with random number of interface identifiers</li>
<li>2001:20::a2ec:f9ff:fe6c:d930/64 - SLAAC address, interface identifier in MAC EUI-64 format</li>
<li>fe80::a2ec:f9ff:fe6c:d930/64 - link-local address, interface identifier in MAC EUI-64 format</li>
</ul>
<p><strong>Note:</strong> The DHPCv6 server also does not provide any IPv6 default gateway information; the host needs to be informed of the dynamic default gateway from the RA message.</p>
<h3 id="summary-comparison">Summary comparison</h3>
<p>The following table shows the control bit combinations of RA messages in relation to address assignment and other configuration acquisition methods.</p>
<table>
<thead>
<tr>
<th>M-Bit</th>
<th>O-Bit</th>
<th>A-Bit</th>
<th>Host Address</th>
<th>Other Configurations</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>Static settings</td>
<td>Manual configuration</td>
<td></td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>1</td>
<td>prefix specified by RA, automatically generated</td>
<td>manually configured</td>
<td></td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>0</td>
<td>Static setting</td>
<td>DHCPv6</td>
<td></td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>1</td>
<td>Prefix specified by RA, auto-generated</td>
<td>DHCPv6</td>
<td></td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>0</td>
<td>stateful DHCPv6</td>
<td>DHCPv6</td>
<td></td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>stateful DHCPv6 and/or auto-generated</td>
<td>DHCPv6</td>
<td></td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>0</td>
<td>stateful DHCPv6</td>
<td>DHCPv6</td>
<td></td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>stateful DHCPv6 and/or auto-generated</td>
<td>DHCPv6</td>
<td></td>
</tr>
</tbody>
</table>
<p>Summarize three dynamic allocation schemes:</p>
<table>
<thead>
<tr>
<th>distribution scheme</th>
<th>features</th>
<th>applicable scenarios</th>
</tr>
</thead>
<tbody>
<tr>
<td>SLAAC</td>
<td>Simple and practical, fast deployment</td>
<td>SMB, consumer product networking, Internet of Things (IoT)</td>
</tr>
<tr>
<td>SLAAC + Stateless DHCPv6</td>
<td>Automated configuration, extended services</td>
<td>SMBs need additional network services</td>
</tr>
<tr>
<td>Stateful DHCPv6</td>
<td>centralized management and control</td>
<td>large enterprises, institutions and campus networks</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note:</strong> Since IPv6 network interfaces can have multiple addresses (a link-local address, plus one or more unique local addresses and/or global unicast addresses), it becomes important how the source address is selected when establishing an external connection. The <a href="https://tools.ietf.org/html/rfc6724">RFC 6724</a> gives detailed rules for IPv6 source address selection. In the development of embedded systems, the control plane and the data plane connected to the same remote device are often implemented by different functional components. For example, the control plane directly calls a Linux user space socket to establish the connection, and the IPv6 source address used for the connection is selected by the TCP/IP stack, while the data plane directly implements data encapsulation processing and transmission in kernel space. In this case, the IPv6 source address selected by the control plane should be synchronized to the data plane in time, otherwise the user data cannot be delivered to the same destination.</p>
</blockquote>
<h2 id="troubleshooting-guide">Troubleshooting Guide</h2>
<p>The common IPv6 dynamic address assignment debugging and troubleshooting commands on Cisco routers and switches are listed in the following table.</p>
<table>
<thead>
<tr>
<th>command line</th>
<th>usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>show ipv6 interface brief</td>
<td>Display a brief table of IPv6 address information for all interfaces</td>
</tr>
<tr>
<td>show ipv6 interface [type] [num]</td>
<td>shows individual interface IPv6 and NDP configuration and status information</td>
</tr>
<tr>
<td>show ipv6 interface [type] [num] prefix</td>
<td>shows individual interface IPv6 network prefix information</td>
</tr>
<tr>
<td>show ipv6 dhcp pool</td>
<td>shows DHCPv6 shared resource configuration information</td>
</tr>
<tr>
<td>show ipv6 dhcp binding</td>
<td>shows IPv6 and host binding information maintained by the DHCPv6 server</td>
</tr>
<tr>
<td>show ipv6 dhcp interface [type] [num]</td>
<td>shows individual interface DHCPv6 configuration and status information</td>
</tr>
<tr>
<td>debug ipv6 nd</td>
<td>debug the IPv6 NDP protocol</td>
</tr>
<tr>
<td>debug ipv6 dhcp</td>
<td>debug DHCPv6 server</td>
</tr>
</tbody>
</table>
<p>The following control terminal NDP protocol debug log shows that the router received an RS message from host FE80::5850:6D61:1FB:EF3A in response to an RA message to the multicast address FF02::1 for all nodes in this network.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">Router# debug ipv6 nd
  ICMP Neighbor Discovery events debugging is on
Router# show logging | include RS
  ICMPv6-ND: Received RS on GigabitEthernet0/0/0 from FE80::5850:6D61:1FB:EF3A
Router# show logging | include RA
 ICMPv6-ND: Sending solicited RA on GigabitEthernet0/0/0
 ICMPv6-ND: Request to send RA for FE80::C801:EFFF:FE5A:8
 ICMPv6-ND: Setup RA from FE80::C801:EFFF:FE5A:8 to FF02::1 on GigabitEthernet0/0/0
</code></pre></td></tr></table>
</div>
</div><p>The next log shows an example of stateless DHCPv6 observed after entering the <code>debug ipv6 dhcp</code> debug command. Host FE80::5850:6D61:1FB:EF3A sends an INFORMATION-REQUEST message to the DHCPv6 server, which selects the source address FE80::C801:B9FF:FEF0:8 and sends a response message.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">Router#debug ipv6 dhcp
   IPv6 DHCP debugging is on

IPv6 DHCP: Received INFORMATION-REQUEST from FE80::5850:6D61:1FB:EF3A on FastEthernet0/0
IPv6 DHCP: Option VENDOR-CLASS(16) is not processed
IPv6 DHCP: Using interface pool LAN_POOL
IPv6 DHCP: Source Address from SAS FE80::C801:B9FF:FEF0:8
IPv6 DHCP: Sending REPLY to FE80::5850:6D61:1FB:EF3A on FastEthernet0/0
</code></pre></td></tr></table>
</div>
</div><p>The following is a debug log of stateful DHCPv6, lines 1, 15, 16 and 26 show the complete process of two message exchanges (SOLICIT/ADVERTISE, REQUEST/REPLY).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">IPv6 DHCP: Received SOLICIT from FE80::5850:6D61:1FB:EF3A on FastEthernet0/0
IPv6 DHCP: Option UNKNOWN<span class="o">(</span>39<span class="o">)</span> is not processed
IPv6 DHCP: Option VENDOR-CLASS<span class="o">(</span>16<span class="o">)</span> is not processed
IPv6 DHCP: Using interface pool LAN_POOL
IPv6 DHCP: Creating binding <span class="k">for</span> FE80::5850:6D61:1FB:EF3A in pool LAN_POOL
IPv6 DHCP: Binding <span class="k">for</span> IA_NA 0E000C29 not found
IPv6 DHCP: Allocating IA_NA 0E000C29 in binding <span class="k">for</span> FE80::5850:6D61:1FB:EF3A
IPv6 DHCP: Looking up pool 2001:ABCD::/64 entry with username <span class="s1">&#39;000100011F3E8772000C29806CCC0E000C29&#39;</span>
IPv6 DHCP: Poolentry <span class="k">for</span> user not found
IPv6 DHCP: Allocated new address 2001:ABCD::D9F7:61C:D803:DCF1
IPv6 DHCP: Allocating address 2001:ABCD::D9F7:61C:D803:DCF1 in binding <span class="k">for</span> FE80::5850:6D61:1FB:EF3A, IAID 0E000C29
IPv6 DHCP: Updating binding address entry <span class="k">for</span> address 2001:ABCD::D9F7:61C:D803:DCF1
IPv6 DHCP: Setting timer on 2001:ABCD::D9F7:61C:D803:DCF1 <span class="k">for</span> <span class="m">60</span> seconds
IPv6 DHCP: Source Address from SAS FE80::C801:B9FF:FEF0:8
IPv6 DHCP: Sending ADVERTISE to FE80::5850:6D61:1FB:EF3A on FastEthernet0/0
IPv6 DHCP: Received REQUEST from FE80::5850:6D61:1FB:EF3A on FastEthernet0/0
IPv6 DHCP: Option UNKNOWN<span class="o">(</span>39<span class="o">)</span> is not processed
IPv6 DHCP: Option VENDOR-CLASS<span class="o">(</span>16<span class="o">)</span> is not processed
IPv6 DHCP: Using interface pool LAN_POOL
IPv6 DHCP: Looking up pool 2001:ABCD::/64 entry with username <span class="s1">&#39;000100011F3E8772000C29806CCC0E000C29&#39;</span>
IPv6 DHCP: Poolentry <span class="k">for</span> user found
IPv6 DHCP: Found address 2001:ABCD::D9F7:61C:D803:DCF1 in binding <span class="k">for</span> FE80::5850:6D61:1FB:EF3A, IAID 0E000C29
IPv6 DHCP: Updating binding address entry <span class="k">for</span> address 2001:ABCD::D9F7:61C:D803:DCF1
IPv6 DHCP: Setting timer on 2001:ABCD::D9F7:61C:D803:DCF1 <span class="k">for</span> <span class="m">172800</span> seconds
IPv6 DHCP: Source Address from SAS FE80::C801:B9FF:FEF0:8
IPv6 DHCP: Sending REPLY to FE80::5850:6D61:1FB:EF3A on FastEthernet0/0

</code></pre></td></tr></table>
</div>
</div><p>For complex cases where it is difficult to identify whether the problem is with the host, router or DHCPv6 server, we recommend using the free open source network packet analysis software <a href="https://www.wireshark.org/">Wireshark</a> to intercept packets of the entire process for analysis. When analyzing packets with Wireshark, you can apply the keyword filtering function.</p>
<table>
<thead>
<tr>
<th>Filter Keywords</th>
<th>Show Only</th>
</tr>
</thead>
<tbody>
<tr>
<td>icmpv6.type=133</td>
<td>ICMPv6 RS</td>
</tr>
<tr>
<td>icmpv6.nd.ra.flag</td>
<td>ICMPv6 RA</td>
</tr>
<tr>
<td>dhcpv6</td>
<td>DHCPv6 packets</td>
</tr>
</tbody>
</table>
<p>We can either run Wireshark directly on the host side, or we can use the Switched Port Analyzer (SPAN) provided with the switch on the network side to centrally redirect packets from a given port to the monitored port running Wireshark for interception. Cisco Catalyst 9300 Series switches also directly <a href="https://www.cisco.com/c/en/us/td/docs/switches/lan/catalyst9300/software/release/17-4/configuration_guide/nmgmt/b_174_nmgmt_9300_cg/configuring_packet_capture.html">integrate with Wireshark software</a> to intercept and analyze filtered packets online, making it very easy to use.</p>
<h2 id="references">References</h2>
<h3 id="ipv6-product-certification-testing">IPv6 Product Certification Testing</h3>
<p>Accurate and effective IPv6 product testing is key to ensuring high interoperability, security and reliability of IPv6 infrastructure deployments. The <strong>IPv6 Ready</strong> logo is an IPv6 testing and certification program created by the <a href="https://www.ipv6forum.com/">IPv6 Forum</a>. Its goals are to define IPv6 conformance and interoperability test specifications, provide a self-testing toolset, establish a <a href="https://www.ipv6ready.org.cn/">Global IPv6 Test Center</a> and provide product validation services, and finally, issue certification certificates.</p>
<p>May 2020 <a href="https://www.ipv6ready.org/">IPv6 Ready Marking Project</a> releases a new <a href="https://www.ipv6ready.org/resources.html">Version 5.0 Test Specification</a> for.</p>
<ul>
<li>IPv6 Core Protocol Conformance Test Specification (Conformance)</li>
<li>IPv6 Core Protocol Interoperability Test Specification (Interoperability)</li>
</ul>
<p>Along with these two new test sequences, the project team also affirmed two permanent changes.</p>
<ol>
<li>the testing is done in a pure IPv6 environment, without providing any IPv4 network environment</li>
<li>the device under test must activate the IPv6 functionality of the system and all interfaces in the default state</li>
</ol>
<p>Not surprisingly, the new version 5.0 test specification has a section dedicated to defining SLAAC test cases to validate this core IPv6 protocol.</p>
<h3 id="ipv6-core-protocol-rfc-list">IPv6 Core Protocol RFC List</h3>
<p>The sections shown in bold are directly covered by the IPv6 Ready version 5.0 core protocol test specification.</p>
<ul>
<li>RFC 4191 Default Router Preferences and More-Specific Routes</li>
<li>RFC 4193 Unique Local IPv6 Unicast Addresses</li>
<li><strong>RFC 4291 IP Version 6 Addressing Architecture</strong></li>
<li><strong>RFC 4443 Internet Control Message Protocol (ICMPv6) for the Internet Protocol Version 6 (IPv6) Specification</strong></li>
<li><strong>RFC 4861 Neighbor Discovery for IP version 6 (IPv6)</strong></li>
<li><strong>RFC 4862 IPv6 Stateless Address Autoconfiguration</strong> * **RFC 4941 Privacy Extensions</li>
<li>RFC 4941 Privacy Extensions for Stateless Address Autoconfiguration in IPv6</li>
<li>RFC 5095 Deprecation of Type 0 Routing Headers in IPv6</li>
<li>RFC 6724 Default Address Selection for Internet Protocol Version 6 (IPv6)</li>
<li>RFC 6980 Security Implications of IPv6 Fragmentation with IPv6 Neighbor Discovery</li>
<li>RFC 7217 A Method for Generating Semantically Opaque Interface Identifiers with IPv6 Stateless Address Autoconfiguration (SLAAC)</li>
<li>RFC 8064 Recommendation on Stable IPv6 Interface Identifiers</li>
<li>RFC 8106 IPv6 Router Advertisement Options for DNS Configuration</li>
<li>
<ul>
<li><strong>RFC 8200 Internet Protocol, Version 6 (IPv6) Specification</strong></li>
</ul>
</li>
<li><strong>RFC 8201 Path MTU Discovery for IP version 6</strong></li>
<li>RFC 8415 Dynamic Host Configuration Protocol for IPv6 (DHCPv6)</li>
</ul>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/ipv6/">ipv6</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-01/rpi-nas-plex/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Build your own home NAS and streaming server using Raspberry Pi</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-01/asan-intro/">
            <span class="next-text nav-default">AddressSanitizer - A tool for programmers to detect memory access errors</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
