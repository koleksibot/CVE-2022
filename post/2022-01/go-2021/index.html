<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Interpreting Go Language 2021: Stability is King - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="There seems to be a &amp;ldquo;two ends in one&amp;rdquo; phenomenon in the computing world. On the one hand, more and more computing needs are being moved to the cloud (i.e., the cloud computing side). If you are a practitioner, you should be used to &amp;ldquo;deploying programs to the cloud&amp;rdquo;; on the other hand, some terminals are becoming more and more intelligent. Some manufacturers have even built neural network engines (a" /><meta name="keywords" content="golang" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-01/go-2021/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Interpreting Go Language 2021: Stability is King" />
<meta property="og:description" content="There seems to be a &ldquo;two ends in one&rdquo; phenomenon in the computing world. On the one hand, more and more computing needs are being moved to the cloud (i.e., the cloud computing side). If you are a practitioner, you should be used to &ldquo;deploying programs to the cloud&rdquo;; on the other hand, some terminals are becoming more and more intelligent. Some manufacturers have even built neural network engines (a" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-01/go-2021/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-01-09T13:36:18+08:00" />
<meta property="article:modified_time" content="2022-01-09T13:36:18+08:00" />

<meta itemprop="name" content="Interpreting Go Language 2021: Stability is King">
<meta itemprop="description" content="There seems to be a &ldquo;two ends in one&rdquo; phenomenon in the computing world. On the one hand, more and more computing needs are being moved to the cloud (i.e., the cloud computing side). If you are a practitioner, you should be used to &ldquo;deploying programs to the cloud&rdquo;; on the other hand, some terminals are becoming more and more intelligent. Some manufacturers have even built neural network engines (a"><meta itemprop="datePublished" content="2022-01-09T13:36:18+08:00" />
<meta itemprop="dateModified" content="2022-01-09T13:36:18+08:00" />
<meta itemprop="wordCount" content="7722">
<meta itemprop="keywords" content="golang," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Interpreting Go Language 2021: Stability is King"/>
<meta name="twitter:description" content="There seems to be a &ldquo;two ends in one&rdquo; phenomenon in the computing world. On the one hand, more and more computing needs are being moved to the cloud (i.e., the cloud computing side). If you are a practitioner, you should be used to &ldquo;deploying programs to the cloud&rdquo;; on the other hand, some terminals are becoming more and more intelligent. Some manufacturers have even built neural network engines (a"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Interpreting Go Language 2021: Stability is King</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-01-09 13:36:18 </span>
        <div class="post-category">
            <a href="/categories/news/"> news </a>
            </div>
          <span class="more-meta"> 7722 words </span>
          <span class="more-meta"> 16 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#trends-overview">Trends Overview</a></li>
        <li><a href="#year-in-review">Year in Review</a>
          <ul>
            <li><a href="#new-official-website">New official website</a></li>
            <li><a href="#module-management">Module Management</a></li>
            <li><a href="#system-environment-variable-go111module">System environment variable GO111MODULE</a></li>
            <li><a href="#profiles-for-go-modules-module-graph-pruning">Profiles for Go modules: Module graph pruning</a></li>
            <li><a href="#go-modules-configuration-file-new-directives">Go module&rsquo;s configuration file: new directives</a></li>
            <li><a href="#configuration-files-for-go-modules-new-comments">Configuration files for Go modules: new comments</a></li>
          </ul>
        </li>
        <li><a href="#standard-commands">Standard commands</a>
          <ul>
            <li><a href="#go-install-command">go install command</a></li>
            <li><a href="#go-get-command">go get command</a></li>
          </ul>
        </li>
        <li><a href="#standard-library">Standard Library</a>
          <ul>
            <li><a href="#3-new-code-packages-added">3 new code packages added</a></li>
            <li><a href="#deprecated-ioioutil-packages">Deprecated io/ioutil packages</a></li>
          </ul>
        </li>
        <li><a href="#grammar">Grammar</a></li>
        <li><a href="#about-performance">About Performance</a></li>
        <li><a href="#other-updates">Other Updates</a></li>
        <li><a href="#future-outlook">Future Outlook</a>
          <ul>
            <li><a href="#module-management-tools">Module Management Tools</a></li>
            <li><a href="#generic-syntax-support">Generic syntax support</a></li>
            <li><a href="#other-expectations">Other expectations</a></li>
          </ul>
        </li>
        <li><a href="#summary">Summary</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>There seems to be a &ldquo;two ends in one&rdquo; phenomenon in the computing world.</p>
<p>On the one hand, more and more computing needs are being moved to the cloud (i.e., the cloud computing side). If you are a practitioner, you should be used to &ldquo;deploying programs to the cloud&rdquo;; on the other hand, some terminals are becoming more and more intelligent. Some manufacturers have even built neural network engines (a processing unit used to perform machine learning and artificial intelligence tasks) into their phones.</p>
<p>We can say that the big &ldquo;intelligence&rdquo; in the cloud, the small &ldquo;intelligence&rdquo; in the terminal form gradually formed. However, they are not fragmented, but gradually towards integration. They are working together to weave an &ldquo;AI co-processing network&rdquo;.</p>
<p>In this puzzle, the Go language is clearly positioned and advantageous in the cloud. To be more specific, Go&rsquo;s main battleground is in the application layer of the cloud (e.g., Web services, middleware, etc.), but not in the underlying layer of the cloud (e.g., operating systems, drivers, etc.).</p>
<p>Back in the day, the Go language was claimed to be the C language of the cloud computing era. Its goal was to achieve the efficiency of running programs in C and the efficiency of developing programs in Python. So far, we can&rsquo;t say that this goal has been fully achieved, but we can describe it as &ldquo;very close&rdquo;.</p>
<p>Of course, evaluating a programming language is not just about how efficiently it runs and how efficiently it develops. It&rsquo;s also about the development team, the technical community, the technical ecosystem, and so on. But that&rsquo;s a whole other topic.</p>
<h2 id="trends-overview">Trends Overview</h2>
<p>On November 10th of this year, the Go language celebrated its 12th birthday. In terms of trends, the Go language is relatively stable in 2021, as evidenced by the TIOBE Index (a well-known programming language ranking) usage statistics for Go ( <a href="https://www.tiobe.com/tiobe-index/go/">https://www.tiobe.com/tiobe-index/go/</a> ). This is in contrast to its ups and downs between 2010 and 2018.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/09/c492c4e36b6e4ecf82230bce8ebea50e.png" alt="image"></p>
<p>This is confirmed by Google&rsquo;s search engine trend statistics.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/09/d3af45cc21ac4146aad32d615357dad2.png" alt="image"></p>
<p>Not surprisingly, it was Chinese Go language fans who contributed the majority of searches again this year.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/09/d8139940b9cf458c92517784bbcdf5d1.png" alt="image"></p>
<p>The Go language is so hot in China!</p>
<p>When we focus on China, we can see the cities where the most Go-language-focused people are in the country.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/09/98541d29203a41d49e96ebd2373550d6.png" alt="image"></p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/09/cf2fd1743e4748ecb6d25f86fc337565.png" alt="image"></p>
<p>Please note that the hotness shown above is based on the last 12 months of data. To be honest, the cities of Jinan and Xi&rsquo;an, which rank first and second here, are quite surprising to the author. Perhaps there are schools and companies in these two cities that are heavily promoting the Go language. Of course, this is just a guess, and there is no data to support it.</p>
<p>The ranking of the cities after them, as far as the author can tell, should be similar. Beijing has always been a popular place for technology companies. Shenzhen has also seen a rapid rise in software companies in recent years. And because of the unique charm of Chengdu, the past two years, there are many software companies to set up camp there. As for Hangzhou, Shanghai, Guangzhou also needless to say, they have been the Internet and software companies are more piled up in the place.</p>
<p>Let&rsquo;s take a look at the relevant search terms.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/09/700ef5e82c654973880c75bf7922c350.png" alt="image"></p>
<p>As someone who has studied the Go language for many years, I can see here that people who want to learn or are just learning Go are the majority of people searching for this programming language. This may have something to do with the fact that Go is starting to gain popularity in colleges and universities. Of course, the fact that &ldquo;more and more companies (especially the leading ones and the upstarts) are using Go&rdquo; must also be an important factor. So, no matter what, the Go language still has a lot of potential in China.</p>
<p>Well, we took a longitudinal look at the Go language&rsquo;s popularity in China. Now, let&rsquo;s take a side-by-side comparison.</p>
<p>In addition to Go, the authors have selected a few programming languages that have more intersection with it in terms of their main areas of interest. They are C, C++, Java, and Rust, as shown in the figure below.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/09/c0ac58c260cd47c895a2fae7915c1dd9.png" alt="image"></p>
<p>Globally, the Go language is not far behind Java, but also has a significant gap with C and C++ in terms of popularity. However, if we focus on China, we will find something else.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/09/6fa4c00e15eb4600bb6bf035ca8be094.png" alt="image"></p>
<p>For the country, it is clear that application-level programming languages will receive more attention from developers. Go is second only to Java here. C, which is the dominant language in the underlying development, is only the second to last among the 5 programming languages. Although this article is mainly about Go, this situation makes me think - is the focus on software infrastructure too low for the majority of developers in China?</p>
<p>Let&rsquo;s look at the 2021 Developer Survival Report ( <a href="https://insights.stackoverflow.com/survey/2021">https://insights.stackoverflow.com/survey/2021</a> ) published by StackOverflow (the world&rsquo;s largest programming community and Q&amp;A site). The report is global in scope. Although the participation of Chinese developers is still low, it doesn&rsquo;t stop us from using it for reference.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/09/94055190d93a4828bd301cef46cf7431.png" alt="image"></p>
<p>In this report&rsquo;s &ldquo;Favorite Programming Languages&rdquo; ranking, the Go language comes in at #10. It has moved up 2 places from last year. And Rust still holds the number one position, as it did last year. However, if we look back at the popularity of the Rust language in Google search engines, can we see some clues? Perhaps it has to do with the high learning curve of Rust. Across the board, the programming languages that are more beloved than Go are either charming in their features or have a large language ecosystem (or an unusually rich set of third-party libraries and development tools).</p>
<p>In contrast, the authors consider the following ranking of &ldquo;most wanted programming languages&rdquo; to be more informative for professional programmers. In this ranking, Go and Rust are very close to each other. However, they are not as good as the absolute mainstream scripting languages. Here we can also see that the ease of use of a programming language (and the efficiency of the development of programs) is crucial to the choice of developers.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/09/afe40e9d08c8461d8399f63cc079dc53.png" alt="image"></p>
<p>Of course, we&rsquo;re not immune to this, so let&rsquo;s take a final look at the Salary and Development Experience quadrant of the report (globally).</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/09/598aba8916984d1f80dcd7b1f2f2b672.png" alt="image"></p>
<p>This quadrant represents a result based on big data statistics. The salary in it is taken as the median annual salary of developers, while the development experience is taken as the average of the number of years developers have been in the business. However, it still has some reference value.</p>
<p>As we can see, the Go language still pays very well globally. This is even higher than the more novel Julia and Swift languages. The Java language, which is a strong rival of Go, is probably due to an over-saturated market and the median annual salary of the developers involved is far from that of Go.</p>
<p>By this point, we&rsquo;ve looked at quite a few charts together. We can see that the trend of Go language is still very stable. In this regard, the situation in China is significantly better than abroad. In recent years, more and more domestic developers have started to learn and experiment with the Go language, and more and more domestic Internet companies and software companies have started to embrace and use the Go language. The author believes that the market share of Go in China is still far from the top, and there is still a lot of potential behind.</p>
<h2 id="year-in-review">Year in Review</h2>
<p>Now that we&rsquo;ve covered the big trends, let&rsquo;s talk about what&rsquo;s been updated in 2021.</p>
<p>As a rule, the Go language is updated with a minor version in February and a minor version in August each year. In 2021, the official team released versions 1.16 and 1.17 of the Go language on time. Due to space limitations, we will only discuss the updates that seem to be the most important or significant here.</p>
<h3 id="new-official-website">New official website</h3>
<p>As Go language fans know, the official website of Go language is golang.org, however, due to some network reasons, domestic users have some difficulties to access this website. But after all, the Go language user community in China is very large, so the official Go language team (hereinafter referred to as Go team) launched a China-only official website some years ago: golang.google.cn.</p>
<p>However, in February 2019, the Go team registered a new domain name: go.dev. The .dev here is a domain extension that Google came up with on its own. Apparently, this domain name is very short and easy to remember. Since then, the Go team has been gradually consolidating the content of golang.org and related sites under go.dev, in an effort to unify the many scattered official Go components.</p>
<p>On the Go language&rsquo;s 12th birthday, the Go team published a special blog post in which they announced a major revamp of the go.dev website. This marked the completion of the integration of content about go.dev. In addition to the main content that had been under golang.org (such as download instructions, documentation, tutorials, official blog, playground, etc.) being moved to go.dev, godoc.org, the Go package archive, has been merged into go.dev with a new secondary domain name of pkg.go.dev.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/01/09/f7e9e6e0f7bc4bf083a62c63ab52ea90.png" alt="image"></p>
<p>You can take a look at pkg.go.dev, which is now very powerful. Not only can we easily search and view Go packages (both official and third-party) and their code and documentation, but we can also quickly find out the latest version of a package, its update date, distribution protocol, module management, repository address, and more, and easily see what other packages it uses and what packages are using it. It&rsquo;s no exaggeration to say that it&rsquo;s enough to use it to find Go packages.</p>
<p>Finally, and crucially, our access to go.dev in China is currently unhindered.</p>
<h3 id="module-management">Module Management</h3>
<p>This year, the Go team has put a lot of effort into module management for the Go language. It&rsquo;s safe to say that the module management features are now quite usable.</p>
<p>As a quick explanation, we are talking about modules in the same sense as we are talking about packages. Since the official go module mechanism was created, these two terms have been fully equivalent in the context of Go module management. They both refer to a collection of code that can be packaged and distributed for use by other programs. The only difference is that packages are more of an informal term for people, while modules are the official term.</p>
<p>There is a related term, package. A package is a number of source files in the same file directory, all of which have the exact same package declaration statement. Multiple packages can belong to the same module. Conversely, a module can be further divided into multiple packages according to the function, hierarchy, and other logic. Of course, a module can have only one package in it. And a package will definitely belong to a module.</p>
<p>So, when Go&rsquo;s official module management feature comes on board, we have a multi-level code organization scheme from modules to packages (and sub-packages) to source files. Where the source file is the smallest unit of code compiled, the code package is the smallest unit of code organization, and the module is the smallest unit of code distribution. Once you understand this, you can usually get started with the Go language&rsquo;s module management tools pretty quickly.</p>
<p>Due to the limitations of the topic, let&rsquo;s put aside the module management methods and techniques and focus on the Go team&rsquo;s updates in this area.</p>
<h3 id="system-environment-variable-go111module">System environment variable GO111MODULE</h3>
<p>If you have used older versions of the Go language, you will know about the GO111MODULE system environment variable. Its purpose is to make it easier for developers to switch between the original GOPATH mechanism and the new go module mechanism. This has always been the practice of the Go team.</p>
<p>When a new mechanism is implemented and released, they provide optional features for developers to try out for a while and improve the mechanism in the meantime. During this process, the Go team adjusts the default values of the corresponding system environment variables in new versions of Go as the mechanism matures.</p>
<p>For example, they initially set the default value to off (i.e., off by default). Once most of the bugs are fixed and the functionality is pretty much improved, they will set the default to auto. After the mechanism is basically mature, they will also set the default value to on (i.e., the default is on). Finally, once the mechanism has been refined, the Go team will remove the corresponding system environment variable (and the corresponding toggle) from the new version of Go, and switch to the new mechanism entirely.</p>
<p>The system environment variable GO111MODULE has been around for a few years now. This shows that the go module has had a few bumps in the road since its inception. However, the Go team has finally set the default value of GO111MODULE to on in version 1.16 of the Go language. This is a sign of the maturity of the go module mechanism. At the same time, it also shows that the Go team has started to popularize the go module mechanism.</p>
<p>From the standard tools provided by Go, all the old go commands have been fully adapted to the go module mechanism. For example, the go get command can now be used to adjust Go module dependencies, the go install command can now be used to download, compile, and install Go modules, the go test command can now be used to compile and test Go modules, and so on.</p>
<h3 id="profiles-for-go-modules-module-graph-pruning">Profiles for Go modules: Module graph pruning</h3>
<p>Let&rsquo;s talk about the Go module configuration files. As you may already know, the implementation of the go module mechanism revolves around the configuration files go.mod and go.sum. These two configuration files are automatically generated by the go mod command in the root directory of the current Go module (or main module).</p>
<p>The first change is that the direct dependency module record and the indirect dependency module record for the main module have been made complete in the go.mod file. (Directly dependent modules and indirectly dependent modules will be referred to collectively as dependency modules in the following)</p>
<p>Prior to version 1.17, the Go team had been tweaking the way dependency modules were documented appropriately. For example, in version 1.16, the go.mod file did not record indirect dependency modules. In this case, some go commands (such as go build) would need to go through and find all the modules that the main module might depend on. Even if a module is only tied to a real dependent module, but is not actually dependent on the main module, it will still be recognized as a dependent module by those go commands. But in fact, the dependency should be in quotes here.</p>
<p>Therefore, if the &ldquo;dependent&rdquo; module is not yet stored on the local computer, the go command will report an error. It will report &ldquo;Missing such-and-such &lsquo;dependency&rsquo; module&rdquo;, i.e., the &ldquo;dependency&rdquo; module is not found on the local machine. This obviously doesn&rsquo;t make sense. Since it is not actually used, it should be ignored. Why bother looking for it? Moreover, you shouldn&rsquo;t report an error if you can&rsquo;t find it.</p>
<p>In fact, it is unlikely that this will happen. But since there was a lot of skepticism in the Go community about this issue, the Go team finally overhauled and fixed it in version 1.17.</p>
<p>If the main module&rsquo;s go.mod file declares a Go version of 1.17 or higher, then the go mod command will record all direct and indirect dependencies of the main module in that file. This way, other go commands can look for only those modules that are documented here. Clearly, the go mod command has a much more logical division of labor with the other go commands. This behavior in the new version is also known as module graph pruning ( <a href="https://go.dev/ref/mod">https://go.dev/ref/mod</a> ).</p>
<p>Although module graph pruning may cause the main module&rsquo;s go.mod file to record much more than before, it is generally not a big problem. Moreover, the new version of the go.mod file has been significantly optimized in terms of readability.</p>
<p>In addition, the go mod tidy command adds support for the -go flag in order to make updating the go.mod file smoother. We can append this flag when executing the command, and use it to modify the declaration of the Go version used in the go.mod file (as reflected in the go command), e.g.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">go mod tidy -go<span class="o">=</span>1.17
</code></pre></td></tr></table>
</div>
</div><p>When such a command is executed, not only will the go directives in the go.mod file be changed, but the corresponding dependent module records will also be modified with the version specified here (as we said earlier).</p>
<h3 id="go-modules-configuration-file-new-directives">Go module&rsquo;s configuration file: new directives</h3>
<p>In version 1.16, the Go team added a new directive to the go.mod file. The name of this directive is retract, which we can think of here as &ldquo;retract&rdquo;.</p>
<p>The retract directive is used when we have already released a version of the current module to the public, but for some reason want to retract it.</p>
<p>What this directive does is tell the go command that &ldquo;a version of the current module should not be used by others&rdquo;. We can tell an old version to be &ldquo;retracted&rdquo; as new versions are released to the public. For example, we want to commit version 1.2.3 of module A and tell the public that &ldquo;version 1.2.2 of this module has a high-risk vulnerability&rdquo; and that it is highly recommended that people do not use it anymore. Then, we can add to module A&rsquo;s (version 1.2.3) go.mod file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mod" data-lang="mod"><span class="c1">// 此版本存在一个高危漏洞，请尽快升级！
</span><span class="c1"></span><span class="n">retract</span> <span class="n">v1</span><span class="p">.</span><span class="mf">2.2</span>
</code></pre></td></tr></table>
</div>
</div><p>After the 1.2.3 version of this module has been successfully pushed to the repository, the user will see a warning on the display when trying to update the module&rsquo;s information with some go command (e.g. go list -m -u).</p>
<h3 id="configuration-files-for-go-modules-new-comments">Configuration files for Go modules: new comments</h3>
<p>The retract directive we just mentioned is used to &ldquo;retract&rdquo; a version of a module. The deprecation comment added to the go.mod file in version 1.17 of the Go language is used to deprecate an entire module.</p>
<p>When we want to upgrade the current module to a non-backward-compatible version (e.g., from v1 to v2), or when we want to drop maintenance of the current module altogether, we can consider adding deprecation comments to the module directive in the go.mod file, such as</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">
// Deprecated: use example.com/mod/v2 instead.
module example.com/mod
</code></pre></td></tr></table>
</div>
</div><p>The implication of the deprecation note here is that the mod module has been updated to a non-backward-compatible major version (v2) and that the old major version (v1) will not be further maintained. This is equivalent to advising and urging all developers who are using the v1 version to migrate to the v2 version.</p>
<p>To explain, the prefix &ldquo;// Deprecated:&rdquo; for deprecation comments is fixed. It should be followed by the corresponding deprecated note, and that note cannot be written on a new line. However, the entire deprecated comment can be written to the right of the module directive, in addition to being immediately above it, e.g.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">module example.com/mod // Deprecated: use example.com/mod/v2 instead.
</code></pre></td></tr></table>
</div>
</div><p>Note that changes to the go.mod file need to be committed to the repository along with the v1 update of the current module. This is so that the comment will work and the user will see a prompt when trying to update the module information.</p>
<h2 id="standard-commands">Standard commands</h2>
<p>Regarding the Go language&rsquo;s built-in standard commands, in addition to the tweaks we&rsquo;ve already mentioned with the module management optimizations, the Go team has made further enhancements to them in terms of ease of use.</p>
<h3 id="go-install-command">go install command</h3>
<p>First, in version 1.16, Go officially improved the go install command to accept a version suffix (e.g., @v1.0.0) as a way to download, compile, and install (collectively, install) a particular version of a package of code. Where &ldquo;@&rdquo; must be the character at the beginning of the version suffix. The version number after it follows the semantic version specification ( <a href="https://www.infoq.cn/article/CEoMOxgW4X7GCYr4eUEi">https://www.infoq.cn/article/CEoMOxgW4X7GCYr4eUEi</a> ) (with some exceptions, see the version lookup documentation at <a href="https://go.dev/ref/mod">https://go.dev/ref/mod</a> ). The version number of the Go language itself actually follows this specification. In this case, we can use the go install command as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">go install example.com/cmd/pkg@v1.0.0
</code></pre></td></tr></table>
</div>
</div><p>The above command installs version 1.0.0 of the package example.com/cmd/pkg. If the package is executable (i.e., the main package), then the command will place the resulting executable in the directory pointed to by the system environment variable GOBIN (provided that this system environment variable is set). Otherwise, the command will place the generated archive (a file with the .a extension) into a dedicated build cache directory. In either case, however, the go install command will first place the relevant files it downloads into the module cache directory.</p>
<p>As you may already know, under the go module mechanism, the go install command usually looks for the go.mod file in the current directory or its parent directory first, and then installs the specified version based on the information recorded there for the corresponding package (if any). However, if we use the go install command with a version suffix, the command will ignore the go.mod file and install the version we explicitly specify.</p>
<h3 id="go-get-command">go get command</h3>
<p>Starting with version 1.16, Go officially recommends that developers use only the go install command to install packages under the go module mechanism. Although the go get command can also be used to install packages, it also modifies the corresponding go.mod file under the go module mechanism. This is why the author said earlier that &ldquo;the go get command can be used to adjust the dependencies of Go modules&rdquo;. Obviously, the two commands currently overlap in terms of functionality. This is likely to cause problems for developers.</p>
<p>Therefore, Go officials strongly advise developers to carry the -d flag when using the go get command. This flag causes the go get command to modify only the corresponding go.mod file (i.e., adjust the module&rsquo;s dependencies), without downloading, compiling, and installing it.</p>
<p>In fact, the go get command without the -d flag was deprecated in version 1.17 of the Go language. Also, in the upcoming 1.18 release, the go get command will have the -d flag enabled by default. That is, starting with 1.18, the go get command will behave as if it carried the -d flag even if we use it without the -d flag. This way, the go get command and the go install command can each do their own thing. Accordingly, commands like go build and go test will no longer modify any configuration files in the Go module.</p>
<p>By the way, when we use the go get command to adjust the dependencies of the current module, we can use the @none version suffix if we want to remove a direct dependency from the go.mod file.</p>
<p>In addition, version 1.16 of Go deprecates support for the -insecure flag in the go get command. This flag has been removed in Go 1.17. This flag was originally used to get Go code packages from insecure sites (such as sites based on the HTTP rather than HTTPS protocol), and to bypass security checks on modules. If we still need to use these features, we can do so by setting the system environment variable GOINSECURE, GOPRIVATE or GONOSUMDB.</p>
<h2 id="standard-library">Standard Library</h2>
<p>Here, we&rsquo;ll briefly talk about the changes in the Go language standard library. There are many changes, both big and small, but none of them are critical in the overall scheme of things. Therefore, the authors will only mention those new or deprecated packages here.</p>
<h3 id="3-new-code-packages-added">3 new code packages added</h3>
<p>Starting with version 1.16, the runtime/metrics package was added to the Go language&rsquo;s standard library. In short, this code package was introduced to make it easier for Go programs to get its various metrics on their own while they are running. There are many such metrics, related to garbage collection, memory usage, concurrent scheduling, etc. ReadMemStats function and the debug.GCStats structure, and is more general and efficient.</p>
<p>In addition, the io/fs package and the embed package were both introduced in version 1.16.</p>
<p>The io/fs package represents a new file system model, or rather a unified high-level abstraction of the file system. It has resulted in changes to a number of packages in the Go language standard library and new APIs, all for the benefit of the Go language and developers.</p>
<p>The embed package is used to embed additional resources in the Go executable, such as text files, image files, audio and video files, and other data files. Moreover, we can specify multiple files and even directories for this purpose. This involves the judicious use of the comment directive //go:embed.</p>
<p>I&rsquo;ve already briefly explained the io/fs and embed packages in a previous article in this series (i.e., Interpreting Go 2020: The Night Before the Change <a href="https://www.infoq.cn/article/CEoMOxgW4X7GCYr4eUEi">https://www.infoq.cn/article/CEoMOxgW4X7GCYr4eUEi</a> ), so I won&rsquo;t go over them again here. For developers who want to get the most out of these new packages, the authors strongly recommend carefully reviewing the documentation for the Go standard library and, if necessary, reading the relevant Go language source code.</p>
<h3 id="deprecated-ioioutil-packages">Deprecated io/ioutil packages</h3>
<p>The Go team has now decided that the io/ioutil package is a poorly defined and incomprehensible collection of programs. Therefore, starting with version 1.16 of the Go language, all of the functionality provided in this package (the main implementation code) has been migrated to other packages (such as the io and os packages). However, to maintain backward compatibility, the io/ioutil package will be retained and will provide the correct functionality as before. The following is a list of features migrated for this purpose.</p>
<ul>
<li>The functionality of io/ioutil.Discard has been moved to io.Discard.</li>
<li>The functionality of io/ioutil.NopCloser has been moved to io.NopCloser.</li>
<li>ReadAll has been moved to io.</li>
<li>the functionality of io/ioutil.ReadDir has been moved to os.ReadDir (note, however, that the type of the first result value returned is different, the former being []fs.FileInfo and the latter being []os.DirEntry)</li>
<li>The functionality of io/ioutil.ReadFile has been moved to os.ReadFile.</li>
<li>the functionality of io/ioutil.TempDir has been moved to os.MkdirTemp; * the functionality of io/ioutil.TempDir has been moved to os.</li>
<li>The function of io/ioutil.TempFile has been moved to os.CreateTemp; * The function of io/ioutil.</li>
<li>The function of io/ioutil.WriteFile has been moved to os.</li>
</ul>
<h2 id="grammar">Grammar</h2>
<p>Version 1.17 of the Go language adds a small but powerful improvement: support for conversions from slices to array pointers. More specifically, slices of type []T can now be properly converted to array pointers of type *[N]T, e.g.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go">
<span class="nx">slice1</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span>
<span class="nx">array1</span> <span class="o">:=</span> <span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="kt">int</span><span class="p">)(</span><span class="nx">slice1</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>However, it is important to note that the second line of code here will immediately throw a runtime exception (i.e. panic) if we are given an array pointer of an improper type. For example, if the value (representing the length of the array) in our given type is greater than the actual length of the slice to be converted, as in the code (*[6]int)(slice1), then the program will crash due to the exception thrown here (if not handled properly).</p>
<h2 id="about-performance">About Performance</h2>
<p>As a rule, the Go team improves some aspect of the Go language&rsquo;s performance every year. This year is certainly no exception.</p>
<p>In version 1.16, the Go language&rsquo;s linker has received a further performance boost. On a 64-bit Linux operating system, linking is 20-25% faster than in 1.15, and linking operations take up 5%-15% less memory space. On other computing platforms, such performance improvements are even greater. In addition, Go programs typically produce smaller binaries after processing, thanks to more aggressive symbol pruning. By the way, the computing platform in question is a combination and umbrella term for computing architectures (e.g. 386, amd64, arm, etc.) and operating systems (e.g. windows, linux, darwin, etc.). darwin is the Go language codename for the macOS operating system.</p>
<p>In version 1.17, the Go team implemented a new way to pass function argument values and result values using registers instead of the stack. As you know, the stack refers to a block of space in memory. So, using the stack usually allows you to not care about the differences between individual computing architectures (and different CPU models). However, its disadvantage is also obvious, namely, poor performance. As you may know, registers are memory devices in the CPU. Therefore, using registers forces you to pay attention to something more fundamental like the compute architecture. This is obviously the more difficult but better way. All in all, this new approach improves the performance of Go programs by about 5%. Also, Go programs typically produce binaries that are about 2% smaller. The Go language is now automatically enabled on 64-bit computing architectures on Linux, macOS, and Windows operating systems.</p>
<h2 id="other-updates">Other Updates</h2>
<p>As you know, Apple has already introduced its own ARM computing architecture CPU and used it in its own computers. As a result, a new computing architecture-OS combination (i.e. computing platform) has emerged: darwin/arm64.</p>
<p>Previously, in the Go language, the iOS operating system was codenamed darwin/arm64. At that time, Apple only used ARM computing architecture CPUs for its smartphone iPhone and tablet iPad. However, today is different, so the Go team has adapted the new combination in version 1.16 of the Go language.</p>
<p>They have identified the computing platform designation for the macOS operating system as darwin/arm64, while the original iOS operating system designation has been renamed ios/arm64. This means that there is a new OS codename in the context of the Go language: ios. Together with darwin, it now covers the major operating systems released by Apple.</p>
<p>In addition, Go 1.16 adds a computing platform codenamed ios/amd64. This is another new combination. This computing platform targets iOS emulators running on top of the macOS operating system, which is based on the 64-bit AMD computing architecture.</p>
<p>Later, in version 1.17, the Go language supported a new combination of Windows operating systems and 64-bit ARM computing architectures, codenamed windows/arm64. This also reflects the convergence of the mobile computing platform with the former desktop computing platform.</p>
<p>Well, the above is a brief overview of the main changes in the Go language in 2021. In the author&rsquo;s opinion, the most exciting changes for developers in the year are the significant improvements to the module management features and related commands. Of course, the three new packages in the Go standard library are also important.</p>
<h2 id="future-outlook">Future Outlook</h2>
<p>In recent years, the number of Go language users in China has been growing dramatically. Along with this growth has come a lot of dissatisfaction with the Go language. We often joke that &ldquo;a programming language that isn&rsquo;t already complaining is definitely not a popular language&rdquo;. It&rsquo;s a joke, but there&rsquo;s some truth to it. Once people use it more, they will definitely find one or another problems in a programming language. No one is perfect, and this is especially true for programming languages.</p>
<p>For Go, there are three main issues that Chinese developers complain about, namely: module management tools, generic syntax support (hereinafter referred to as Go generics), and the way program errors are handled.</p>
<p>The Go team has tried to address the handling of program errors, but has yet to find a solution that satisfies them. Moreover, according to the author&rsquo;s estimation, the earliest the Go team will bring Go generics back to the table is when it is complete and stable enough. Therefore, it will not be discussed in this article.</p>
<p>So, let&rsquo;s take a look at the future of the Go language, starting with the first two issues.</p>
<h3 id="module-management-tools">Module Management Tools</h3>
<p>As mentioned earlier, the Go team has actually pretty much solved the module management tools. However, in 2022, there will be some improvements to the Go language in this area.</p>
<p>For example, in the 1.18 release next February, the Go language will support a new mode called workspace mode. If you&rsquo;ve been using Go, you may remember the workspace directory under the GOPATH mechanism. But the workspace mode here is a completely different thing from the workspace directory. So please be careful and don&rsquo;t get confused.</p>
<p>By default, the standard commands under the go module mechanism will look for dependencies of the current module on the network. They will look at both public repositories supported by the Go language (such as Github) and private repositories that we have built ourselves (provided we have set them up accordingly).</p>
<p>However, when we maintain multiple Go modules with dependencies on our local machine, we often want to make changes in the dependent module instantly available to the modules that depend on it (the main module), without pushing the changes to the repository.</p>
<p>With the current go module mechanism, we can satisfy this need by adding the replace directive to the go.mod file of the main module. The replace directive creates a mapping between the import path of a dependent module and its storage path on the local machine, like this.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">replace example.com/mod <span class="o">=</span>&gt; /Users/haolin/GoWorkspace/mod
</code></pre></td></tr></table>
</div>
</div><p>The above command creates a map for a module with an import path of example.com/mod, pointing its import path to its storage path on the local computer (with the macOS operating system). This way, the go command will be able to find the dependent module named mod without any problems when compiling the main module. Then, when we run the main module, it will promptly reflect the new changes in the dependent module (on the local computer).</p>
<p>This solution obviously works. But it introduces a problem: it mixes private configuration for the local development environment with public configuration for the whole project (i.e. it&rsquo;s all placed in the go.mod file). This forced us to carry the private configuration with us when we submitted the public configuration to the code repository. This private configuration does not do any good for other developers to understand, use and improve the current module, and it pollutes the public configuration. More importantly, it may also make it impossible for other developers to compile the module successfully. This is because the path to the dependent module store in its private configuration is likely to be incorrect on other computers.</p>
<p>This is the main reason why the go module mechanism&rsquo;s workspace pattern was created. At the time of writing (i.e., early December 2021), this feature is still under development and some of the things are not yet fully defined.</p>
<p>However, the pattern is expected to involve a new standard command go work, a new configuration file go.work, and a new configuration command directory. In short, the go work command can be used to create a workspace directory with several Go modules. The go work command also generates a go.work file in such a directory and adds the corresponding directory directive to it. This go.work is the file that holds the local development environment configuration. It can also have the replace directive in it. This way, we can exclude the go.work file when committing and pushing code, and thus avoid uploading private configuration.</p>
<h3 id="generic-syntax-support">Generic syntax support</h3>
<p>Generics are also often referred to as type parameters. What we mean here by generic syntax support is actually support for developer-defined generic types and generic functions.</p>
<p>For the record, the authors do not want to go into the definition and design of generics here. Because that is a very large topic, and I am afraid that even a full article may not be enough to cover it. The author just wants to briefly explain his thoughts on Go generics in two lines.</p>
<p>The first line, the programming style line.</p>
<p>The Go language has actually had some support for generics for a long time. Types like arrays, slices, and maps that are built-in to the language and can be used as data containers (hereafter referred to as container types) actually support generics from the beginning, such as []Int and map[int]string. However, the standard library-level container types that were added later do not have generic support, such as the types List and Ring in the container package. This is because there is no syntax for custom generics in Go.</p>
<p>Go is a minimalist, engineering-oriented, general-purpose programming language. This is deeply reflected in the language syntax, standard libraries, and standard tools. When a concept, a syntax, or a feature is formally introduced, it will not overlap or be confused with the rest of the Go language. That is, they are all orthogonal to each other.</p>
<p>Go programs can have interface declarations in them. We can say that interfaces take on the role of type abstraction and type constraints in Go programs. However, the arrival of custom generics will change this division of responsibilities.</p>
<p>By design, custom generics in the Go language will join with interfaces to form new orthogonal combinations that will bring out much more powerful type abstraction than before. It is no exaggeration to say that this will give the Go language a dimensional boost in this area. It is similar to moving from a photo based on a two-dimensional presentation to a holographic projection based on a three-dimensional presentation.</p>
<p>However, while we should rejoice, we should also be prepared. This dramatic shift will inevitably lead to a steep increase in program complexity and new challenges for the Go language and Go program simplicity. While the Go team has gone to great lengths to simplify the syntax of custom generics and minimize the associated modifications that come with them, as evidenced by the several version updates to the Go generic design scheme, the significant impact on the Go language and its programming style is inevitable. For the average developer, the least we can do is get used to the square brackets &ldquo;[&rdquo; and &ldquo;]&rdquo; in the generic definition, the vertical line symbol &ldquo;|&rdquo; and the wavy symbol &ldquo;~&rdquo; in the new interface definition, and the symbols &ldquo;~&rdquo;, and so on. This obviously puts more of a mental burden on us, at least for developers who have not been exposed to generics.</p>
<p>Finally, generics, like other syntaxes that have great appeal, are sure to tempt developers to use them everywhere, even abuse them. Such abuse is likely to mean a deep hole for the developers who maintain the program afterwards. This is the main reason why there is very little syntactic sugar in the Go language.</p>
<p>Second line, the backwards compatibility line.</p>
<p>Like the module management tools, the Go language&rsquo;s generic syntax support is a well-worn issue. Developers have been clamoring for it for years, probably for years. Even if it&rsquo;s only been 4 years since &ldquo;the Go team agreed to add generics to the Go language&rdquo;.</p>
<p>The Go team released the Go2 draft with generic syntax support in late 2018. After that, there were several tweaks and refinements until August 2021, when the Go team released a final design: the Type Parameters Proposal (<a href="https://github.com/golang/proposal/blob/master/design/43651-type-parameters.md)">https://github.com/golang/proposal/blob/master/design/43651-type-parameters.md)</a>. At this point, a generic model that closely matches the Go language was officially released.</p>
<p>In fact, the 1.17 release of Go already contains some code related to custom generics. But they are not available to the public. As you can see, the Go team was very careful about this major improvement. They are taking one small step at a time.</p>
<p>Rob Pike, the founder of the Go language, said that &ldquo;adding Go generics is the single biggest change since the official release of the Go language&rdquo;. As a result, even Go 1.18 will only include a syntax that supports custom generics, and will barely include changes to custom generics in its standard library. Except for a code package called constraints, which is the basis for writing custom generics. Some relevant changes will be made first in the experimental module golang.org/x/exp. This experimental module does not guarantee backwards compatibility. This is an absolute guarantee of backwards compatibility for the official release of the Go language.</p>
<p>If nothing else, we can write code with generics using version 1.18 of the Go language. However, we will have to wait until Go 1.19, or even Go 1.20, if we want to use Go generics without any problems. Only then will Go&rsquo;s official generic programming best practices be available, and the various generic-related packages in the standard library will be ready. And, since the changes to generics are relatively large, it will be hard for those popular third-party tools to catch up anytime soon. For now, it&rsquo;s all about taking your time.</p>
<p>The Go team believes that maintaining stability and backward compatibility is the most important thing. The authors couldn&rsquo;t agree more. What&rsquo;s more, the Go team&rsquo;s Go generic design solution is quite good, and only equally good implementation code can match it. So, don&rsquo;t be in a hurry on this one. Good things come in small packages. We&rsquo;ve waited so long anyway, we&rsquo;re not afraid to wait a little longer.</p>
<p>In short, the authors strongly recommend that you actively experience Go generics, and those experimental generic packages, in the next year. But at the same time, the author also recommends that you don&rsquo;t take too big a step to avoid getting hurt.</p>
<h3 id="other-expectations">Other expectations</h3>
<p>In addition to the above-mentioned updates related to module management and Go generics, the Go team will be making a number of improvements in version 1.18 of the Go language. Here is a brief list of some of the more notable changes.</p>
<ul>
<li>Fuzzing: This will be a new form of program testing supported by the Go language, also known as fuzzy testing. This test automatically generates input data (usually random) that matches the program&rsquo;s requirements, and makes continuous calls to the program. The purpose of this is to test whether that program reacts as expected to various input data (including non-normal data). Such random data will certainly be much more comprehensive than the input data provided manually by the developer. Therefore, fuzzy testing usually allows for a more thorough examination of the program. To support fuzzy testing, the go test command accepts the new token -fuzz, a new test function naming format FuzzXxx is added to the test file, and a new type F and a set of new methods are added to the testing package.</li>
<li>Information embedded in files: The new go command will embed version control information into the binary file, including the current checked-out revision, commit time, and a flag indicating the status of the current file (e.g., &ldquo;edited&rdquo;, &ldquo;untracked&rdquo;, etc.). &quot; etc.). If the Go project is using one of the major version control systems (Git, Mercurial, Bazaar, etc.), this is turned on by default. To ignore this message, we can append the flag -buildvcs=false to the go command. In addition, the embedded messages will contain some build-related flags (which can be ignored with the flag -buildinfo=false). To read this information, we can either run the go version <code>-m &lt;file&gt;</code> command, or call the runtime/debug.ReadBuildInfo function, or use the new debug/buildinfo package. The author remembers that we used to manually add the above information to the source code of Go programs for ease of deployment and maintenance, and provide external markers to print them. Well, now this work can finally be automated.</li>
<li>A new method for locks: the TryLock method. The type sync.Mutex will own this method. If the current goroutine already holds the lock when we call this method, then the method will immediately return the result value true, without blocking the current goroutine. In addition, the sync.RWMutex type will also have a TryRLock method to try to lock the read lock within it. This method implements a feature that developers (including authors) have been waiting for. Until now, it was difficult to find out if the current goroutine already held a lock (repeated calls to the Lock method of that lock would cause the current goroutine to block).</li>
</ul>
<p>The above updates are what the authors are most looking forward to and represent their personal opinions only. The authors believe that different developers will have different expectations for the new version of the Go language. A more comprehensive and detailed description of the Go 1.18 update can be found at ( <a href="https://tip.golang.org/doc/go1.18">https://tip.golang.org/doc/go1.18</a> ) (if Go 1.18 is officially released by the time you read this, try visiting ( <a href="https://go.dev/doc/go1.18">https://go.dev/doc/go1.18</a> ))</p>
<p>Also, of course, the author is looking forward to a larger presence of the Go language in China and a larger and more diverse technical community there. In fact, such a trend already exists. But the author still hopes to add to this trend.</p>
<h2 id="summary">Summary</h2>
<p>Okay, let&rsquo;s quickly recap.</p>
<p>If there&rsquo;s one word to represent the Go language in 2021, it&rsquo;s &ldquo;stable&rdquo;.</p>
<p>As Go fans know, the Go team has been building up its strength in recent years. Finally, this year, Go&rsquo;s module management features have been significantly improved, and a new file system model has been added to the standard library. The problem of packaging resource files, which used to cause a lot of inconvenience, was solved with the addition of the embed code package.</p>
<p>Like other enthusiasts, the authors have some concerns while looking forward to Go generics. We were worried that Go generics would break the backwards compatibility of the Go language, that the syntax of Go generics would be too complex, and that its arrival would make Go programs significantly more difficult to develop and read. Fortunately, thanks to the Go team&rsquo;s preparation and design expertise, all of these fears have disappeared. Moreover, the authors are confident that the Go team will follow up with enough useful best practices to help us use Go generics more correctly and efficiently.</p>
<p>If the key word for the Go language update in 2021 is &ldquo;module management&rdquo;, then the key word for its update in 2022 must be &ldquo;(custom) generics&rdquo;. However, both these larger updates and the relatively small improvements not mentioned in this article are making Go a better general-purpose programming language.</p>
<p>To developers of Go programs, I say &ldquo;we should have enough faith in the Go language and the Go team to believe that it and they will both be stable&rdquo;. On the other hand, if you haven&rsquo;t used the Go language, then the authors would strongly recommend that you give it a try. Download the Go language from ( <a href="https://go.dev/dl/">https://go.dev/dl/</a> ) and install it on your computer right now!</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/golang/">golang</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-01/angularjs-end-of-life/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">AngularJS End of Life Cycle</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-01/julia-2021/">
            <span class="next-text nav-default">Interpreting Julia&#39;s 2021: Moving Toward a Mainstream Programming Language</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
