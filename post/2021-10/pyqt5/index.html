<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Python GUI framework PyQt5 - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="There is not really much software that uses Python to develop graphical interfaces. Compared to GUI interfaces, probably Web way applications are more popular. But for other programming languages like me you such as C# or WPF may not be a good tool. Common GUI frameworks PyQt5: Qt is a cross-platform C&#43;&#43; GUI library. QT was once owned by Nokia and then sold to Digia, a Finnish software company. Oyj." /><meta name="keywords" content="Python, Pyqt5, QT" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-10/pyqt5/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Python GUI framework PyQt5" />
<meta property="og:description" content="There is not really much software that uses Python to develop graphical interfaces. Compared to GUI interfaces, probably Web way applications are more popular. But for other programming languages like me you such as C# or WPF may not be a good tool. Common GUI frameworks PyQt5: Qt is a cross-platform C&#43;&#43; GUI library. QT was once owned by Nokia and then sold to Digia, a Finnish software company. Oyj." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-10/pyqt5/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-10-17T15:38:17+08:00" />
<meta property="article:modified_time" content="2021-10-17T15:38:17+08:00" />

<meta itemprop="name" content="Python GUI framework PyQt5">
<meta itemprop="description" content="There is not really much software that uses Python to develop graphical interfaces. Compared to GUI interfaces, probably Web way applications are more popular. But for other programming languages like me you such as C# or WPF may not be a good tool. Common GUI frameworks PyQt5: Qt is a cross-platform C&#43;&#43; GUI library. QT was once owned by Nokia and then sold to Digia, a Finnish software company. Oyj."><meta itemprop="datePublished" content="2021-10-17T15:38:17+08:00" />
<meta itemprop="dateModified" content="2021-10-17T15:38:17+08:00" />
<meta itemprop="wordCount" content="2765">
<meta itemprop="keywords" content="python,qt," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Python GUI framework PyQt5"/>
<meta name="twitter:description" content="There is not really much software that uses Python to develop graphical interfaces. Compared to GUI interfaces, probably Web way applications are more popular. But for other programming languages like me you such as C# or WPF may not be a good tool. Common GUI frameworks PyQt5: Qt is a cross-platform C&#43;&#43; GUI library. QT was once owned by Nokia and then sold to Digia, a Finnish software company. Oyj."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Python GUI framework PyQt5</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-10-17 15:38:17 </span>
        <div class="post-category">
            <a href="/categories/skills/"> skills </a>
            </div>
          <span class="more-meta"> 2765 words </span>
          <span class="more-meta"> 6 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#common-gui-frameworks">Common GUI frameworks</a></li>
        <li><a href="#pyqt5-introduction">PyQt5 Introduction</a></li>
        <li><a href="#installation-of-pyqt5">Installation of PyQt5</a>
          <ul>
            <li><a href="#install-pyqt5">Install PyQt5</a></li>
            <li><a href="#configuration-of-qt-designer">Configuration of Qt Designer</a></li>
            <li><a href="#qtdisigner-configuration">QtDisigner Configuration</a></li>
            <li><a href="#pyuic-configuration">PyUIC Configuration</a></li>
            <li><a href="#pyrcc-configuration">PyRCC Configuration</a></li>
          </ul>
        </li>
        <li><a href="#pyqt5-usage-examples">PyQt5 Usage Examples</a></li>
        <li><a href="#pyqt5-in-action">PyQt5 in action</a>
          <ul>
            <li><a href="#design-an-interface-using-qt-designer">Design an interface using Qt Designer</a></li>
            <li><a href="#convert-ui-files-to-py-files">Convert .ui files to .py files</a></li>
            <li><a href="#calling-the-maindialog">Calling the MainDialog</a></li>
            <li><a href="#package-the-code-into-an-exe-file">Package the code into an exe file</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>There is not really much software that uses Python to develop graphical interfaces. Compared to GUI interfaces, probably Web way applications are more popular. But for other programming languages like me you such as C# or WPF may not be a good tool.</p>
<h2 id="common-gui-frameworks">Common GUI frameworks</h2>
<ul>
<li><a href="https://riverbankcomputing.com/software/pyqt/intro">PyQt5</a>: <a href="https://www.qt.io/">Qt</a> is a cross-platform C++ GUI library. QT was once owned by Nokia and then sold to Digia, a Finnish software company. Oyj. PyQt5 is a Python interface based on Digia&rsquo;s Qt5, and consists of a set of Python modules. It runs on multiple platforms, including Unix, Windows, and Mac OS.</li>
<li><a href="https://doc.qt.io/qtforpython/index.html">Pyside6</a>: Pyside is the official Python package provided by QT, the last version is Pyside2, corresponding to QT5, the latest version of the naming rules have been adjusted, changed to Pyside6, corresponding to QT6 version. As the official production is more promising, the disadvantage is that the release is late and there is not as much information on the Internet as PyQt5.</li>
<li><a href="https://wiki.python.org/moin/TkInter">Tkinter</a>: Python built-in GUI framework , using TCL implementation , Python embedded in the TCL interpreter , use it without installing additional extension packages , direct import , cross-platform . The downside is that the UI layout all by code, only 15 common components, the display effect is simple.</li>
<li><a href="https://github.com/PySimpleGUI/PySimpleGUI">PySimpleGUI</a>: PySimpleGUI is a layer wrapper of Tkinter. Implementing a custom GUI using PySimpleGUI requires much less code than writing the same GUI directly using Tkinter.</li>
<li><a href="https://wxpython.org/">WxPython</a>: wxPython is a Python language binding to the popular wxWidgets cross-platform GUI tool library. Used more widely, cross-platform, written in C++, with little documentation, users may then need to make some adjustments to the GUI code in different platforms according to the programming content. Problems are not easy to solve, code layout control, not intuitive.</li>
<li><a href="https://pypi.org/project/wax/">Wax</a>: based on wxPython , a package made to overcome the problems of wxPython.</li>
<li><a href="https://kivy.org/#home">Kivy</a>: mainly for multi-touch programs, smartphones tablets, etc., also on systems without touch screen functionality, full platform support (Windows, Linux, Mac OS X, Android and iOS.) written in Python and cython, Chinese support Poor Chinese support, you need to download the Chinese library and make your own path.</li>
<li><a href="https://beeware.org/">BeeWare</a>: Write once. Deploy everywhere.</li>
<li><a href="https://github.com/pybee/toga">Toga</a>: a GUI toolkit for developing native apps using Python. Toga consists of a library of base components with shared interfaces to simplify platform-independent GUI development. toga is available for Mac OS, Windows, Linux ( GTK) as well as mobile platforms such as Android and iOS.</li>
<li><a href="https://github.com/ChrisKnott/Eel">Eel</a>: A lightweight Python library for making simple offline HTML/JS GUI applications similar to (but lighter than) Electron, with full access to Python functions (capabilities) and libraries. Full access to Python features and libraries.</li>
<li><a href="https://github.com/zoofIO/flexx">Flexx</a>: a pure Python toolkit for creating GUI applications. It uses Web technologies for rendering the interface. You can use Flexx to create desktop applications, as well as export an application to a standalone HTML document. Because it is developed in pure Python, Flexx is cross-platform. All you need is Python and a browser to run it.</li>
<li><a href="https://github.com/r0x0r/pywebview/">pywebview</a> is a lightweight cross-platform wrapper (wrapper) around the webview component that allows HTML content to be displayed in its own native GUI window. It allows you to use Web technologies in your desktop applications while hiding the fact that the GUI was built using a browser to the greatest extent possible.</li>
<li><a href="https://github.com/nucleic/enaml">enaml</a>: A Python framework that allows you to implement high-quality GUI interfaces with minimal effort, and a unique programming language. enaml combines a declarative language with a constraint-based layout system, making it easy for users to define flexible enaml applications can run on any platform that supports Python and Qt.</li>
</ul>
<p>Personal thoughts: too much to learn, first learn PyQt5, the reason is that there is more information, learn the rest of friends and then learn pyside6, and finally look at PySimpleGUI, to see if you can solve some simple problems.</p>
<h2 id="pyqt5-introduction">PyQt5 Introduction</h2>
<p>PyQt is a Python language implementation of the Qt framework, developed by Riverbank Computing, one of the most powerful GUI libraries.PyQt provides a collection of well-designed window controls, each PyQt control corresponds to a Qt control, so PyQt&rsquo;s API interface is close to Qt&rsquo;s API interface, but PyQt no longer uses the QMake system and Q_OBJECT macros.</p>
<p>PyQt5 is available in GPL and commercial versions. Free developers can use the free GPL license, and if they need to use PyQt for commercial applications, they must purchase a commercial license.</p>
<p>PyQt5 features are as follows.</p>
<ul>
<li>High-performance Qt-based GUI control set.</li>
<li>Ability to run cross-platform on Linux, Window and Mac OS systems.</li>
<li>Uses a signal slot mechanism for communication.</li>
<li>Full encapsulation of Qt libraries.</li>
<li>Can use a full-fledged IDE for interface design and automatic generation of executable Python code.</li>
<li>Provides a full range of window controls.</li>
</ul>
<p>PyQt5 is composed of a series of Python modules with over 620 classes and 6000 functions and methods, the main modules are as follows.</p>
<ul>
<li>QtCore: contains the core non-GUI functions. It is mainly used with time, files and folders, various data, streams, URLs, mime class files, processes and threads.</li>
<li>QtGui: Contains the windowing system, event handling, 2D graphics, basic drawing, fonts and text classes.</li>
<li>QtWidgets: Contains a set of UI elements for creating desktop applications.</li>
<li>QtMultimedia: Contains classes for handling multimedia content and calling the camera API.</li>
<li>QtBluetooth: Contains classes for finding and connecting to Bluetooth.</li>
<li>QtNetwork: Contains classes for network programming. These tools make TCP/IP and UDP development easier and more reliable.</li>
<li>QtPositioning: Contains classes for positioning, using satellites, WiFi and even text.</li>
<li>Enginio: Contains classes for accessing and managing the Qt Cloud through the client.</li>
<li>QtWebSockets: Contains classes for the WebSocket protocol.</li>
<li>QtWebKit: Contains a WebKit2-based web browser.</li>
<li>QtWebKitWidgets: Contains classes for the QtWidgets-based WebKit1.</li>
<li>QtXml: Contains classes for handling xml, providing tools for SAX and DOM APIs.</li>
<li>QtSvg: Provides classes for displaying the content of SVG, Scalable Vector Graphics (SVG), a graphics format that is based on Extensible Markup Language (XML) and is used to describe two-dimensional vector graphics (this quote is from Wikipedia).</li>
<li>QtSql: Provides tools for working with databases.</li>
<li>QtTest: Provides tools for testing PyQt5 applications.</li>
</ul>
<h2 id="installation-of-pyqt5">Installation of PyQt5</h2>
<p>Since I want to use fbs for packaging later, fbs may have compatibility problems for Python 3.7 and later, so I chose Python 3.6.8 to build the whole environment. The main content is: Python + PyCharm + PyQt5</p>
<h3 id="install-pyqt5">Install PyQt5</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="n">pip</span> <span class="n">install</span> <span class="n">pyqt5</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">pyqt5</span><span class="o">-</span><span class="n">tools</span>
</code></pre></td></tr></table>
</div>
</div><p>where pyqt5-tools is a drag-and-drop interface design tool for Qt Designer. The following errors may be reported during installation.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="n">qt5</span><span class="o">-</span><span class="n">tools</span> <span class="mf">5.15.2.1.2</span> <span class="n">has</span> <span class="n">requirement</span> <span class="n">click</span><span class="o">~=</span><span class="mf">7.0</span><span class="p">,</span> <span class="n">but</span> <span class="n">you</span><span class="s1">&#39;ll have click 8.0.1 which is incompatible.</span>
</code></pre></td></tr></table>
</div>
</div><p>Solution.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="n">pip</span> <span class="n">install</span> <span class="n">click</span><span class="o">~=</span><span class="mf">7.0</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="configuration-of-qt-designer">Configuration of Qt Designer</h3>
<p>Qt Designer is a drag-and-drop way to place controls and view their effects in real time for quick UI design.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/17/4daf45301b0841e3a991417608400d81.png" alt=""></p>
<p>Composition of the whole screen.</p>
<ul>
<li>The &ldquo;Widget Box&rdquo; on the left is a variety of components that can be dragged around freely.</li>
<li>The &ldquo;MainWindow - untitled&rdquo; form in the middle is the canvas.</li>
<li>The &ldquo;Object Inspector&rdquo; at the top right is the structure of the current UI.</li>
<li>The &ldquo;Property Editor&rdquo; in the middle of the right side allows you to set the properties of the currently selected component.</li>
<li>The &ldquo;Resource Browser&rdquo; at the bottom right can add various materials, such as pictures, backgrounds, etc.</li>
</ul>
<p>ui file (essentially a file in XML format), which can be used directly or converted into a .py file by pyuic5 tool.</p>
<h3 id="qtdisigner-configuration">QtDisigner Configuration</h3>
<p>In Pycharm, open File - Settings - Tools - External Tools in order, click + Create Tool and configure as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">Name: QtDisigner
Program : D:<span class="se">\P</span>rogram Files<span class="se">\P</span>ython36<span class="se">\L</span>ib<span class="se">\s</span>ite-packages<span class="se">\q</span>t5_applications<span class="se">\Q</span>t<span class="se">\b</span>in<span class="se">\d</span>esigner.exe <span class="c1"># 请根据实际修改</span>
Working directory: <span class="nv">$FileDir</span>$
</code></pre></td></tr></table>
</div>
</div><h3 id="pyuic-configuration">PyUIC Configuration</h3>
<p>PyUIC mainly replaces the .ui file generated by Qt Designer with a .py file.</p>
<p>In Pycharm, open File - Settings - Tools - External Tools, click + Create Tool and configure as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">Name: PyUIC
Program : D:<span class="se">\P</span>rogram Files<span class="se">\P</span>ython36<span class="se">\p</span>ython.exe <span class="c1"># 当前Python目录，请根据实际修改</span>
Arguments: -m PyQt5.uic.pyuic <span class="nv">$FileName</span>$ -o <span class="nv">$FileNameWithoutExtension</span>$.py
Working directory: <span class="nv">$FileDir</span>$
</code></pre></td></tr></table>
</div>
</div><h3 id="pyrcc-configuration">PyRCC Configuration</h3>
<p>PyRCC is mainly about replacing the written .qrc resource file with a .py file.</p>
<p>In Pycharm, open File - Settings - Tools - External Tools in order, click + Create Tool and configure as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">Name: PyRCC
Program: D:<span class="se">\P</span>rogram Files<span class="se">\P</span>ython36<span class="se">\p</span>yrcc5.exe <span class="c1"># 当前rcc工具目录，请根据实际修改</span>
Arguments: <span class="nv">$FileName</span>$ -o <span class="nv">$FileNameWithoutExtension$_rc</span>.py
Working directory: <span class="nv">$FileDir</span>$
</code></pre></td></tr></table>
</div>
</div><h2 id="pyqt5-usage-examples">PyQt5 Usage Examples</h2>
<p>Create a blank screen.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">import sys
from PyQt5.QtWidgets import QApplication, QMainWindow, QLabel

<span class="nv">app</span> <span class="o">=</span> QApplication<span class="o">(</span>sys.argv<span class="o">)</span>
<span class="nv">win</span> <span class="o">=</span> QMainWindow<span class="o">()</span>
win.setGeometry<span class="o">(</span>400, 400, 400, 300<span class="o">)</span>
win.setWindowTitle<span class="o">(</span><span class="s2">&#34;Pyqt5 Tutorial&#34;</span><span class="o">)</span>
win.show<span class="o">()</span>
sys.exit<span class="o">(</span>app.exec_<span class="o">())</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/17/f7c70821863c4f55afd1d97a437491b7.png" alt=""></p>
<p>Among them.</p>
<ul>
<li>Qapplication(): Every GUI must contain a Qapplication. argv means get command line arguments, if you don&rsquo;t need to get them, you can use [] instead.</li>
<li>QMainWindow(): Similar to a container (window) used to contain widgets such as buttons, text, input boxes, etc. arg identifier to get the arguments for the command line execution.</li>
<li>SetGeometry is used to define the dimensions of the QMainWindow() window, syntax: setGeometry(x, y, width, height ), where x,y is the coordinate point on the screen.</li>
<li>show(): used to display the window</li>
<li>exit(app.exec_()): set the window to run all the time to instruct to close it using the close button</li>
</ul>
<p>Common Widgets supported by PyQt5 are.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/17/fc95e1b087eb471bbb85ece49b3c25ac.png" alt=""></p>
<p>From top to bottom, from left to right: Qlabel, QcomboBox, QcheckBox, QradioButton, QpushButton, QtableWidget, QlineEdit, Qslider, QProgressBar</p>
<p>For setting text content using Pyqt5, we use Qlabel.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QApplication</span><span class="p">,</span> <span class="n">QMainWindow</span><span class="p">,</span> <span class="n">QLabel</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="n">win</span> <span class="o">=</span> <span class="n">QMainWindow</span><span class="p">()</span>
<span class="n">win</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
<span class="n">win</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&#34;Pyqt5 Tutorial&#34;</span><span class="p">)</span>

<span class="c1"># Label Text</span>
<span class="n">label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="n">win</span><span class="p">)</span>
<span class="n">label</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&#34;Hi this is Pyqt5&#34;</span><span class="p">)</span>
<span class="n">label</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

<span class="n">win</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/17/5f6e48ca56b047b3adc2968c548a6148.png" alt=""></p>
<p>Buttons and events.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QApplication</span><span class="p">,</span> <span class="n">QMainWindow</span><span class="p">,</span> <span class="n">QPushButton</span>


<span class="k">def</span> <span class="nf">click</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Hy Button is clicked!&#34;</span><span class="p">)</span>


<span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="n">win</span> <span class="o">=</span> <span class="n">QMainWindow</span><span class="p">()</span>
<span class="n">win</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
<span class="n">win</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&#34;Pyqt5 Tutorial&#34;</span><span class="p">)</span>

<span class="c1"># Button</span>
<span class="n">button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="n">win</span><span class="p">)</span>
<span class="n">button</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">button</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&#34;Hi! Click Me&#34;</span><span class="p">)</span>
<span class="n">button</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">click</span><span class="p">)</span>

<span class="n">win</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/17/fd4dfc1cd47647d2ad7fa239b99f97b4.png" alt=""></p>
<p>button.clicked.connect() executes a specific event after the button is clicked.</p>
<h2 id="pyqt5-in-action">PyQt5 in action</h2>
<p>Hands-on project: simple weather query software</p>
<h3 id="design-an-interface-using-qt-designer">Design an interface using Qt Designer</h3>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/17/a16cd26873714ad38c59d48d3a4ba40c.png" alt=""></p>
<p>The controls used are Button, GroupBox, Label, ComboBox, TextEdit, and two buttons queryBtn and clearBtn are defined to query and clear the weather data respectively. We need to bind the slot function, the method is as follows.</p>
<ul>
<li>Select Signal/Slot Editor in the bottom right corner of Qt Designer, click + to add</li>
<li>select queryBtn and clearBtn respectively, select signal clicked(), receiver Dialog and slot accept(), (slot function here do not know how to define, later in the code to modify)</li>
</ul>
<p>After finishing the above, save it as Weather.ui file.</p>
<h3 id="convert-ui-files-to-py-files">Convert .ui files to .py files</h3>
<p>PyQt5 supports the direct use of .ui files.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">PyQt5</span> <span class="kn">import</span> <span class="n">QtWidgets</span><span class="p">,</span> <span class="n">uic</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>

<span class="n">window</span> <span class="o">=</span> <span class="n">uic</span><span class="o">.</span><span class="n">loadUi</span><span class="p">(</span><span class="s2">&#34;mainwindow.ui&#34;</span><span class="p">)</span>
<span class="n">window</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">app</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>However, for better customization and modification of the above slot functions, you can use External Tools - PyUIC, which generates Weather.py, and actually runs the command as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">D:<span class="se">\P</span>rogram Files<span class="se">\P</span>ython36<span class="se">\p</span>ython.exe -m PyQt5.uic.pyuic Weather.ui -o Weather.py
</code></pre></td></tr></table>
</div>
</div><p>Among the slot functions to which we need to bind the two buttons.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="c1"># self.queryBtn.clicked.connect(Dialog.accept)</span>
<span class="c1"># self.clearBtn.clicked.connect(Dialog.accept)</span>
<span class="c1"># 修改为：</span>
<span class="bp">self</span><span class="o">.</span><span class="n">queryBtn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">Dialog</span><span class="o">.</span><span class="n">queryWeather</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">clearBtn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">Dialog</span><span class="o">.</span><span class="n">clearText</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>The final Weather.py reads as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># Form implementation generated from reading ui file &#39;Weather.ui&#39;</span>
<span class="c1">#</span>
<span class="c1"># Created by: PyQt5 UI code generator 5.15.4</span>
<span class="c1">#</span>
<span class="c1"># WARNING: Any manual changes made to this file will be lost when pyuic5 is</span>
<span class="c1"># run again.  Do not edit this file unless you know what you are doing.</span>


<span class="kn">from</span> <span class="nn">PyQt5</span> <span class="kn">import</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtGui</span><span class="p">,</span> <span class="n">QtWidgets</span>


<span class="k">class</span> <span class="nc">Ui_Dialog</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Dialog</span><span class="p">):</span>
        <span class="n">Dialog</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&#34;Dialog&#34;</span><span class="p">)</span>
        <span class="n">Dialog</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">600</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groupBox</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">(</span><span class="n">Dialog</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groupBox</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QRect</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">551</span><span class="p">,</span> <span class="mi">511</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groupBox</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&#34;groupBox&#34;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_2</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groupBox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_2</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QRect</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_2</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&#34;label_2&#34;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comboBox</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QComboBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groupBox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QRect</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">22</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&#34;comboBox&#34;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&#34;&#34;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&#34;&#34;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&#34;&#34;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textEdit</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QTextEdit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groupBox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textEdit</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QRect</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">491</span><span class="p">,</span> <span class="mi">411</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textEdit</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&#34;textEdit&#34;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">queryBtn</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="n">Dialog</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">queryBtn</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QRect</span><span class="p">(</span><span class="mi">490</span><span class="p">,</span> <span class="mi">560</span><span class="p">,</span> <span class="mi">93</span><span class="p">,</span> <span class="mi">28</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">queryBtn</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&#34;queryBtn&#34;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clearBtn</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="n">Dialog</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clearBtn</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QRect</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">560</span><span class="p">,</span> <span class="mi">93</span><span class="p">,</span> <span class="mi">28</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clearBtn</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&#34;clearBtn&#34;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">retranslateUi</span><span class="p">(</span><span class="n">Dialog</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clearBtn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">Dialog</span><span class="o">.</span><span class="n">clearText</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">queryBtn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">Dialog</span><span class="o">.</span><span class="n">queryWeather</span><span class="p">)</span>
        <span class="n">QtCore</span><span class="o">.</span><span class="n">QMetaObject</span><span class="o">.</span><span class="n">connectSlotsByName</span><span class="p">(</span><span class="n">Dialog</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">retranslateUi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Dialog</span><span class="p">):</span>
        <span class="n">_translate</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span>
        <span class="n">Dialog</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s2">&#34;Dialog&#34;</span><span class="p">,</span> <span class="s2">&#34;Dialog&#34;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groupBox</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s2">&#34;Dialog&#34;</span><span class="p">,</span> <span class="s2">&#34;城市天气预报&#34;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_2</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s2">&#34;Dialog&#34;</span><span class="p">,</span> <span class="s2">&#34;城市&#34;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">setItemText</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">_translate</span><span class="p">(</span><span class="s2">&#34;Dialog&#34;</span><span class="p">,</span> <span class="s2">&#34;北京&#34;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">setItemText</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">_translate</span><span class="p">(</span><span class="s2">&#34;Dialog&#34;</span><span class="p">,</span> <span class="s2">&#34;苏州&#34;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">setItemText</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_translate</span><span class="p">(</span><span class="s2">&#34;Dialog&#34;</span><span class="p">,</span> <span class="s2">&#34;上海&#34;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">queryBtn</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s2">&#34;Dialog&#34;</span><span class="p">,</span> <span class="s2">&#34;查询&#34;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clearBtn</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s2">&#34;Dialog&#34;</span><span class="p">,</span> <span class="s2">&#34;清空&#34;</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="calling-the-maindialog">Calling the MainDialog</h3>
<p>Call the interface class Ui_Dialog in MainDialog, and then add the business logic code for querying weather in it, so that the interface display and business logic are separated. Add a new demo.py file, and define two slot functions queryWeather() and clearText() in the MainDialog class, so that the two buttons (queryBtn and clearBtn) defined in the interface file Weather.ui can trigger clicked signals to bind to these two slot functions.</p>
<p>The complete code is as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">Weather</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QApplication</span><span class="p">,</span> <span class="n">QDialog</span>
<span class="kn">import</span> <span class="nn">requests</span>


<span class="k">class</span> <span class="nc">MainDialog</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">QDialog</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span> <span class="o">=</span> <span class="n">Weather</span><span class="o">.</span><span class="n">Ui_Dialog</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">queryWeather</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cityName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="n">cityCode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCode</span><span class="p">(</span><span class="n">cityName</span><span class="p">)</span>

        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s2">&#34;https://restapi.amap.com/v3/weather/weatherInfo?key=f4fd5b287b6d7d51a3c60fee24e42002&amp;city=</span><span class="si">{}</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">cityCode</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;lives&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">weatherMsg</span> <span class="o">=</span> <span class="s1">&#39;城市：</span><span class="si">{}</span><span class="se">\n</span><span class="s1">天气：</span><span class="si">{}</span><span class="se">\n</span><span class="s1">温度：</span><span class="si">{}</span><span class="se">\n</span><span class="s1">风向：</span><span class="si">{}</span><span class="se">\n</span><span class="s1">风力：</span><span class="si">{}</span><span class="se">\n</span><span class="s1">湿度：</span><span class="si">{}</span><span class="se">\n</span><span class="s1">发布时间：</span><span class="si">{}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">data</span><span class="p">[</span><span class="s1">&#39;city&#39;</span><span class="p">],</span>
                <span class="n">data</span><span class="p">[</span><span class="s1">&#39;weather&#39;</span><span class="p">],</span>
                <span class="n">data</span><span class="p">[</span><span class="s1">&#39;temperature&#39;</span><span class="p">],</span>
                <span class="n">data</span><span class="p">[</span><span class="s1">&#39;winddirection&#39;</span><span class="p">],</span>
                <span class="n">data</span><span class="p">[</span><span class="s1">&#39;windpower&#39;</span><span class="p">],</span>
                <span class="n">data</span><span class="p">[</span><span class="s1">&#39;humidity&#39;</span><span class="p">],</span>
                <span class="n">data</span><span class="p">[</span><span class="s1">&#39;reporttime&#39;</span><span class="p">],</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">weatherMsg</span> <span class="o">=</span> <span class="s1">&#39;天气查询失败，请稍后再试！&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">textEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">weatherMsg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getCode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cityName</span><span class="p">):</span>
        <span class="n">cityDict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;北京&#34;</span><span class="p">:</span> <span class="s2">&#34;110000&#34;</span><span class="p">,</span>
                    <span class="s2">&#34;苏州&#34;</span><span class="p">:</span> <span class="s2">&#34;320500&#34;</span><span class="p">,</span>
                    <span class="s2">&#34;上海&#34;</span><span class="p">:</span> <span class="s2">&#34;310000&#34;</span><span class="p">}</span>

        <span class="k">return</span> <span class="n">cityDict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cityName</span><span class="p">,</span> <span class="s1">&#39;101010100&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">clearText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">textEdit</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">myapp</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">myDlg</span> <span class="o">=</span> <span class="n">MainDialog</span><span class="p">()</span>
    <span class="n">myDlg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">myapp</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</code></pre></td></tr></table>
</div>
</div><p>The result after running demo.py and executing the query.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/17/4ef1c2e8ca5748e7a62b775b0d83971f.png" alt=""></p>
<h3 id="package-the-code-into-an-exe-file">Package the code into an exe file</h3>
<p>The .py file is packaged into an executable exe in Python called freezing, commonly used tools are: PyInstaller, py2exe, cx_Freeze, bbfreze, py2app, etc. Functionality comparison.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/17/af1e31438c554a0da4f742cb23650b59.png" alt=""></p>
<ul>
<li>py2exe: software updates are no longer active, so it is skipped.</li>
<li>pyinstaller: explicitly support win8, win10, theoretically support win7,, support apple Macos, linux. pyinsaller can be packaged in the form of a folder containing exe entry executable file, or a separate exe file.</li>
<li><a href="https://build-system.fman.io/pyqt5-tutorial">fbs</a>: based on PyInstaller, more convenient to use</li>
</ul>
<p>fbs is chosen here to package. fbs is installed as follows</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">pip install fbs
</code></pre></td></tr></table>
</div>
</div><p>To use, type in the command line.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">fbs startproject
</code></pre></td></tr></table>
</div>
</div><p>After the execution, you need to enter some app names, etc. The following directory will be generated after completion.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/17/2323816d715d482aaddc2b3708e87a7d.png" alt=""></p>
<p>Drag the PyQt5 code you just wrote (demo.py and Weather.py) to the src/main/python folder, delete the original main.py, and modify demo.py to main.py. Then open main.py and add the following code to the header of the file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">from</span> <span class="nn">fbs_runtime.application_context.PyQt5</span> <span class="kn">import</span> <span class="n">ApplicationContext</span>
</code></pre></td></tr></table>
</div>
</div><p>When finished, execute.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">fbs freeze
</code></pre></td></tr></table>
</div>
</div><p>to realize the package. The generated exe executable file is under \target\MyApp file.</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/python/">python</a>
          <a href="/tags/qt/">qt</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-10/spring-boot-hot-load-jars/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">How to hot load jars for Spring Boot to implement dynamic plugins?</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-10/pandas-excel-csv/">
            <span class="next-text nav-default">Pandas read and export Excel, CSV files</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
