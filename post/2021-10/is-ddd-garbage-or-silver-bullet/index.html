<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>DDD in the end is garbage or silver bullets - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="Every once in a while, someone will jump out and criticize DDD, is it a piece of junk or a silver bullet?
When I was working in a certain company, there was a group of people who claimed that they wanted to use DDD to transform the old system and completely solve the problem of difficult to maintain the project after the core process was scaled. This diagram in a previous article is the mess before the project refactoring with DDD." /><meta name="keywords" content="ddd" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-10/is-ddd-garbage-or-silver-bullet/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="DDD in the end is garbage or silver bullets" />
<meta property="og:description" content="Every once in a while, someone will jump out and criticize DDD, is it a piece of junk or a silver bullet?
When I was working in a certain company, there was a group of people who claimed that they wanted to use DDD to transform the old system and completely solve the problem of difficult to maintain the project after the core process was scaled. This diagram in a previous article is the mess before the project refactoring with DDD." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-10/is-ddd-garbage-or-silver-bullet/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-10-31T17:35:20+08:00" />
<meta property="article:modified_time" content="2021-10-31T17:35:20+08:00" />

<meta itemprop="name" content="DDD in the end is garbage or silver bullets">
<meta itemprop="description" content="Every once in a while, someone will jump out and criticize DDD, is it a piece of junk or a silver bullet?
When I was working in a certain company, there was a group of people who claimed that they wanted to use DDD to transform the old system and completely solve the problem of difficult to maintain the project after the core process was scaled. This diagram in a previous article is the mess before the project refactoring with DDD."><meta itemprop="datePublished" content="2021-10-31T17:35:20+08:00" />
<meta itemprop="dateModified" content="2021-10-31T17:35:20+08:00" />
<meta itemprop="wordCount" content="2066">
<meta itemprop="keywords" content="ddd," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="DDD in the end is garbage or silver bullets"/>
<meta name="twitter:description" content="Every once in a while, someone will jump out and criticize DDD, is it a piece of junk or a silver bullet?
When I was working in a certain company, there was a group of people who claimed that they wanted to use DDD to transform the old system and completely solve the problem of difficult to maintain the project after the core process was scaled. This diagram in a previous article is the mess before the project refactoring with DDD."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">DDD in the end is garbage or silver bullets</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-10-31 17:35:20 </span>
        <div class="post-category">
            <a href="/categories/skills/"> skills </a>
            </div>
          <span class="more-meta"> 2066 words </span>
          <span class="more-meta"> 10 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#tactical-design-and-strategic-design">Tactical Design and Strategic Design</a></li>
        <li><a href="#tactical-design">Tactical Design</a></li>
        <li><a href="#strategic-design">Strategic design</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>Every once in a while, someone will jump out and criticize DDD, is it a piece of junk or a silver bullet?</p>
<p>When I was working in a certain company, there was a group of people who claimed that they wanted to use DDD to transform the old system and completely solve the problem of difficult to maintain the project after the core process was scaled. This diagram in a previous article is the mess before the project refactoring with DDD.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/31/8cd5523801a84cc08fe59d8a6b62e99b.png" alt=""></p>
<p>Everyone is very smart, smart to the end no one knows where to write this new requirement in the end. The architects got together to learn the spirit of DDD and produce learning reports, and after half a year, some results finally came out, some sub-projects completed the refactoring with DDD, which can be used at the end of the year to invite the credit at the reception, so we have kept up with the mainstream methodology of business development in the industry, congratulations, congratulations.</p>
<p>At the end of the year, a small note of anonymous questions within the department sent a straight ball to the architects: &ldquo;Why is the code more difficult to understand after using DDD? The DDD pushers were so embarrassed that they had to put it off.</p>
<p>So do you think I am trying to criticize? Not really.</p>
<p>During my work in a certain division, I read all the DDD-related books on the market until I left. The theory of DDD was born relatively early, and the trend of microservices only broke out later. But microservices did not have a clear splitting guide at the beginning, people found that the bounded context in DDD seemed to correspond to the granularity of the service, and DDD became the absolute mainstream methodology for many companies to do business.</p>
<p>Although many technical people don&rsquo;t like to hear it, there is actually no necessary connection between technical merit and business success or failure. Similarly, the right or wrong methodology and the success of the project is not necessarily related. Many large companies do business people come out to talk about their technical methodology, these people may not even know why their own projects are successful, you expect to be able to produce direct help to your scenario that may be overthought. Just as a pleasure to listen to, get a reference that may not be a problem. Really when the golden rule to implement, that hit a head bag is normal.</p>
<p>DDD, like other engineering methodologies, has no way to falsify. Look around, purely stacked human batteries, without DDD projects are also so many successful, everyone&rsquo;s ass is still following the company&rsquo;s market value, which company&rsquo;s market value rose to the first in China, that their technology is awesome, this is called the market value to determine values. If a company relies on 996 success, then 996 is the magic formula for business success, do not learn you&rsquo;re behind. Butt can determine the head well.</p>
<p>But as a reserved technical person, we should still have some understanding of the enemy when we criticize the methodology.</p>
<p>So this article, I will simply take you to see what those ghost terms in DDD are all about.</p>
<h2 id="tactical-design-and-strategic-design">Tactical Design and Strategic Design</h2>
<p>The whole DDD methodology can be divided into two big modules, tactical design, strategic design. This you as the name implies, tactical is small, strategic is big.</p>
<ul>
<li>Tactical design refers to the single module level design, which is basically a purely technical category of things, DDD gives some guidance methods for code naming and module design</li>
<li>strategic design refers to the module splitting of large projects, which has little to do with front-line programmers, mainly how to cut the cake between bu, bu how to divide the spoils between the team</li>
</ul>
<p>Now many school recruiting programmers may more or less encounter some OOP interview questions, such as the three characteristics of the five principles and so on, <strong>these principles are the design of some projects when you can refer to the principles, and DDD tactical design is in a single module on a variety of naming rules and design methods</strong> . However, the inventor of these principles of OOP (strictly speaking, it should be the aggregator) is uncle bob, the author of &ldquo;clean code&rdquo;, &ldquo;clean architecture&rdquo;, this white-bearded grandfather is most likely and DDD community is not a pot of urine, so &ldquo;clean architecture&rdquo; in this book is not mentioned in the word DDD.</p>
<p><strong>How to assign the company&rsquo;s business to different bu(department) to complete</strong>, this is generally the company CTO or GM to do things, <strong>how to divide the projects within the department, which groups do which things. This is the realm of strategic design</strong> . DDD claims that strategic design is also about methodology. This part is also the part that many programmers consider the most useless, and we will criticize these programmers later.</p>
<h2 id="tactical-design">Tactical Design</h2>
<p>Tactical design is a purely technical area, and the biggest headache is the nomenclature in it.</p>
<p><strong>Anemic and congested patterns.</strong> DDD recommends that you write code in congestion mode, which is to do abstraction in the OOP way and then hang the behavior on the object instead of writing code in a purely procedural way. The advantage of the congestion pattern claimed by DDD is that most of the behavior is encapsulated inside the object, so that when we read the process code, we can see step 1, step 2, step 3 at a glance. But even if we don&rsquo;t use OOP to organize behavior, we can still encapsulate and reuse different business steps. Some companies have a particularly fine service granularity, such as only 5000-10000 lines of code, the advantages of the blood-filled model claimed in DDD are not so obvious.</p>
<p><strong>Value objects and entities</strong> : This is also quite outrageous, value objects are purely numeric, text types, such as.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">person</span> <span class="kd">struct</span> <span class="p">{</span>
  <span class="nx">age</span> <span class="kt">int</span>
  <span class="nx">name</span> <span class="kt">string</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>is the value object, if we add an id to the person, so that it can represent the uniqueness of the person.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">person</span> <span class="kd">struct</span> <span class="p">{</span>
  <span class="nx">id</span>  <span class="kt">int</span>
  <span class="nx">age</span> <span class="kt">int</span>
  <span class="nx">name</span> <span class="kt">string</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Then it is an entity.</p>
<p>These two concepts are just a simple classification of the objects we use every day, not very useful.</p>
<p><strong>Aggregate Root</strong>: The so-called aggregate root in DDD is the entity of transaction granularity, that is, if we access the db, then we need to have an aggregate root, and if we need to operate on multiple tables in a transaction, then we need to associate a separate aggregate root to multiple tables.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/31/7948bcbe7bb043109cd679a7e6b43bb8.png" alt=""></p>
<p>The aggregation root can be composed of one entity or multiple entities, that is, you complete a db transaction with as many associated objects as there may be entities under the same aggregation root.</p>
<p><strong>Hexagonal Architecture</strong>: This so-called hexagonal architecture is that all external changes other than business are abstracted into adapter interface for adaptation. If you understand a little bit of dependency inversion, then you should know how to do this abstraction. If you don&rsquo;t understand it at all, then I suggest you take a look at the go-micro code. If you don&rsquo;t understand it, it&rsquo;s better to change your career as soon as possible.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/31/6b1faad725ec43809813883e91ff1703.png" alt=""></p>
<p>Hexagonal architecture, which is mainly the name is too strange, in the book &ldquo;clean architecture&rdquo;, uncle bob also gave a diagram.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/31/5a25fdce6e074aab934820a827217350.png" alt=""></p>
<p>The book Evolutionary Architecture, from the staff of thoughtworks, contains a plugin architecture, which is what some people like to call a plug-in architecture.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/31/a7eabe395907422eb1093c83c4adf465.png" alt=""></p>
<p><strong>Repo Pattern</strong>: DDD theory that the storage layer of our business projects is likely to change frequently, so the interface design of the specialized storage layer is taken out separately, called Repo Pattern, which really has nothing to say, find, getlist, save, you just have a little orm experience, what interface should be able to write out by default.</p>
<p>The fact is that in 2021, our storage system is basically unlikely to do the switch, even if the switch, those emerging community storage system will support MySQL protocol, infrastructure wants to invade the code, that is simply a big rebellion ah.</p>
<p><strong>domain event</strong>: actually is to do upstream and downstream decoupling kafka message, we use domain event will look more foreign.</p>
<p><strong>domain service</strong>: Domain service, as the name implies, you think is your own department or group of local api gateway is also possible.</p>
<p>In summary, if you are a programmer working in the front line of a large company for two or three years, these things above should immediately understand, nothing worth saying. If it is to go to the architect conference to show a show, you have to package a little to make yourself look less dirt, right?</p>
<h2 id="strategic-design">Strategic design</h2>
<p><strong>Domain</strong> : Domain, what does your company do that you don&rsquo;t even know?</p>
<p><strong>Core Domain</strong> : Your company sells goods, that selling goods is the key competitive link between you and other competitors. This is the core domain, is the core business, why smart people are crowded to the core business? The soup of the core business is also better than the rice of the edge business ah.</p>
<p><strong>SubDomain</strong> : Your company&rsquo;s selling goods, but users can&rsquo;t pay, that can&rsquo;t be done, payment is the sub-domain.</p>
<p><strong>Supporting Domain</strong>: Your company sells goods, but customers want to see some metrics, you must have a system that can support it, right? Maybe it&rsquo;s some system that writes SQL. Supporting Domain.</p>
<p><strong>Generic Domain</strong>: What do you care about your company? You have to have a system to support the employee&rsquo;s employment and payroll, these are the generic domains.</p>
<p>In addition to the first Domain, the remaining four domains of decreasing importance, decreasing means that if the company wants to lay off employees, it is from the bottom to the top of the cut.</p>
<p>I said earlier that some programmers think DDD strategic design is useless, you are not even clear about their own group, engaged in the work responsibilities for the company is not important, then don&rsquo;t cry when you are cut.</p>
<p><strong>unified language</strong> : This is better understood, such as the word diving, when you say diving refers to this.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/31/982d9e92ede7440b963ae59680440b4c.png" alt=""></p>
<p>And when your colleague said diving he was referring to this.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/31/69baa2cfa4e44c9381d2d9131095096f.png" alt=""></p>
<p>Here you are talking about work, that means you must not be working in the same context, so DDD thinks that you can use a unified language for domain delineation work. After delineation, within the same context, the same term will mean the same thing when you say it. This is the <strong>Bounded Context, and it may also be a different domain.</strong></p>
<p>Since the split, if we are still in the same domain, it is necessary to collaborate to complete the business process, and this collaboration of different Contexts is called <strong>Context Maps or Integration Type.</strong></p>
<p>The terminology is nasty, but there are two specific ways, two microservices either through RPC communication or through MQ communication.</p>
<p>If the communication through RPC, that callee is generally the father of the caller, many times callee hung is to affect the caller (of course, there are fuses and other methods to avoid dying together).</p>
<p>If the communication through MQ, that upstream is generally the father of the downstream, because the upstream a reconfiguration, the downstream may be fried, the final consistent are bullshit, how many companies are the final consistent are relying on human repair.</p>
<p>This relationship between father and son is <strong>Conformist</strong>. If the father can think more about the son&rsquo;s needs, that is <strong>Customer-Supplier</strong> relationship, after all, the customer is nominally still God. If there are some definitions that need to be shared across systems, such as business categories in the company, we may have to parse out the PHP file from a system to use in our own system, then we may have to use someone else&rsquo;s code, which is called <strong>Shared-Kernel.</strong> Shared-Kernel</p>
<p>Finally, sometimes we can use something called an ACL to stop some upstream changes from intruding into our business logic.</p>
<p><strong>Anti-Corruption-Layer</strong> : Anti-Corruption-Layer, that is, I want to intercept the external system changes in the docking layer, do not let other people&rsquo;s shit dumped on me.</p>
<p>Told here, the basic concepts we have all gone through once, you have to say DDD a little useful, then I do not agree, at least after reading these books, I know where to go to make more money.</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/ddd/">ddd</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-11/buildpack-vs-dockerfile/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Building images without Dockerfile: BuildPack vs Dockerfile</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-10/the-best-image-build-tool-earthly/">
            <span class="next-text nav-default">Earthly A more powerful image builder </span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
