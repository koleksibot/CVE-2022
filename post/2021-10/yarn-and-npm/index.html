<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Talking about package managers yarn and npm - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="In the past, a simple text editor was sufficient for developers to create and manage most projects. But the WEB has changed radically since then, and today, even a fairly simple project usually has hundreds of scripts with complex nested dependencies that simply can&amp;rsquo;t be managed in an orderly fashion without an automation tool, which is where a package manager comes into play.
A package manager is a tool that automates the handling of project dependencies in various ways." /><meta name="keywords" content="yarn, npm" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-10/yarn-and-npm/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Talking about package managers yarn and npm" />
<meta property="og:description" content="In the past, a simple text editor was sufficient for developers to create and manage most projects. But the WEB has changed radically since then, and today, even a fairly simple project usually has hundreds of scripts with complex nested dependencies that simply can&rsquo;t be managed in an orderly fashion without an automation tool, which is where a package manager comes into play.
A package manager is a tool that automates the handling of project dependencies in various ways." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-10/yarn-and-npm/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-10-05T17:12:06+08:00" />
<meta property="article:modified_time" content="2021-10-05T17:12:06+08:00" />

<meta itemprop="name" content="Talking about package managers yarn and npm">
<meta itemprop="description" content="In the past, a simple text editor was sufficient for developers to create and manage most projects. But the WEB has changed radically since then, and today, even a fairly simple project usually has hundreds of scripts with complex nested dependencies that simply can&rsquo;t be managed in an orderly fashion without an automation tool, which is where a package manager comes into play.
A package manager is a tool that automates the handling of project dependencies in various ways."><meta itemprop="datePublished" content="2021-10-05T17:12:06+08:00" />
<meta itemprop="dateModified" content="2021-10-05T17:12:06+08:00" />
<meta itemprop="wordCount" content="1733">
<meta itemprop="keywords" content="yarn,npm," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Talking about package managers yarn and npm"/>
<meta name="twitter:description" content="In the past, a simple text editor was sufficient for developers to create and manage most projects. But the WEB has changed radically since then, and today, even a fairly simple project usually has hundreds of scripts with complex nested dependencies that simply can&rsquo;t be managed in an orderly fashion without an automation tool, which is where a package manager comes into play.
A package manager is a tool that automates the handling of project dependencies in various ways."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Talking about package managers yarn and npm</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-10-05 17:12:06 </span>
        <div class="post-category">
            <a href="/categories/skills/"> skills </a>
            </div>
          <span class="more-meta"> 1733 words </span>
          <span class="more-meta"> 9 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#installation-comparison">Installation Comparison</a></li>
        <li><a href="#installing-project-dependencies">Installing project dependencies</a></li>
        <li><a href="#command-comparison">Command Comparison</a></li>
        <li><a href="#speed-and-performance">Speed and Performance</a></li>
        <li><a href="#safety-comparison">Safety Comparison</a></li>
        <li><a href="#feature-comparison">Feature comparison</a>
          <ul>
            <li><a href="#using-workspaces">Using Workspaces</a></li>
            <li><a href="#running-scripts-remotely">Running scripts remotely</a></li>
            <li><a href="#zero-installation">Zero installation</a></li>
            <li><a href="#plug-and-play">Plug and Play</a></li>
            <li><a href="#licenses">Licenses</a></li>
            <li><a href="#select-which-package-manager">Select which package manager</a></li>
          </ul>
        </li>
        <li><a href="#summary">Summary</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>In the past, a simple text editor was sufficient for developers to create and manage most projects. But the WEB has changed radically since then, and today, even a fairly simple project usually has hundreds of scripts with complex nested dependencies that simply can&rsquo;t be managed in an orderly fashion without an automation tool, which is where a package manager comes into play.</p>
<p>A package manager is a tool that automates the handling of project dependencies in various ways. For example, with the help of a package manager, packages can be installed, uninstalled, updated and upgraded, project settings can be configured, scripts can be run, and much more. All the complex and tedious work is done by the package manager, allowing developers to focus on coding.</p>
<p>npm is Node&rsquo;s package manager, which was released in 2010 and ushered in a new era of web development. Before that, project dependencies were downloaded and managed manually. npm is what took web development to a higher level.</p>
<p>npm does three main things.</p>
<ul>
<li>a website for managing all aspects of the npm experience</li>
<li>A registry for accessing the extensive public database of JavaScript packages</li>
<li>a command line interface (CLI) for interacting with npm via the terminal</li>
</ul>
<p>However, when most people talk about npm, they are usually referring to the last CLI tool. It is distributed with each new Node release as the default package manager.</p>
<p>yarn represents another resource negotiator. yarn package manager is an alternative to npm, released by Facebook in October 2016. yarn was originally targeted to deal with npm&rsquo;s shortcomings, such as performance and security issues. yarn was quickly positioned as a secure, fast, and reliable JavaScript dependency management tool.</p>
<p>But the npm team learned their lesson and quickly filled in the gaps in npm by implementing the missing features.</p>
<p>Here&rsquo;s a look at a timeline.</p>
<ul>
<li>2010: npm with Node support was released.</li>
<li>2016: Yarn was released. It shows better performance than npm. It also generates <code>yarn.lock</code> files, making sharing and exact replication of repo&rsquo;s easier and predictable.</li>
<li>2017: NPM 5 is released. It provides automatically generated package lock <code>package-lock.json</code> files to cope with <code>yarn.lock</code>.</li>
<li>2018: NPM 6 is released with improved security. Now, npm checks for security vulnerabilities before installing dependencies.</li>
<li>2020: Yarn 2 and npm 7 are released. Both of these packages have great new features.</li>
<li>2021: Yarn 3 is released with various improvements.</li>
</ul>
<p>Today, these two package managers are neck and neck in the package management race, offering similar features and functionality. However, there are still some differences that help in choosing which one to use.</p>
<h2 id="installation-comparison">Installation Comparison</h2>
<p>As mentioned above, npm is pre-installed in Node, so there is generally no need to install npm manually.</p>
<p>Instead, yarn needs to be installed explicitly, first, globally</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">npm install -g yarn
</code></pre></td></tr></table>
</div>
</div><p>It can then be used on a per-project basis by setting the desired version in the project. The desired version is set by running the <code>yarn set version</code> command in the project&rsquo;s root directory at</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">yarn <span class="nb">set</span> version berry
</code></pre></td></tr></table>
</div>
</div><p><code>berry</code> is the version number to set. If you want to update to the latest version, run.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">yarn <span class="nb">set</span> version latest
</code></pre></td></tr></table>
</div>
</div><p>With yarn, you can use a different version for each project. To do the same with npm, you need to install nvm (Node version manager).</p>
<h2 id="installing-project-dependencies">Installing project dependencies</h2>
<p>Now, let&rsquo;s see how to install project dependencies. When you run <code>npm install</code>, the dependencies are installed sequentially, and a detailed installation log is output in the terminal, though it is not very readable.</p>
<p>To install a package using yarn, run the <code>yarn</code> command. yarn installs packages in parallel, which is one of the reasons it is faster than npm. If you are using <code>yarn 1</code>, you will see that the installation logs output by yarn are more concise and better readable. They are arranged in a tree for ease of reading. But this has changed in versions 2 and 3, where the logs are not as intuitive and readable.</p>
<p>So far, it has been seen that npm and yarn have different commands for installing packages.</p>
<h2 id="command-comparison">Command Comparison</h2>
<p>Many commands are the same for npm and yarn, but there are also many different commands. Let&rsquo;s start with the same commands.</p>
<ul>
<li><code>npm init | yarn init</code> : create a new package</li>
<li><code>npm run | yarn run</code> : run the script defined in <code>package.json</code></li>
<li><code>npm test | yarn test</code>: test a package</li>
<li><code>npm publish | yarn publish</code> : Publish a package</li>
<li><code>npm cache clean | yarn cache clean</code> : remove all data from the cache folder</li>
</ul>
<p>These commands make it easy to switch between the two managers, but there are a few different commands that can cause confusion.</p>
<ul>
<li><code>npm install | yarn</code> : install dependencies</li>
<li><code>npm install [package] | yarn add [package]</code> : install a package</li>
<li><code>npm install --save-dev [package] | yarn add --dev [package]</code> : install a package as a development dependency</li>
<li><code>npm uninstall [package] | yarn remove [package]</code> : uninstall a package</li>
<li><code>npm uninstall --save-dev [package] | yarn remove [package]</code> : uninstall development dependencies</li>
<li><code>npm update | yarn upgrade</code> : update dependencies</li>
<li><code>npm update [package] | yarn upgrade [package]</code> : update packages</li>
</ul>
<p>yarn also has some unique commands that are not the same under npm. For example, the <code>why</code> command shows the reason a package is needed: it could be a dependency, a local module, or a project dependency.</p>
<h2 id="speed-and-performance">Speed and Performance</h2>
<p>Whenever yarn or npm needs to install a package, they perform a series of tasks. In npm, these tasks are installed package by package, meaning it waits for one package to be fully installed before moving on to the next. By contrast, yarn executes these tasks in parallel, which is a significant performance improvement.</p>
<p>While both managers provide caching mechanisms, yarn seems to do a little better. By implementing a zero-install mode, it is able to install packages in almost no time. It caches each package and saves it on disk, so the next time this package is installed, it is not even necessary to have an Internet connection, since the package is installed offline from disk.</p>
<p>Although yarn has some advantages, yarn and npm are comparable in speed in their latest versions, so they are now considered indistinguishable.</p>
<h2 id="safety-comparison">Safety Comparison</h2>
<p>One of the main criticisms of npm is in the area of security, previous versions of npm had several serious security vulnerabilities. However, starting with version 6, npm audits packages during installation and shows if any vulnerabilities are found. This check can be performed manually by running <code>npm audit</code> on the installed package, and if any vulnerabilities are found, npm will give the appropriate security advice. If a security vulnerability is found, you can run <code>npm audit fix</code> to fix the package vulnerability.</p>
<p>In terms of security, both yarn and npm use cryptographic hashing algorithms to ensure package integrity.</p>
<h2 id="feature-comparison">Feature comparison</h2>
<p>As with the commands described above, there are some features that are common to both npm and yarn, but there are also some differences, and the main ones are described below.</p>
<p>Locked files generated by ####</p>
<p>In the <code>package.json</code> file, where both npm and yarn keep track of the project&rsquo;s dependencies, the version number is not always exact; instead, a range of versions can be defined. In this way, it is possible to select a major and minor version of a package, but allow npm to install the latest patches that may fix some bugs.</p>
<p>In the ideal state of semantic version control, the patch version would not contain any breaking changes. But the display always differs from the ideal, causing this not to be the case in real life. npm uses a strategy that may result in two machines ending up with the same <code>package.json</code> file, but with different versions of packages installed, which buries the problem of possible bugs.</p>
<p>To avoid package version mismatches, the exact installed version is fixed in the package lock file, and each time a module is added, npm and yarn create (or update) a <code>package-lock.json</code> and <code>yarn.lock</code> file, respectively.</p>
<h3 id="using-workspaces">Using Workspaces</h3>
<p>Workspaces allow having a <code>monorepo</code> to manage dependencies across multiple projects, which means having a single top-level root package that contains multiple sub-packages called workspaces.</p>
<h3 id="running-scripts-remotely">Running scripts remotely</h3>
<p>The <code>npx</code> command is used to run scripts from <code>. /node_modules/.bin</code> to run scripts. It also allows packages to be executed from the npm registry without having to install them in project dependencies. For example, a new React application can be created by running the following command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">npx create-react-app my-app
</code></pre></td></tr></table>
</div>
</div><p>In yarn, the same result can be obtained using the equivalent <code>dlx</code> command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">yarn dlx create-react-app my-app
</code></pre></td></tr></table>
</div>
</div><p>The following section describes the features that are unique to yarn.</p>
<h3 id="zero-installation">Zero installation</h3>
<p>Zero installs store the cache in the <code>.yarn</code> folder in the project directory. When using commands such as <code>yarn</code> or <code>yarn add &lt;package&gt;</code>, yarn creates a <code>.pnp.cjs</code> file that contains the dependency hierarchy that Node uses to load project packages. As a result, they can be accessed at almost zero time.</p>
<h3 id="plug-and-play">Plug and Play</h3>
<p>Plug-and-play is another installation strategy. Instead of generating a <code>node_modules</code> directory and leaving the resolution to Node, yarn generates a single <code>.pnp.cjs</code> file that maps packages to their locations on disk and their list of dependencies. This feature leads to faster project startups, better optimized dependency trees, faster install times, and of course no need for the <code>node_modules</code> folder.</p>
<h3 id="licenses">Licenses</h3>
<p>yarn includes a built-in license checker that can be used in different scenarios when developing applications.</p>
<h3 id="select-which-package-manager">Select which package manager</h3>
<p>The similarities and differences between npm and yarn have been discussed above, but it is not yet determined which one is better and which one should be chosen, but as always, it is the right one for the right team or project that counts.</p>
<p>Here is a recommended recommendation.</p>
<ul>
<li>Choose npm : if you are happy with your current workflow, don&rsquo;t want to install additional tools, and don&rsquo;t have a lot of disk space.</li>
<li>Choose yarn: if you want some great features like plug-and-play, need some features missing in npm, and have enough disk space</li>
</ul>
<p>If it&rsquo;s still hard to make a clear decision between npm and yarn, then don&rsquo;t worry about it, use whichever one you want and you&rsquo;ll basically be fine.</p>
<h2 id="summary">Summary</h2>
<p>This article compares two of the most popular package managers on the market, both of which have their own pros and cons, to choose the most suitable one for your project.</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/yarn/">yarn</a>
          <a href="/tags/npm/">npm</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-10/stream-of-jdk/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">More than 100,000 words of detailed analysis of the implementation principle of Stream in the JDK</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-10/cplusplus-pipeable/">
            <span class="next-text nav-default">Pipeable Programming in C&#43;&#43;</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
