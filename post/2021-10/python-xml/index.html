<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Python XML file format parsing - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="XML refers to Extensible Markup Language, a subset of the Standard Generalized Markup Language, a markup language used to mark up electronic documents to make them structured. XML is designed to transfer and store data. Python has three common ways of parsing XML: SAX (simple API for XML), DOM (Document Object Model), and ElementTree. DOM approach: DOM, translated as Document Object Model, is a standard programming interface recommended by the" /><meta name="keywords" content="Python, Xml" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-10/python-xml/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Python XML file format parsing" />
<meta property="og:description" content="XML refers to Extensible Markup Language, a subset of the Standard Generalized Markup Language, a markup language used to mark up electronic documents to make them structured. XML is designed to transfer and store data. Python has three common ways of parsing XML: SAX (simple API for XML), DOM (Document Object Model), and ElementTree. DOM approach: DOM, translated as Document Object Model, is a standard programming interface recommended by the" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-10/python-xml/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-10-31T10:54:18+08:00" />
<meta property="article:modified_time" content="2021-10-31T10:54:18+08:00" />

<meta itemprop="name" content="Python XML file format parsing">
<meta itemprop="description" content="XML refers to Extensible Markup Language, a subset of the Standard Generalized Markup Language, a markup language used to mark up electronic documents to make them structured. XML is designed to transfer and store data. Python has three common ways of parsing XML: SAX (simple API for XML), DOM (Document Object Model), and ElementTree. DOM approach: DOM, translated as Document Object Model, is a standard programming interface recommended by the"><meta itemprop="datePublished" content="2021-10-31T10:54:18+08:00" />
<meta itemprop="dateModified" content="2021-10-31T10:54:18+08:00" />
<meta itemprop="wordCount" content="3365">
<meta itemprop="keywords" content="python,xml," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Python XML file format parsing"/>
<meta name="twitter:description" content="XML refers to Extensible Markup Language, a subset of the Standard Generalized Markup Language, a markup language used to mark up electronic documents to make them structured. XML is designed to transfer and store data. Python has three common ways of parsing XML: SAX (simple API for XML), DOM (Document Object Model), and ElementTree. DOM approach: DOM, translated as Document Object Model, is a standard programming interface recommended by the"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Python XML file format parsing</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-10-31 10:54:18 </span>
        <div class="post-category">
            <a href="/categories/skills/"> skills </a>
            </div>
          <span class="more-meta"> 3365 words </span>
          <span class="more-meta"> 7 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#xmldom-module">xml.dom.* module</a></li>
        <li><a href="#xmlsax-module">xml.sax.* module</a>
          <ul>
            <li><a href="#xmlparserexpat">xml.parser.expat</a></li>
          </ul>
        </li>
        <li><a href="#elementtree">ElementTree</a></li>
        <li><a href="#xmltodict">xmltodict</a></li>
        <li><a href="#untangle">untangle</a></li>
        <li><a href="#other-tools">Other Tools</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>XML refers to Extensible Markup Language, a subset of the Standard Generalized Markup Language, a markup language used to mark up electronic documents to make them structured. XML is designed to transfer and store data.</p>
<p>Python has three common ways of parsing XML: SAX (simple API for XML), DOM (Document Object Model), and ElementTree.</p>
<ul>
<li>DOM approach: DOM, translated as Document Object Model, is a standard programming interface recommended by the W3C organization that parses XML data into a tree in memory, and manipulates XML by manipulating the tree.</li>
<li>SAX: SAX is an event-driven model for handling XML. It scans documents line by line, parsing them as it goes, and has great advantages for parsing large documents.</li>
<li>ElementTree approach: ElementTree has better performance compared to DOM, about the same performance as SAX, and an easy to use API.</li>
</ul>
<p>Python has very many other parsing tools in addition to the built-in xml parser. Which tool is easier to use and has better performance? Let&rsquo;s explore.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/31/0ebfacc921bb4344b083461ce76db8ac.png" alt=""></p>
<h2 id="xmldom-module">xml.dom.* module</h2>
<p>xml.dom implements the DOM API developed by the W3C. xml.dom is a package you can use if you are used to using the DOM API. xml.dom parses XML data into a tree in memory and manipulates XML by manipulating the tree. a DOM parser reads the whole document at once when parsing an XML document, saving all the elements of the document in memory in You can then use the different functions provided by the DOM to read or modify the content and structure of the document, or you can write the modified content to the xml file.</p>
<p>Note: There are many modules in the xml.dom package, note the differences between them.</p>
<ul>
<li>minidom is an extremely simplified implementation of the DOM API, much simpler than the full version of DOM, and the package is also much smaller.</li>
<li>The pulldom module provides a &ldquo;pull parser&rdquo;, the basic concept behind which refers to pulling events from the XML stream and then processing them.</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="c1"># &lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span class="c1">#  &lt;employees&gt;</span>
<span class="c1">#   &lt;employee&gt;</span>
<span class="c1">#     &lt;name&gt;linux&lt;/name&gt;</span>
<span class="c1">#     &lt;age&gt;30&lt;/age&gt;</span>
<span class="c1">#   &lt;/employee&gt;</span>
<span class="c1">#   &lt;employee&gt;</span>
<span class="c1">#     &lt;name&gt;windows&lt;/name&gt;</span>
<span class="c1">#     &lt;age&gt;20&lt;/age&gt;</span>
<span class="c1">#   &lt;/employee&gt;</span>
<span class="c1">#  &lt;/employees&gt;</span>

<span class="kn">from</span> <span class="nn">xml.dom</span> <span class="kn">import</span> <span class="n">minidom</span>
<span class="n">doc</span> <span class="o">=</span> <span class="n">minidom</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&#34;employees.xml&#34;</span><span class="p">)</span>
<span class="n">root</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
<span class="n">employees</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s2">&#34;employee&#34;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">employee</span> <span class="ow">in</span> <span class="n">employees</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">employee</span><span class="o">.</span><span class="n">nodeName</span><span class="p">)</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">employee</span><span class="o">.</span><span class="n">toxml</span><span class="p">())</span>
    <span class="n">nameNode</span> <span class="o">=</span> <span class="n">employee</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s2">&#34;name&#34;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">nameNode</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">nameNode</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">+</span> <span class="s2">&#34;:&#34;</span> <span class="o">+</span> <span class="n">nameNode</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">nodeValue</span><span class="p">)</span>
    <span class="n">ageNode</span> <span class="o">=</span> <span class="n">employee</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s2">&#34;age&#34;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">ageNode</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">ageNode</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">+</span> <span class="s2">&#34;:&#34;</span> <span class="o">+</span> <span class="n">ageNode</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">nodeValue</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">employee</span><span class="o">.</span><span class="n">childNodes</span><span class="p">:</span>
        <span class="nb">print</span> <span class="p">(</span><span class="n">n</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="xmlsax-module">xml.sax.* module</h2>
<p>The xml.sax.* module is an implementation of the SAX API. This module sacrifices convenience for speed and memory footprint.SAX (simple API for XML), is based on event handling, when XML documents are read sequentially, each time an element is encountered the corresponding event handler function is triggered to handle it.</p>
<p>SAX features.</p>
<ul>
<li>is an event-based API</li>
<li>operates at a lower level than the DOM</li>
<li>gives you more control than the DOM</li>
<li>is almost always more efficient than the DOM</li>
<li>but unfortunately, requires more work than the DOM</li>
</ul>
<p>Parsing XML with Python requires import xml.sax and xml.sax.handler</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="c1"># &lt;?xml version=&#34;1.0&#34;?&gt;</span>
<span class="c1"># &lt;collection shelf=&#34;New Arrivals&#34;&gt;</span>
<span class="c1">#     &lt;movie title=&#34;Enemy Behind&#34;&gt;</span>
<span class="c1">#        &lt;type&gt;War, Thriller&lt;/type&gt;</span>
<span class="c1">#        &lt;format&gt;DVD&lt;/format&gt;</span>
<span class="c1">#        &lt;year&gt;2003&lt;/year&gt;</span>
<span class="c1">#        &lt;rating&gt;PG&lt;/rating&gt;</span>
<span class="c1">#        &lt;stars&gt;10&lt;/stars&gt;</span>
<span class="c1">#        &lt;description&gt;Talk about a US-Japan war&lt;/description&gt;</span>
<span class="c1">#     &lt;/movie&gt;</span>
<span class="c1">#     &lt;movie title=&#34;Transformers&#34;&gt;</span>
<span class="c1">#        &lt;type&gt;Anime, Science Fiction&lt;/type&gt;</span>
<span class="c1">#        &lt;format&gt;DVD&lt;/format&gt;</span>
<span class="c1">#        &lt;year&gt;1989&lt;/year&gt;</span>
<span class="c1">#        &lt;rating&gt;R&lt;/rating&gt;</span>
<span class="c1">#        &lt;stars&gt;8&lt;/stars&gt;</span>
<span class="c1">#        &lt;description&gt;A schientific fiction&lt;/description&gt;</span>
<span class="c1">#     &lt;/movie&gt;</span>
<span class="c1">#        &lt;movie title=&#34;Trigun&#34;&gt;</span>
<span class="c1">#        &lt;type&gt;Anime, Action&lt;/type&gt;</span>
<span class="c1">#        &lt;format&gt;DVD&lt;/format&gt;</span>
<span class="c1">#        &lt;episodes&gt;4&lt;/episodes&gt;</span>
<span class="c1">#        &lt;rating&gt;PG&lt;/rating&gt;</span>
<span class="c1">#        &lt;stars&gt;10&lt;/stars&gt;</span>
<span class="c1">#        &lt;description&gt;Vash the Stampede!&lt;/description&gt;</span>
<span class="c1">#     &lt;/movie&gt;</span>
<span class="c1">#     &lt;movie title=&#34;Ishtar&#34;&gt;</span>
<span class="c1">#        &lt;type&gt;Comedy&lt;/type&gt;</span>
<span class="c1">#        &lt;format&gt;VHS&lt;/format&gt;</span>
<span class="c1">#        &lt;rating&gt;PG&lt;/rating&gt;</span>
<span class="c1">#        &lt;stars&gt;2&lt;/stars&gt;</span>
<span class="c1">#        &lt;description&gt;Viewable boredom&lt;/description&gt;</span>
<span class="c1">#     &lt;/movie&gt;</span>
<span class="c1"># &lt;/collection&gt;</span>

<span class="kn">import</span> <span class="nn">xml.sax</span>

<span class="k">class</span> <span class="nc">MovieHandler</span><span class="p">(</span> <span class="n">xml</span><span class="o">.</span><span class="n">sax</span><span class="o">.</span><span class="n">ContentHandler</span><span class="p">):</span>
   <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">CurrentData</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">rating</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">stars</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>

   <span class="c1"># 元素开始事件处理</span>
   <span class="k">def</span> <span class="nf">startElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">attributes</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">CurrentData</span> <span class="o">=</span> <span class="n">tag</span>
      <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&#34;movie&#34;</span><span class="p">:</span>
         <span class="nb">print</span> <span class="s2">&#34;*****Movie*****&#34;</span>
         <span class="n">title</span> <span class="o">=</span> <span class="n">attributes</span><span class="p">[</span><span class="s2">&#34;title&#34;</span><span class="p">]</span>
         <span class="nb">print</span> <span class="s2">&#34;Title:&#34;</span><span class="p">,</span> <span class="n">title</span>

   <span class="c1"># 元素结束事件处理</span>
   <span class="k">def</span> <span class="nf">endElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">):</span>
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">CurrentData</span> <span class="o">==</span> <span class="s2">&#34;type&#34;</span><span class="p">:</span>
         <span class="nb">print</span> <span class="s2">&#34;Type:&#34;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>
      <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">CurrentData</span> <span class="o">==</span> <span class="s2">&#34;format&#34;</span><span class="p">:</span>
         <span class="nb">print</span> <span class="s2">&#34;Format:&#34;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">format</span>
      <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">CurrentData</span> <span class="o">==</span> <span class="s2">&#34;year&#34;</span><span class="p">:</span>
         <span class="nb">print</span> <span class="s2">&#34;Year:&#34;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">year</span>
      <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">CurrentData</span> <span class="o">==</span> <span class="s2">&#34;rating&#34;</span><span class="p">:</span>
         <span class="nb">print</span> <span class="s2">&#34;Rating:&#34;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rating</span>
      <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">CurrentData</span> <span class="o">==</span> <span class="s2">&#34;stars&#34;</span><span class="p">:</span>
         <span class="nb">print</span> <span class="s2">&#34;Stars:&#34;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stars</span>
      <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">CurrentData</span> <span class="o">==</span> <span class="s2">&#34;description&#34;</span><span class="p">:</span>
         <span class="nb">print</span> <span class="s2">&#34;Description:&#34;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">CurrentData</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>

   <span class="c1"># 内容事件处理</span>
   <span class="k">def</span> <span class="nf">characters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">CurrentData</span> <span class="o">==</span> <span class="s2">&#34;type&#34;</span><span class="p">:</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">content</span>
      <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">CurrentData</span> <span class="o">==</span> <span class="s2">&#34;format&#34;</span><span class="p">:</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="n">content</span>
      <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">CurrentData</span> <span class="o">==</span> <span class="s2">&#34;year&#34;</span><span class="p">:</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="n">content</span>
      <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">CurrentData</span> <span class="o">==</span> <span class="s2">&#34;rating&#34;</span><span class="p">:</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">rating</span> <span class="o">=</span> <span class="n">content</span>
      <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">CurrentData</span> <span class="o">==</span> <span class="s2">&#34;stars&#34;</span><span class="p">:</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">stars</span> <span class="o">=</span> <span class="n">content</span>
      <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">CurrentData</span> <span class="o">==</span> <span class="s2">&#34;description&#34;</span><span class="p">:</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">content</span>

<span class="k">if</span> <span class="p">(</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&#34;__main__&#34;</span><span class="p">):</span>
   <span class="c1"># 创建一个 XMLReader</span>
   <span class="n">parser</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">sax</span><span class="o">.</span><span class="n">make_parser</span><span class="p">()</span>
   <span class="c1"># turn off namepsaces</span>
   <span class="n">parser</span><span class="o">.</span><span class="n">setFeature</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">sax</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">feature_namespaces</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
   <span class="c1"># 重写 ContextHandler</span>
   <span class="n">Handler</span> <span class="o">=</span> <span class="n">MovieHandler</span><span class="p">()</span>
   <span class="n">parser</span><span class="o">.</span><span class="n">setContentHandler</span><span class="p">(</span> <span class="n">Handler</span> <span class="p">)</span>
   <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&#34;movies.xml&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="xmlparserexpat">xml.parser.expat</h3>
<p>xml.parser.expat provides a direct, underlying API interface to the expat parser written in C. The expat interface is similar to SAX in that it is also based on an event callback mechanism, but this interface is not standardized and only applies to the expat library.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">xml.parsers.expat</span>

<span class="k">class</span> <span class="nc">ExParser</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;Parse roster xml&#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_raw</span><span class="p">):</span>
        <span class="s1">&#39;&#39;&#39;init parser and setup handlers&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">parsers</span><span class="o">.</span><span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>

        <span class="c1">#connect handlers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">StartElementHandler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_element</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">EndElementHandler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_element</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">CharacterDataHandler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">char_data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">xml_raw</span><span class="p">)</span>
        <span class="k">del</span><span class="p">(</span><span class="n">xml_raw</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">start_element</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
        <span class="s1">&#39;&#39;&#39;Start xml element handler&#39;&#39;&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;start:&#39;</span><span class="o">+</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">end_element</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="s1">&#39;&#39;&#39;End xml element handler&#39;&#39;&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;end:&#39;</span><span class="o">+</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">char_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="s1">&#39;&#39;&#39;Char xml element handler&#39;&#39;&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;data is &#39;</span><span class="o">+</span><span class="n">data</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="elementtree">ElementTree</h2>
<p>The xml.etree.ElementTree module provides a lightweight, Pythonic API along with an efficient C implementation, xml.etree.cElementTree. ET is faster and the API is more straightforward and easy to use than the DOM. Compared to SAX, the ET.iterparse function also provides on-demand parsing without reading the entire document in memory at once. ET&rsquo;s performance is roughly similar to the SAX module, but it has a higher-level API that is easier for users to use.</p>
<p>There are two implementations of ElementTree in the Python standard library. One is a pure Python implementation such as xml.etree.ElementTree, and the other is the faster xml.etree.cElementTree. Remember: try to use the C implementation, because it&rsquo;s faster and consumes less memory.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="c1"># &lt;?xml version=&#34;1.0&#34;?&gt;</span>
<span class="c1"># &lt;doc&gt;</span>
<span class="c1">#     &lt;branch name=&#34;testing&#34; hash=&#34;1cdf045c&#34;&gt;</span>
<span class="c1">#         text,source</span>
<span class="c1">#     &lt;/branch&gt;</span>
<span class="c1">#     &lt;branch name=&#34;release01&#34; hash=&#34;f200013e&#34;&gt;</span>
<span class="c1">#         &lt;sub-branch name=&#34;subrelease01&#34;&gt;</span>
<span class="c1">#             xml,sgml</span>
<span class="c1">#         &lt;/sub-branch&gt;</span>
<span class="c1">#     &lt;/branch&gt;</span>
<span class="c1">#     &lt;branch name=&#34;invalid&#34;&gt;</span>
<span class="c1">#     &lt;/branch&gt;</span>
<span class="c1"># &lt;/doc&gt;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">xml.etree.cElementTree</span> <span class="k">as</span> <span class="nn">ET</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">xml.etree.ElementTree</span> <span class="k">as</span> <span class="nn">ET</span>

<span class="n">tree</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">ElementTree</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s1">&#39;doc1.xml&#39;</span><span class="p">)</span>
<span class="n">root</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
<span class="nb">print</span> <span class="n">root</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span> <span class="n">root</span><span class="o">.</span><span class="n">attrib</span>
<span class="k">for</span> <span class="n">child_of_root</span> <span class="ow">in</span> <span class="n">root</span><span class="p">:</span>
    <span class="nb">print</span> <span class="n">child_of_root</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span> <span class="n">child_of_root</span><span class="o">.</span><span class="n">attrib</span>
<span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">tree</span><span class="o">.</span><span class="n">iter</span><span class="p">():</span>
    <span class="nb">print</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span>
<span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">tree</span><span class="o">.</span><span class="n">iter</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="s1">&#39;branch&#39;</span><span class="p">):</span>
    <span class="nb">print</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span>
<span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">tree</span><span class="o">.</span><span class="n">iterfind</span><span class="p">(</span><span class="s1">&#39;branch/sub-branch&#39;</span><span class="p">):</span>
    <span class="nb">print</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span>
<span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">tree</span><span class="o">.</span><span class="n">iterfind</span><span class="p">(</span><span class="s1">&#39;branch[@name=&#34;release01&#34;]&#39;</span><span class="p">):</span>
    <span class="nb">print</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>Element object</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="k">class</span> <span class="nc">xml</span><span class="o">.</span><span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">attrib</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">extra</span><span class="p">)</span>

　　<span class="n">tag</span><span class="err">：</span><span class="n">string</span><span class="err">，</span><span class="n">元素代表的数据种类</span><span class="err">。</span>
　　<span class="n">text</span><span class="err">：</span><span class="n">string</span><span class="err">，</span><span class="n">元素的内容</span><span class="err">。</span>
　　<span class="n">tail</span><span class="err">：</span><span class="n">string</span><span class="err">，</span><span class="n">元素的尾形</span><span class="err">。</span>
　　<span class="n">attrib</span><span class="err">：</span><span class="n">dictionary</span><span class="err">，</span><span class="n">元素的属性字典</span><span class="err">。</span>
　　
　　<span class="c1">#针对属性的操作</span>
　　<span class="n">clear</span><span class="p">()</span><span class="err">：</span><span class="n">清空元素的后代</span><span class="err">、</span><span class="n">属性</span><span class="err">、</span><span class="n">text和tail也设置为None</span><span class="err">。</span>
　　<span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span><span class="err">：</span><span class="n">获取key对应的属性值</span><span class="err">，</span><span class="n">如该属性不存在则返回default值</span><span class="err">。</span>
　　<span class="n">items</span><span class="p">()</span><span class="err">：</span><span class="n">根据属性字典返回一个列表</span><span class="err">，</span><span class="n">列表元素为</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="err">）。</span>
　　<span class="n">keys</span><span class="p">()</span><span class="err">：</span><span class="n">返回包含所有元素属性键的列表</span><span class="err">。</span>
　　<span class="nb">set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span><span class="err">：</span><span class="n">设置新的属性键与值</span><span class="err">。</span>

　　<span class="c1">#针对后代的操作</span>
　　<span class="n">append</span><span class="p">(</span><span class="n">subelement</span><span class="p">)</span><span class="err">：</span><span class="n">添加直系子元素</span><span class="err">。</span>
　　<span class="n">extend</span><span class="p">(</span><span class="n">subelements</span><span class="p">)</span><span class="err">：</span><span class="n">增加一串元素对象作为子元素</span><span class="err">。＃</span><span class="n">python2</span><span class="mf">.7</span><span class="n">新特性</span>
　　<span class="n">find</span><span class="p">(</span><span class="n">match</span><span class="p">)</span><span class="err">：</span><span class="n">寻找第一个匹配子元素</span><span class="err">，</span><span class="n">匹配对象可以为tag或path</span><span class="err">。</span>
　　<span class="n">findall</span><span class="p">(</span><span class="n">match</span><span class="p">)</span><span class="err">：</span><span class="n">寻找所有匹配子元素</span><span class="err">，</span><span class="n">匹配对象可以为tag或path</span><span class="err">。</span>
　　<span class="n">findtext</span><span class="p">(</span><span class="n">match</span><span class="p">)</span><span class="err">：</span><span class="n">寻找第一个匹配子元素</span><span class="err">，</span><span class="n">返回其text值</span><span class="err">。</span><span class="n">匹配对象可以为tag或path</span><span class="err">。</span>
　　<span class="n">insert</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">element</span><span class="p">)</span><span class="err">：</span><span class="n">在指定位置插入子元素</span><span class="err">。</span>
　　<span class="nb">iter</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span><span class="err">：</span><span class="n">生成遍历当前元素所有后代或者给定tag的后代的迭代器</span><span class="err">。＃</span><span class="n">python2</span><span class="mf">.7</span><span class="n">新特性</span>
　　<span class="n">iterfind</span><span class="p">(</span><span class="n">match</span><span class="p">)</span><span class="err">：</span><span class="n">根据tag或path查找所有的后代</span><span class="err">。</span>
　　<span class="n">itertext</span><span class="p">()</span><span class="err">：</span><span class="n">遍历所有后代并返回text值</span><span class="err">。</span>
　　<span class="n">remove</span><span class="p">(</span><span class="n">subelement</span><span class="p">)</span><span class="err">：</span><span class="n">删除子元素</span><span class="err">。</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>ElementTree object</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="k">class</span> <span class="nc">xml</span><span class="o">.</span><span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">ElementTree</span><span class="p">(</span><span class="n">element</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
　　<span class="n">element如果给定</span><span class="err">，</span><span class="n">则为新的ElementTree的根节点</span><span class="err">。</span>

　　<span class="n">_setroot</span><span class="p">(</span><span class="n">element</span><span class="p">)</span><span class="err">：</span><span class="n">用给定的element替换当前的根节点</span><span class="err">。</span><span class="n">慎用</span><span class="err">。</span>
　　
　　<span class="c1"># 以下方法与Element类中同名方法近似，区别在于它们指定以根节点作为操作对象。</span>
　　<span class="n">find</span><span class="p">(</span><span class="n">match</span><span class="p">)</span>
　　<span class="n">findall</span><span class="p">(</span><span class="n">match</span><span class="p">)</span>
　　<span class="n">findtext</span><span class="p">(</span><span class="n">match</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
　　<span class="n">getroot</span><span class="p">()</span><span class="err">：</span><span class="n">获取根节点</span><span class="o">.</span>
　　<span class="nb">iter</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
　　<span class="n">iterfind</span><span class="p">(</span><span class="n">match</span><span class="p">)</span>
　　<span class="n">parse</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span><span class="err">：</span><span class="n">装载xml对象</span><span class="err">，</span><span class="n">source可以为文件名或文件类型对象</span><span class="o">.</span>
　　<span class="n">write</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;us-ascii&#34;</span><span class="p">,</span> <span class="n">xml_declaration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">default_namespace</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">&#34;xml&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>Module Method</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="n">xml</span><span class="o">.</span><span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">Comment</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">创建一个特别的element</span><span class="err">，</span><span class="n">通过标准序列化使其代表了一个comment</span><span class="err">。</span><span class="n">comment可以为bytestring或unicode</span><span class="err">。</span>

<span class="n">xml</span><span class="o">.</span><span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
<span class="n">生成一个element</span> <span class="n">tree</span><span class="err">，</span><span class="n">通过sys</span><span class="o">.</span><span class="n">stdout输出</span><span class="err">，</span><span class="n">elem可以是元素树或单个元素</span><span class="err">。</span><span class="n">这个方法最好只用于debug</span><span class="err">。</span>

<span class="n">xml</span><span class="o">.</span><span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="n">text是一个包含XML数据的字符串</span><span class="err">，</span><span class="n">与XML</span><span class="p">()</span><span class="n">方法类似</span><span class="err">，</span><span class="n">返回一个Element实例</span><span class="err">。</span>

<span class="n">xml</span><span class="o">.</span><span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">fromstringlist</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">从字符串的序列对象中解析xml文档</span><span class="err">。</span><span class="n">缺省parser为XMLParser</span><span class="err">，</span><span class="n">返回Element实例</span><span class="err">。</span>

<span class="n">xml</span><span class="o">.</span><span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">iselement</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
<span class="n">检查是否是一个element对象</span><span class="err">。</span>

<span class="n">xml</span><span class="o">.</span><span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">iterparse</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">events</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">将文件或包含xml数据的文件对象递增解析为element</span> <span class="n">tree</span><span class="err">，</span><span class="n">并且报告进度</span><span class="err">。</span><span class="n">events是一个汇报列表</span><span class="err">，</span><span class="n">如果忽略</span><span class="err">，</span><span class="n">将只有end事件会汇报出来</span><span class="err">。</span>
<span class="n">注意</span><span class="err">，</span><span class="n">iterparse</span><span class="p">()</span><span class="n">只会在看见开始标签的</span><span class="s2">&#34;&gt;&#34;</span><span class="n">符号时才会抛出start事件</span><span class="err">，</span><span class="n">因此届时属性是已经定义了</span><span class="err">，</span><span class="n">但是text和tail属性在那时还没有定义</span><span class="err">，</span><span class="n">同样子元素也没有定义</span><span class="err">，</span><span class="n">因此他们可能不能被显示出来</span><span class="err">。</span><span class="n">如果你想要完整的元素</span><span class="err">，</span><span class="n">请查找end事件</span><span class="err">。</span>

<span class="n">xml</span><span class="o">.</span><span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">将一个文件或者字符串解析为element</span> <span class="n">tree</span><span class="err">。</span>

<span class="n">xml</span><span class="o">.</span><span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">ProcessingInstruction</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">这个方法会创建一个特别的element</span><span class="err">，</span><span class="n">该element被序列化为一个xml处理命令</span><span class="err">。</span>

<span class="n">xml</span><span class="o">.</span><span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">register_namespace</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">uri</span><span class="p">)</span>
<span class="n">注册命名空间前缀</span><span class="err">。</span><span class="n">这个注册是全局有效</span><span class="err">，</span><span class="n">任何已经给出的前缀或者命名空间uri的映射关系会被删除</span><span class="err">。</span>

<span class="n">xml</span><span class="o">.</span><span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">attrib</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">extra</span><span class="p">)</span>
<span class="n">子元素工厂</span><span class="err">，</span><span class="n">创建一个Element实例并追加到已知的节点</span><span class="err">。</span>

<span class="n">xml</span><span class="o">.</span><span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">tostring</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;us-ascii&#34;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&#34;xml&#34;</span><span class="p">)</span>
<span class="n">生成一个字符串来表示表示xml的element</span><span class="err">，</span><span class="n">包括所有子元素</span><span class="err">。</span><span class="n">element是Element实例</span><span class="err">，</span><span class="n">method为</span><span class="s2">&#34;xml&#34;</span><span class="p">,</span><span class="s2">&#34;html&#34;</span><span class="p">,</span><span class="s2">&#34;text&#34;</span><span class="err">。</span><span class="n">返回包含了xml数据的字符串</span><span class="err">。</span>

<span class="n">xml</span><span class="o">.</span><span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">tostringlist</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;us-ascii&#34;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&#34;xml&#34;</span><span class="p">)</span>
<span class="n">生成一个字符串来表示表示xml的element</span><span class="err">，</span><span class="n">包括所有子元素</span><span class="err">。</span><span class="n">element是Element实例</span><span class="err">，</span><span class="n">method为</span><span class="s2">&#34;xml&#34;</span><span class="p">,</span><span class="s2">&#34;html&#34;</span><span class="p">,</span><span class="s2">&#34;text&#34;</span><span class="err">。</span><span class="n">返回包含了xml数据的字符串列表</span><span class="err">。</span>

<span class="n">xml</span><span class="o">.</span><span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">XML</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">从一个字符串常量中解析出xml片段</span><span class="err">。</span><span class="n">返回Element实例</span><span class="err">。</span>

<span class="n">xml</span><span class="o">.</span><span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">XMLID</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">从字符串常量解析出xml片段</span><span class="err">，</span><span class="n">同时返回一个字典</span><span class="err">，</span><span class="n">用以映射element的id到其自身</span><span class="err">。</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="xmltodict">xmltodict</h2>
<p><a href="https://github.com/martinblech/xmltodict">xmltodict</a> is a Python module that allows you to process XML as if you were processing JSON.</p>
<p>For an XML file like this.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;mydocument</span> <span class="na">has=</span><span class="s">&#34;an attribute&#34;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;and&gt;</span>
    <span class="nt">&lt;many&gt;</span>elements<span class="nt">&lt;/many&gt;</span>
    <span class="nt">&lt;many&gt;</span>more elements<span class="nt">&lt;/many&gt;</span>
  <span class="nt">&lt;/and&gt;</span>
  <span class="nt">&lt;plus</span> <span class="na">a=</span><span class="s">&#34;complex&#34;</span><span class="nt">&gt;</span>
    element as well
  <span class="nt">&lt;/plus&gt;</span>
<span class="nt">&lt;/mydocument&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>It can be loaded into a Python dictionary at</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">xmltodict</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;path/to/file.xml&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">xmltodict</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">fd</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</code></pre></td></tr></table>
</div>
</div><p>You can access elements, attributes and values.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="n">doc</span><span class="p">[</span><span class="s1">&#39;mydocument&#39;</span><span class="p">][</span><span class="s1">&#39;@has&#39;</span><span class="p">]</span> <span class="c1"># == u&#39;an attribute&#39;</span>
<span class="n">doc</span><span class="p">[</span><span class="s1">&#39;mydocument&#39;</span><span class="p">][</span><span class="s1">&#39;and&#39;</span><span class="p">][</span><span class="s1">&#39;many&#39;</span><span class="p">]</span> <span class="c1"># == [u&#39;elements&#39;, u&#39;more elements&#39;]</span>
<span class="n">doc</span><span class="p">[</span><span class="s1">&#39;mydocument&#39;</span><span class="p">][</span><span class="s1">&#39;plus&#39;</span><span class="p">][</span><span class="s1">&#39;@a&#39;</span><span class="p">]</span> <span class="c1"># == u&#39;complex&#39;</span>
<span class="n">doc</span><span class="p">[</span><span class="s1">&#39;mydocument&#39;</span><span class="p">][</span><span class="s1">&#39;plus&#39;</span><span class="p">][</span><span class="s1">&#39;#text&#39;</span><span class="p">]</span> <span class="c1"># == u&#39;element as well&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>xmltodict also has an unparse function that allows you to convert back to XML. this function has a streaming mode suitable for handling files that cannot be put into memory, and it also supports namespaces.</p>
<p><a href="https://github.com/quandyfactory/dicttoxml">dicttoxml</a> is a tool for converting dictionaries to xml, for those interested.</p>
<h2 id="untangle">untangle</h2>
<p>The <a href="https://github.com/stchris/untangle">untangle</a> library maps an XML document to a Python object that contains the node and attribute information of the original document in its structure.</p>
<p>Example.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34;?&gt;</span>
<span class="nt">&lt;root&gt;</span>
    <span class="nt">&lt;child</span> <span class="na">name=</span><span class="s">&#34;child1&#34;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/root&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>It can be loaded as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">untangle</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">untangle</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;path/to/file.xml&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>Then you can get the child element name like this.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="n">obj</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">child</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><p>untangle also supports loading XML from strings or URLs.</p>
<h2 id="other-tools">Other Tools</h2>
<ul>
<li>lxml: <a href="https://www.biaodianfu.com/python-lxml-xpath.html">Data extraction tool lxml and xpath</a></li>
<li>BeautifulSoup: <a href="https://www.biaodianfu.com/python-beautiful-soup.html">Python data parsing tool: Beautiful Soup</a></li>
<li><a href="https://github.com/scrapy/parsel">Parsel</a>: Scrapy&rsquo;s own HTML and XML parsing tool that can use XPath, CSS selectors or regular expressions for data extraction.</li>
<li><a href="https://xmldataset.readthedocs.io/en/latest/">xmldataset</a>: A Python library that simplifies the extraction of datasets from XML content.</li>
</ul>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/python/">python</a>
          <a href="/tags/xml/">xml</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-10/python-json-jsonp/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Python JSON/JSONP Data Parsing</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-10/raid/">
            <span class="next-text nav-default">Disk Array RAID Types and Comparisons</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
