<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>If __name__ == &#39;__main__&#39; in Python - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="In the process of learning Python, or reading other code written to it, you will encounter code like this.
1 2  if __name__ == &amp;#34;__main__&amp;#34;: print(&amp;#34;Hello World!&amp;#34;)   We found that even if we remove the if __name__ == &#39;__main__&#39;, the program still runs as usual. Many of you only know that this is how it works, and you don&amp;rsquo;t look deeper into what exactly it does.
Program entrance For many programming languages, a program must have an entry point, such as C, C&#43;&#43;, and the fully object-oriented programming languages Java, C#, and so on." /><meta name="keywords" content="python, if __name__ == ‘__main__’" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-10/pytho-if-name-main/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="If __name__ == &#39;__main__&#39; in Python" />
<meta property="og:description" content="In the process of learning Python, or reading other code written to it, you will encounter code like this.
1 2  if __name__ == &#34;__main__&#34;: print(&#34;Hello World!&#34;)   We found that even if we remove the if __name__ == &#39;__main__&#39;, the program still runs as usual. Many of you only know that this is how it works, and you don&rsquo;t look deeper into what exactly it does.
Program entrance For many programming languages, a program must have an entry point, such as C, C&#43;&#43;, and the fully object-oriented programming languages Java, C#, and so on." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-10/pytho-if-name-main/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-10-22T13:59:07+08:00" />
<meta property="article:modified_time" content="2021-10-22T13:59:07+08:00" />

<meta itemprop="name" content="If __name__ == &#39;__main__&#39; in Python">
<meta itemprop="description" content="In the process of learning Python, or reading other code written to it, you will encounter code like this.
1 2  if __name__ == &#34;__main__&#34;: print(&#34;Hello World!&#34;)   We found that even if we remove the if __name__ == &#39;__main__&#39;, the program still runs as usual. Many of you only know that this is how it works, and you don&rsquo;t look deeper into what exactly it does.
Program entrance For many programming languages, a program must have an entry point, such as C, C&#43;&#43;, and the fully object-oriented programming languages Java, C#, and so on."><meta itemprop="datePublished" content="2021-10-22T13:59:07+08:00" />
<meta itemprop="dateModified" content="2021-10-22T13:59:07+08:00" />
<meta itemprop="wordCount" content="868">
<meta itemprop="keywords" content="python," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="If __name__ == &#39;__main__&#39; in Python"/>
<meta name="twitter:description" content="In the process of learning Python, or reading other code written to it, you will encounter code like this.
1 2  if __name__ == &#34;__main__&#34;: print(&#34;Hello World!&#34;)   We found that even if we remove the if __name__ == &#39;__main__&#39;, the program still runs as usual. Many of you only know that this is how it works, and you don&rsquo;t look deeper into what exactly it does.
Program entrance For many programming languages, a program must have an entry point, such as C, C&#43;&#43;, and the fully object-oriented programming languages Java, C#, and so on."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">If __name__ == &#39;__main__&#39; in Python</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-10-22 13:59:07 </span>
        <div class="post-category">
            <a href="/categories/skills/"> skills </a>
            </div>
          <span class="more-meta"> 868 words </span>
          <span class="more-meta"> 5 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#program-entrance">Program entrance</a></li>
        <li><a href="#what-is-__name__">What is <code>__name__</code>?</a>
          <ul>
            <li><a href="#scenario-1-running-the-script-directly">Scenario 1: Running the script directly</a></li>
            <li><a href="#scenario-2-import-from-other-scripts">Scenario 2: Import from other scripts</a></li>
            <li><a href="#__name__-can-display-the-package-path"><code>__name__</code> can display the package path</a></li>
          </ul>
        </li>
        <li><a href="#code-purpose-test-the-function-in-the-module">Code purpose: test the function in the module</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>In the process of learning Python, or reading other code written to it, you will encounter code like this.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&#34;__main__&#34;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Hello World!&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/22/b1bdaf361e4b43a4b1242af0ecd5335d.png" alt=""></p>
<p>We found that even if we remove the <code>if __name__ == '__main__'</code>, the program still runs as usual. Many of you only know that this is how it works, and you don&rsquo;t look deeper into what exactly it does.</p>
<h2 id="program-entrance">Program entrance</h2>
<p>For many programming languages, a program must have an entry point, such as C, C++, and the fully object-oriented programming languages Java, C#, and so on. If you have worked with these languages, the concept of a program entry point should be well understood. Similarly, Java and C# must have a main class that contains the Main method as the program entry point.</p>
<p>Python is different in that it is a scripting language, and instead of compiling the program into a binary before running it, it is dynamically interpreted line by line. That is, it runs from the first line of the script and has no uniform entry point.</p>
<p>if <code>__name__ == &quot;__main__&quot;</code>: is essentially an if judgment, but it is not a simple if judgment. That is, when the .py file is run, <code>__name__ </code>is <code>'__main__'</code> when the code under if is run, then no not run. Of course you can also write the code like this.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&#34;__main__&#34;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Hello World!&#34;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Hello Mars!&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="what-is-__name__">What is <code>__name__</code>?</h2>
<p><strong>name</strong> is a built-in Python variable that is a required property of every Python module, but its value depends on how you are executing this code.</p>
<ul>
<li>When you execute a script directly, the <code>__name__</code> variable of that script is equal to <code>'__main__'</code></li>
<li>When this script is imported into another program, the <code>__name__</code> variable is equal to the name of the script itself</li>
</ul>
<h3 id="scenario-1-running-the-script-directly">Scenario 1: Running the script directly</h3>
<p>Suppose we have a <code>nameScript.py</code> with the following code.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="k">def</span> <span class="nf">myFunction</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The value of __name__ is &#39;</span> <span class="o">+</span> <span class="vm">__name__</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">myFunction</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>The flow after direct execution of this file is.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/22/dc4b8d8aeb1340a38e369bd7ae4f724c.png" alt=""></p>
<p>The <code>__name__</code> variable is set to <code>'__main__'</code> before all other code is executed. After that, the bodies of the functions main() and myFunction() are loaded by executing the def statement. Then, because the expression after this if statement is true, the function main() is called. The main() function in turn calls myFunction(), which prints out the value of the variable <code>'__main__'</code>.</p>
<h3 id="scenario-2-import-from-other-scripts">Scenario 2: Import from other scripts</h3>
<p>If you need to reuse this myFunction() function in another script, for example in importingScript.py, we can import <code>nameScript.py</code> as a module.</p>
<p>The content of <code>importingScript.py</code> is as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">nameScript</span> <span class="k">as</span> <span class="nn">ns</span>

<span class="n">ns</span><span class="o">.</span><span class="n">myFunction</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>At this point, we have two different scopes: one for importingScript and one for nameScript.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/10/22/3974d79c040a47fd9f4f1c90a68a6478.png" alt=""></p>
<p>In <code>importingScript.py</code>, the <code>__name__</code> variable is set to <code>'__main__'</code>. When importing nameScript, Python looks for a .py file with the corresponding name in the local path and in the path pointed to by the environment variable PATH, and when it finds it, it runs the code in the imported file.</p>
<p>This time, however, its own <code>__name__</code> variable is set to &lsquo;nameScript&rsquo; at import time, and as usual, the bodies of the functions main() and myFunction() are loaded. However, this time the expression after the if statement results in a false false, so the main() function is not called.</p>
<p>After the import is complete, go back to <code>importingScript.py</code>. Now that the function definition in the nameScript module has been imported into the current scope, we call the function in the module by means of ns.myFunction(), which returns the value of the variable &lsquo;nameScript&rsquo; inside the module.</p>
<p>If you try to print the value of the <code>__name__</code> variable in importingScript, then when you execute importingScript directly, it will also output <code>'__main__'</code>. The reason for this is that the variable is in the scope of importingScript.</p>
<h3 id="__name__-can-display-the-package-path"><code>__name__</code> can display the package path</h3>
<p>We create a directory structure like this.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">a
├── b
│   ├── c.py
│   └── __init__.py
└── __init__.py
d.py
</code></pre></td></tr></table>
</div>
</div><p>Code in the <code>c.py</code> file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="nb">print</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>Code in the <code>d.py</code> file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">from</span> <span class="nn">a.b</span> <span class="kn">import</span> <span class="n">c</span>
</code></pre></td></tr></table>
</div>
</div><p>Running the <code>d.py</code> file results in the following.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">a.b.c
</code></pre></td></tr></table>
</div>
</div><p>At this point, the <code>__name__</code> attribute of the <code>a.py</code> file becomes a.b.c, which exactly reflects the package path it is in.</p>
<h2 id="code-purpose-test-the-function-in-the-module">Code purpose: test the function in the module</h2>
<p>Since a script&rsquo;s own code is executed when it is introduced, we write a paragraph in each script if <code>__name__ == '__main__'</code>: If you want some code to be executed only when the script is executed directly, then put that code into an if statement block, the most common scenario is the test code.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="k">def</span> <span class="nf">safe_division</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="n">a</span><span class="o">/</span><span class="n">b</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">safe_division</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">safe_division</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>After we write a function, we inevitably have to write some test code, and these test code we do not want them to be executed when we introduce them, but only when we actively execute for testing.</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/python/">python</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-10/python-built-in-functions/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Python built-in functions</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-10/cplusplus-std-declval-and-decltype/">
            <span class="next-text nav-default">Understand declval and decltype</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
