<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Excellent Grafana K8S Plugin - DevOpsProdigy KubeGraf - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="DevOpsProdigy KubeGraf is an excellent Grafana Kubernetes plugin, an update to Grafana&amp;rsquo;s official Kubernetes Plugin. The plugin can be used to visualize and analyze the performance of a Kubernetes cluster, visually displaying the metrics and characteristics of the main services of the Kubernetes cluster through various graphs, and can also be used to examine the application lifecycle and error logs. Environment Requirements To install and use the DevOpsProdigy KubeGraf plugin" /><meta name="keywords" content="Grafana, K8s, Kubegraf" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-12/grafana-k8s-plugin-kubegraf/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Excellent Grafana K8S Plugin - DevOpsProdigy KubeGraf" />
<meta property="og:description" content="DevOpsProdigy KubeGraf is an excellent Grafana Kubernetes plugin, an update to Grafana&rsquo;s official Kubernetes Plugin. The plugin can be used to visualize and analyze the performance of a Kubernetes cluster, visually displaying the metrics and characteristics of the main services of the Kubernetes cluster through various graphs, and can also be used to examine the application lifecycle and error logs. Environment Requirements To install and use the DevOpsProdigy KubeGraf plugin" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-12/grafana-k8s-plugin-kubegraf/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-12-11T14:45:39+08:00" />
<meta property="article:modified_time" content="2021-12-11T14:45:39+08:00" />

<meta itemprop="name" content="Excellent Grafana K8S Plugin - DevOpsProdigy KubeGraf">
<meta itemprop="description" content="DevOpsProdigy KubeGraf is an excellent Grafana Kubernetes plugin, an update to Grafana&rsquo;s official Kubernetes Plugin. The plugin can be used to visualize and analyze the performance of a Kubernetes cluster, visually displaying the metrics and characteristics of the main services of the Kubernetes cluster through various graphs, and can also be used to examine the application lifecycle and error logs. Environment Requirements To install and use the DevOpsProdigy KubeGraf plugin"><meta itemprop="datePublished" content="2021-12-11T14:45:39+08:00" />
<meta itemprop="dateModified" content="2021-12-11T14:45:39+08:00" />
<meta itemprop="wordCount" content="776">
<meta itemprop="keywords" content="grafana,k8s," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Excellent Grafana K8S Plugin - DevOpsProdigy KubeGraf"/>
<meta name="twitter:description" content="DevOpsProdigy KubeGraf is an excellent Grafana Kubernetes plugin, an update to Grafana&rsquo;s official Kubernetes Plugin. The plugin can be used to visualize and analyze the performance of a Kubernetes cluster, visually displaying the metrics and characteristics of the main services of the Kubernetes cluster through various graphs, and can also be used to examine the application lifecycle and error logs. Environment Requirements To install and use the DevOpsProdigy KubeGraf plugin"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Excellent Grafana K8S Plugin - DevOpsProdigy KubeGraf</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-12-11 14:45:39 </span>
        <div class="post-category">
            <a href="/categories/skills/"> skills </a>
            </div>
          <span class="more-meta"> 776 words </span>
          <span class="more-meta"> 2 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#environment-requirements">Environment Requirements</a></li>
        <li><a href="#features">Features</a>
          <ul>
            <li><a href="#application-overview">Application Overview</a></li>
            <li><a href="#cluster-status">Cluster Status</a></li>
            <li><a href="#node-overview">Node Overview</a></li>
            <li><a href="#dashboards">Dashboards</a></li>
          </ul>
        </li>
        <li><a href="#installation">Installation</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p><a href="https://github.com/devopsprodigy/kubegraf/">DevOpsProdigy KubeGraf</a> is an excellent Grafana Kubernetes plugin, an update to Grafana&rsquo;s official <a href="https://grafana.com/plugins/grafana-kubernetes-app">Kubernetes Plugin</a>. The plugin can be used to visualize and analyze the performance of a Kubernetes cluster, visually displaying the metrics and characteristics of the main services of the Kubernetes cluster through various graphs, and can also be used to examine the application lifecycle and error logs.</p>
<h2 id="environment-requirements">Environment Requirements</h2>
<p>To install and use the <code>DevOpsProdigy KubeGraf</code> plugin you need to meet the following requirements.</p>
<ul>
<li>Grafana &gt; version 5.0.0</li>
<li>Need to deploy Prometheus + node-exporter + kube-state-metrics on a Kubernetes cluster</li>
<li>Reliance on the Grafana-piechart-panel plugin</li>
</ul>
<h2 id="features">Features</h2>
<p>The plugin contains 3 main information pages with detailed information about Kubernetes clusters.</p>
<h3 id="application-overview">Application Overview</h3>
<p>This plugin displays some basic monitoring information for the applications on top of a Kubernetes cluster.</p>
<ul>
<li>Application logic diagram</li>
<li>Distribution of Kubernetes objects</li>
<li>Visualization of the application lifecycle and basic feature information</li>
<li>descriptive information about the service ports that are allowed to be accessed in the cluster</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/12/11/784bbc578dff470f9ddd1ce56b79943c.png" alt=""></p>
<h3 id="cluster-status">Cluster Status</h3>
<ul>
<li>Cluster and cluster node status information</li>
<li>Detailed information on the lifecycle of the monitored applications</li>
<li>Visualization of the location of services in the cluster</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/12/11/f369770329ea480a8b1c2dd783ca3475.png" alt=""></p>
<h3 id="node-overview">Node Overview</h3>
<ul>
<li>Cluster node information</li>
<li>Information on used and allocated resources (memory, CPU utilization) and number of containers</li>
<li>Physical distribution of Pods</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/12/11/8b07372eabd74798b4ebd77eb7ecb814.png" alt=""></p>
<h3 id="dashboards">Dashboards</h3>
<p>In addition to the usual information provided on the plugin&rsquo;s homepage, the plugin provides five additional Dashboards for us to track various performance metrics of the cluster.</p>
<ul>
<li>node dashboard</li>
</ul>
<p>This is a Dashboard with node metrics that shows resource usage, such as CPU utilization, memory consumption, percentage of CPU time in idle/iowait mode, and disk and network status.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/12/11/11f450d250b5483e8286a070bfb1c6fd.png" alt=""></p>
<ul>
<li>pod dashboard</li>
</ul>
<p>You can display the corresponding resource usage according to the selected Pod.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/12/11/1e06a1f8c38d432fbf0c085f6a154f19.png" alt=""></p>
<ul>
<li>deployments dashboard</li>
</ul>
<p>The Deployment dimension displays the resource usage associated with the corresponding resource object.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/12/11/cdf6515a43094a8fb139dca9e40a338e.png" alt=""></p>
<ul>
<li>statefulsets dashboard</li>
<li>daemonsets dashboard</li>
</ul>
<p>The above three Dashboards show the number of copies of available/unavailable applications and the container status of those applications, and also track container restarts.</p>
<h2 id="installation">Installation</h2>
<p>We have Grafana here also installed on top of a Kubernetes cluster, so we need to go into the container to install it:.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl get pods -n kube-mon
NAME                         READY   STATUS    RESTARTS   AGE
grafana-5579769f64-7729f     1/1     Running   <span class="m">0</span>          104s
......
$ kubectl <span class="nb">exec</span> -it grafana-5579769f64-7729f -n kube-mon /bin/bash
bash-5.0# grafana-cli plugins install devopsprodigy-kubegraf-app

installing devopsprodigy-kubegraf-app @ 1.3.0
from: https://grafana.com/api/plugins/devopsprodigy-kubegraf-app/versions/1.3.0/download
into: /var/lib/grafana/plugins

✔ Installed devopsprodigy-kubegraf-app successfully 

Restart grafana after installing plugins . &lt;service grafana-server restart&gt;

bash-5.0# <span class="c1"># 如果没有安装 Grafana-piechart-panel 插件同样需要安装</span>
bash-5.0# grafana-cli plugins install Grafana-piechart-panel
......
</code></pre></td></tr></table>
</div>
</div><p>After the plugin is installed, you need to restart Grafana before it takes effect. We are a Pod here, so you can just delete the Pod rebuild (provided of course that the plugin directory is well persisted):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl delete pod grafana-5579769f64-7729f -n kube-mon
pod <span class="s2">&#34;grafana-5579769f64-7729f&#34;</span> deleted
</code></pre></td></tr></table>
</div>
</div><p>Once the Pod removal rebuild is complete, the plugin is installed successfully. Then open Grafana in your browser and find the plugin and click <code>enable</code> to enable the plugin.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/12/11/16d3882be00d4cd9bd4c14cee40b5a0e.png" alt=""></p>
<p>Click <code>Set up your first k8s-cluster</code> to create a new Kubernetes cluster:</p>
<ul>
<li>Just use the Kubernetes Service address for the URL: <a href="https://kubernetes.default/">https://kubernetes.default:443</a></li>
<li>Access access mode is used: <code>Server(default)</code></li>
<li>Since the plugin accesses various resource objects information of the Kubernetes cluster, we need to configure the access rights, here we can simply use kubectl&rsquo;s <code>kubeconfig</code> to configure it.</li>
<li>Check the <code>TLS Client Auth</code> and <code>With CA Cert</code> options under Auth</li>
<li>The value under <code>TLS Auth Details</code> corresponds to the certificate information in <code>kubeconfig</code>. For example, our <code>kubeconfig</code> file here is in the following format.</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span><span class="w"></span><span class="nt">clusters</span><span class="p">:</span><span class="w">
</span><span class="w"></span>- <span class="nt">cluster</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">certificate-authority-data</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;certificate-authority-data&gt;</span><span class="w">
</span><span class="w">    </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="l">https://ydzs-master:6443</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">kubernetes</span><span class="w">
</span><span class="w"></span><span class="nt">contexts</span><span class="p">:</span><span class="w">
</span><span class="w"></span>- <span class="nt">context</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">cluster</span><span class="p">:</span><span class="w"> </span><span class="l">kubernetes</span><span class="w">
</span><span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l">kubernetes-admin</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">kubernetes-admin@kubernetes</span><span class="w">
</span><span class="w"></span><span class="nt">current-context</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;kubernetes-admin@kubernetes&#39;</span><span class="w">
</span><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Config</span><span class="w">
</span><span class="w"></span><span class="nt">preferences</span><span class="p">:</span><span class="w"> </span>{}<span class="w">
</span><span class="w"></span><span class="nt">users</span><span class="p">:</span><span class="w">
</span><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">kubernetes-admin</span><span class="w">
</span><span class="w">  </span><span class="nt">user</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">client-certificate-data</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;client-certificate-data&gt;</span><span class="w">
</span><span class="w">    </span><span class="nt">client-key-data</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;client-key-data&gt;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>Then the value of <code>CA Cert</code> corresponds to the base64 decoded value of <code>&lt;certificate-authority-data&gt;</code> in <code>kubeconfig</code>; the value of <code>Client Cert</code> corresponds to the base64 decoded value of <code>&lt;client-certificate-data&gt;</code>; the value of <code>Client Key</code> corresponds to the base64 decoded value of <code>&lt;client-key-data&gt;</code>; and the value of <code>Client Key</code> corresponds to the base64 decoded value of The value of <code>Client Key</code> corresponds to the value of <code>&lt;client-key-data&gt;</code> after base64 decoding.</p>
<blockquote>
<p>For base64 decoding, we recommend using some online services such as <a href="https://www.base64decode.org/">https://www.base64decode.org/</a> , which is very convenient.</p>
</blockquote>
<ul>
<li>Finally, select the prometheus datasource from the <code>additional datasources</code> drop-down list.</li>
<li>Click <code>Save &amp; Test</code> to save it successfully.</li>
</ul>
<p>Once the plugin is configured, the <code>DevOpsProdigy KubeGraf</code> plugin portal will appear in the left sidebar, and you can view the status of the entire cluster and the related Dashboard monitoring charts through the plugin page.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/12/11/f5f8a38e3906498db2382c974da5dfd4.png" alt=""></p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/grafana/">grafana</a>
          <a href="/tags/k8s/">k8s</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-12/install-kafka-in-kubernetes/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Deploying Kafka on a Kubernetes cluster</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-12/learn-mmap/">
            <span class="next-text nav-default">Re-learning memory mapping (mmap) in Java</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
