<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Faster Maven is here! - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="One of the biggest disadvantages of Maven, which is often compared to Gradle, is that Maven builds slowly, Gradle builds 2 to 10 times faster than Maven, and today Maven can be faster as well. The Apache Maven team took inspiration from Gradle and Takari (Maven lifecycle optimizer) to make enhancements to Maven, resulting in the maven-mvnd project.
Brief introduction mvnd is not a refactoring of Maven, but rather has Maven built in." /><meta name="keywords" content="maven, mvnd" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-12/maven/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Faster Maven is here!" />
<meta property="og:description" content="One of the biggest disadvantages of Maven, which is often compared to Gradle, is that Maven builds slowly, Gradle builds 2 to 10 times faster than Maven, and today Maven can be faster as well. The Apache Maven team took inspiration from Gradle and Takari (Maven lifecycle optimizer) to make enhancements to Maven, resulting in the maven-mvnd project.
Brief introduction mvnd is not a refactoring of Maven, but rather has Maven built in." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-12/maven/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-12-25T21:12:38+08:00" />
<meta property="article:modified_time" content="2021-12-25T21:12:38+08:00" />

<meta itemprop="name" content="Faster Maven is here!">
<meta itemprop="description" content="One of the biggest disadvantages of Maven, which is often compared to Gradle, is that Maven builds slowly, Gradle builds 2 to 10 times faster than Maven, and today Maven can be faster as well. The Apache Maven team took inspiration from Gradle and Takari (Maven lifecycle optimizer) to make enhancements to Maven, resulting in the maven-mvnd project.
Brief introduction mvnd is not a refactoring of Maven, but rather has Maven built in."><meta itemprop="datePublished" content="2021-12-25T21:12:38+08:00" />
<meta itemprop="dateModified" content="2021-12-25T21:12:38+08:00" />
<meta itemprop="wordCount" content="592">
<meta itemprop="keywords" content="maven,mvnd," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Faster Maven is here!"/>
<meta name="twitter:description" content="One of the biggest disadvantages of Maven, which is often compared to Gradle, is that Maven builds slowly, Gradle builds 2 to 10 times faster than Maven, and today Maven can be faster as well. The Apache Maven team took inspiration from Gradle and Takari (Maven lifecycle optimizer) to make enhancements to Maven, resulting in the maven-mvnd project.
Brief introduction mvnd is not a refactoring of Maven, but rather has Maven built in."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Faster Maven is here!</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-12-25 21:12:38 </span>
        <div class="post-category">
            <a href="/categories/skills/"> skills </a>
            </div>
          <span class="more-meta"> 592 words </span>
          <span class="more-meta"> 3 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#brief-introduction">Brief introduction</a>
          <ul>
            <li><a href="#using-graalvm-instead-of-jvm">Using GraalVM instead of JVM</a></li>
            <li><a href="#jit-support">JIT support</a></li>
            <li><a href="#parallel-builds">Parallel builds</a></li>
          </ul>
        </li>
        <li><a href="#a-simple-attempt">A simple attempt</a>
          <ul>
            <li><a href="#installation">Installation</a></li>
            <li><a href="#configuration">Configuration</a></li>
            <li><a href="#use">Use</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>One of the biggest disadvantages of <strong>Maven</strong>, which is often compared to <strong>Gradle</strong>, is that <strong>Maven</strong> builds slowly, <strong>Gradle</strong> builds 2 to 10 times faster than <strong>Maven</strong>, and today <strong>Maven</strong> can be faster as well. The <strong>Apache Maven</strong> team took inspiration from <strong>Gradle</strong> and <a href="http://takari.io/book/40-lifecycle.html">Takari (Maven lifecycle optimizer)</a> to make enhancements to <strong>Maven</strong>, resulting in the <a href="https://github.com/apache/maven-mvnd">maven-mvnd</a> project.</p>
<h2 id="brief-introduction">Brief introduction</h2>
<p><strong>mvnd</strong> is not a refactoring of <strong>Maven</strong>, but rather has <strong>Maven</strong> built in. It is actually one or more Maven daemons used to perform the actual build services. A single daemon instance can serve <strong>Maven</strong> builds for multiple consecutive requests from <strong>mvnd</strong> clients. When there are no idle daemons to support build requests, <strong>mvnd</strong> can generate multiple daemons in parallel</p>
<h3 id="using-graalvm-instead-of-jvm">Using GraalVM instead of JVM</h3>
<p><strong>mvnd</strong> is fast because it uses <strong>GraalVM</strong> instead of the traditional <strong>JVM</strong>, so it starts faster, uses less memory, and doesn&rsquo;t need to start a new <strong>JVM</strong> for each build when implementing a build. In addition the <strong>Maven</strong> plugin no longer needs to be loaded multiple times at build time, but is cached across multiple builds. <strong>SNAPSHOT</strong> versions of Maven plugins are not cached.</p>
<h3 id="jit-support">JIT support</h3>
<p>The <strong>JIT</strong> (Just In Time) real-time compilation feature of <strong>GraalVM</strong> is also used in <strong>Maven</strong> build jobs. <strong>JIT</strong> can greatly reduce compilation time, and <strong>JIT</strong> optimized code is immediately available during repeated builds, which also greatly improves build efficiency.</p>
<h3 id="parallel-builds">Parallel builds</h3>
<p>Currently <strong>Maven 3</strong>&rsquo;s parallel builds are still experimental and require that the plugins used must be thread-safe. By default, <strong>mvnd</strong> supports parallel builds using multiple CPU cores. Of course, if your source code does not support parallel builds, you can switch to serial builds by adding the <code>- T1</code> parameter.</p>
<h2 id="a-simple-attempt">A simple attempt</h2>
<p>Next, a brief attempt at <strong>mvnd</strong>.</p>
<h3 id="installation">Installation</h3>
<p>Currently <strong>mvnd</strong> has support for <strong>Linux</strong>, <strong>MacOS</strong>, <strong>Windows</strong> platforms. You can install them through <strong>SDKMAN</strong>, <strong>Homebrew</strong>, <strong>Chocolatey</strong> package managers respectively. You can also go directly to <a href="https://github.com/mvndaemon/mvnd/releases">mvnd distribution repository</a> to download the corresponding binary for installation. Here is an example of <strong>Windows</strong>, I choose <strong>Chocolatey</strong> to install.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">choco install mvndaemon
</code></pre></td></tr></table>
</div>
</div><p>It may take a little longer.</p>
<h3 id="configuration">Configuration</h3>
<p>The configuration is very simple, you only need to pay attention to two things</p>
<ul>
<li>Make sure the <code>bin</code> directory of <strong>mvnd</strong> is associated with the <code>PATH</code> if you are not using the package manager for installation.</li>
<li>If you don&rsquo;t have or don&rsquo;t want to configure the <code>JAVA_HOME</code> environment variable, set <code>java.home</code> in <code>~/.m2/mvnd.properties</code> to specify the <strong>Java</strong> directory, for example: <code>java.home=C:\\AdoptOpenJDK\\\jdk-8</code>. Please ignore this article if you have already configured environment variables.</li>
</ul>
<p>Other configuration items can be found in <a href="https://github.com/apache/maven-mvnd/blob/master/dist/src/main/distro/conf/mvnd.properties">mvnd configuration</a>.</p>
<h3 id="use">Use</h3>
<p>After the installation and configuration is complete, the command line execution of <code>mvnd --version</code> will show the following result to indicate that the installation is successful.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">mvnd --version
mvnd native client 0.7.1-windows-amd64 (97c587c11383a67b5bd0ff8388bd94c694b91c1e)
Terminal: org.jline.terminal.impl.jansi.win.JansiWinSysTerminal
Apache Maven 3.8.3 (ff8e977a158738155dc465c6a97ffaf31982d739)
Maven home: C:\Program Files\mvndaemon\mvnd-0.7.1-windows-amd64\mvn
Java version: 1.8.0_282, vendor: AdoptOpenJDK, runtime: C:\Program Files\AdoptOpenJDK\jdk-8.0.282.8-hotspot\jre
Default locale: zh_CN, platform encoding: GBK
OS name: &#34;windows 10&#34;, version: &#34;10.0&#34;, arch: &#34;amd64&#34;, family: &#34;windows&#34;
</code></pre></td></tr></table>
</div>
</div><p>To reduce learning costs <strong>mvnd</strong> is similar to the traditional <strong>Maven</strong>, <code>mvn</code> becomes <code>mvnd</code> and you can also view the full list of command options via <code>mvnd --help</code>.</p>
<p>Honestly, parallel builds are just faster, it&rsquo;s a rocket ride. Also, the console output has been optimized.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/12/25/7b857837799b4bef814e40089218f317.gif" alt="image"></p>
<p>Thanks to <strong>GraalVM</strong>, this tool is likely to extend the life of <strong>Maven</strong> and avoid being pulled ahead of <strong>Gradle</strong> too soon. For us, this project can be a wait-and-see project to see what further moves <strong>Apache Maven</strong> officials make.</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/maven/">maven</a>
          <a href="/tags/mvnd/">mvnd</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-12/graphql-rest/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">GraphQL and REST: Two API Architectures</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-12/symlink_metadata/">
            <span class="next-text nav-default">Stuck problems caused by soft links</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
