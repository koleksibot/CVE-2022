<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Why MAC addresses do not need to be globally unique - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="MAC address (Media access control address) is a unique identifier assigned to the network interface controller (NIC), it will be used as a network address in the network segment, all hosts with a network card have a separate MAC address, the address contains a total of 48 bits, occupying A normal MAC address is represented in the format shown below, using two hexadecimal digits for each byte.
1  6e:77:0f:b8:8b:6b   Because MAC addresses need to be unique, IEEE assigns address segments based on the manufacturer of the device." /><meta name="keywords" content="mac, Unique" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-12/whys-the-design-non-unique-mac-address/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Why MAC addresses do not need to be globally unique" />
<meta property="og:description" content="MAC address (Media access control address) is a unique identifier assigned to the network interface controller (NIC), it will be used as a network address in the network segment, all hosts with a network card have a separate MAC address, the address contains a total of 48 bits, occupying A normal MAC address is represented in the format shown below, using two hexadecimal digits for each byte.
1  6e:77:0f:b8:8b:6b   Because MAC addresses need to be unique, IEEE assigns address segments based on the manufacturer of the device." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-12/whys-the-design-non-unique-mac-address/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-12-02T15:40:44+08:00" />
<meta property="article:modified_time" content="2021-12-02T15:40:44+08:00" />

<meta itemprop="name" content="Why MAC addresses do not need to be globally unique">
<meta itemprop="description" content="MAC address (Media access control address) is a unique identifier assigned to the network interface controller (NIC), it will be used as a network address in the network segment, all hosts with a network card have a separate MAC address, the address contains a total of 48 bits, occupying A normal MAC address is represented in the format shown below, using two hexadecimal digits for each byte.
1  6e:77:0f:b8:8b:6b   Because MAC addresses need to be unique, IEEE assigns address segments based on the manufacturer of the device."><meta itemprop="datePublished" content="2021-12-02T15:40:44+08:00" />
<meta itemprop="dateModified" content="2021-12-02T15:40:44+08:00" />
<meta itemprop="wordCount" content="1417">
<meta itemprop="keywords" content="mac," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Why MAC addresses do not need to be globally unique"/>
<meta name="twitter:description" content="MAC address (Media access control address) is a unique identifier assigned to the network interface controller (NIC), it will be used as a network address in the network segment, all hosts with a network card have a separate MAC address, the address contains a total of 48 bits, occupying A normal MAC address is represented in the format shown below, using two hexadecimal digits for each byte.
1  6e:77:0f:b8:8b:6b   Because MAC addresses need to be unique, IEEE assigns address segments based on the manufacturer of the device."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Why MAC addresses do not need to be globally unique</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-12-02 15:40:44 </span>
        <div class="post-category">
            <a href="/categories/skills/"> skills </a>
            </div>
          <span class="more-meta"> 1417 words </span>
          <span class="more-meta"> 7 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#modifying-addresses">Modifying Addresses</a></li>
        <li><a href="#local-area-network-communication">Local Area Network Communication</a></li>
        <li><a href="#summary">Summary</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>MAC address (Media access control address) is a unique identifier assigned to the network interface controller (NIC), it will be used as a network address in the network segment, all hosts with a network card have a separate MAC address, the address contains a total of 48 bits, occupying A normal MAC address is represented in the format shown below, using two hexadecimal digits for each byte.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">6e:77:0f:b8:8b:6b
</code></pre></td></tr></table>
</div>
</div><p>Because MAC addresses need to be unique, IEEE assigns address segments based on the manufacturer of the device. The first 24 bits of the 48-bit MAC address are the device manufacturer&rsquo;s identifier, also known as Organizationally Unique Identifier (OUI), and the next 24 bits are the serial number; if each device manufacturer can guarantee that all MAC addresses in the same namespace are unique, then all MAC addresses in the world can be guaranteed to be unique.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/12/02/fecf4ddff85b4ddf91e035c1c75ad8ed.png" alt=""></p>
<p>MAC addresses can be represented using two different formats, the 48-bit EUI-48 and the 64-bit EUI-64. This article will use MAC addresses in EUI-48 format, and EUI-64 is mainly used for the IPv6 protocol, which we will not discuss in this article. In general, the MAC address will use 24 bits to represent the serial number of the organization, but because many organizations do not produce so many devices, in practice, three different sizes of address blocks are divided.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/12/02/cfbf7a1ff7d3417987a6dbe90ddefb78.png" alt=""></p>
<ul>
<li>MA-L (MAC Address Block Large) - contains a 24-bit organizational identifier and 24-bit address.</li>
<li>MA-M (MAC Address Block Medium) - contains a 28-bit organization identifier and 20-bit address.</li>
<li>MA-S (MAC Address Block Small) - contains a 36-bit organization identifier and 12-bit address.</li>
</ul>
<p>These three different sizes of address blocks are also completely different prices, MA-L registration price of 2995 U.S. dollars, and MA-S registration price of 755 U.S. dollars, interested and needy readers can be in the IEEE official purchase, in the ideal case, all the addresses together worth about 52 trillion dollars ~ ~, really defined and mastered the standard can lie waiting for others to register to make money ~ ~.</p>
<p>This MAC address segment distributed by the agency and the device vendor to ensure that the address is unique is to ensure that the network address of all hardware worldwide, but in practice, the global uniqueness is not guaranteed and we do not need the address of the global uniqueness, mainly because of the following two reasons.</p>
<ul>
<li>we can modify the MAC address of the NIC directly through software on different operating systems.</li>
<li>It is only necessary to ensure that the MAC addresses in a LAN are not duplicated for the network to work properly.</li>
</ul>
<h2 id="modifying-addresses">Modifying Addresses</h2>
<p>Modifying the MAC address of a network device is very simple, both on Linux and on macOS. In the Linux operating system we can modify the MAC address on the device using the command <code>ifconfig</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ ifconfig eth0 <span class="p">|</span> grep ether
        ether 6e:77:0f:b8:8b:6b  txqueuelen <span class="m">1000</span>  <span class="o">(</span>Ethernet<span class="o">)</span>
$ ifconfig eth0 down
$ ifconfig eth0 hw ether 6e:77:0f:b8:8b:6a
$ ifconfig eth0 up
$ ifconfig eth0 <span class="p">|</span> grep ether
        ether 6e:77:0f:b8:8b:6a  txqueuelen <span class="m">1000</span>  <span class="o">(</span>Ethernet<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p>As long as we use the above command, we can easily modify the MAC address of the current NIC, but it is recommended not to use it on a remote Linux machine, it is better to test the relevant command on the local Linux, and it is also better to use the command to change the MAC address back after the modification test is completed; you can also use the ifconfig command to modify the MAC address on macOS, which is almost identical to the way Linux is used.</p>
<p>Because the MAC address is bound to the hardware, this way of modifying the MAC address is actually temporary, once the operating system reboots, these changes will be undone by the system, and to make similar changes permanent, you need to execute the corresponding command or modify the corresponding NIC configuration file when the system reboots.</p>
<h2 id="local-area-network-communication">Local Area Network Communication</h2>
<p>All computers and end devices need to be connected to a LAN through network adapters. Each adapter has a unique link layer address, also called a LAN address or MAC address, and MAC addresses are designed with a flat structure that they do not change with the network they are on.</p>
<p>When a device&rsquo;s network adapter wants to send a data frame to another adapter, it inserts the MAC address of the destination adapter into an Ethernet frame as shown below. Each Ethernet frame is similar to an IP datagram, containing the source and destination addresses, except that the address in the Ethernet frame is the MAC address, while the address in the IP datagram is the IP address.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/12/02/84b3b373a32348a39c832ce911aadb1a.png" alt=""></p>
<p>Data transmission in LAN is not routed and forwarded by IP address in network layer, however, IP address is generally the only information that the sending hosts know, and you still need to know their MAC addresses to send data in LAN. When our device wants to send data to other devices, it will first obtain the MAC address corresponding to the destination IP address in the LAN through ARP (Address Resolution Protocol): 1.</p>
<ol>
<li>the source host will send an ARP request to the current LAN, and the destination MAC address is <code>FF-FF-FF-FF-FF-FF</code>, which means the current request is a broadcast request, and all devices in the LAN will receive the request.</li>
<li>the hosts receiving the ARP request all check whether the destination IP and their own IP addresses are the same.
<ol>
<li>if the IP addresses do not match, the host ignores the current ARP request.</li>
<li>if the IP address is the same, the host sends an ARP response directly to the source host; 3.</li>
</ol>
</li>
<li>after receiving the ARP response, the source host updates the local cache table and continues to send data to the destination host.</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/12/02/cdb1ca38b9b642c694bc859a07f836a2.png" alt=""></p>
<p>In LAN, we usually use Hub or Switch to connect different network devices. Since all data frames are broadcasted to all hosts in the LAN connected by hub, using the same MAC address usually does not cause much problem; however, the switch will learn the MAC addresses of different devices in the LAN and forward the data frames to specific hosts, so if the LAN is composed of switch, it will affect the network communication.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/12/02/792baeecbe2b431aa8c1fa38945873c9.png" alt=""></p>
<p>Suppose two network devices A and B in the LAN with identical MAC addresses, namely <code>6e:77:0f:b8:8b:6b</code>, encounter the following situation when device A wants to send an Ethernet frame to device B: 1.</p>
<ol>
<li>device A sets both the source and destination addresses to <code>6e:77:0f:b8:8b:6b</code> in the constructed Ethernet frame and sends the data to the switch.</li>
<li>the switch receives the data frame from device A, learns the MAC address of device A from the source address of the data frame and inserts the record <code>6e:77:0f:b8:8b:6b -&gt; A</code> into the local cache.</li>
<li>the switch discovers that the destination address of the received data frame will point to network device A, so it forwards the data back to A.</li>
</ol>
<p>Because of the switch&rsquo;s MAC address learning policy, we cannot use the same MAC address in the same LAN, but because MAC address is a concept in link-layer networks, network transmission across LANs needs to pass the network layer IP protocol, so there is no similar problem when using the same MAC address in different LANs.</p>
<h2 id="summary">Summary</h2>
<p>MAC address is an important concept in link layer networks, where Ethernet data frames will be forwarded by MAC address in LANs, and globally unique MAC address is very ideal situation, however, in real network scenarios, we do not need to ensure such a strong restriction that.</p>
<ul>
<li>MAC addresses can be modified by software, and third-party cottage vendors will not apply for a separate MAC address segment in IEEE, and they may also steal MAC addresses applied by other vendors.</li>
<li>Ensuring that MAC addresses are unique in a LAN will not cause network problems, and MAC addresses in different LANs can be the same.</li>
</ul>
<p>The above conclusion is not to say that globally unique MAC addresses are meaningless; on the contrary, we should ensure that MAC addresses are as unique as possible so that we don&rsquo;t need to manually confirm the MAC addresses of all devices when setting up LANs and reduce the workload of network engineers. In the end, let&rsquo;s look at some more open related issues, interested readers can think carefully about the following questions.</p>
<ul>
<li>What is the relationship between MAC addresses and IP addresses?</li>
<li>Why do we need an IP address when we have a MAC address?</li>
</ul>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/mac/">mac</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-12/whys-the-design-ipv6-replacing-ipv4/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Why IPv6 is a difficult replacement for IPv4</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-12/whys-the-design-overlay-network/">
            <span class="next-text nav-default">Why Clusters Need Overlay Networks</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
