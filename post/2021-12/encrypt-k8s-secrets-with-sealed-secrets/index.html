<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Encrypting Kubernetes Secrets with Sealed Secrets - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="We&amp;rsquo;ve talked about GitOps practices before, and we know that GitOps advocates managing all of your configuration through Git and versioning your environment configuration and infrastructure through declarative code.
In Kubernetes, we know that you can use resource manifest files to manage a cluster&amp;rsquo;s resource objects, but it&amp;rsquo;s not a good idea to store Kubernetes Secrets data in a Git repository, which is also very insecure.
Kubernetes Secrets are resource objects used to help us store sensitive information, such as passwords, keys, certificates, OAuth Token, SSH KEY, etc." /><meta name="keywords" content="K8s, Sealed Secrets, Encrypt" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-12/encrypt-k8s-secrets-with-sealed-secrets/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Encrypting Kubernetes Secrets with Sealed Secrets" />
<meta property="og:description" content="We&rsquo;ve talked about GitOps practices before, and we know that GitOps advocates managing all of your configuration through Git and versioning your environment configuration and infrastructure through declarative code.
In Kubernetes, we know that you can use resource manifest files to manage a cluster&rsquo;s resource objects, but it&rsquo;s not a good idea to store Kubernetes Secrets data in a Git repository, which is also very insecure.
Kubernetes Secrets are resource objects used to help us store sensitive information, such as passwords, keys, certificates, OAuth Token, SSH KEY, etc." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-12/encrypt-k8s-secrets-with-sealed-secrets/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-12-12T17:27:36+08:00" />
<meta property="article:modified_time" content="2021-12-12T17:27:36+08:00" />

<meta itemprop="name" content="Encrypting Kubernetes Secrets with Sealed Secrets">
<meta itemprop="description" content="We&rsquo;ve talked about GitOps practices before, and we know that GitOps advocates managing all of your configuration through Git and versioning your environment configuration and infrastructure through declarative code.
In Kubernetes, we know that you can use resource manifest files to manage a cluster&rsquo;s resource objects, but it&rsquo;s not a good idea to store Kubernetes Secrets data in a Git repository, which is also very insecure.
Kubernetes Secrets are resource objects used to help us store sensitive information, such as passwords, keys, certificates, OAuth Token, SSH KEY, etc."><meta itemprop="datePublished" content="2021-12-12T17:27:36+08:00" />
<meta itemprop="dateModified" content="2021-12-12T17:27:36+08:00" />
<meta itemprop="wordCount" content="2123">
<meta itemprop="keywords" content="k8s," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Encrypting Kubernetes Secrets with Sealed Secrets"/>
<meta name="twitter:description" content="We&rsquo;ve talked about GitOps practices before, and we know that GitOps advocates managing all of your configuration through Git and versioning your environment configuration and infrastructure through declarative code.
In Kubernetes, we know that you can use resource manifest files to manage a cluster&rsquo;s resource objects, but it&rsquo;s not a good idea to store Kubernetes Secrets data in a Git repository, which is also very insecure.
Kubernetes Secrets are resource objects used to help us store sensitive information, such as passwords, keys, certificates, OAuth Token, SSH KEY, etc."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Encrypting Kubernetes Secrets with Sealed Secrets</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-12-12 17:27:36 </span>
        <div class="post-category">
            <a href="/categories/skills/"> skills </a>
            </div>
          <span class="more-meta"> 2123 words </span>
          <span class="more-meta"> 10 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#sealed-secrets">Sealed Secrets</a></li>
        <li><a href="#sealedsecret-scope">SealedSecret scope</a></li>
        <li><a href="#sealedsecrets-use">SealedSecrets use</a>
          <ul>
            <li><a href="#installation">Installation</a></li>
            <li><a href="#testing">Testing</a></li>
            <li><a href="#modify-namespace">Modify namespace</a></li>
            <li><a href="#changing-the-secret-name">Changing the Secret name</a></li>
            <li><a href="#creating-cluster-wide-sealedsecrets">Creating Cluster-Wide SealedSecrets</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>We&rsquo;ve talked about GitOps practices before, and we know that GitOps advocates managing all of your configuration through Git and versioning your environment configuration and infrastructure through declarative code.</p>
<p>In Kubernetes, we know that you can use resource manifest files to manage a cluster&rsquo;s resource objects, but it&rsquo;s not a good idea to store Kubernetes Secrets data in a Git repository, which is also very insecure.</p>
<p>Kubernetes Secrets are resource objects used to help us store sensitive information, such as passwords, keys, certificates, OAuth Token, SSH KEY, etc. Administrators can create Secrets objects, and then developers can very easily reference Secrets objects in resource manifest files without having to directly hardcode this sensitive information.</p>
<p>While this may seem convenient, the problem with Secrets is that they simply encode the sensitive information once in base64, and anyone can easily decrypt it to get the original data. So we say that Secrets manifest files can&rsquo;t be stored directly in a Git repository, but if we had to create them manually every time, it would make our GitOps a lot less fluid.</p>
<p>Bitnami Labs has created an open source tool called <a href="https://github.com/bitnami-labs/sealed-secrets">Sealed Secrets</a> to solve this problem.</p>
<h2 id="sealed-secrets">Sealed Secrets</h2>
<p>Sealed Secrets consists of two main components.</p>
<ul>
<li>One is the Kubernetes Operator within the cluster</li>
<li>A client tool called kubeseal</li>
</ul>
<p><code>kubeseal</code> allows us to encrypt Kubernetes Secrets objects using asymmetric encryption algorithms, and <code>SealedSecret</code> is a Kubernetes CRD resource object containing an encrypted Secret that only the controller can decrypt, so it is very secure even if SealedSecret is stored in a public code repository.</p>
<p>When we create a SealedSecret resource object in a Kubernetes cluster, the corresponding Operator will read it and generate the corresponding Secret object, which we can then use directly in the Pod. The following is an example of a SealedSecret resource object.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">bitnami.com/v1alpha1</span><span class="w">
</span><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">SealedSecret</span><span class="w">
</span><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">mysecret</span><span class="w">
</span><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">encryptedData</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">secret</span><span class="p">:</span><span class="w"> </span><span class="l">AgBy3i4OJSWK+PiTySYZZA9rO43cGDEq.....</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>When the Operator decrypts the above object, it generates the Secret object as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span><span class="w"></span><span class="nt">data</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">secret</span><span class="p">:</span><span class="w"> </span><span class="l">VGhpcyBpcyBhIHNlY3JldCE=</span><span class="w">
</span><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Secret</span><span class="w">
</span><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">creationTimestamp</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">mysecret</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h2 id="sealedsecret-scope">SealedSecret scope</h2>
<p>Only the Operator can decrypt SealedSecret, and it is generally a better practice to not allow users to read Secret directly. We can prohibit low privilege users from reading Secret by creating RBAC rules, or we can restrict users to read Secret objects from their namespace only. Although SealedSecret is designed not to read them directly, users can still bypass this process and gain access to Secret objects that they are not allowed to see.</p>
<p>The SealedSecret resource provides several ways to prevent this behavior; it is namespace scoped by default, and once a SealedSecret is restricted to a namespace, the object cannot be used in other namespaces.</p>
<p>For example, if a Secret object named foo with the value bar is created under the web namespace, we cannot use this Secret in other namespaces, even if the same Secret is required. although SealedSecret&rsquo;s controller does not use a separate decryption password for each namespace, it does Although SealedSecret&rsquo;s controller does not use a separate decryption password for each namespace, it takes namespaces and names into account during encryption, so the effect is similar to each namespace having its own separate decryption key.</p>
<p>Another situation is that we may have a user on the web namespace above who can only view some Secrets but not all, which SealedSecret also allows. When we generate a SealedSecret object for a Secret named foo in the web namespace, a user on the web namespace who only has read access to the Secret object named bar cannot change the name of the Secret to bar in the SealedSecret resource object and use it to view the Secret.</p>
<p>Although these methods can help us prevent Secrets from being abused, they are still a bit tricky to manage. In the default configuration, there is no way to define a generic Secret to be used in multiple namespaces. And it&rsquo;s likely that we have a very small team and the Kubernetes cluster is only accessed and maintained by operations staff, so we may not need this RBAC approach to permission control.</p>
<p>If we want to define SealedSecrets objects across namespaces, we can use scopes to achieve this functionality.</p>
<p>There are 3 scopes we can use to create SealedSecrets.</p>
<ul>
<li>strict (default): In this case, we need to consider the name and namespace of the Secret to encrypt it, and once we create the corresponding SealedSecret, we cannot change its name and namespace.</li>
<li>namespace-wide: This scope allows us to rename the SealedSecret object within the namespace of the encrypted Secret.</li>
<li>cluster-wide: This scope allows us to freely rename SealedSecret within the namespace of the encrypted Secret, allowing us to move the Secret to any namespace at will and name it at will.</li>
</ul>
<p>We can use the <code>--scope</code> argument when using kubeseal to specify the scope.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubeseal --scope cluster-wide --format yaml &lt;secret.yaml &gt;sealed-secret.yaml
</code></pre></td></tr></table>
</div>
</div><p>You can also use annotation in Secret to use scopes before passing the configuration to kubeseal: * <code>sealedsecrets.bitnami.com/namespace-wide: &quot;true&quot;</code> means <code>namespace-wide</code>.</p>
<ul>
<li><code>sealedsecrets.bitnami.com/namespace-wide: &quot;true&quot;</code> indicates <code>namespace-wide</code></li>
<li><code>sealedsecrets.bitnami.com/cluster-wide: &quot;true&quot;</code> means <code>cluster-wide</code></li>
</ul>
<p>If no annotation is specified, then kubeseal uses the strict scope by default, and if two annotations are set, then the scope with the larger scope takes precedence.</p>
<h2 id="sealedsecrets-use">SealedSecrets use</h2>
<h3 id="installation">Installation</h3>
<p>We mentioned earlier that SealedSecrets consists of a client-side kubeseal and a cluster-side Operator. Let&rsquo;s start by installing the client-side kubeseal tool.</p>
<p>Select the latest release from the <a href="https://github.com/bitnami-labs/sealed-secrets/releases">GitHub Release page</a> and download the latest binaries at.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ wget https://github.com/bitnami-labs/sealed-secrets/releases/download/v0.12.4/kubeseal-linux-amd64 -O kubeseal
$ sudo install -m <span class="m">755</span> kubeseal /usr/local/bin/kubeseal
$ kubeseal --version
kubeseal version: v0.12.4+dirty
</code></pre></td></tr></table>
</div>
</div><p>Then install the Operator controller on the Kubernetes cluster side at</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl apply -f https://github.com/bitnami-labs/sealed-secrets/releases/download/v0.12.4/controller.yaml
service/sealed-secrets-controller created
rolebinding.rbac.authorization.k8s.io/sealed-secrets-service-proxier created
rolebinding.rbac.authorization.k8s.io/sealed-secrets-controller created
clusterrole.rbac.authorization.k8s.io/secrets-unsealer created
serviceaccount/sealed-secrets-controller created
customresourcedefinition.apiextensions.k8s.io/sealedsecrets.bitnami.com created
role.rbac.authorization.k8s.io/sealed-secrets-service-proxier created
role.rbac.authorization.k8s.io/sealed-secrets-key-admin created
clusterrolebinding.rbac.authorization.k8s.io/sealed-secrets-controller created
deployment.apps/sealed-secrets-controller created
</code></pre></td></tr></table>
</div>
</div><p>The controller will be installed under the kube-system namespace by default:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl get pods -n kube-system -l <span class="nv">name</span><span class="o">=</span>sealed-secrets-controller
NAME                                         READY   STATUS    RESTARTS   AGE
sealed-secrets-controller-6bf8c44ff9-fqhgt   1/1     Running   <span class="m">0</span>          3m36s
</code></pre></td></tr></table>
</div>
</div><p>Once the controller is running successfully, the installation is proven to be successful. Next we can use SealedSecret to encrypt our Secret object.</p>
<h3 id="testing">Testing</h3>
<p>In order to create the SealedSecret object, we first need to create a Secret file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ <span class="nb">echo</span> -n <span class="s2">&#34;This is a secret&#34;</span> <span class="p">|</span> kubectl create secret generic mysecret --dry-run --from-file<span class="o">=</span><span class="nv">secret</span><span class="o">=</span>/dev/stdin -o yaml &gt; secret.yaml
$ cat secret.yaml
apiVersion: v1
data:
  secret: <span class="nv">VGhpcyBpcyBhIHNlY3JldA</span><span class="o">==</span>
kind: Secret
metadata:
  creationTimestamp: null
  name: mysecret
</code></pre></td></tr></table>
</div>
</div><p>Note that we used the <code>-dry-run</code> argument above, so it&rsquo;s not really created, but the Secret object is just a base64-encoded string, so it&rsquo;s not suitable for direct placement in the source repository.</p>
<p>Next, use the kubeseal tool to encrypt the object.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="l">$ kubeseal --format yaml &lt;secret.yaml &gt;sealedsecret.yaml</span><span class="w">
</span><span class="w"></span><span class="l">$ cat sealedsecret.yaml</span><span class="w">
</span><span class="w"></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">bitnami.com/v1alpha1</span><span class="w">
</span><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">SealedSecret</span><span class="w">
</span><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">creationTimestamp</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">mysecret</span><span class="w">
</span><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">default</span><span class="w">
</span><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">encryptedData</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">secret</span><span class="p">:</span><span class="w"> </span><span class="l">AgActQcD5PS8BkGE9bgB0gCtJrL0HQBA7IWoKYFcQAuOBxxAL5r+i6shnJQByxyo4Wv5y62MrxXlKZkliXuHygrCaxZaKUyvuPkmAcpcgg/P5kY2KI2yQd0ENqGzgPCBiqbBiEFYATykeAUSEe3uUrYeE0EeIDWpiX758UzukaP30Z9nr5m1Ce+rvUUrIaVwQvlHH3pCENGcnb+iCOd2N1zO4YUua1GIm8TFB9IaINCyJR1Djv5zoiu9auNEeVrTWW9gqr1Wj9UaHA7uYqMpdUvupRAdUxBL5HSjZKtcesOKvVtxLNPBmIzolMf42FrxBH42WEoXHOPsRxuKw6UIdsiigVwnTEJYIZyQg/iIdcuWHfOUkm4YcxVdnAuXGxqu8mUhlVNfHjX4SR7MvC+dRPWQNoiL2+uxweHNl0rZCddbzM0ELYdtn1bktaoFLiNeq0bhYYIXhdIzIZypqruuP7ZoNg6zz7ySf7OxhsevSTAD6x1wwKCcjr2kWvNj+zSu1D3zcKT8LTNqHlk35cxbjMDaGPjZ4VdvUGS0d/fBuEtiK6js1vMCfrMdPLiQFNOibro3yKNE8ES3rASIOj3XBxD3FUVT9lGNLsCaRQDQlx/7Fqdjg4o/iAY0qVz8EET8rFWRG/GX3miZdgI9WyHTOY6oUd10VjdEvVPI6JTISI36/HUXOybP+Tc/j6B9FlGmt1CkfzANvXGojjZVjm0yzPtH</span><span class="w">
</span><span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="nt">creationTimestamp</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">mysecret</span><span class="w">
</span><span class="w">      </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">default</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>We can see that the Secret information has been encrypted, so we can now store it in the source repository with confidence.</p>
<p>Next, let&rsquo;s use this Secret object in a sample Pod to see if we can get its data correctly.</p>
<p>Create the SealedSecret object directly from above.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl apply -f sealedsecret.yaml
sealedsecret.bitnami.com/mysecret created
</code></pre></td></tr></table>
</div>
</div><p>Once created, we can also find a Secret object named mysecret under the default namespace.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl get secret mysecret
NAME       TYPE     DATA   AGE
mysecret   Opaque   <span class="m">1</span>      7s
</code></pre></td></tr></table>
</div>
</div><p>Use the resource list shown below to create a Pod for testing.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="l">$ kubectl apply -f - &lt;&lt;EOF</span><span class="w">
</span><span class="w"></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Pod</span><span class="w">
</span><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">busybox</span><span class="w">
</span><span class="w">  </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l">busybox</span><span class="w">
</span><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">containers</span><span class="p">:</span><span class="w">
</span><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">test</span><span class="w">
</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">busybox</span><span class="w">
</span><span class="w">    </span><span class="nt">imagePullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l">IfNotPresent</span><span class="w">
</span><span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- <span class="l">sleep</span><span class="w">
</span><span class="w">      </span>- <span class="s2">&#34;3600&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">volumeMounts</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">mysecretvol</span><span class="w">
</span><span class="w">      </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/tmp/mysecret&#34;</span><span class="w">
</span><span class="w">      </span><span class="nt">readOnly</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">  </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">mysecretvol</span><span class="w">
</span><span class="w">    </span><span class="nt">secret</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="l">mysecret</span><span class="w">
</span><span class="w"></span><span class="l">EOF</span><span class="w">
</span><span class="w"></span><span class="l">pod/busybox created</span><span class="w">
</span><span class="w"></span><span class="l">$ kubectl get pods busybox</span><span class="w">
</span><span class="w"></span><span class="l">NAME      READY   STATUS    RESTARTS   AGE</span><span class="w">
</span><span class="w"></span><span class="l">busybox   1/1     Running   0          19s</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>After a successful run we can look at the password data in the container to verify that it is correct:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl <span class="nb">exec</span> -it busybox cat /tmp/mysecret/secret
This is a secret
</code></pre></td></tr></table>
</div>
</div><p>You can see that the password message we defined <code>This is a secret</code> is printed correctly.</p>
<h3 id="modify-namespace">Modify namespace</h3>
<p>Since there is no scope information specified in our Secret above, this Secret can only be used under the specified default (default) namespace. For example, here we modify the above SealedSecret object to a namespace named test.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ cp -a sealedsecret.yaml sealedsecret-test.yaml
$ sed -i <span class="s1">&#39;s/default/test/g&#39;</span> sealedsecret-test.yaml
$ kubectl create ns <span class="nb">test</span>
namespace/test created
$ kubectl apply -f sealedsecret-test.yaml
sealedsecret.bitnami.com/mysecret created
</code></pre></td></tr></table>
</div>
</div><p>Once created, we check to see if the corresponding Secret object has been generated.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl get secret -n <span class="nb">test</span>
NAME                  TYPE                                  DATA   AGE
default-token-4gwfx   kubernetes.io/service-account-token   <span class="m">3</span>      31s
</code></pre></td></tr></table>
</div>
</div><p>We can see that the corresponding Secret object is not generated, check whether the SealedSecret object is created successfully.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl get sealedsecret -n <span class="nb">test</span>
NAME       AGE
mysecret   104s
</code></pre></td></tr></table>
</div>
</div><p>We can see that the SealedSecret object exists, but the corresponding Secret is not generated, so let&rsquo;s check the controller&rsquo;s logs.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl get pods -n kube-system -l <span class="nv">name</span><span class="o">=</span>sealed-secrets-controller
NAME                                         READY   STATUS    RESTARTS   AGE
sealed-secrets-controller-6bf8c44ff9-fqhgt   1/1     Running   <span class="m">0</span>          28m
$ kubectl logs -f sealed-secrets-controller-6bf8c44ff9-fqhgt -n kube-system
......
2020/06/20 02:59:50 Event<span class="o">(</span>v1.ObjectReference<span class="o">{</span>Kind:<span class="s2">&#34;SealedSecret&#34;</span>, Namespace:<span class="s2">&#34;test&#34;</span>, Name:<span class="s2">&#34;mysecret&#34;</span>, UID:<span class="s2">&#34;78caa14b-c496-405b-91f8-652b2e4cef15&#34;</span>, APIVersion:<span class="s2">&#34;bitnami.com/v1alpha1&#34;</span>, ResourceVersion:<span class="s2">&#34;81242729&#34;</span>, FieldPath:<span class="s2">&#34;&#34;</span><span class="o">})</span>: type: <span class="s1">&#39;Warning&#39;</span> reason: <span class="s1">&#39;ErrUnsealFailed&#39;</span> Failed to unseal: no key could decrypt secret <span class="o">(</span>secret<span class="o">)</span>
2020/06/20 02:59:50 Updating test/mysecret
2020/06/20 02:59:50 Error updating test/mysecret, giving up: no key could decrypt secret <span class="o">(</span>secret<span class="o">)</span>
E0620 02:59:50.151844       <span class="m">1</span> controller.go:196<span class="o">]</span> no key could decrypt secret <span class="o">(</span>secret<span class="o">)</span>
2020/06/20 02:59:50 Event<span class="o">(</span>v1.ObjectReference<span class="o">{</span>Kind:<span class="s2">&#34;SealedSecret&#34;</span>, Namespace:<span class="s2">&#34;test&#34;</span>, Name:<span class="s2">&#34;mysecret&#34;</span>, UID:<span class="s2">&#34;78caa14b-c496-405b-91f8-652b2e4cef15&#34;</span>, APIVersion:<span class="s2">&#34;bitnami.com/v1alpha1&#34;</span>, ResourceVersion:<span class="s2">&#34;81242729&#34;</span>, FieldPath:<span class="s2">&#34;&#34;</span><span class="o">})</span>: type: <span class="s1">&#39;Warning&#39;</span> reason: <span class="s1">&#39;ErrUnsealFailed&#39;</span> Failed to unseal: no key could decrypt secret <span class="o">(</span>secret<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p>You can see the error message <code>no key could decrypt secret (secret)</code>, this is because we use the default strict scope, so changing the namespace of SealedSecret is not effective.</p>
<h3 id="changing-the-secret-name">Changing the Secret name</h3>
<p>Let&rsquo;s also test the effect of changing the name of the Secret under the Secret namespace.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ cp -a sealedsecret.yaml sealedsecret-anothersecret.yaml
$ sed -i <span class="s1">&#39;s/mysecret/anothersecret/g&#39;</span> sealedsecret-anothersecret.yaml
$ kubectl apply -f sealedsecret-anothersecret.yaml
sealedsecret.bitnami.com/anothersecret created
</code></pre></td></tr></table>
</div>
</div><p>Once created, check to see if the Secret generates a new name.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl get secret
NAME                                    TYPE                                  DATA   AGE
default-token-5tsh4                     kubernetes.io/service-account-token   <span class="m">3</span>      224d
mysecret                                Opaque                                <span class="m">1</span>      18m
</code></pre></td></tr></table>
</div>
</div><p>You can see that no modified Secret object named anothersecret has been generated either, and you can also view the Controller&rsquo;s log message.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl logs -f sealed-secrets-controller-6bf8c44ff9-fqhgt -n kube-system
......
2020/06/20 03:07:52 Updating default/anothersecret
2020/06/20 03:07:53 Error updating default/anothersecret, will retry: no key could decrypt secret <span class="o">(</span>secret<span class="o">)</span>
2020/06/20 03:07:53 Event<span class="o">(</span>v1.ObjectReference<span class="o">{</span>Kind:<span class="s2">&#34;SealedSecret&#34;</span>, Namespace:<span class="s2">&#34;default&#34;</span>, Name:<span class="s2">&#34;anothersecret&#34;</span>, UID:<span class="s2">&#34;b3467b24-b8d3-4c49-8de4-d8399875f8d5&#34;</span>, APIVersion:<span class="s2">&#34;bitnami.com/v1alpha1&#34;</span>, ResourceVersion:<span class="s2">&#34;81244607&#34;</span>, FieldPath:<span class="s2">&#34;&#34;</span><span class="o">})</span>: type: <span class="s1">&#39;Warning&#39;</span> reason: <span class="s1">&#39;ErrUnsealFailed&#39;</span> Failed to unseal: no key could decrypt secret <span class="o">(</span>secret<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p>The error is basically the same as the one above for modifying the namespace, which is what we expected because we are creating a Secret in strict mode, so we can&rsquo;t cross namespaces or modify names. We can create a cluster-wide Secret object to see what the effect is.</p>
<h3 id="creating-cluster-wide-sealedsecrets">Creating Cluster-Wide SealedSecrets</h3>
<p>Generate a list of resources for the Secret object using the command shown below.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ <span class="nb">echo</span> -n <span class="s2">&#34;This is a secret&#34;</span> <span class="p">|</span> kubectl create secret generic mycwsecret --dry-run --from-file<span class="o">=</span><span class="nv">secret</span><span class="o">=</span>/dev/stdin -o yaml &gt; secret-cw.yaml
</code></pre></td></tr></table>
</div>
</div><p>Then use the <code>cluster-wide</code> scope to encrypt the Secret object under the test namespace.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubeseal --format yaml --scope cluster-wide &lt;secret-cw.yaml &gt;sealedsecret-cw.yaml
$ kubectl apply -n <span class="nb">test</span> -f sealedsecret-cw.yaml
sealedsecret.bitnami.com/mycwsecret created
$ kubectl get secret -n <span class="nb">test</span>
NAME                  TYPE                                  DATA   AGE
default-token-4gwfx   kubernetes.io/service-account-token   <span class="m">3</span>      16m
mycwsecret            Opaque                                <span class="m">1</span>      30s
</code></pre></td></tr></table>
</div>
</div><p>We can see that the corresponding Secret object has been created successfully.</p>
<p>Now let&rsquo;s rename the Secret and see if it still works after re-creation.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ cp -a sealedsecret-cw.yaml sealedsecret-anothercwsecret.yaml
$ sed -i <span class="s1">&#39;s/mycwsecret/anothercwsecret/g&#39;</span> sealedsecret-anothercwsecret.yaml
$ kubectl apply -n <span class="nb">test</span> -f sealedsecret-anothercwsecret.yaml
sealedsecret.bitnami.com/anothercwsecret created
</code></pre></td></tr></table>
</div>
</div><p>Once created, we can see that the Secret behind the rename is also automatically generated:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl get secret anothercwsecret -n <span class="nb">test</span>
NAME              TYPE     DATA   AGE
anothercwsecret   Opaque   <span class="m">1</span>      36s
</code></pre></td></tr></table>
</div>
</div><p>What about modifying the namespace? For example, if we create the above encrypted Secret object under the default namespace.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl apply -n default -f sealedsecret-cw.yaml
sealedsecret.bitnami.com/mycwsecret created
</code></pre></td></tr></table>
</div>
</div><p>After successful creation, we can also see that the corresponding Secret object is created under the default namespace.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl get secret mycwsecret
NAME         TYPE     DATA   AGE
mycwsecret   Opaque   <span class="m">1</span>      17s
</code></pre></td></tr></table>
</div>
</div><p>This is also as expected, since we are creating SealedSecrets with a cluster-wide scope, so we can modify the namespace and name as we wish.</p>
<p>More information on the use of SealedSecrets can be found in the <a href="https://www.notion.so/cnych/Sealed-Secrets-Kubernetes-Secrets-bb45266d99ce46879d9475e72de905ed#e852a4220d2c4841a4ccc191e34ed47a">official documentation</a> for more information.</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/k8s/">k8s</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-12/status-in-pv-pvc/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">PV and PVC state changes in Kubernetes</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-12/create-cli-app-with-cobra/">
            <span class="next-text nav-default">Creating CLI Applications with Cobra in Golang</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
