<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Zabbix5.0 Detailed Installation Steps - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="zabbix Version 5.0 seems to have recently updated not long ago, we deployed to see what changes have not, then again. From 2.0 to 3.0 does look a lot better, today to see what 5.0 looks like, without further ado, start the installation!
5.0 new features reference https://www.zabbix.com/cn/whats_new_5_0
Prepare the environment  Centos 7.8 PHP 7.2 &#43; Apache 1.3.12 &#43; Mysql or MariaDB 5.7&#43;  Refer to the link https://www.zabbix.com/documentation/current/manual/installation/requirements for specific requirements" /><meta name="keywords" content="Zabbix5" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-06/zabbix5.0-detailed-installation-steps/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Zabbix5.0 Detailed Installation Steps" />
<meta property="og:description" content="zabbix Version 5.0 seems to have recently updated not long ago, we deployed to see what changes have not, then again. From 2.0 to 3.0 does look a lot better, today to see what 5.0 looks like, without further ado, start the installation!
5.0 new features reference https://www.zabbix.com/cn/whats_new_5_0
Prepare the environment  Centos 7.8 PHP 7.2 &#43; Apache 1.3.12 &#43; Mysql or MariaDB 5.7&#43;  Refer to the link https://www.zabbix.com/documentation/current/manual/installation/requirements for specific requirements" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-06/zabbix5.0-detailed-installation-steps/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-06-16T09:57:04+08:00" />
<meta property="article:modified_time" content="2021-06-16T09:57:04+08:00" />

<meta itemprop="name" content="Zabbix5.0 Detailed Installation Steps">
<meta itemprop="description" content="zabbix Version 5.0 seems to have recently updated not long ago, we deployed to see what changes have not, then again. From 2.0 to 3.0 does look a lot better, today to see what 5.0 looks like, without further ado, start the installation!
5.0 new features reference https://www.zabbix.com/cn/whats_new_5_0
Prepare the environment  Centos 7.8 PHP 7.2 &#43; Apache 1.3.12 &#43; Mysql or MariaDB 5.7&#43;  Refer to the link https://www.zabbix.com/documentation/current/manual/installation/requirements for specific requirements"><meta itemprop="datePublished" content="2021-06-16T09:57:04+08:00" />
<meta itemprop="dateModified" content="2021-06-16T09:57:04+08:00" />
<meta itemprop="wordCount" content="1589">
<meta itemprop="keywords" content="zabbix," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Zabbix5.0 Detailed Installation Steps"/>
<meta name="twitter:description" content="zabbix Version 5.0 seems to have recently updated not long ago, we deployed to see what changes have not, then again. From 2.0 to 3.0 does look a lot better, today to see what 5.0 looks like, without further ado, start the installation!
5.0 new features reference https://www.zabbix.com/cn/whats_new_5_0
Prepare the environment  Centos 7.8 PHP 7.2 &#43; Apache 1.3.12 &#43; Mysql or MariaDB 5.7&#43;  Refer to the link https://www.zabbix.com/documentation/current/manual/installation/requirements for specific requirements"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Zabbix5.0 Detailed Installation Steps</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-06-16 09:57:04 </span>
        <div class="post-category">
            <a href="/categories/skills/"> skills </a>
            </div>
          <span class="more-meta"> 1589 words </span>
          <span class="more-meta"> 8 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#zabbix">zabbix</a></li>
        <li><a href="#prepare-the-environment">Prepare the environment</a></li>
        <li><a href="#installation">Installation</a>
          <ul>
            <li><a href="#turn-off-selinux">Turn off selinux</a></li>
            <li><a href="#installing-zabbix-sources">Installing zabbix sources</a></li>
            <li><a href="#install-server-and-agnet">Install server and agnet</a></li>
          </ul>
        </li>
        <li><a href="#installation-of-front-end-components">Installation of front-end components</a></li>
        <li><a href="#installing-the-database">Installing the database</a></li>
        <li><a href="#modify-the-configuration-file">Modify the configuration file</a></li>
        <li><a href="#initialization">Initialization</a></li>
        <li><a href="#zabbix-garbled-code-problem">zabbix garbled code problem</a></li>
        <li><a href="#references">References</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h2 id="zabbix">zabbix</h2>
<p>Version 5.0 seems to have recently updated not long ago, we deployed to see what changes have not, then again. From 2.0 to 3.0 does look a lot better, today to see what 5.0 looks like, without further ado, start the installation!</p>
<p>5.0 new features reference <a href="https://www.zabbix.com/cn/whats_new_5_0">https://www.zabbix.com/cn/whats_new_5_0</a></p>
<h2 id="prepare-the-environment">Prepare the environment</h2>
<ul>
<li>Centos 7.8</li>
<li>PHP 7.2 +</li>
<li>Apache 1.3.12 +</li>
<li>Mysql or MariaDB 5.7+</li>
</ul>
<p>Refer to the link <a href="https://www.zabbix.com/documentation/current/manual/installation/requirements">https://www.zabbix.com/documentation/current/manual/installation/requirements</a> for specific requirements</p>
<p>Hardware conditions refer to the following table</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/06/16/efea9b954c94423e89fe42d8680e4d93.jpg" alt="Hardware conditions"></p>
<h2 id="installation">Installation</h2>
<h3 id="turn-off-selinux">Turn off selinux</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># sed -i &#39;s/SELINUX=enforcing/SELINUX=disabled/&#39; /etc/selinux/config</span>
<span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># systemctl disable --now firewalld</span>
<span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># iptables -L -n</span>
Chain INPUT <span class="o">(</span>policy ACCEPT<span class="o">)</span>
target     prot opt <span class="nb">source</span>               destination         

Chain FORWARD <span class="o">(</span>policy ACCEPT<span class="o">)</span>
target     prot opt <span class="nb">source</span>               destination         

Chain OUTPUT <span class="o">(</span>policy ACCEPT<span class="o">)</span>
target     prot opt <span class="nb">source</span>               destination         
<span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1">#</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="installing-zabbix-sources">Installing zabbix sources</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># rpm -Uvh https://repo.zabbix.com/zabbix/5.0/rhel/7/x86_64/zabbix-release-5.0-1.el7.noarch.rpm</span>
Retrieving https://repo.zabbix.com/zabbix/5.0/rhel/7/x86_64/zabbix-release-5.0-1.el7.noarch.rpm
warning: /var/tmp/rpm-tmp.vw5pXe: Header V4 RSA/SHA512 Signature, key ID a14fe591: NOKEY
Preparing...                          <span class="c1">################################# [100%]</span>
Updating / installing...
   1:zabbix-release-5.0-1.el7         <span class="c1">################################# [100%]</span>
<span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># yum clean all</span>
Loaded plugins: fastestmirror
Cleaning repos: base epel extras updates zabbix zabbix-non-supported
Cleaning up list of fastest mirrors
<span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1">#</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="install-server-and-agnet">Install server and agnet</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># yum -y install zabbix-server-mysql zabbix-agent</span>
</code></pre></td></tr></table>
</div>
</div><p>If you are in China, the installation may fail due to GFW</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">http://repo.zabbix.com/zabbix/5.0/rhel/7/x86_64/zabbix-server-mysql-5.0.3-1.el7.x86_64.rpm: <span class="o">[</span>Errno 14<span class="o">]</span> curl#18 - <span class="s2">&#34;transfer closed with 1461988 bytes remaining to read&#34;</span>
Trying other mirror.


Error downloading packages:
  zabbix-server-mysql-5.0.3-1.el7.x86_64: <span class="o">[</span>Errno 256<span class="o">]</span> No more mirrors to try.
</code></pre></td></tr></table>
</div>
</div><p>Solution, switch to aliyun</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># sed -i &#39;s#http://repo.zabbix.com#https://mirrors.aliyun.com/zabbix#&#39; /etc/yum.repos.d/zabbix.repo</span>
<span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># yum clean all</span>
Loaded plugins: fastestmirror
Cleaning repos: base epel extras updates zabbix zabbix-non-supported
Cleaning up list of fastest mirrors
</code></pre></td></tr></table>
</div>
</div><p>Execute the installation again</p>
<h2 id="installation-of-front-end-components">Installation of front-end components</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># yum install centos-release-scl -y</span>
</code></pre></td></tr></table>
</div>
</div><p>Enable zabbix front end source, edit the configuration file <code>/etc/yum.repos.d/zabbix.repo</code> and change <code>enabled</code> to <code>1</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="k">[zabbix-frontend]</span>
<span class="na">name</span><span class="o">=</span><span class="s">Zabbix Official Repository frontend - $basearch</span>
<span class="na">baseurl</span><span class="o">=</span><span class="s">https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/$basearch/frontend</span>
<span class="na">enabled</span><span class="o">=</span><span class="s">1</span>
<span class="na">gpgcheck</span><span class="o">=</span><span class="s">1</span>
<span class="na">gpgkey</span><span class="o">=</span><span class="s">file:///etc/pki/rpm-gpg/RPM-GPG-KEY-ZABBIX-A14FE591</span>
</code></pre></td></tr></table>
</div>
</div><p>Software package installation, including httpd php web components, etc.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># yum install zabbix-web-mysql-scl zabbix-apache-conf-scl -y </span>
...
Installing:
 zabbix-apache-conf-scl                        noarch                       5.0.3-1.el7                                  zabbix-frontend                        <span class="m">13</span> k
 zabbix-web-mysql-scl                          noarch                       5.0.3-1.el7                                  zabbix-frontend                        <span class="m">12</span> k
Installing <span class="k">for</span> dependencies:
 apr                                           x86_64                       1.4.8-5.el7                                  base                                  <span class="m">103</span> k
 apr-util                                      x86_64                       1.5.2-6.el7                                  base                                   <span class="m">92</span> k
 audit-libs-python                             x86_64                       2.8.5-4.el7                                  base                                   <span class="m">76</span> k
 checkpolicy                                   x86_64                       2.5-8.el7                                    base                                  <span class="m">295</span> k
 dejavu-fonts-common                           noarch                       2.33-6.el7                                   base                                   <span class="m">64</span> k
 dejavu-sans-fonts                             noarch                       2.33-6.el7                                   base                                  1.4 M
 fontpackages-filesystem                       noarch                       1.44-8.el7                                   base                                  9.9 k
 httpd                                         x86_64                       2.4.6-93.el7.centos                          base                                  2.7 M
 httpd-tools                                   x86_64                       2.4.6-93.el7.centos                          base                                   <span class="m">92</span> k
 libX11                                        x86_64                       1.6.7-2.el7                                  base                                  <span class="m">607</span> k
 libX11-common                                 noarch                       1.6.7-2.el7                                  base                                  <span class="m">164</span> k
 libXau                                        x86_64                       1.0.8-2.1.el7                                base                                   <span class="m">29</span> k
 libXpm                                        x86_64                       3.5.12-1.el7                                 base                                   <span class="m">55</span> k
 libcgroup                                     x86_64                       0.41-21.el7                                  base                                   <span class="m">66</span> k
 libjpeg-turbo                                 x86_64                       1.2.90-8.el7                                 base                                  <span class="m">135</span> k
 libsemanage-python                            x86_64                       2.5-14.el7                                   base                                  <span class="m">113</span> k
 libwebp                                       x86_64                       0.3.0-7.el7                                  base                                  <span class="m">170</span> k
 libxcb                                        x86_64                       1.13-1.el7                                   base                                  <span class="m">214</span> k
 libxslt                                       x86_64                       1.1.28-5.el7                                 base                                  <span class="m">242</span> k
 mailcap                                       noarch                       2.1.41-2.el7                                 base                                   <span class="m">31</span> k
 policycoreutils-python                        x86_64                       2.5-34.el7                                   base                                  <span class="m">457</span> k
 python-IPy                                    noarch                       0.75-6.el7                                   base                                   <span class="m">32</span> k
 rh-php72                                      x86_64                       1-2.el7                                      centos-sclo-rh                        4.3 k
 rh-php72-php-bcmath                           x86_64                       7.2.24-1.el7                                 centos-sclo-rh                         <span class="m">60</span> k
 rh-php72-php-cli                              x86_64                       7.2.24-1.el7                                 centos-sclo-rh                        2.9 M
 rh-php72-php-common                           x86_64                       7.2.24-1.el7                                 centos-sclo-rh                        <span class="m">680</span> k
 rh-php72-php-fpm                              x86_64                       7.2.24-1.el7                                 centos-sclo-rh                        1.5 M
 rh-php72-php-gd                               x86_64                       7.2.24-1.el7                                 centos-sclo-rh                        <span class="m">151</span> k
 rh-php72-php-json                             x86_64                       7.2.24-1.el7                                 centos-sclo-rh                         <span class="m">54</span> k
 rh-php72-php-ldap                             x86_64                       7.2.24-1.el7                                 centos-sclo-rh                         <span class="m">59</span> k
 rh-php72-php-mbstring                         x86_64                       7.2.24-1.el7                                 centos-sclo-rh                        <span class="m">553</span> k
 rh-php72-php-mysqlnd                          x86_64                       7.2.24-1.el7                                 centos-sclo-rh                        <span class="m">166</span> k
 rh-php72-php-pdo                              x86_64                       7.2.24-1.el7                                 centos-sclo-rh                        <span class="m">101</span> k
 rh-php72-php-pear                             noarch                       1:1.10.5-1.el7                               centos-sclo-rh                        <span class="m">357</span> k
 rh-php72-php-process                          x86_64                       7.2.24-1.el7                                 centos-sclo-rh                         <span class="m">62</span> k
 rh-php72-php-xml                              x86_64                       7.2.24-1.el7                                 centos-sclo-rh                        <span class="m">160</span> k
 rh-php72-php-zip                              x86_64                       7.2.24-1.el7                                 centos-sclo-rh                         <span class="m">90</span> k
 rh-php72-runtime                              x86_64                       1-2.el7                                      centos-sclo-rh                        1.1 M
 scl-utils                                     x86_64                       20130529-19.el7                              base                                   <span class="m">24</span> k
 setools-libs                                  x86_64                       3.3.8-4.el7                                  base                                  <span class="m">620</span> k
 zabbix-web                                    noarch                       5.0.3-1.el7                                  zabbix-frontend                       3.1 M
 zabbix-web-deps-scl                           noarch                       5.0.3-1.el7                                  zabbix-frontend                        <span class="m">13</span> k
</code></pre></td></tr></table>
</div>
</div><h2 id="installing-the-database">Installing the database</h2>
<p>Install and set up boot-up</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># yum install mariadb-server -y</span>
<span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># systemctl enable --now mariadb</span>
</code></pre></td></tr></table>
</div>
</div><p>Initializing the database</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># mysql_secure_installation</span>

NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB
      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!

In order to log into MariaDB to secure it, we<span class="s1">&#39;ll need the current
</span><span class="s1">password for the root user.  If you&#39;</span>ve just installed MariaDB, and
you haven<span class="s1">&#39;t set the root password yet, the password will be blank,
</span><span class="s1">so you should just press enter here.
</span><span class="s1">
</span><span class="s1">Enter current password for root (enter for none):   #Enter, no password by default
</span><span class="s1">OK, successfully used password, moving on...
</span><span class="s1">
</span><span class="s1">Setting the root password ensures that nobody can log into the MariaDB
</span><span class="s1">root user without the proper authorisation.
</span><span class="s1">
</span><span class="s1">Set root password? [Y/n] yã€‚#Whether to set a password
</span><span class="s1">New password:               #New Password
</span><span class="s1">Re-enter new password:      #New password confirmation
</span><span class="s1">Password updated successfully!
</span><span class="s1">Reloading privilege tables..
</span><span class="s1"> ... Success!
</span><span class="s1">
</span><span class="s1">
</span><span class="s1">By default, a MariaDB installation has an anonymous user, allowing anyone
</span><span class="s1">to log into MariaDB without having to have a user account created for
</span><span class="s1">them.  This is intended only for testing, and to make the installation
</span><span class="s1">go a bit smoother.  You should remove them before moving into a
</span><span class="s1">production environment.
</span><span class="s1">
</span><span class="s1">Remove anonymous users? [Y/n]   #Remove Anonymous Users
</span><span class="s1"> ... skipping.
</span><span class="s1">
</span><span class="s1">Normally, root should only be allowed to connect from &#39;</span>localhost<span class="s1">&#39;.  This
</span><span class="s1">ensures that someone cannot guess at the root password from the network.
</span><span class="s1">
</span><span class="s1">Disallow root login remotely? [Y/n] n    #Disable root remote connection
</span><span class="s1"> ... skipping.
</span><span class="s1">
</span><span class="s1">By default, MariaDB comes with a database named &#39;</span>test<span class="s1">&#39; that anyone can
</span><span class="s1">access.  This is also intended only for testing, and should be removed
</span><span class="s1">before moving into a production environment.
</span><span class="s1">
</span><span class="s1">Remove test database and access to it? [Y/n] y #Delete test database
</span><span class="s1"> - Dropping test database...
</span><span class="s1"> ... Success!
</span><span class="s1"> - Removing privileges on test database...
</span><span class="s1"> ... Success!
</span><span class="s1">
</span><span class="s1">Reloading the privilege tables will ensure that all changes made so far
</span><span class="s1">will take effect immediately.
</span><span class="s1">
</span><span class="s1">Reload privilege tables now? [Y/n] y  #Refresh Permissions
</span><span class="s1"> ... Success!
</span><span class="s1">
</span><span class="s1">Cleaning up...
</span><span class="s1">
</span><span class="s1">All done!  If you&#39;</span>ve completed all of the above steps, your MariaDB
installation should now be secure.

Thanks <span class="k">for</span> using MariaDB!
</code></pre></td></tr></table>
</div>
</div><p>Create the database and users needed for zabbix and set the password <code>zabbix123</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># mysql -u root -p</span>
Enter password: 
Welcome to the MariaDB monitor.  Commands end with <span class="p">;</span> or <span class="se">\g</span>.
Your MariaDB connection id is <span class="m">9</span>
Server version: 5.5.65-MariaDB MariaDB Server

Copyright <span class="o">(</span>c<span class="o">)</span> 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type <span class="s1">&#39;help;&#39;</span> or <span class="s1">&#39;\h&#39;</span> <span class="k">for</span> help. Type <span class="s1">&#39;\c&#39;</span> to clear the current input statement.

MariaDB <span class="o">[(</span>none<span class="o">)]</span>&gt; 
MariaDB <span class="o">[(</span>none<span class="o">)]</span>&gt; 
MariaDB <span class="o">[(</span>none<span class="o">)]</span>&gt; 
MariaDB <span class="o">[(</span>none<span class="o">)]</span>&gt; create database zabbix character <span class="nb">set</span> utf8 collate utf8_bin<span class="p">;</span>
Query OK, <span class="m">1</span> row affected <span class="o">(</span>0.00 sec<span class="o">)</span>

MariaDB <span class="o">[(</span>none<span class="o">)]</span>&gt; create user zabbix@localhost identified by <span class="s1">&#39;zabbix123&#39;</span><span class="p">;</span>
Query OK, <span class="m">0</span> rows affected <span class="o">(</span>0.00 sec<span class="o">)</span>

MariaDB <span class="o">[(</span>none<span class="o">)]</span>&gt; grant all privileges on zabbix.* to zabbix@localhost<span class="p">;</span>
Query OK, <span class="m">0</span> rows affected <span class="o">(</span>0.00 sec<span class="o">)</span>

MariaDB <span class="o">[(</span>none<span class="o">)]</span>&gt; quit
Bye
</code></pre></td></tr></table>
</div>
</div><p>Importing initial data</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># zcat /usr/share/doc/zabbix-server-mysql*/create.sql.gz | mysql -uzabbix -p zabbix</span>
Enter password: 
<span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># mysql -u root -p  #Check if the import was successful</span>
Enter password: 
Welcome to the MariaDB monitor.  Commands end with <span class="p">;</span> or <span class="se">\g</span>.
Your MariaDB connection id is <span class="m">12</span>
Server version: 5.5.65-MariaDB MariaDB Server

Copyright <span class="o">(</span>c<span class="o">)</span> 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type <span class="s1">&#39;help;&#39;</span> or <span class="s1">&#39;\h&#39;</span> <span class="k">for</span> help. Type <span class="s1">&#39;\c&#39;</span> to clear the current input statement.

MariaDB <span class="o">[(</span>none<span class="o">)]</span>&gt; use zabbix
Reading table information <span class="k">for</span> completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
MariaDB <span class="o">[</span>zabbix<span class="o">]</span>&gt; show tables<span class="p">;</span>
+----------------------------+
<span class="p">|</span> Tables_in_zabbix           <span class="p">|</span>
+----------------------------+
<span class="p">|</span> acknowledges               <span class="p">|</span>
<span class="p">|</span> actions                    <span class="p">|</span>
<span class="p">|</span> alerts                     <span class="p">|</span>
<span class="p">|</span> application_discovery      <span class="p">|</span>
<span class="p">|</span> application_prototype      <span class="p">|</span>
<span class="p">|</span> application_template       <span class="p">|</span>
<span class="p">|</span> applications               <span class="p">|</span>
<span class="p">|</span> auditlog                   <span class="p">|</span>
.......
</code></pre></td></tr></table>
</div>
</div><h2 id="modify-the-configuration-file">Modify the configuration file</h2>
<p>Configure database password <code>/etc/zabbix/zabbix_server.conf</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">DBPassword=zabbix123
</code></pre></td></tr></table>
</div>
</div><p>Change the php timezone <code>/etc/opt/rh/rh-php72/php-fpm.d/zabbix.conf</code> to your desired timezone and remove the previous comments</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="na">php_value[date.timezone]</span> <span class="o">=</span> <span class="s">Asia/Shanghai</span>
</code></pre></td></tr></table>
</div>
</div><p>Set boot up</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># systemctl enable zabbix-server zabbix-agent httpd rh-php72-php-fpm</span>
<span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># systemctl restart zabbix-server zabbix-agent httpd rh-php72-php-fpm</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="initialization">Initialization</h2>
<p>Login to the system at <code>http://[host]/zabbix</code></p>
<p>Start initialization</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/06/16/2e1f4c7d6afa4b8a83026a995d6d8264.jpg" alt="zabbix initialization"></p>
<p>Check the environment</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/06/16/0e9d0d510fbc4e759c732c604ef7b180.jpg" alt="zabbix Check the environment"></p>
<p>Configuration Database</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/06/16/c2e1245b91e0467ead8b2463cc7c1d97.jpg" alt="zabbix Configuration Database"></p>
<p>Confirm server details</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/06/16/be07f5452c6945cd9652bd404205ecf2.jpg" alt="zabbix Confirm server details"></p>
<p>Installation Confirmation</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/06/16/efc22e241785409397571eea97cd49b4.jpg" alt="zabbix Installation Confirmation"></p>
<p>Installation completed</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/06/16/fc2919514d364a4ebf0f5c636f808d6b.jpg" alt="zabbix Installation completed"></p>
<p>Login system account password <code>Admin</code> ,default password <code>zabbix</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/06/16/d7eee3ac4adb40f8b8f122f916bbe4ff.jpg" alt="zabbix login"></p>
<p>System page, the default is English, you can switch the language in the personal center</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/06/16/48c47ef93cf244d7a0a9b6ba090292cd.jpg" alt="zabbix system page"></p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/06/16/497b377f9bc64f919a01a95213e02976.jpg" alt="zabbix switch language"></p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/06/16/a862f3cd3a244a53a9f6f554e014842e.jpg" alt="zabbix chinese language"></p>
<h2 id="zabbix-garbled-code-problem">zabbix garbled code problem</h2>
<p>Upload any font from the <code>C:\Windows\Fonts</code> directory of Win10 OS to the fonts directory</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="o">[</span>root@localhost fonts<span class="o">]</span><span class="c1"># pwd</span>
/usr/share/zabbix/assets/fonts
<span class="o">[</span>root@localhost fonts<span class="o">]</span><span class="c1"># ll</span>
total <span class="m">11512</span>
lrwxrwxrwx <span class="m">1</span> root root       <span class="m">33</span> Sep <span class="m">18</span> 16:34 graphfont.ttf -&gt; /etc/alternatives/zabbix-web-font
-r-xr-xr-x <span class="m">1</span> root root <span class="m">11787328</span> Sep <span class="m">18</span> 17:05 simkai.ttf
<span class="o">[</span>root@localhost fonts<span class="o">]</span><span class="c1">#</span>
</code></pre></td></tr></table>
</div>
</div><p>Edit the configuration file <code>/usr/share/zabbix/include/defines.inc.php</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"> <span class="m">81</span> define<span class="o">(</span><span class="s1">&#39;ZBX_GRAPH_FONT_NAME&#39;</span>,           <span class="s1">&#39;simkai&#39;</span><span class="o">)</span><span class="p">;</span> // font file name
 <span class="m">122</span> define<span class="o">(</span><span class="s1">&#39;ZBX_FONT_NAME&#39;</span>, <span class="s1">&#39;simkai&#39;</span><span class="o">)</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><p>Reboot</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span>root@localhost fonts<span class="o">]</span><span class="c1"># systemctl restart zabbix-server</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/06/16/9f6f0951c1dc4e3fb109ab6989b66796.jpg" alt="zabbix"></p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://www.zabbix.com/cn/download?zabbix=5.0&amp;os_distribution=centos&amp;os_version=7&amp;db=mysql&amp;ws=apache">https://www.zabbix.com/cn/download?zabbix=5.0&amp;os_distribution=centos&amp;os_version=7&amp;db=mysql&amp;ws=apache</a></li>
<li><a href="https://www.zabbix.com/documentation/current/manual/quickstart/login">https://www.zabbix.com/documentation/current/manual/quickstart/login</a></li>
<li><a href="https://www.cnblogs.com/wei-lu/p/10220025.html">https://www.cnblogs.com/wei-lu/p/10220025.html</a></li>
</ul>
<hr>
<p>Reference <code>http://roddypy.com/2020/09/18/zabbix-5-0-%E8%AF%A6%E7%BB%86%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4/</code></p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/zabbix/">zabbix</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-06/building-a-docker-private-registry/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Building a Docker Private Registry</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-06/use-of-the-go-empty-struct/">
            <span class="next-text nav-default">Use of the Go Empty Struct</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
