<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Android Simulation Positioning Implementation Details - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="In navigation test scenarios often need location simulation and route playback, recorded through the LocationManager.setTestProviderLocation() method to achieve simulated status, if the application to be tested does not support TestProviderLocation simulation location input, you can consider starting with the HAL layer, the hook the system&amp;rsquo;s default GPS implementation.
1, Android simulation permission open configuration In the version of Android 6.0 or below, you need to check the switch of simulated positioning in the settings, in 6." /><meta name="keywords" content="android,simulation, positioning" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-06/android-simulation-positioning-implementation-details/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Android Simulation Positioning Implementation Details" />
<meta property="og:description" content="In navigation test scenarios often need location simulation and route playback, recorded through the LocationManager.setTestProviderLocation() method to achieve simulated status, if the application to be tested does not support TestProviderLocation simulation location input, you can consider starting with the HAL layer, the hook the system&rsquo;s default GPS implementation.
1, Android simulation permission open configuration In the version of Android 6.0 or below, you need to check the switch of simulated positioning in the settings, in 6." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-06/android-simulation-positioning-implementation-details/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-06-14T17:33:51+08:00" />
<meta property="article:modified_time" content="2021-06-14T17:33:51+08:00" />

<meta itemprop="name" content="Android Simulation Positioning Implementation Details">
<meta itemprop="description" content="In navigation test scenarios often need location simulation and route playback, recorded through the LocationManager.setTestProviderLocation() method to achieve simulated status, if the application to be tested does not support TestProviderLocation simulation location input, you can consider starting with the HAL layer, the hook the system&rsquo;s default GPS implementation.
1, Android simulation permission open configuration In the version of Android 6.0 or below, you need to check the switch of simulated positioning in the settings, in 6."><meta itemprop="datePublished" content="2021-06-14T17:33:51+08:00" />
<meta itemprop="dateModified" content="2021-06-14T17:33:51+08:00" />
<meta itemprop="wordCount" content="1364">
<meta itemprop="keywords" content="gps," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Android Simulation Positioning Implementation Details"/>
<meta name="twitter:description" content="In navigation test scenarios often need location simulation and route playback, recorded through the LocationManager.setTestProviderLocation() method to achieve simulated status, if the application to be tested does not support TestProviderLocation simulation location input, you can consider starting with the HAL layer, the hook the system&rsquo;s default GPS implementation.
1, Android simulation permission open configuration In the version of Android 6.0 or below, you need to check the switch of simulated positioning in the settings, in 6."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Android Simulation Positioning Implementation Details</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-06-14 17:33:51 </span>
        <div class="post-category">
            <a href="/categories/android/"> android </a>
            <a href="/categories/skills/"> skills </a>
            </div>
          <span class="more-meta"> 1364 words </span>
          <span class="more-meta"> 7 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1-android-simulation-permission-open-configuration">1, Android simulation permission open configuration</a>
          <ul>
            <li><a href="#1android-60-or-below-turn-on-the-analog-positioning-switch">1ï¼‰Android 6.0 or below turn on the analog positioning switch</a></li>
            <li><a href="#2-android-60-or-above-code-configuration-to-choose-the-application-of-analog-positioning">2) Android 6.0 or above code configuration to choose the application of analog positioning</a></li>
          </ul>
        </li>
        <li><a href="#2-android-simulation-positioning-implementation">2, Android simulation positioning implementation</a>
          <ul>
            <li><a href="#1-analog-positioning-switch-check">1) Analog positioning switch check</a></li>
            <li><a href="#2-settestproviderlocation-call">2) setTestProviderLocation call</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>In navigation test scenarios often need location simulation and route playback, recorded through the <code>LocationManager.setTestProviderLocation()</code> method to achieve simulated status, if the application to be tested does not support <code>TestProviderLocation</code> simulation location input, you can consider starting with the HAL layer, the hook the system&rsquo;s default GPS implementation.</p>
<h2 id="1-android-simulation-permission-open-configuration">1, Android simulation permission open configuration</h2>
<p>In the version of Android 6.0 or below, you need to check the switch of simulated positioning in the settings, in 6.0 or above it is changed to select the application of simulated positioning, the corresponding opening configuration is different, the same is in <code>AndroidManifest.xml</code> both need to configure the following two permissions.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&#34;android.permission.ACCESS_FINE_LOCATION&#34;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&#34;android.permission.ACCESS_COARSE_LOCATION&#34;</span> <span class="nt">/&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="1android-60-or-below-turn-on-the-analog-positioning-switch">1ï¼‰Android 6.0 or below turn on the analog positioning switch</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">Settings</span><span class="o">.</span><span class="na">Secure</span><span class="o">.</span><span class="na">putInt</span><span class="o">(</span><span class="n">getContentResolver</span><span class="o">(),</span> <span class="n">Settings</span><span class="o">.</span><span class="na">Secure</span><span class="o">.</span><span class="na">ALLOW_MOCK_LOCATION</span><span class="o">,</span> <span class="n">1</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>To enable mock positioning in this way, you need to configure the following system permissions in <code>AndroidManifest.xml</code>, and the application also needs to be signed by the system, which can&rsquo;t be achieved by this way for non-system applications.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">ndroid:sharedUserId=&#34;android.uid.system&#34;
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&#34;android.permission.WRITE_SECURE_SETTINGS&#34;</span> <span class="nt">/&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>This operation can be configured to bypass system privilege configuration by means of the adb shell command:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">adb shell settings put secure mock_location <span class="m">1</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="2-android-60-or-above-code-configuration-to-choose-the-application-of-analog-positioning">2) Android 6.0 or above code configuration to choose the application of analog positioning</h3>
<p>In Android version above 6.0, you need to set the mock_location permission of the specified package name to allow.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="k">try</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">mockLocationPkgName</span> <span class="o">=</span> <span class="n">getPackageName</span><span class="o">();</span>
    <span class="n">PackageManager</span> <span class="n">mPackageManager</span> <span class="o">=</span> <span class="n">getPackageManager</span><span class="o">();</span>
    <span class="kd">final</span> <span class="n">ApplicationInfo</span> <span class="n">ai</span> <span class="o">=</span> <span class="n">mPackageManager</span><span class="o">.</span><span class="na">getApplicationInfo</span><span class="o">(</span>
            <span class="n">mockLocationPkgName</span><span class="o">,</span> <span class="n">PackageManager</span><span class="o">.</span><span class="na">MATCH_DISABLED_COMPONENTS</span><span class="o">);</span>
    <span class="n">AppOpsManager</span> <span class="n">mAppsOpsManager</span> <span class="o">=</span> <span class="o">(</span><span class="n">AppOpsManager</span><span class="o">)</span> <span class="n">getSystemService</span><span class="o">(</span><span class="n">Context</span><span class="o">.</span><span class="na">APP_OPS_SERVICE</span><span class="o">);</span>
    <span class="n">mAppsOpsManager</span><span class="o">.</span><span class="na">setMode</span><span class="o">(</span><span class="n">AppOpsManager</span><span class="o">.</span><span class="na">OPSTR_MOCK_LOCATION</span><span class="o">,</span> <span class="n">ai</span><span class="o">.</span><span class="na">uid</span><span class="o">,</span>
            <span class="n">mockLocationPkgName</span><span class="o">,</span> <span class="n">AppOpsManager</span><span class="o">.</span><span class="na">MODE_ALLOWED</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">PackageManager</span><span class="o">.</span><span class="na">NameNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="cm">/* ignore */</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Also in AndroidManifest.xml you need to configure the following permissions, unfortunately this way also needs to be compiled with the system signature and source code, only the system level application can be used.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&#34;android.permission.MANAGE_APP_OPS_MODES&#34;</span> <span class="nt">/&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>In order to display the simulated positioning application in the simulated positioning option of the settings screen, you need to configure the ACCESS_MOCK_LOCATION permission.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&#34;android.permission.ACCESS_MOCK_LOCATION&#34;</span><span class="nt">/&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>The above configuration can also be implemented via the adb shell command, with the <code>&lt;package&gt;</code> parameter replaced by the package name of your own application.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">adb shell appops <span class="nb">set</span> &lt;package&gt; android:mock_location allow
</code></pre></td></tr></table>
</div>
</div><p>Turn off simulated positioning privileges with the following command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">adb shell appops <span class="nb">set</span> &lt;package&gt; android:mock_location deny
</code></pre></td></tr></table>
</div>
</div><p>To query which applications have simulated location permissions turned on, use the following command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">adb shell appops query-op android:mock_location allow
</code></pre></td></tr></table>
</div>
</div><p>The package name list parameter of the application will be output after execution.</p>
<h2 id="2-android-simulation-positioning-implementation">2, Android simulation positioning implementation</h2>
<h3 id="1-analog-positioning-switch-check">1) Analog positioning switch check</h3>
<p>The first is the code first determine whether the simulation positioning permission is on, 6.0 or above can only be determined by adding a positioning listener if there is an exception.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kt">boolean</span> <span class="n">mockPermission</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="k">if</span> <span class="o">(</span><span class="n">Build</span><span class="o">.</span><span class="na">VERSION</span><span class="o">.</span><span class="na">SDK_INT</span> <span class="o">&lt;=</span> <span class="n">22</span><span class="o">)</span> <span class="o">{</span><span class="c1">//below 6.0
</span><span class="c1"></span>    <span class="n">mockPermission</span> <span class="o">=</span> <span class="n">Settings</span><span class="o">.</span><span class="na">Secure</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="n">getContentResolver</span><span class="o">(),</span> <span class="n">Settings</span><span class="o">.</span><span class="na">Secure</span><span class="o">.</span><span class="na">ALLOW_MOCK_LOCATION</span><span class="o">,</span> <span class="n">0</span><span class="o">)</span> <span class="o">==</span> <span class="n">1</span><span class="o">;</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="n">LocationManager</span> <span class="n">locationManager</span> <span class="o">=</span> <span class="o">(</span><span class="n">LocationManager</span><span class="o">)</span> <span class="n">getSystemService</span><span class="o">(</span><span class="n">Context</span><span class="o">.</span><span class="na">LOCATION_SERVICE</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">ActivityCompat</span><span class="o">.</span><span class="na">checkSelfPermission</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">Manifest</span><span class="o">.</span><span class="na">permission</span><span class="o">.</span><span class="na">ACCESS_FINE_LOCATION</span><span class="o">)</span> <span class="o">!=</span> <span class="n">PackageManager</span><span class="o">.</span><span class="na">PERMISSION_GRANTED</span> <span class="o">&amp;&amp;</span> <span class="n">ActivityCompat</span><span class="o">.</span><span class="na">checkSelfPermission</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">Manifest</span><span class="o">.</span><span class="na">permission</span><span class="o">.</span><span class="na">ACCESS_COARSE_LOCATION</span><span class="o">)</span> <span class="o">!=</span> <span class="n">PackageManager</span><span class="o">.</span><span class="na">PERMISSION_GRANTED</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">mockPermission</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>            
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">locationManager</span><span class="o">.</span><span class="na">requestLocationUpdates</span><span class="o">(</span><span class="n">LocationManager</span><span class="o">.</span><span class="na">GPS_PROVIDER</span><span class="o">,</span> <span class="n">1000</span><span class="o">,</span> <span class="n">0</span><span class="o">,</span> <span class="k">new</span> <span class="n">LocationListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onLocationChanged</span><span class="o">(</span><span class="n">Location</span> <span class="n">location</span><span class="o">)</span> <span class="o">{</span>
            <span class="o">}</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onStatusChanged</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">,</span> <span class="kt">int</span> <span class="n">i</span><span class="o">,</span> <span class="n">Bundle</span> <span class="n">bundle</span><span class="o">)</span> <span class="o">{</span>
            <span class="o">}</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onProviderEnabled</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
            <span class="o">}</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onProviderDisabled</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">});</span>
        <span class="n">mockPermission</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">SecurityException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">mockPermission</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>You can see the source code implementation of adding location listener, and take the source code implementation of Android 7.0 as reference.</p>
<p>After <a href="http://androidxref.com/7.0.0_r1/xref/frameworks/base/location/java/android/location/LocationManager.java">LocationManager</a> calls the interface, the final call is to <a href="http://androidxref.com/7.0.0_r1/xref/frameworks/base/services/core/java/com/android/server/LocationManagerService.java#checkPackageName">LocationManagerService</a></p>
<p>In the <code>requestLocationUpdates</code> method or <code>getLastLocation</code> method, the <code>checkPackageName</code> method is called</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kt">void</span> <span class="nf">checkPackageName</span><span class="o">(</span><span class="n">String</span> <span class="n">packageName</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">packageName</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">SecurityException</span><span class="o">(</span><span class="s">&#34;invalid package name: &#34;</span> <span class="o">+</span> <span class="n">packageName</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kt">int</span> <span class="n">uid</span> <span class="o">=</span> <span class="n">Binder</span><span class="o">.</span><span class="na">getCallingUid</span><span class="o">();</span>
    <span class="n">String</span><span class="o">[]</span> <span class="n">packages</span> <span class="o">=</span> <span class="n">mPackageManager</span><span class="o">.</span><span class="na">getPackagesForUid</span><span class="o">(</span><span class="n">uid</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">packages</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">SecurityException</span><span class="o">(</span><span class="s">&#34;invalid UID &#34;</span> <span class="o">+</span> <span class="n">uid</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">pkg</span> <span class="o">:</span> <span class="n">packages</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">packageName</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">pkg</span><span class="o">))</span> <span class="k">return</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="n">SecurityException</span><span class="o">(</span><span class="s">&#34;invalid package name: &#34;</span> <span class="o">+</span> <span class="n">packageName</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>If the application calling the <code>requestLocationUpdates</code> method does not have the permission to simulate location, it will throw a <code>SecurityException</code> exception. In addition, <code>requestLocationUpdates</code> needs to be called in the main thread, if it is called in a sub-thread, you also need to pass a <code>looper</code> parameter, otherwise it will report an error when instantiating <code>ListenerTransport</code>.</p>
<p>Look at the constructor of <code>ListenerTransport</code>, if you add a listener in a sub-thread and don&rsquo;t pass a Loop, an exception is thrown when initializing <code>mListenerHandler</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">ListenerTransport</span><span class="o">(</span><span class="n">LocationListener</span> <span class="n">listener</span><span class="o">,</span> <span class="n">Looper</span> <span class="n">looper</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">mListener</span> <span class="o">=</span> <span class="n">listener</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">looper</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">mListenerHandler</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Handler</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">handleMessage</span><span class="o">(</span><span class="n">Message</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">_handleMessage</span><span class="o">(</span><span class="n">msg</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">mListenerHandler</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Handler</span><span class="o">(</span><span class="n">looper</span><span class="o">)</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">handleMessage</span><span class="o">(</span><span class="n">Message</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">_handleMessage</span><span class="o">(</span><span class="n">msg</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Then add the corresponding Provider, set the switch state to true, and configure the state to AVAILABLE.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">LocationProvider</span> <span class="n">provider</span> <span class="o">=</span> <span class="n">locationManager</span><span class="o">.</span><span class="na">getProvider</span><span class="o">(</span><span class="n">LocationManager</span><span class="o">.</span><span class="na">GPS_PROVIDER</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="n">provider</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">locationManager</span><span class="o">.</span><span class="na">addTestProvider</span><span class="o">(</span>
        <span class="n">provider</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span>
        <span class="o">,</span> <span class="n">provider</span><span class="o">.</span><span class="na">requiresNetwork</span><span class="o">()</span>
        <span class="o">,</span> <span class="n">provider</span><span class="o">.</span><span class="na">requiresSatellite</span><span class="o">()</span>
        <span class="o">,</span> <span class="n">provider</span><span class="o">.</span><span class="na">requiresCell</span><span class="o">()</span>
        <span class="o">,</span> <span class="n">provider</span><span class="o">.</span><span class="na">hasMonetaryCost</span><span class="o">()</span>
        <span class="o">,</span> <span class="n">provider</span><span class="o">.</span><span class="na">supportsAltitude</span><span class="o">()</span>
        <span class="o">,</span> <span class="n">provider</span><span class="o">.</span><span class="na">supportsSpeed</span><span class="o">()</span>
        <span class="o">,</span> <span class="n">provider</span><span class="o">.</span><span class="na">supportsBearing</span><span class="o">()</span>
        <span class="o">,</span> <span class="n">provider</span><span class="o">.</span><span class="na">getPowerRequirement</span><span class="o">()</span>
        <span class="o">,</span> <span class="n">provider</span><span class="o">.</span><span class="na">getAccuracy</span><span class="o">());</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="n">locationManager</span><span class="o">.</span><span class="na">addTestProvider</span><span class="o">(</span><span class="n">LocationManager</span><span class="o">.</span><span class="na">GPS_PROVIDER</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span>
        <span class="kc">true</span><span class="o">,</span> <span class="n">Criteria</span><span class="o">.</span><span class="na">POWER_LOW</span><span class="o">,</span> <span class="n">Criteria</span><span class="o">.</span><span class="na">ACCURACY_FINE</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">locationManager</span><span class="o">.</span><span class="na">setTestProviderEnabled</span><span class="o">(</span><span class="n">LocationManager</span><span class="o">.</span><span class="na">GPS_PROVIDER</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
<span class="n">locationManager</span><span class="o">.</span><span class="na">setTestProviderStatus</span><span class="o">(</span><span class="n">LocationManager</span><span class="o">.</span><span class="na">GPS_PROVIDER</span><span class="o">,</span> <span class="n">LocationProvider</span><span class="o">.</span><span class="na">AVAILABLE</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">());</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="2-settestproviderlocation-call">2) setTestProviderLocation call</h3>
<p>The call code example is as follows. The parameters of latitude, longitude, vehicle speed, positioning accuracy, bearing and altitude are set according to the actual requirements.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">Location</span> <span class="n">loc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Location</span><span class="o">(</span><span class="n">LocationManager</span><span class="o">.</span><span class="na">GPS_PROVIDER</span><span class="o">);</span>
<span class="n">loc</span><span class="o">.</span><span class="na">setLongitude</span><span class="o">(</span><span class="n">24</span><span class="o">.</span><span class="na">522301</span><span class="o">);</span>
<span class="n">loc</span><span class="o">.</span><span class="na">setLatitude</span><span class="o">(</span><span class="n">118</span><span class="o">.</span><span class="na">115756</span><span class="o">);</span>
<span class="n">loc</span><span class="o">.</span><span class="na">setSpeed</span><span class="o">(</span><span class="n">60</span><span class="o">);</span>
<span class="n">loc</span><span class="o">.</span><span class="na">setAccuracy</span><span class="o">(</span><span class="n">Criteria</span><span class="o">.</span><span class="na">ACCURACY_HIGH</span><span class="o">);</span>
<span class="n">loc</span><span class="o">.</span><span class="na">setBearing</span><span class="o">(</span><span class="n">0</span><span class="o">);</span>
<span class="n">loc</span><span class="o">.</span><span class="na">setAltitude</span><span class="o">(</span><span class="n">0</span><span class="o">);</span>
<span class="n">loc</span><span class="o">.</span><span class="na">setTime</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">());</span>
<span class="k">if</span> <span class="o">(</span><span class="n">Build</span><span class="o">.</span><span class="na">VERSION</span><span class="o">.</span><span class="na">SDK_INT</span> <span class="o">&gt;=</span> <span class="n">17</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">loc</span><span class="o">.</span><span class="na">setElapsedRealtimeNanos</span><span class="o">(</span><span class="n">SystemClock</span><span class="o">.</span><span class="na">elapsedRealtimeNanos</span><span class="o">());</span>
<span class="o">}</span>
<span class="n">locationManager</span><span class="o">.</span><span class="na">setTestProviderLocation</span><span class="o">(</span><span class="n">LocationManager</span><span class="o">.</span><span class="na">GPS_PROVIDER</span><span class="o">,</span><span class="n">loc</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>Let&rsquo;s see why we need to set <code>elapsedRealtimeNanos</code> and <code>time</code> parameters. Below SDK version 17, <code>Location</code> (Android 4.1.1) did not have <code>setElapsedRealtimeNanos</code> method, starting from SDK version 17, <code>Location</code> (Android 4.2) added this method, when calling <code>setTestProviderLocation</code> to set the location information, the Android SDK version 17 or above will do the verification of the location parameter completeness, the version below 17 will do the complement automatically, and the version from 17 will throw the exception directly.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">setTestProviderLocation</span><span class="o">(</span><span class="n">String</span> <span class="n">provider</span><span class="o">,</span> <span class="n">Location</span> <span class="n">loc</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">loc</span><span class="o">.</span><span class="na">isComplete</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">IllegalArgumentException</span> <span class="n">e</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span>
            <span class="s">&#34;Incomplete location object, missing timestamp or accuracy? &#34;</span> <span class="o">+</span> <span class="n">loc</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">mContext</span><span class="o">.</span><span class="na">getApplicationInfo</span><span class="o">().</span><span class="na">targetSdkVersion</span> <span class="o">&lt;=</span> <span class="n">Build</span><span class="o">.</span><span class="na">VERSION_CODES</span><span class="o">.</span><span class="na">JELLY_BEAN</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// just log on old platform (for backwards compatibility)
</span><span class="c1"></span>            <span class="n">Log</span><span class="o">.</span><span class="na">w</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
            <span class="n">loc</span><span class="o">.</span><span class="na">makeComplete</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="c1">// really throw it!
</span><span class="c1"></span>            <span class="k">throw</span> <span class="n">e</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="n">mService</span><span class="o">.</span><span class="na">setTestProviderLocation</span><span class="o">(</span><span class="n">provider</span><span class="o">,</span> <span class="n">loc</span><span class="o">,</span> <span class="n">mContext</span><span class="o">.</span><span class="na">getOpPackageName</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">RemoteException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="n">e</span><span class="o">.</span><span class="na">rethrowFromSystemServer</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Then look at the <code>makeComplete</code> and <code>isComplete</code> logic processing in the <code>Location</code> class. <code>isComplete</code> has <code>provider</code>, <code>Accuracy</code>, <code>mTime</code> and mElapsedRealtimeNanos judgments inside.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@SystemApi</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">makeComplete</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">mProvider</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="n">mProvider</span> <span class="o">=</span> <span class="s">&#34;?&#34;</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">hasAccuracy</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">mFieldsMask</span> <span class="o">|=</span> <span class="n">HAS_ACCURACY_MASK</span><span class="o">;</span>
        <span class="n">mAccuracy</span> <span class="o">=</span> <span class="n">100</span><span class="o">.</span><span class="na">0f</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">mTime</span> <span class="o">==</span> <span class="n">0</span><span class="o">)</span> <span class="n">mTime</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">mElapsedRealtimeNanos</span> <span class="o">==</span> <span class="n">0</span><span class="o">)</span> <span class="n">mElapsedRealtimeNanos</span> <span class="o">=</span> <span class="n">SystemClock</span><span class="o">.</span><span class="na">elapsedRealtimeNanos</span><span class="o">();</span>
<span class="o">}</span>
<span class="nd">@SystemApi</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isComplete</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">mProvider</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">hasAccuracy</span><span class="o">())</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">mTime</span> <span class="o">==</span> <span class="n">0</span><span class="o">)</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">mElapsedRealtimeNanos</span> <span class="o">==</span> <span class="n">0</span><span class="o">)</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>The above is a single point of the simulation of location implementation, if you want to achieve route playback simulation, just request the route location point array data in the background, after every 1 second refresh call <code>setTestProviderLocation</code> interface can be.</p>
<p>After the simulated location operation, you need to remove the simulated location object to avoid the location information or use the parameters of the simulated location interface, if not removed the next time you use it and call the <code>Provider</code> with the same name will also throw an exception.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">locationManager</span><span class="o">.</span><span class="na">removeTestProvider</span><span class="o">(</span><span class="n">LocationManager</span><span class="o">.</span><span class="na">GPS_PROVIDER</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<p>Reference <code>https://www.chenwenguan.com/android-mock-location/</code></p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/gps/">gps</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-06/go-embed-brief-tutorial/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Go Embed Brief Tutorial</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-06/opencv4-c&#43;&#43;-compilation/">
            <span class="next-text nav-default">Opencv4 C&#43;&#43; Compilation</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
