<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Introduction to Spring Cloud Bus - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="The Spring Cloud Bus positions itself as a messaging bus within the Spring Cloud system, using a message broker to connect all nodes of a distributed system.
The official Reference documentation for the Bus is relatively simple, so simple that it doesn&amp;rsquo;t even have a diagram.
This is the most 2.1.0 version of the Spring Cloud Bus code structure (less code)
Bus Example Demonstration Before we analyze the implementation of the Bus, let&amp;rsquo;s look at two simple examples of using Spring Cloud Bus." /><meta name="keywords" content="spring-cloud-bus,spring-cloud" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-06/introduction-to-spring-cloud-bus/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Introduction to Spring Cloud Bus" />
<meta property="og:description" content="The Spring Cloud Bus positions itself as a messaging bus within the Spring Cloud system, using a message broker to connect all nodes of a distributed system.
The official Reference documentation for the Bus is relatively simple, so simple that it doesn&rsquo;t even have a diagram.
This is the most 2.1.0 version of the Spring Cloud Bus code structure (less code)
Bus Example Demonstration Before we analyze the implementation of the Bus, let&rsquo;s look at two simple examples of using Spring Cloud Bus." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-06/introduction-to-spring-cloud-bus/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-06-29T17:57:28+08:00" />
<meta property="article:modified_time" content="2021-06-29T17:57:28+08:00" />

<meta itemprop="name" content="Introduction to Spring Cloud Bus">
<meta itemprop="description" content="The Spring Cloud Bus positions itself as a messaging bus within the Spring Cloud system, using a message broker to connect all nodes of a distributed system.
The official Reference documentation for the Bus is relatively simple, so simple that it doesn&rsquo;t even have a diagram.
This is the most 2.1.0 version of the Spring Cloud Bus code structure (less code)
Bus Example Demonstration Before we analyze the implementation of the Bus, let&rsquo;s look at two simple examples of using Spring Cloud Bus."><meta itemprop="datePublished" content="2021-06-29T17:57:28+08:00" />
<meta itemprop="dateModified" content="2021-06-29T17:57:28+08:00" />
<meta itemprop="wordCount" content="2039">
<meta itemprop="keywords" content="java,spring-cloud,spring-cloud-bus," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Introduction to Spring Cloud Bus"/>
<meta name="twitter:description" content="The Spring Cloud Bus positions itself as a messaging bus within the Spring Cloud system, using a message broker to connect all nodes of a distributed system.
The official Reference documentation for the Bus is relatively simple, so simple that it doesn&rsquo;t even have a diagram.
This is the most 2.1.0 version of the Spring Cloud Bus code structure (less code)
Bus Example Demonstration Before we analyze the implementation of the Bus, let&rsquo;s look at two simple examples of using Spring Cloud Bus."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Introduction to Spring Cloud Bus</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-06-29 17:57:28 </span>
        <div class="post-category">
            <a href="/categories/skills/"> skills </a>
            </div>
          <span class="more-meta"> 2039 words </span>
          <span class="more-meta"> 10 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#bus-example-demonstration">Bus Example Demonstration</a>
          <ul>
            <li><a href="#configuration-of-all-nodes-added">Configuration of all nodes added</a></li>
            <li><a href="#configuration-modification-of-some-nodes">Configuration modification of some nodes</a></li>
          </ul>
        </li>
        <li><a href="#in-depth-knowledge-of-bus">In-depth knowledge of bus</a>
          <ul>
            <li><a href="#bus-concept-introduction">Bus Concept Introduction</a></li>
          </ul>
        </li>
        <li><a href="#bus-underlay-analysis">Bus Underlay Analysis</a></li>
        <li><a href="#summary">Summary</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>The <code>Spring Cloud Bus</code> positions itself as a messaging bus within the <code>Spring Cloud</code> system, using a <code>message broker</code> to connect all nodes of a distributed system.</p>
<p>The official <code>Reference</code> documentation for the <code>Bus</code> is relatively simple, so simple that it doesn&rsquo;t even have a diagram.</p>
<p>This is the most 2.1.0 version of the <code>Spring Cloud Bus</code> code structure (less code)</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/06/29/d8f4b09c71344011a1c239062302f148.png" alt=" "></p>
<h2 id="bus-example-demonstration">Bus Example Demonstration</h2>
<p>Before we analyze the implementation of the Bus, let&rsquo;s look at two simple examples of using Spring Cloud Bus.</p>
<h3 id="configuration-of-all-nodes-added">Configuration of all nodes added</h3>
<p>The Bus example is relatively simple because the <code>AutoConfiguration</code> layer of the Bus is configured by default. All you need to do is introduce the <code>Spring Cloud Stream</code> and <code>Spring Cloud Bus</code> dependencies for the messaging middleware. After that, all launched applications will use the same Topic to receive and send messages.</p>
<p>The demo for the Bus is already on github: <a href="https://github.com/fangjian0423/rocketmq-binder-demo/tree/master/rocketmq-bus-demo">https://github.com/fangjian0423/rocketmq-binder-demo/tree/master/rocketmq-bus-demo</a>. The demo simulates the launch of 5 nodes, and if you add a configuration item to any one of the instances, it will be added to all nodes.</p>
<p>Access the address provided by the Controller of any node to get the configuration (key is hangzhou).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">curl -X GET <span class="s1">&#39;http://localhost:10001/bus/env?key=hangzhou&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>All nodes return <code>unknown</code> because the <code>key</code> of <code>hangzhou</code> is missing from the configuration of all nodes.</p>
<p><code>Bus</code> internally provides <code>EnvironmentBusEndpoint</code> which is an <code>Endpoint</code> used to add/update configuration via <code>message broker</code>.</p>
<p>Visit the url <code>/actuator/bus-env?name=hangzhou&amp;value=alibaba</code> of any node to add a configuration item (e.g. visit the <code>url</code> of <code>node1</code>):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">curl -X POST <span class="s1">&#39;http://localhost:10001/actuator/bus-env?name=hangzhou&amp;value=alibaba&#39;</span> -H <span class="s1">&#39;content-type: application/json&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>Then visit all nodes again <code>/bus/env</code> to get the configuration.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ curl -X GET <span class="s1">&#39;http://localhost:10001/bus/env?key=hangzhou&#39;</span>
unknown%
~ ⌚
$ curl -X GET <span class="s1">&#39;http://localhost:10002/bus/env?key=hangzhou&#39;</span>
unknown%
~ ⌚
$ curl -X GET <span class="s1">&#39;http://localhost:10003/bus/env?key=hangzhou&#39;</span>
unknown%
~ ⌚
$ curl -X GET <span class="s1">&#39;http://localhost:10004/bus/env?key=hangzhou&#39;</span>
unknown%
~ ⌚
$ curl -X GET <span class="s1">&#39;http://localhost:10005/bus/env?key=hangzhou&#39;</span>
unknown%
~ ⌚
$ curl -X POST <span class="s1">&#39;http://localhost:10001/actuator/bus-env?name=hangzhou&amp;value=alibaba&#39;</span> -H <span class="s1">&#39;content-type: application/json&#39;</span>

~ ⌚
$ curl -X GET <span class="s1">&#39;http://localhost:10005/bus/env?key=hangzhou&#39;</span>
alibaba%
~ ⌚
$ curl -X GET <span class="s1">&#39;http://localhost:10004/bus/env?key=hangzhou&#39;</span>
alibaba%
~ ⌚
$ curl -X GET <span class="s1">&#39;http://localhost:10003/bus/env?key=hangzhou&#39;</span>
alibaba%
~ ⌚
$ curl -X GET <span class="s1">&#39;http://localhost:10002/bus/env?key=hangzhou&#39;</span>
alibaba%
~ ⌚
$ curl -X GET <span class="s1">&#39;http://localhost:10001/bus/env?key=hangzhou&#39;</span>
alibaba%
</code></pre></td></tr></table>
</div>
</div><p>You can see that all nodes have a new configuration with <code>key</code> of <code>hangzhou</code> and the corresponding <code>value</code> is <code>alibaba</code>. This configuration item is done through the <code>EnvironmentBusEndpoint</code> provided by <code>Bus</code>.</p>
<p>Spring Cloud Config with Bus completes the refresh of all node configurations to describe the previous example (the example in this article is not a refresh, but a new configuration, but the process is the same).</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/06/29/ad6cec7b18044e17a31db6df9fad4e28.png" alt=" "></p>
<h3 id="configuration-modification-of-some-nodes">Configuration modification of some nodes</h3>
<p>For example, if you specify <code>destination</code> as <code>rocketmq-bus-node2</code> on <code>node1</code> (node2 is configured with <code>spring.cloud.bus.id</code> as <code>rocketmq-bus-node2:10002</code>, which matches), make the following configuration changes.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">curl -X POST <span class="s1">&#39;http://localhost:10001/actuator/bus-env/rocketmq-bus-node2?name=hangzhou&amp;value=xihu&#39;</span> -H <span class="s1">&#39;content-type: application/json&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>Access <code>/bus/env</code> to get the configuration (since the message is sent on node1, Bus also makes configuration changes to the sender&rsquo;s node node1).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">~ ⌚
$ curl -X POST <span class="s1">&#39;http://localhost:10001/actuator/bus-env/rocketmq-bus-node2?name=hangzhou&amp;value=xihu&#39;</span> -H <span class="s1">&#39;content-type: application/json&#39;</span>

~ ⌚
$ curl -X GET <span class="s1">&#39;http://localhost:10005/bus/env?key=hangzhou&#39;</span>
alibaba%
~ ⌚
$ curl -X GET <span class="s1">&#39;http://localhost:10004/bus/env?key=hangzhou&#39;</span>
alibaba%
~ ⌚
$ curl -X GET <span class="s1">&#39;http://localhost:10003/bus/env?key=hangzhou&#39;</span>
alibaba%
~ ⌚
$ curl -X GET <span class="s1">&#39;http://localhost:10002/bus/env?key=hangzhou&#39;</span>
xihu%
~ ⌚
$ curl -X GET <span class="s1">&#39;http://localhost:10001/bus/env?key=hangzhou&#39;</span>
xihu%
</code></pre></td></tr></table>
</div>
</div><p>As you can see, only <code>node1</code> and <code>node2</code> have changed their configurations, while the remaining 3 nodes remain unchanged.</p>
<h2 id="in-depth-knowledge-of-bus">In-depth knowledge of bus</h2>
<h3 id="bus-concept-introduction">Bus Concept Introduction</h3>
<h4 id="events">Events</h4>
<p>The remote event <code>RemoteApplicationEvent</code> is defined in Bus, which inherits from the <code>Spring</code> event <code>ApplicationEvent</code> and which currently has 4 specific implementations.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/06/29/44c24a441c124636912f3c27f6c8eba0.png" alt=" "></p>
<ul>
<li><code>EnvironmentChangeRemoteApplicationEvent</code>: Remote environment change event. This event is mainly used to receive a data of type Map&lt;String, String&gt; and update it to the Environment in Spring context. The examples in this article use this event in conjunction with EnvironmentBusEndpoint and EnvironmentChangeListener.</li>
<li><code>AckRemoteApplicationEvent</code>: The remote acknowledgement event, which is sent back to the AckRemoteApplicationEvent acknowledgement event after the remote event is successfully received inside Bus.</li>
<li><code>RefreshRemoteApplicationEvent</code>: Remote configuration refresh event. Works with @RefreshScope and all configuration classes modified by @ConfigurationProperties annotation for dynamic refreshing</li>
<li><code>UnknownRemoteApplicationEvent</code>: remote unknown event, which is wrapped in the Bus internal message body if an exception occurs when converting a remote event</li>
</ul>
<p>There is also a non-<code>RemoteApplicationEvent</code> event inside Bus - the <code>SentApplicationEvent</code> message sending event. Logging of remote message sending with Trace</p>
<p>These events work with <code>ApplicationListener</code>, for example <code>EnvironmentChangeRemoteApplicationEvent</code> with <code>EnvironmentChangeListener</code> for adding/modifying configuration.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EnvironmentChangeListener</span>
		<span class="kd">implements</span> <span class="n">ApplicationListener</span><span class="o">&lt;</span><span class="n">EnvironmentChangeRemoteApplicationEvent</span><span class="o">&gt;</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="kd">static</span> <span class="n">Log</span> <span class="n">log</span> <span class="o">=</span> <span class="n">LogFactory</span><span class="o">.</span><span class="na">getLog</span><span class="o">(</span><span class="n">EnvironmentChangeListener</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

	<span class="nd">@Autowired</span>
	<span class="kd">private</span> <span class="n">EnvironmentManager</span> <span class="n">env</span><span class="o">;</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onApplicationEvent</span><span class="o">(</span><span class="n">EnvironmentChangeRemoteApplicationEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">values</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="na">getValues</span><span class="o">();</span>
		<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;Received remote environment change request. Keys/values to update &#34;</span>
				<span class="o">+</span> <span class="n">values</span><span class="o">);</span>
		<span class="k">for</span> <span class="o">(</span><span class="n">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">entry</span> <span class="o">:</span> <span class="n">values</span><span class="o">.</span><span class="na">entrySet</span><span class="o">())</span> <span class="o">{</span>
			<span class="n">env</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>After receiving the <code>EnvironmentChangeRemoteApplicationEvent</code> event from other nodes, we call <code>EnvironmentManager#setProperty</code> to set the configuration, which internally sends an <code>EnvironmentChangeEvent</code> event for each configuration item. <code>EnvironmentChangeEvent</code> event for each configuration item, which is then listened to by <code>ConfigurationPropertiesRebinder</code> for <code>rebind</code> operation to add/update the configuration.</p>
<h4 id="actuator-endpoint">Actuator Endpoint</h4>
<p>Bus exposes 2 <code>Endpoint</code>s internally, <code>EnvironmentBusEndpoint</code> and <code>RefreshBusEndpoint</code>, for adding/modifying configuration and global configuration refreshing. Their corresponding <code>Endpoint id</code> i.e. <code>url</code> is <code>bus-env</code> and <code>bus-refresh</code>.</p>
<h4 id="configuration">Configuration</h4>
<p><code>Bus</code> for message delivery must involve <code>Topic</code>, <code>Group</code> and so on. These are encapsulated in <code>BusProperties</code>, whose default configuration prefix is <code>spring.cloud.bus</code>.</p>
<p>For example.</p>
<ul>
<li><code>spring.cloud.bus.refresh.enabled</code> is used to enable/disable the Listener for global refresh.</li>
<li><code>spring.cloud.bus.env.enabled</code> Enable/disable Endpoint for configuration addition/modification.</li>
<li><code>spring.cloud.bus.ack.enabled</code> Enable/disable sending of - <code>AckRemoteApplicationEvent</code> events.</li>
<li><code>spring.cloud.bus.trace.enabled</code> is used to enable/disable the Listener for message logging Trace.</li>
</ul>
<p>The default Topic used for sending is springCloudBus, which can be modified by configuration, and the Group can be set to broadcast mode or use the UUID with offset of lastest.</p>
<p>Each Bus application has a corresponding Bus id, which is officially taken in the following complex way.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="si">${</span><span class="nv">vcap</span><span class="p">.application.name:</span><span class="si">${</span><span class="nv">spring</span><span class="p">.application.name:</span><span class="nv">application</span><span class="si">}}</span>:<span class="si">${</span><span class="nv">vcap</span><span class="p">.application.instance_index:</span><span class="si">${</span><span class="nv">spring</span><span class="p">.application.index:</span><span class="si">${</span><span class="nv">local</span><span class="p">.server.port:</span><span class="si">${</span><span class="nv">server</span><span class="p">.port:</span><span class="nv">0</span><span class="si">}}}}</span>:<span class="si">${</span><span class="nv">vcap</span><span class="p">.application.instance_id:</span><span class="si">${</span><span class="nv">random</span><span class="p">.value</span><span class="si">}}</span>
</code></pre></td></tr></table>
</div>
</div><p>It is recommended to configure the Bus id manually, as the destination in the Bus remote event is matched against the Bus id.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">spring.cloud.bus.id=${spring.application.name}-${server.port}
</code></pre></td></tr></table>
</div>
</div><h2 id="bus-underlay-analysis">Bus Underlay Analysis</h2>
<p>The underlying analysis of Bus involves no more than a few aspects.</p>
<ol>
<li>How messages are sent</li>
<li>How the message is received</li>
<li>How the destination is matched</li>
<li>How the next action is triggered after the remote event is received</li>
</ol>
<p>The <code>BusAutoConfiguration</code> automation configuration class is modified by <code>@EnableBinding(SpringCloudBusClient.class)</code>.</p>
<p>The usage of <code>@EnableBinding</code> is explained in the dry run｜Introduction to the <code>Spring Cloud Stream</code> system and principles, and its <code>value</code> is <code>SpringCloudBusClient.class</code>, which creates a DirectChannel for input and output based on the proxy in <code>SpringCloudBusClient</code>. creates a <code>DirectChannel</code> for <code>input</code> and <code>output</code> based on the proxy.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">SpringCloudBusClient</span> <span class="o">{</span>

	<span class="n">String</span> <span class="n">INPUT</span> <span class="o">=</span> <span class="s">&#34;springCloudBusInput&#34;</span><span class="o">;</span>

	<span class="n">String</span> <span class="n">OUTPUT</span> <span class="o">=</span> <span class="s">&#34;springCloudBusOutput&#34;</span><span class="o">;</span>

	<span class="nd">@Output</span><span class="o">(</span><span class="n">SpringCloudBusClient</span><span class="o">.</span><span class="na">OUTPUT</span><span class="o">)</span>
	<span class="n">MessageChannel</span> <span class="nf">springCloudBusOutput</span><span class="o">();</span>

	<span class="nd">@Input</span><span class="o">(</span><span class="n">SpringCloudBusClient</span><span class="o">.</span><span class="na">INPUT</span><span class="o">)</span>
	<span class="n">SubscribableChannel</span> <span class="nf">springCloudBusInput</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>The properties of the <code>springCloudBusInput</code> and <code>springCloudBusOutput</code> <code>Binding</code> can be modified through the configuration file (e.g. by modifying the topic):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">spring.cloud.stream.bindings</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">springCloudBusInput</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">destination</span><span class="p">:</span><span class="w"> </span><span class="l">my-bus-topic</span><span class="w">
</span><span class="w">  </span><span class="nt">springCloudBusOutput</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">destination</span><span class="p">:</span><span class="w"> </span><span class="l">my-bus-topic</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>Sending of incoming messages.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">// BusAutoConfiguration
</span><span class="c1"></span>
<span class="nd">@EventListener</span><span class="o">(</span><span class="n">classes</span> <span class="o">=</span> <span class="n">RemoteApplicationEvent</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="c1">// 1
</span><span class="c1"></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">acceptLocal</span><span class="o">(</span><span class="n">RemoteApplicationEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
	<span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">serviceMatcher</span><span class="o">.</span><span class="na">isFromSelf</span><span class="o">(</span><span class="n">event</span><span class="o">)</span>
			<span class="o">&amp;&amp;</span> <span class="o">!(</span><span class="n">event</span> <span class="k">instanceof</span> <span class="n">AckRemoteApplicationEvent</span><span class="o">))</span> <span class="o">{</span> <span class="c1">// 2
</span><span class="c1"></span>		<span class="k">this</span><span class="o">.</span><span class="na">cloudBusOutboundChannel</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">MessageBuilder</span><span class="o">.</span><span class="na">withPayload</span><span class="o">(</span><span class="n">event</span><span class="o">).</span><span class="na">build</span><span class="o">());</span> <span class="c1">// 3
</span><span class="c1"></span>	<span class="o">}</span>
<span class="o">}</span>

<span class="nd">@StreamListener</span><span class="o">(</span><span class="n">SpringCloudBusClient</span><span class="o">.</span><span class="na">INPUT</span><span class="o">)</span> <span class="c1">// 4
</span><span class="c1"></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">acceptRemote</span><span class="o">(</span><span class="n">RemoteApplicationEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
	<span class="k">if</span> <span class="o">(</span><span class="n">event</span> <span class="k">instanceof</span> <span class="n">AckRemoteApplicationEvent</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">bus</span><span class="o">.</span><span class="na">getTrace</span><span class="o">().</span><span class="na">isEnabled</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="o">.</span><span class="na">serviceMatcher</span><span class="o">.</span><span class="na">isFromSelf</span><span class="o">(</span><span class="n">event</span><span class="o">)</span>
				<span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">applicationEventPublisher</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// 5
</span><span class="c1"></span>			<span class="k">this</span><span class="o">.</span><span class="na">applicationEventPublisher</span><span class="o">.</span><span class="na">publishEvent</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
		<span class="o">}</span>
		<span class="c1">// If it&#39;s an ACK we are finished processing at this point
</span><span class="c1"></span>		<span class="k">return</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">serviceMatcher</span><span class="o">.</span><span class="na">isForSelf</span><span class="o">(</span><span class="n">event</span><span class="o">)</span>
			<span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">applicationEventPublisher</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// 6
</span><span class="c1"></span>		<span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="na">serviceMatcher</span><span class="o">.</span><span class="na">isFromSelf</span><span class="o">(</span><span class="n">event</span><span class="o">))</span> <span class="o">{</span> <span class="c1">// 7
</span><span class="c1"></span>			<span class="k">this</span><span class="o">.</span><span class="na">applicationEventPublisher</span><span class="o">.</span><span class="na">publishEvent</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
		<span class="o">}</span>
		<span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">bus</span><span class="o">.</span><span class="na">getAck</span><span class="o">().</span><span class="na">isEnabled</span><span class="o">())</span> <span class="o">{</span> <span class="c1">// 8
</span><span class="c1"></span>			<span class="n">AckRemoteApplicationEvent</span> <span class="n">ack</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AckRemoteApplicationEvent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span>
					<span class="k">this</span><span class="o">.</span><span class="na">serviceMatcher</span><span class="o">.</span><span class="na">getServiceId</span><span class="o">(),</span>
					<span class="k">this</span><span class="o">.</span><span class="na">bus</span><span class="o">.</span><span class="na">getAck</span><span class="o">().</span><span class="na">getDestinationService</span><span class="o">(),</span>
					<span class="n">event</span><span class="o">.</span><span class="na">getDestinationService</span><span class="o">(),</span> <span class="n">event</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">event</span><span class="o">.</span><span class="na">getClass</span><span class="o">());</span>
			<span class="k">this</span><span class="o">.</span><span class="na">cloudBusOutboundChannel</span>
					<span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">MessageBuilder</span><span class="o">.</span><span class="na">withPayload</span><span class="o">(</span><span class="n">ack</span><span class="o">).</span><span class="na">build</span><span class="o">());</span>
			<span class="k">this</span><span class="o">.</span><span class="na">applicationEventPublisher</span><span class="o">.</span><span class="na">publishEvent</span><span class="o">(</span><span class="n">ack</span><span class="o">);</span>
		<span class="o">}</span>
	<span class="o">}</span>
	<span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">bus</span><span class="o">.</span><span class="na">getTrace</span><span class="o">().</span><span class="na">isEnabled</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">applicationEventPublisher</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// 9
</span><span class="c1"></span>		<span class="c1">// We are set to register sent events so publish it for local consumption,
</span><span class="c1"></span>		<span class="c1">// irrespective of the origin
</span><span class="c1"></span>		<span class="k">this</span><span class="o">.</span><span class="na">applicationEventPublisher</span><span class="o">.</span><span class="na">publishEvent</span><span class="o">(</span><span class="k">new</span> <span class="n">SentApplicationEvent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span>
				<span class="n">event</span><span class="o">.</span><span class="na">getOriginService</span><span class="o">(),</span> <span class="n">event</span><span class="o">.</span><span class="na">getDestinationService</span><span class="o">(),</span>
				<span class="n">event</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">event</span><span class="o">.</span><span class="na">getClass</span><span class="o">()));</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><ol>
<li>Use Spring&rsquo;s event listening mechanism to listen for all local RemoteApplicationEvent remote events (e.g. bus-env sends EnvironmentChangeRemoteApplicationEvent events locally, bus-refresh sends EnvironmentChangeRemoteApplicationEvent events locally). bus-refresh sends the RefreshRemoteApplicationEvent event locally. These events will be listened to here)</li>
<li>Determine if the event received locally is not an AckRemoteApplicationEvent remote acknowledgement event (otherwise it will be a dead loop, receiving messages and sending messages&hellip;) and if the event is sent by the application itself (the sender of the event is the application itself), if both are satisfied, execute step 3</li>
<li>Construct the Message and use the remote event as a payload, then send the message to the broker using a MessageChannel with the Binding name springCloudBusOutput constructed by Spring Cloud Stream.</li>
<li>The @StreamListener annotation consumes a MessageChannel with the Binding name springCloudBusInput constructed by Spring Cloud Stream, and the received message is a remote message.</li>
<li>If the remote event is an AckRemoteApplicationEvent remote acknowledgement event and the application has enabled the message trace switch, and the remote event is not sent by the application itself (the event sender is not the application itself, which means that the event was sent by another application), then the locally sent AckRemoteApplicationEvent The remote acknowledgement event indicates that the application acknowledges the receipt of the remote event sent by another application. End of process</li>
<li>If the remote event is sent from another application to the application itself (the recipient of the event is the application itself), then proceed to steps 7 and 8, otherwise perform step 9</li>
<li>If the remote event is not sent by the application itself (the sender of the event is not the application itself), the event is sent out locally. The application itself has already been handled locally by the corresponding message recipient in the first place, so there is no need to send it again</li>
<li>If the AckRemoteApplicationEvent remote acknowledgement event switch is enabled, construct the AckRemoteApplicationEvent event and send it both remotely and locally (locally because step 5 does not perform local AckRemoteApplicationEvent event is sent locally because step 5 did not perform local AckRemoteApplicationEvent event sending, that is, your own application confirms to your own application; it is sent remotely to tell other applications that your application received the message)</li>
<li>If the message logging trace switch is turned on, the SentApplicationEvent event is constructed and sent locally</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/06/29/5ff407363d854fc58c43465ddbd92093.png" alt=" "></p>
<p>The <code>EnvironmentChangeListener</code> of all nodes that listen for configuration changes after the <code>bus-env</code> trigger will print the following message on the console</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">o.s.c.b.event.EnvironmentChangeListener  : Received remote environment change request. Keys/values to update {hangzhou=alibaba}
</code></pre></td></tr></table>
</div>
</div><p>If the remote acknowledgement event <code>AckRemoteApplicationEvent</code> is listened to locally, all nodes will receive the information, for example, the console of the <code>node5</code> node listens to the <code>AckRemoteApplicationEvent</code> event as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">ServiceId [rocketmq-bus-node5:10005] listeners on {&#34;type&#34;:&#34;AckRemoteApplicationEvent&#34;,&#34;timestamp&#34;:1554124670484,&#34;originService&#34;:&#34;rocketmq-bus-node5:10005&#34;,&#34;destinationService&#34;:&#34;**&#34;,&#34;id&#34;:&#34;375f0426-c24e-4904-bce1-5e09371fc9bc&#34;,&#34;ackId&#34;:&#34;750d033f-356a-4aad-8cf0-3481ace8698c&#34;,&#34;ackDestinationService&#34;:&#34;**&#34;,&#34;event&#34;:&#34;org.springframework.cloud.bus.event.EnvironmentChangeRemoteApplicationEvent&#34;}
ServiceId [rocketmq-bus-node5:10005] listeners on {&#34;type&#34;:&#34;AckRemoteApplicationEvent&#34;,&#34;timestamp&#34;:1554124670184,&#34;originService&#34;:&#34;rocketmq-bus-node1:10001&#34;,&#34;destinationService&#34;:&#34;**&#34;,&#34;id&#34;:&#34;91f06cf1-4bd9-4dd8-9526-9299a35bb7cc&#34;,&#34;ackId&#34;:&#34;750d033f-356a-4aad-8cf0-3481ace8698c&#34;,&#34;ackDestinationService&#34;:&#34;**&#34;,&#34;event&#34;:&#34;org.springframework.cloud.bus.event.EnvironmentChangeRemoteApplicationEvent&#34;}
ServiceId [rocketmq-bus-node5:10005] listeners on {&#34;type&#34;:&#34;AckRemoteApplicationEvent&#34;,&#34;timestamp&#34;:1554124670402,&#34;originService&#34;:&#34;rocketmq-bus-node2:10002&#34;,&#34;destinationService&#34;:&#34;**&#34;,&#34;id&#34;:&#34;7df3963c-7c3e-4549-9a22-a23fa90a6b85&#34;,&#34;ackId&#34;:&#34;750d033f-356a-4aad-8cf0-3481ace8698c&#34;,&#34;ackDestinationService&#34;:&#34;**&#34;,&#34;event&#34;:&#34;org.springframework.cloud.bus.event.EnvironmentChangeRemoteApplicationEvent&#34;}
ServiceId [rocketmq-bus-node5:10005] listeners on {&#34;type&#34;:&#34;AckRemoteApplicationEvent&#34;,&#34;timestamp&#34;:1554124670406,&#34;originService&#34;:&#34;rocketmq-bus-node3:10003&#34;,&#34;destinationService&#34;:&#34;**&#34;,&#34;id&#34;:&#34;728b45ee-5e26-46c2-af1a-e8d1571e5d3a&#34;,&#34;ackId&#34;:&#34;750d033f-356a-4aad-8cf0-3481ace8698c&#34;,&#34;ackDestinationService&#34;:&#34;**&#34;,&#34;event&#34;:&#34;org.springframework.cloud.bus.event.EnvironmentChangeRemoteApplicationEvent&#34;}
ServiceId [rocketmq-bus-node5:10005] listeners on {&#34;type&#34;:&#34;AckRemoteApplicationEvent&#34;,&#34;timestamp&#34;:1554124670427,&#34;originService&#34;:&#34;rocketmq-bus-node4:10004&#34;,&#34;destinationService&#34;:&#34;**&#34;,&#34;id&#34;:&#34;1812fd6d-6f98-4e5b-a38a-4b11aee08aeb&#34;,&#34;ackId&#34;:&#34;750d033f-356a-4aad-8cf0-3481ace8698c&#34;,&#34;ackDestinationService&#34;:&#34;**&#34;,&#34;event&#34;:&#34;org.springframework.cloud.bus.event.EnvironmentChangeRemoteApplicationEvent&#34;}
</code></pre></td></tr></table>
</div>
</div><p>To answer the four questions mentioned at the beginning of this section.</p>
<ol>
<li>How the message is sent: Send an event to the springCloudBus topic via Spring Cloud Stream in the BusAutoConfiguration#acceptLocal method</li>
<li>How the messages are received: The springCloudBus topic is received in the BusAutoConfiguration#acceptRemote method via Spring Cloud Stream</li>
<li>How destination is matched: The destination is matched in the BusAutoConfiguration#acceptRemote method in the ReceiveRemote event method</li>
<li>How to trigger the next action after the remote event is received: The Bus internally receives the local RemoteApplicationEvent specific implementation event through Spring&rsquo;s event mechanism and then does the next action (e.g. EnvironmentChangeListener receives the EnvironmentChangeRemoteApplicationEvent event, RefreshListener receives the RefreshRemoteApplicationEvent event)</li>
</ol>
<h2 id="summary">Summary</h2>
<p>The spring Cloud Bus itself is still relatively small, but you need to understand the Spring Cloud Stream system and Spring&rsquo;s own event mechanism in advance, and then understand the logic of Spring Cloud Bus for handling local and remote events on this basis.</p>
<p>We can inherit RemoteApplicationEvent and build our own microservice messaging system with @RemoteApplicationEventScan annotation.</p>
<hr>
<p>Reference <code>https://fangjian0423.github.io/2019/04/09/spring-cloud-bus-intro/</code></p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/java/">java</a>
          <a href="/tags/spring-cloud/">spring-cloud</a>
          <a href="/tags/spring-cloud-bus/">spring-cloud-bus</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-06/web-components-getting-started-example-tutorial/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Web Components Getting Started Example Tutorial</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-06/build-streaming-applications-based-on-flink-sql/">
            <span class="next-text nav-default">Build Streaming Applications Based on Flink Sql</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
