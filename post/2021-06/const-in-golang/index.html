<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Const in Golang - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="Constants are arguably present in every code file, and there are many benefits to using them.
 Avoid magic literals, i.e. numbers, strings, etc. that appear directly in the code. It is not possible to read the code and see what it means at a glance. It also avoids the inconsistencies that can occur when using literals. When their values need to be modified, constants only need to be modified in one place, while literals need to be modified in multiple places, making it easy to miss inconsistencies." /><meta name="keywords" content="golang,const" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-06/const-in-golang/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Const in Golang" />
<meta property="og:description" content="Constants are arguably present in every code file, and there are many benefits to using them.
 Avoid magic literals, i.e. numbers, strings, etc. that appear directly in the code. It is not possible to read the code and see what it means at a glance. It also avoids the inconsistencies that can occur when using literals. When their values need to be modified, constants only need to be modified in one place, while literals need to be modified in multiple places, making it easy to miss inconsistencies." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-06/const-in-golang/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-06-14T09:44:53+08:00" />
<meta property="article:modified_time" content="2021-06-14T09:44:53+08:00" />

<meta itemprop="name" content="Const in Golang">
<meta itemprop="description" content="Constants are arguably present in every code file, and there are many benefits to using them.
 Avoid magic literals, i.e. numbers, strings, etc. that appear directly in the code. It is not possible to read the code and see what it means at a glance. It also avoids the inconsistencies that can occur when using literals. When their values need to be modified, constants only need to be modified in one place, while literals need to be modified in multiple places, making it easy to miss inconsistencies."><meta itemprop="datePublished" content="2021-06-14T09:44:53+08:00" />
<meta itemprop="dateModified" content="2021-06-14T09:44:53+08:00" />
<meta itemprop="wordCount" content="1960">
<meta itemprop="keywords" content="golang," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Const in Golang"/>
<meta name="twitter:description" content="Constants are arguably present in every code file, and there are many benefits to using them.
 Avoid magic literals, i.e. numbers, strings, etc. that appear directly in the code. It is not possible to read the code and see what it means at a glance. It also avoids the inconsistencies that can occur when using literals. When their values need to be modified, constants only need to be modified in one place, while literals need to be modified in multiple places, making it easy to miss inconsistencies."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Const in Golang</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-06-14 09:44:53 </span>
        <div class="post-category">
            <a href="/categories/implementation-details/"> implementation-details </a>
            </div>
          <span class="more-meta"> 1960 words </span>
          <span class="more-meta"> 10 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#constants-base">Constants Base</a></li>
        <li><a href="#iota">iota</a></li>
        <li><a href="#no-type-constants">No type constants</a></li>
        <li><a href="#summary">Summary</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>Constants are arguably present in every code file, and there are many benefits to using them.</p>
<ul>
<li>Avoid magic literals, i.e. numbers, strings, etc. that appear directly in the code. It is not possible to read the code and see what it means at a glance. It also avoids the inconsistencies that can occur when using literals. When their values need to be modified, constants only need to be modified in one place, while literals need to be modified in multiple places, making it easy to miss inconsistencies.</li>
<li>Compared to variables, constants can perform compile-time optimizations.</li>
</ul>
<p>The Go language also provides syntactic support for constants, which is largely consistent with the constants provided by other languages. But there are a few useful features of constants in Go that are worth knowing about.</p>
<h2 id="constants-base">Constants Base</h2>
<p>The const keyword is used to define constants in the Golang:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">const</span> <span class="nx">PI</span> <span class="kt">float64</span> <span class="p">=</span> <span class="mf">3.1415926</span>
<span class="kd">const</span> <span class="nx">MaxAge</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">150</span>
<span class="kd">const</span> <span class="nx">Greeting</span> <span class="kt">string</span> <span class="p">=</span> <span class="s">&#34;hello world&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">PI</span><span class="p">)</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">MaxAge</span><span class="p">)</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">Greeting</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Multiple constant definitions can be combined together, e.g. several of the above constant definitions can be written in the following form.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">const</span> <span class="p">(</span>
  <span class="nx">PI</span>       <span class="kt">float64</span> <span class="p">=</span> <span class="mf">3.1415926</span>
  <span class="nx">MaxAge</span>   <span class="kt">int</span>     <span class="p">=</span> <span class="mi">150</span>
  <span class="nx">Greeting</span> <span class="kt">string</span>  <span class="p">=</span> <span class="s">&#34;hello world&#34;</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>However, it is usually recommended to define constants of the same type, associated with each other, inside a group.</p>
<p>There is a big restriction on constants in Go: you can only define constants of basic types, i.e. boolean (bool), integer (unsigned <code>uint/uint8/uint16/uint32/uint64/uintptr</code>, signed <code>int/int8/int16/int32/int64</code>), floating-point (single-precision <code>float32</code>, double-precision <code>float64</code>), or the underlying type is one of these basic types. You cannot define constants of these types such as slices, arrays, pointers, structures, etc. For example, <code>byte</code> has an underlying type of <code>uint8</code> and <code>rune</code> has an underlying type of <code>int32</code>, see the Go source code <code>builtin.go</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="c1">// src/builtin/builtin.go
</span><span class="c1"></span><span class="kd">type</span> <span class="kt">byte</span> <span class="p">=</span> <span class="kt">uint8</span>
<span class="kd">type</span> <span class="kt">rune</span> <span class="p">=</span> <span class="kt">int32</span>
</code></pre></td></tr></table>
</div>
</div><p>Therefore, constants of class <code>byte</code> or <code>rune</code> can be defined:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">const</span> <span class="nx">b</span> <span class="kt">byte</span> <span class="p">=</span> <span class="mi">128</span>
<span class="kd">const</span> <span class="nx">r</span> <span class="kt">rune</span> <span class="p">=</span> <span class="sc">&#39;c&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>Defining variables of other types will report an error during compilation.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">User</span> <span class="kd">struct</span> <span class="p">{</span>
  <span class="nx">Name</span> <span class="kt">string</span>
  <span class="nx">Age</span>  <span class="kt">int</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">u</span> <span class="nx">User</span> <span class="p">=</span> <span class="nx">User</span><span class="p">{}</span> <span class="c1">// invalid const type User
</span><span class="c1"></span>
<span class="kd">var</span> <span class="nx">i</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">1</span>
<span class="kd">const</span> <span class="nx">p</span> <span class="o">*</span><span class="kt">int</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">i</span> <span class="c1">// invalid const type *int
</span></code></pre></td></tr></table>
</div>
</div><h2 id="iota">iota</h2>
<p>The Go language code often uses iota for constant definitions, here are a few Go source codes.</p>
<p>Standard library time source code:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="c1">// src/time/time.go
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">Month</span> <span class="kt">int</span>

<span class="kd">const</span> <span class="p">(</span>
  <span class="nx">January</span> <span class="nx">Month</span> <span class="p">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="kc">iota</span>
  <span class="nx">February</span>
  <span class="nx">March</span>
  <span class="nx">April</span>
  <span class="nx">May</span>
  <span class="nx">June</span>
  <span class="nx">July</span>
  <span class="nx">August</span>
  <span class="nx">September</span>
  <span class="nx">October</span>
  <span class="nx">November</span>
  <span class="nx">December</span>
<span class="p">)</span>

<span class="kd">type</span> <span class="nx">Weekday</span> <span class="kt">int</span>

<span class="kd">const</span> <span class="p">(</span>
  <span class="nx">Sunday</span> <span class="nx">Weekday</span> <span class="p">=</span> <span class="kc">iota</span>
  <span class="nx">Monday</span>
  <span class="nx">Tuesday</span>
  <span class="nx">Wednesday</span>
  <span class="nx">Thursday</span>
  <span class="nx">Friday</span>
  <span class="nx">Saturday</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>Standard library <code>net/http</code> source code:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="c1">// src/net/http/server.go
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">ConnState</span> <span class="kt">int</span>

<span class="kd">const</span> <span class="p">(</span>
  <span class="nx">StateNew</span> <span class="nx">ConnState</span> <span class="p">=</span> <span class="kc">iota</span>
  <span class="nx">StateActive</span>
  <span class="nx">StateIdle</span>
  <span class="nx">StateHijacked</span>
  <span class="nx">StateClosed</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><code>iota</code> is a mechanism that facilitates the definition of our constants. In short, <code>iota</code> acts independently in each constant definition group (each <code>const</code> statement that appears separately counts as a group), and <code>iota</code> appears in the constant expression used to initialize the value of the constant, <strong>the value of <code>iota</code> is the line it is on in the constant group (starting at 0)</strong>. The type and initialization expression can be omitted below a constant defined using iota, which then follows the type and initialization expression defined in the previous one. Let&rsquo;s look at a few sets of examples:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">const</span> <span class="p">(</span>
  <span class="nx">One</span> <span class="kt">int</span> <span class="p">=</span> <span class="kc">iota</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="nx">Two</span>
  <span class="nx">Three</span>
  <span class="nx">Four</span>
  <span class="nx">Five</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>This is also the most commonly used way, iota appears in the first line and its value is whatever it is. In the constant definition group above, One is on line 0 (note that it counts from 0) and iota is 0, so <code>One = 0 + 1 = 1</code>. The next line Two omits the type and initialization expression, so Two follows the type int above, and the initialization expression is also <code>iota + 1</code>. But this is line 1 of the definition group, and the value of iota is 1, so <code>Two = 1 + 1 = 2</code>. The next line, Three, also omits the type and initialization expression, so Three follows Two and thus One&rsquo;s type int, and the initialization expression is also iota + 1, but this is the second line of the definition, so <code>Three = 2 + 1 = 3</code>. And so on.</p>
<p>We can use iota in very complex initialization expressions:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">const</span> <span class="p">(</span>
  <span class="nx">Mask1</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">1</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="kc">iota</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
  <span class="nx">Mask2</span>
  <span class="nx">Mask3</span>
  <span class="nx">Mask4</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>According to the above analysis <code>Mask1~4</code> are <code>1, 3, 7, 15</code> in order.</p>
<p>In addition, there are odd numbers and even numbers:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">const</span> <span class="p">(</span>
  <span class="nx">Odd1</span> <span class="p">=</span> <span class="mi">2</span><span class="o">*</span><span class="kc">iota</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="nx">Odd2</span>
  <span class="nx">Odd3</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="p">(</span>
  <span class="nx">Even1</span> <span class="p">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="kc">iota</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
  <span class="nx">Even2</span>
  <span class="nx">Even3</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>In a group, iota does not necessarily appear in row 0, but the value is whatever the row in which it appears:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">const</span> <span class="p">(</span>
  <span class="nx">A</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">1</span>
  <span class="nx">B</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">2</span>
  <span class="nx">C</span> <span class="kt">int</span> <span class="p">=</span> <span class="kc">iota</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="nx">D</span>
  <span class="nx">E</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>Above iota appears in row 2 (starting from 0) and the value of C is 2 + 1 = 3. D and E are 4, 5 respectively.</p>
<p>Be sure to note that the value of iota is equal to the number of rows it appears in the group, not the number of times it appears.</p>
<p>Values can be ignored by assigning to the empty identifier:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">const</span> <span class="p">(</span>
  <span class="nx">_</span> <span class="kt">int</span> <span class="p">=</span> <span class="kc">iota</span>
  <span class="nx">A</span> <span class="c1">// 1
</span><span class="c1"></span>  <span class="nx">B</span> <span class="c1">// 2
</span><span class="c1"></span>  <span class="nx">C</span> <span class="c1">// 3
</span><span class="c1"></span>  <span class="nx">D</span> <span class="c1">// 4
</span><span class="c1"></span>  <span class="nx">E</span> <span class="c1">// 5
</span><span class="c1"></span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>With all this talk about the use of iota, why should I use iota? In other words, what are the advantages of iota? I think there are two points.</p>
<ul>
<li>ease of definition, when the pattern is relatively fixed, we can just write out the first one, and the constants that follow don&rsquo;t need to write out the type and initialization expressions.</li>
<li>Convenient to adjust the order, add and delete constant definitions. If we want to adjust the order after defining a set of constants, using iota&rsquo;s definition, we just need to adjust the position, no need to modify the initialization formula, because it is not written. The same goes for adding and deleting. If we write out the initialization formula one by one and delete the middle one, the subsequent values will have to be adjusted.</li>
</ul>
<p>For example, the source code in <code>net/http</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">ConnState</span> <span class="kt">int</span>

<span class="kd">const</span> <span class="p">(</span>
  <span class="nx">StateNew</span> <span class="nx">ConnState</span> <span class="p">=</span> <span class="kc">iota</span>
  <span class="nx">StateActive</span>
  <span class="nx">StateIdle</span>
  <span class="nx">StateHijacked</span>
  <span class="nx">StateClosed</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>If we need to add a constant that indicates the state that is being closed. Now just write the name of the added state:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">ConnState</span> <span class="kt">int</span>

<span class="kd">const</span> <span class="p">(</span>
  <span class="nx">StateNew</span> <span class="nx">ConnState</span> <span class="p">=</span> <span class="kc">iota</span>
  <span class="nx">StateActive</span>
  <span class="nx">StateIdle</span>
  <span class="nx">StateHijacked</span>
  <span class="nx">StateClosing</span> <span class="c1">// Added state
</span><span class="c1"></span>  <span class="nx">StateClosed</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>If the initialization equation is written explicitly:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">ConnState</span> <span class="kt">int</span>

<span class="kd">const</span> <span class="p">(</span>
  <span class="nx">StateNew</span> <span class="nx">ConnState</span> <span class="p">=</span> <span class="mi">0</span>
  <span class="nx">StateActive</span> <span class="nx">ConnState</span> <span class="p">=</span> <span class="mi">1</span>
  <span class="nx">StateIdle</span> <span class="nx">ConnState</span> <span class="p">=</span> <span class="mi">2</span>
  <span class="nx">StateHijacked</span> <span class="nx">ConnState</span> <span class="p">=</span> <span class="mi">3</span>
  <span class="nx">StateClosed</span> <span class="nx">ConnState</span> <span class="p">=</span> <span class="mi">4</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>This adds the need to change subsequent values. Also a lot more characters need to be typed 😊:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">const</span> <span class="p">(</span>
  <span class="nx">StateNew</span> <span class="nx">ConnState</span> <span class="p">=</span> <span class="mi">0</span>
  <span class="nx">StateActive</span> <span class="nx">ConnState</span> <span class="p">=</span> <span class="mi">1</span>
  <span class="nx">StateIdle</span> <span class="nx">ConnState</span> <span class="p">=</span> <span class="mi">2</span>
  <span class="nx">StateHijacked</span> <span class="nx">ConnState</span> <span class="p">=</span> <span class="mi">3</span>
  <span class="nx">StateClosing</span> <span class="nx">ConnState</span> <span class="p">=</span> <span class="mi">4</span>
  <span class="nx">StateClosed</span> <span class="nx">ConnState</span> <span class="p">=</span> <span class="mi">5</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="no-type-constants">No type constants</h2>
<p>The Golang has a special type of constants, namely untyped constants. That is, we do not explicitly specify the type when defining it. Such constants can store values beyond the usual range of types:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
  <span class="s">&#34;fmt&#34;</span>
  <span class="s">&#34;math&#34;</span>
  <span class="s">&#34;reflect&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="p">(</span>
  <span class="nx">Integer1</span> <span class="p">=</span> <span class="mi">1000</span>
  <span class="nx">Integer2</span> <span class="p">=</span> <span class="nx">math</span><span class="p">.</span><span class="nx">MaxUint64</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="nx">Float1</span>   <span class="p">=</span> <span class="mf">1.23</span>
  <span class="nx">Float2</span>   <span class="p">=</span> <span class="mf">1e100</span>
  <span class="nx">Float3</span>   <span class="p">=</span> <span class="mf">1e400</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;integer1=&#34;</span><span class="p">,</span> <span class="nx">Integer1</span><span class="p">,</span> <span class="s">&#34;type&#34;</span><span class="p">,</span> <span class="nx">reflect</span><span class="p">.</span><span class="nf">TypeOf</span><span class="p">(</span><span class="nx">Integer1</span><span class="p">).</span><span class="nf">Name</span><span class="p">())</span>
  <span class="c1">// Compilation errors
</span><span class="c1"></span>  <span class="c1">// fmt.Println(&#34;integer2=&#34;, Integer2, &#34;type&#34;, reflect.TypeOf(Integer2).Name())
</span><span class="c1"></span>  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;integer2/10=&#34;</span><span class="p">,</span> <span class="nx">Integer2</span><span class="o">/</span><span class="mi">10</span><span class="p">,</span> <span class="s">&#34;type&#34;</span><span class="p">,</span> <span class="nx">reflect</span><span class="p">.</span><span class="nf">TypeOf</span><span class="p">(</span><span class="nx">Integer2</span><span class="o">/</span><span class="mi">10</span><span class="p">).</span><span class="nf">Name</span><span class="p">())</span>

  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;float1=&#34;</span><span class="p">,</span> <span class="nx">Float1</span><span class="p">,</span> <span class="s">&#34;type&#34;</span><span class="p">,</span> <span class="nx">reflect</span><span class="p">.</span><span class="nf">TypeOf</span><span class="p">(</span><span class="nx">Float1</span><span class="p">).</span><span class="nf">Name</span><span class="p">())</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;float2=&#34;</span><span class="p">,</span> <span class="nx">Float2</span><span class="p">,</span> <span class="s">&#34;type&#34;</span><span class="p">,</span> <span class="nx">reflect</span><span class="p">.</span><span class="nf">TypeOf</span><span class="p">(</span><span class="nx">Float2</span><span class="p">).</span><span class="nf">Name</span><span class="p">())</span>
  <span class="c1">// Compilation errors
</span><span class="c1"></span>  <span class="c1">// fmt.Println(&#34;float3=&#34;, Float3, &#34;type&#34;, reflect.TypeOf(Float3).Name())
</span><span class="c1"></span>  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;float3/float2=&#34;</span><span class="p">,</span> <span class="nx">Float3</span><span class="o">/</span><span class="nx">Float2</span><span class="p">,</span> <span class="s">&#34;type&#34;</span><span class="p">,</span> <span class="nx">reflect</span><span class="p">.</span><span class="nf">TypeOf</span><span class="p">(</span><span class="nx">Float3</span><span class="o">/</span><span class="nx">Float2</span><span class="p">).</span><span class="nf">Name</span><span class="p">())</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Although untyped constants can store values outside the range of normal types and can do arithmetic operations on each other, they still need to be converted back to normal types when they are used (assigned to variables, passed as parameters). If the value exceeds the normal type range, the compilation will report an error. Each untyped constant has a default type, int for integers and float64 for floating point numbers (with decimal points or scientific notation), so in the above example, we define Integer2 as an untyped constant with the value of uint64 maximum + 1, which is allowed. But if we output the value of Integer2 directly, it will cause a compile error because Integer2 will be converted to int type by default, and it stores more values than the range of int. On the other hand, we can do operations with Integer2, such as dividing by 10, and the resulting value is in the int range and can be output. (I&rsquo;m using a 64-bit machine)</p>
<p>The following floating point types are similar, Float3 is out of the range of float64 representation, so it can&rsquo;t be output directly. But the result of Float3/Float2 is in the range of float64 and can be used.</p>
<p>Output of the above program:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">integer1= 1000 type int
integer2/10= 1844674407370955161 type int
float1= 1.23 type float64
float2= 1e+100 type float64
float3/float2= 1e+300 type float64
</code></pre></td></tr></table>
</div>
</div><p>The output also shows that the default types of integer and floating point are int and float64, respectively.</p>
<p>Combining the iota and untyped constants we can define a set of storage units:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">const</span> <span class="p">(</span>
  <span class="nx">_</span>  <span class="p">=</span> <span class="kc">iota</span>
  <span class="nx">KB</span> <span class="p">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="kc">iota</span><span class="p">)</span>
  <span class="nx">MB</span> <span class="c1">// 2 ^ 20
</span><span class="c1"></span>  <span class="nx">GB</span> <span class="c1">// 2 ^ 30
</span><span class="c1"></span>  <span class="nx">TB</span> <span class="c1">// 2 ^ 40
</span><span class="c1"></span>  <span class="nx">PB</span> <span class="c1">// 2 ^ 50
</span><span class="c1"></span>  <span class="nx">EB</span> <span class="c1">// 2 ^ 60
</span><span class="c1"></span>  <span class="nx">ZB</span> <span class="c1">// 2 ^ 70，1180591620717411303424
</span><span class="c1"></span>  <span class="nx">YB</span> <span class="c1">// 2 ^ 80
</span><span class="c1"></span><span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">YB</span> <span class="o">/</span> <span class="nx">ZB</span><span class="p">)</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;1180591620717411303424 B = &#34;</span><span class="p">,</span> <span class="mi">1180591620717411303424</span><span class="o">/</span><span class="nx">ZB</span><span class="p">,</span> <span class="s">&#34;ZB&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>ZB has actually reached 1180591620717411303424, which is beyond the range of int representation, but we can still define ZB and YB and still operate on them when we use them, as long as the final value to be used is within the range of normal types.</p>
<h2 id="summary">Summary</h2>
<p>The text introduces the knowledge of constants, and it is sufficient to remember two main points.</p>
<ul>
<li>The value of iota is equal to the line in which it appears in the constant definition group (starting from 0).</li>
<li>Untyped constants can define values that exceed the stored range, but they must be used in such a way that they can be transferred back to the normal type range, otherwise an error will be reported.
Using untyped constants, we can perform arithmetic operations on large numbers at compile time</li>
</ul>
<hr>
<p>Reference <code>https://darjun.github.io/2021/05/30/youdontknowgo/const/</code></p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/golang/">golang</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-06/several-cases-of-goroutine-leaks-in-golang/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Several Cases of Goroutine Leaks in Golang</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-06/jdbc-batch-insert-mybatis-postgresql/">
            <span class="next-text nav-default">Jdbc Batch Insert Mybatis Postgresql</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
