<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Be Aware of Security Vulnerability Caused by Spring Boot Actuator - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="Recently, we have been particularly disturbed by various security vulnerabilities, and we have received dozens of vulnerability emails scanned by the security team in a week, which have a class of vulnerabilities that are easy to ignore, but have an extremely wide impact and are extremely harmful, and you should not be unfamiliar with my name, which is Spring Boot Actuator.
Before writing this article, I did a little survey with my friends asking them about their knowledge of the Spring Boot Actuator and the results were surprisingly consistent, everyone knows that Spring Boot provides automatic configuration of the spring-boot-starter-actuator, but very few people but few people actually use its related features." /><meta name="keywords" content="security,spring-boot-actuator,vulnerability" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-06/be-aware-of-security-vulnerability-caused-by-spring-boot-actuator/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Be Aware of Security Vulnerability Caused by Spring Boot Actuator" />
<meta property="og:description" content="Recently, we have been particularly disturbed by various security vulnerabilities, and we have received dozens of vulnerability emails scanned by the security team in a week, which have a class of vulnerabilities that are easy to ignore, but have an extremely wide impact and are extremely harmful, and you should not be unfamiliar with my name, which is Spring Boot Actuator.
Before writing this article, I did a little survey with my friends asking them about their knowledge of the Spring Boot Actuator and the results were surprisingly consistent, everyone knows that Spring Boot provides automatic configuration of the spring-boot-starter-actuator, but very few people but few people actually use its related features." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-06/be-aware-of-security-vulnerability-caused-by-spring-boot-actuator/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-06-26T11:52:18+08:00" />
<meta property="article:modified_time" content="2021-06-26T11:52:18+08:00" />

<meta itemprop="name" content="Be Aware of Security Vulnerability Caused by Spring Boot Actuator">
<meta itemprop="description" content="Recently, we have been particularly disturbed by various security vulnerabilities, and we have received dozens of vulnerability emails scanned by the security team in a week, which have a class of vulnerabilities that are easy to ignore, but have an extremely wide impact and are extremely harmful, and you should not be unfamiliar with my name, which is Spring Boot Actuator.
Before writing this article, I did a little survey with my friends asking them about their knowledge of the Spring Boot Actuator and the results were surprisingly consistent, everyone knows that Spring Boot provides automatic configuration of the spring-boot-starter-actuator, but very few people but few people actually use its related features."><meta itemprop="datePublished" content="2021-06-26T11:52:18+08:00" />
<meta itemprop="dateModified" content="2021-06-26T11:52:18+08:00" />
<meta itemprop="wordCount" content="1045">
<meta itemprop="keywords" content="java,spring-boot-actuator," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Be Aware of Security Vulnerability Caused by Spring Boot Actuator"/>
<meta name="twitter:description" content="Recently, we have been particularly disturbed by various security vulnerabilities, and we have received dozens of vulnerability emails scanned by the security team in a week, which have a class of vulnerabilities that are easy to ignore, but have an extremely wide impact and are extremely harmful, and you should not be unfamiliar with my name, which is Spring Boot Actuator.
Before writing this article, I did a little survey with my friends asking them about their knowledge of the Spring Boot Actuator and the results were surprisingly consistent, everyone knows that Spring Boot provides automatic configuration of the spring-boot-starter-actuator, but very few people but few people actually use its related features."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Be Aware of Security Vulnerability Caused by Spring Boot Actuator</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-06-26 11:52:18 </span>
        <div class="post-category">
            <a href="/categories/security/"> security </a>
            </div>
          <span class="more-meta"> 1045 words </span>
          <span class="more-meta"> 5 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#what-is-the-spring-boot-actuator">What is the <code>Spring Boot Actuator</code></a></li>
        <li><a href="#quick-start">Quick Start</a>
          <ul>
            <li><a href="#step-1-introduce-dependencies">Step 1 Introduce dependencies</a></li>
            <li><a href="#step-2-understanding-endpoint">Step 2 Understanding endpoint</a></li>
            <li><a href="#step-3-understanding-the-enable-and-exposure-states-of-endpoint">Step 3 Understanding the <code>enable</code> and <code>exposure</code> states of <code>endpoint</code></a></li>
          </ul>
        </li>
        <li><a href="#understanding-the-security-risks-of-the-spring-boot-actuator">Understanding the Security Risks of the <code>Spring Boot Actuator</code></a></li>
        <li><a href="#security-advice">Security Advice</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>Recently, we have been particularly disturbed by various security vulnerabilities, and we have received dozens of vulnerability emails scanned by the security team in a week, which have a class of vulnerabilities that are easy to ignore, but have an extremely wide impact and are extremely harmful, and you should not be unfamiliar with my name, which is <code>Spring Boot Actuator</code>.</p>
<p>Before writing this article, I did a little survey with my friends asking them about their knowledge of the <code>Spring Boot Actuator</code> and the results were surprisingly consistent, everyone knows that <code>Spring Boot</code> provides automatic configuration of the <code>spring-boot-starter-actuator</code>, but very few people but few people actually use its related features. As you continue to read the article below, you can also think about the following questions.</p>
<ul>
<li>Check if you have introduced the <code>spring-boot-starter-actuator</code> dependency in your development project?</li>
<li>Do you actually use the <code>spring-boot-starter-actuator</code> related functionality in your projects?</li>
<li>Do you know the security risks of <code>spring-boot-starter-actuator</code> and the correct way to configure it?</li>
</ul>
<h2 id="what-is-the-spring-boot-actuator">What is the <code>Spring Boot Actuator</code></h2>
<p>Official Definition</p>
<blockquote>
<p>Definition of Actuator
An actuator is a manufacturing term that refers to a mechanical device for moving or controlling something. Actuators can generate a large amount of motion from a small change.</p>
</blockquote>
<h2 id="quick-start">Quick Start</h2>
<h3 id="step-1-introduce-dependencies">Step 1 Introduce dependencies</h3>
<blockquote>
<p>tips: spring-boot-starter-actuator has some configuration differences in different versions of Spring Boot, this article uses the 2.4.4 version of the project</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-actuator<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>2.4.4<span class="nt">&lt;/version&gt;</span>
<span class="err">&lt;</span>/dependency
</code></pre></td></tr></table>
</div>
</div><h3 id="step-2-understanding-endpoint">Step 2 Understanding endpoint</h3>
<p>The <code>endpoint</code> is the most important object we need to care about when using the <code>Spring Boot Actuator</code>, to list some of the <code>endpoints</code> you might be interested in</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>beans</td>
<td>View all objects in the Spring container</td>
</tr>
<tr>
<td>configprops</td>
<td>View the list of objects annotated by <code>@ConfigurationProperties</code></td>
</tr>
<tr>
<td>env</td>
<td>View the environment configuration information for the <code>application.yaml</code> configuration</td>
</tr>
<tr>
<td>health</td>
<td>Health Check Endpoints</td>
</tr>
<tr>
<td>info</td>
<td>Application Information</td>
</tr>
<tr>
<td>metrics</td>
<td>Statistical Information</td>
</tr>
<tr>
<td>mappings</td>
<td>Service contract <code>@RequestMapping</code> related endpoints</td>
</tr>
<tr>
<td>shutdown</td>
<td>Elegant shutdown</td>
</tr>
</tbody>
</table>
<p>For example, for <code>health</code>, you only need to access the following <code>endpoint</code> to get the status of the application</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">curl <span class="s2">&#34;localhost:8080/actuator/health&#34;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="step-3-understanding-the-enable-and-exposure-states-of-endpoint">Step 3 Understanding the <code>enable</code> and <code>exposure</code> states of <code>endpoint</code></h3>
<p>The <code>spring Boot Actuator</code> provides two states of configuration for all <code>endpoint</code></p>
<ul>
<li>
<p><code>enabled</code> Enabled status. By default all <code>endpoint</code>s are enabled except <code>shutdown</code>. This is understandable, as the other <code>endpoint</code>s are basically viewing behavior, while <code>shutdown</code> affects the running state of the application.</p>
</li>
<li>
<p><code>exposure</code> exposes the state. After <code>endpoint</code>&rsquo;s <code>enabled</code> is set to <code>true</code>, it needs to be exposed once more before it can be accessed; by default only <code>health</code> and <code>info</code> are exposed.</p>
</li>
</ul>
<p>When <code>enabled</code> is not enabled, the associated <code>endpoint</code> code is not loaded by the <code>Spring</code> context at all, so it doesn&rsquo;t matter if <code>exposure</code> is configured when <code>enabled</code> is <code>false</code>.</p>
<p>A few typical configuration examples are as follows</p>
<p>Enable and expose all endpoints</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">management</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">endpoints</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">web</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="nt">exposure</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">include</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;*&#34;</span><span class="w">
</span><span class="w">  </span><span class="nt">endpoint</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">shutdown</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>Only enable and expose the specified <code>endpoint</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">management</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">endpoints</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">enabled-by-default</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w">  </span><span class="nt">endpoint</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">info</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">  </span><span class="nt">endpoints</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">web</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="nt">exposure</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">include</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;info&#34;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>Disable all <code>endpoint</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">management</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">endpoints</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">enabled-by-default</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>Or, remove the <code>spring-boot-starter-actuator</code> dependency!</p>
<h2 id="understanding-the-security-risks-of-the-spring-boot-actuator">Understanding the Security Risks of the <code>Spring Boot Actuator</code></h2>
<p>As you can see from the introduction above, there are <code>endpoints</code> provided by the <code>Spring Boot Actuator</code> that expose important information about the application, so take <code>env</code> as an example to get a feel for a typical <code>application.yaml</code> example.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">server</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">8080</span><span class="w">
</span><span class="w"></span><span class="nt">spring</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">datasource</span><span class="p">:</span><span class="w">
</span><span class="w">  	</span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">jdbc:mysql://testDbHost:3306/kirito</span><span class="w">
</span><span class="w">    </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l">kirito</span><span class="w">
</span><span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="m">123456</span><span class="w">
</span><span class="w"></span><span class="nt">kirito</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">ak</span><span class="p">:</span><span class="w"> </span><span class="l">kirito@xxx_ak</span><span class="w">
</span><span class="w">  </span><span class="nt">sk</span><span class="p">:</span><span class="w"> </span><span class="l">kirito@xxx_sk</span><span class="w">
</span><span class="w"></span><span class="nt">management</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">endpoints</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">web</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="nt">exposure</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">include</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;*&#34;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>The above configuration couldn&rsquo;t be more classic. Let&rsquo;s look at the return value after accessing <code>localhost:8080/actuator/env</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;activeProfiles&#34;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&#34;propertySources&#34;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;server.ports&#34;</span><span class="p">,</span>
      <span class="nt">&#34;properties&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;local.server.port&#34;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&#34;value&#34;</span><span class="p">:</span> <span class="mi">8080</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Config resource &#39;class path resource [application.yaml]&#39; via location &#39;optional:classpath:/&#39;&#34;</span><span class="p">,</span>
      <span class="nt">&#34;properties&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;server.port&#34;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&#34;value&#34;</span><span class="p">:</span> <span class="mi">8080</span><span class="p">,</span>
          <span class="nt">&#34;origin&#34;</span><span class="p">:</span> <span class="s2">&#34;class path resource [application.yaml] - 2:9&#34;</span>
        <span class="p">},</span>
        <span class="nt">&#34;spring.datasource.url&#34;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&#34;value&#34;</span><span class="p">:</span> <span class="s2">&#34;jdbc:mysql://testDbHost:3306/kirito&#34;</span><span class="p">,</span>
          <span class="nt">&#34;origin&#34;</span><span class="p">:</span> <span class="s2">&#34;class path resource [application.yaml] - 5:44&#34;</span>
        <span class="p">},</span>
        <span class="nt">&#34;spring.datasource.username&#34;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&#34;value&#34;</span><span class="p">:</span> <span class="s2">&#34;kirito&#34;</span><span class="p">,</span>
          <span class="nt">&#34;origin&#34;</span><span class="p">:</span> <span class="s2">&#34;class path resource [application.yaml] - 6:15&#34;</span>
        <span class="p">},</span>
        <span class="nt">&#34;spring.datasource.password&#34;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&#34;value&#34;</span><span class="p">:</span> <span class="s2">&#34;******&#34;</span><span class="p">,</span>
          <span class="nt">&#34;origin&#34;</span><span class="p">:</span> <span class="s2">&#34;class path resource [application.yaml] - 7:15&#34;</span>
        <span class="p">},</span>
        <span class="nt">&#34;kirito.ak&#34;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&#34;value&#34;</span><span class="p">:</span> <span class="s2">&#34;kirito@xxx_ak&#34;</span><span class="p">,</span>
          <span class="nt">&#34;origin&#34;</span><span class="p">:</span> <span class="s2">&#34;class path resource [application.yaml] - 10:7&#34;</span>
        <span class="p">},</span>
        <span class="nt">&#34;kirito.sk&#34;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&#34;value&#34;</span><span class="p">:</span> <span class="s2">&#34;kirito@xxx_sk&#34;</span><span class="p">,</span>
          <span class="nt">&#34;origin&#34;</span><span class="p">:</span> <span class="s2">&#34;class path resource [application.yaml] - 11:7&#34;</span>
        <span class="p">},</span>
        <span class="nt">&#34;management.endpoints.web.exposure.include&#34;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&#34;value&#34;</span><span class="p">:</span> <span class="s2">&#34;*&#34;</span><span class="p">,</span>
          <span class="nt">&#34;origin&#34;</span><span class="p">:</span> <span class="s2">&#34;class path resource [application.yaml] - 17:18&#34;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>You can see that the <code>Spring Boot Actuator</code> is desensitized for the built-in sensitive configuration information <code>spring.datasource.password</code>, but some custom sensitive configurations like <code>kirito.ak</code> and <code>kirito.sk</code> are exposed.</p>
<p>Some readers may immediately question: our machines are deployed intranet, and are generally exposed to the public through a reverse proxy service, this kind of <code>endpoint</code> is not accessible to external users. Then I can only say that it is too naive, for example, the following situations are real examples that lead to security vulnerabilities</p>
<ul>
<li>The reverse proxy misconfigured the root node, exposing the <code>endpoint</code> of the <code>actuator</code> along with the <code>web</code> service</li>
<li>The online configuration is fine, but the public network <code>SLB</code> was opened when the test environment was deployed, resulting in the <code>endpoint</code> of <code>actuator</code> being exposed</li>
<li>A machine in the same environment is hacked, resulting in the leakage of application configuration information</li>
</ul>
<h2 id="security-advice">Security Advice</h2>
<p>For the <code>endpoint</code> provided by the <code>Spring Boot Actuator</code>, there are several measures that can be taken to minimize the risk of security attacks</p>
<ul>
<li>Expose <code>endpoint</code> with minimal granularity. Only enable and expose the <code>endpoint</code> that is actually used, instead of configuring: <code>management.endpoints.web.exposure.include=*</code>.</li>
<li>Configure a separate access port for <code>endpoint</code> so that it is separate from the port of the <code>web</code> service to avoid exposing the <code>endpoint</code> of the <code>actuator</code> by mistake when exposing the <code>web</code> service. Example: <code>management.port=8099</code>.</li>
<li>Introduce the <code>spring-boot-starter-security</code> dependency to configure access control for the <code>endpoint</code> of the <code>actuator</code>.</li>
<li>Evaluate carefully whether you need to bring in the <code>spring-boot-stater-actuator</code>. In my personal experience, I have not encountered any requirement that necessarily requires the introduction of <code>spring-boot-stater-actuator</code> to solve, so if you are not aware of the security risks described above, I suggest you remove the dependency first.</li>
</ul>
<hr>
<p>Reference <code>https://www.cnkirito.moe/spring-boot-actuator-notes/</code></p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/java/">java</a>
          <a href="/tags/spring-boot-actuator/">spring-boot-actuator</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-06/fetch-api-tutorials/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Fetch Api Tutorials</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-06/sqlx-library-usage-guide/">
            <span class="next-text nav-default">Sqlx Library Usage Guide</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
