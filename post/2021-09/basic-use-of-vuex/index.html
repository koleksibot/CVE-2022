<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Basic Use of Vuex - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="Recently, I was writing the home page of deepincn, and I saw elementary os&#39; home page style was quite nice, so I planned to learn from it.
Originally intended to use Angular development, but see Vue3 has been very stable, so I plan to regain Vue3, using Vue3 to write the new home page.
In order to facilitate future data updates, you need to use centralized data management, Vue under the more famous and good is Vuex, and Vuex has also been adapted to Vue3, you can rest assured that the use of." /><meta name="keywords" content="vuex, Basic Use" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-09/basic-use-of-vuex/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Basic Use of Vuex" />
<meta property="og:description" content="Recently, I was writing the home page of deepincn, and I saw elementary os&#39; home page style was quite nice, so I planned to learn from it.
Originally intended to use Angular development, but see Vue3 has been very stable, so I plan to regain Vue3, using Vue3 to write the new home page.
In order to facilitate future data updates, you need to use centralized data management, Vue under the more famous and good is Vuex, and Vuex has also been adapted to Vue3, you can rest assured that the use of." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-09/basic-use-of-vuex/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-09-09T19:23:53+08:00" />
<meta property="article:modified_time" content="2021-09-09T19:23:53+08:00" />

<meta itemprop="name" content="Basic Use of Vuex">
<meta itemprop="description" content="Recently, I was writing the home page of deepincn, and I saw elementary os&#39; home page style was quite nice, so I planned to learn from it.
Originally intended to use Angular development, but see Vue3 has been very stable, so I plan to regain Vue3, using Vue3 to write the new home page.
In order to facilitate future data updates, you need to use centralized data management, Vue under the more famous and good is Vuex, and Vuex has also been adapted to Vue3, you can rest assured that the use of."><meta itemprop="datePublished" content="2021-09-09T19:23:53+08:00" />
<meta itemprop="dateModified" content="2021-09-09T19:23:53+08:00" />
<meta itemprop="wordCount" content="2338">
<meta itemprop="keywords" content="vuex," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Basic Use of Vuex"/>
<meta name="twitter:description" content="Recently, I was writing the home page of deepincn, and I saw elementary os&#39; home page style was quite nice, so I planned to learn from it.
Originally intended to use Angular development, but see Vue3 has been very stable, so I plan to regain Vue3, using Vue3 to write the new home page.
In order to facilitate future data updates, you need to use centralized data management, Vue under the more famous and good is Vuex, and Vuex has also been adapted to Vue3, you can rest assured that the use of."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Basic Use of Vuex</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-09-09 19:23:53 </span>
        <div class="post-category">
            <a href="/categories/skills/"> skills </a>
            <a href="/categories/frontend/"> frontend </a>
            </div>
          <span class="more-meta"> 2338 words </span>
          <span class="more-meta"> 11 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#introduction">Introduction</a>
          <ul>
            <li><a href="#problems-solved-by-vuex">Problems solved by Vuex</a></li>
          </ul>
        </li>
        <li><a href="#basic-use">Basic Use</a></li>
        <li><a href="#core-concepts">Core Concepts</a>
          <ul>
            <li><a href="#state">State</a></li>
            <li><a href="#getter">Getter</a></li>
            <li><a href="#mutation">Mutation</a></li>
            <li><a href="#action">Action</a></li>
            <li><a href="#module">Module</a></li>
          </ul>
        </li>
        <li><a href="#with-typescript">with TypeScript</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>Recently, I was writing the home page of deepincn, and I saw elementary os' home page style was quite nice, so I planned to learn from it.</p>
<p>Originally intended to use Angular development, but see Vue3 has been very stable, so I plan to regain Vue3, using Vue3 to write the new home page.</p>
<p>In order to facilitate future data updates, you need to use centralized data management, Vue under the more famous and good is Vuex, and Vuex has also been adapted to Vue3, you can rest assured that the use of.</p>
<p>This article will briefly introduce Vuex, then talk about the basic syntax, I will write another article to specifically draw on a Vuex, through the implementation of a simple Vuex to understand the core.</p>
<h2 id="introduction">Introduction</h2>
<p>One of the most important feature points of Vue is <strong>data-driven</strong> .</p>
<p>By data-driven, we mean that the view is generated by data-driven, and we don&rsquo;t modify the view by directly manipulating the DOM, but by modifying the data. It greatly simplifies the amount of code compared to our traditional front-end development, such as using jQuery and other front-end libraries to directly modify the DOM.</p>
<p>Especially when the interaction is complex, only caring about data modification will make the logic of the code very clear, because the DOM becomes a data mapping, all our logic is to modify the data without touching the DOM, so the code is very easy to maintain.</p>
<p>Another important feature of Vue is <strong>componentization</strong>, each component is the smallest unit of functionality, each component has its own <code>data</code>, <code>template</code> and <code>methods</code>. We update the view in <code>template</code> by modifying the data in <code>data</code>. It is very convenient to update the view in a single component, but in practice, when we have more than one component in our project, it is very difficult to maintain the same state when many components are integrated together, especially when the embedding is very deep, passing parameters becomes very troublesome (here I think of Deepin&rsquo;s control center, there are very deep nesting inside the component, and the innermost component (to get the data, you need to pass it along the nesting layers, which is very troublesome).</p>
<p>To solve this problem, we need to introduce Vuex for state management, which is responsible for communication among components.</p>
<h3 id="problems-solved-by-vuex">Problems solved by Vuex</h3>
<ul>
<li>Multiple views depend on the same state.</li>
<li>Actions from different views need to change the same state</li>
</ul>
<h2 id="basic-use">Basic Use</h2>
<p>First install Vuex in the project, Vuex4 is the version developed for Vue3 and we install it with the following command.</p>
<p>npm</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">npm install vuex@next
</code></pre></td></tr></table>
</div>
</div><p>yarn</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">yarn add vuex@next
</code></pre></td></tr></table>
</div>
</div><p>At the heart of every Vuex application is the store. The &ldquo;store&rdquo; is basically a container that contains most of the state in your application.</p>
<p>Vuex&rsquo;s state store is responsive. When a Vue component reads state from the store, if the state in the store changes, the corresponding component will be updated accordingly and efficiently. 2.
You can&rsquo;t change the state in store directly. The only way to change the state in store is to explicitly commit mutation, which makes it easy to track every change in state and allows us to implement tools that help us better understand our application.</p>
<p>Now that Vuex is installed, we can start writing a simple store by creating a <code>store.ts</code> file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">import</span> <span class="p">{</span> <span class="nx">createStore</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;vuex&#39;</span>

<span class="kr">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">createStore</span><span class="p">({</span>
    <span class="nx">state</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">count</span>: <span class="kt">0</span>
    <span class="p">},</span>
    <span class="nx">mutations</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">increment</span> <span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">state</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span>
        <span class="p">}</span>
    <span class="p">},</span>
<span class="p">});</span>

<span class="kr">export</span> <span class="p">{</span> <span class="nx">store</span> <span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div><p>In main.ts, register the store to the app instance of Vue.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">import</span> <span class="p">{</span> <span class="nx">store</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./store&#39;</span>

<span class="p">...</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">store</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">);</span> <span class="c1">// Add before mounting
</span></code></pre></td></tr></table>
</div>
</div><p>The above is the simplest example of a store, is it a little confusing?</p>
<p>In store.ts we export the object returned using the createStore function, and in store we define two properties: <code>state</code> and <code>mutations</code>.</p>
<p>We define the state in state and the operation methods in mutations. The methods defined in mutations must be called by the <code>store.commit()</code> method and cannot be accessed directly.</p>
<p>Now let&rsquo;s use store in our component.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ count }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
import { defineComponent } from &#39;vue&#39;;

export default defineComponent({

    setup() {
        return { count: this.$store.state.count };
    },
    methods: {
        increment() {
            this.$store.commit(&#39;increment&#39;)
        }
    }
});
</code></pre></td></tr></table>
</div>
</div><p>In the component example, the setup function is a composition API introduced in Vue3, so we won&rsquo;t go into detail about the use of setup here.</p>
<p>In the example, setup provides the count variable to the view, here the assignment is deconstructed, when the template uses the count variable, it actually accesses the count in the store, why?</p>
<p>This is because Vuex&rsquo;s state store is responsive.</p>
<p>In the example, the component provides a method to modify the count in the store, and the only way to change the state in Vuex&rsquo;s store is to commit a mutation. mutations in Vuex are very similar to events: each mutation has a string event type and a callback function (handler ). This callback function is where we actually make the state change, and it accepts state as the first argument.</p>
<p>You can&rsquo;t call a mutation handler directly. This option is more like an event registration: &ldquo;Call this function when a mutation of type increment is triggered.&rdquo; .</p>
<h2 id="core-concepts">Core Concepts</h2>
<p>Vuex has a total of five core concepts: State, Getter, Mutation, Action and Module.</p>
<h3 id="state">State</h3>
<p>Vuex uses a single state tree that contains all the application-level state in a single object. It then exists as a &ldquo;unique data source (SSOT)&rdquo;. This also means that each application will contain only one instance of store. The single state tree allows us to directly locate any particular state fragment and easily get a snapshot of the entire current application state during debugging.</p>
<p>In the component, we can fetch the registered state via <code>this.$store.state</code>, and whenever store.state.count changes, the computed property is retrieved and the associated DOM is triggered to be updated.</p>
<p>Vuex &ldquo;injects&rdquo; store instances from the root component into all child components via Vue&rsquo;s plugin system. The child components can be accessed through this.$store.</p>
<p>template can be used directly with this.$store.state.[property] and this can be omitted.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;app&#34;</span><span class="p">&gt;</span>
    {{ this.$store.state.name }}
    {{ this.$store.state.age }}
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="getter">Getter</h3>
<p>Sometimes we need to derive some state from the state in the store, for example to filter and count lists.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="nx">doneTodosCount</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">todos</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">todo</span> <span class="o">=&gt;</span> <span class="nx">todo</span><span class="p">.</span><span class="nx">done</span><span class="p">).</span><span class="nx">length</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>If there are multiple components that need to use this property, we either have to copy the function or extract it to a shared function and import it in multiple places - either way is not ideal.</p>
<p>Vuex allows us to define a &ldquo;getter&rdquo; (think of it as a computed property of the store) in the store.</p>
<p>The getter accepts state as its first argument.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">createStore</span><span class="p">({</span>
  <span class="nx">state</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">todos</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="nx">id</span>: <span class="kt">1</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;...&#39;</span><span class="p">,</span> <span class="nx">done</span>: <span class="kt">true</span> <span class="p">},</span>
      <span class="p">{</span> <span class="nx">id</span>: <span class="kt">2</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;...&#39;</span><span class="p">,</span> <span class="nx">done</span>: <span class="kt">false</span> <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nx">getters</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">doneTodos</span> <span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">state</span><span class="p">.</span><span class="nx">todos</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">todo</span> <span class="o">=&gt;</span> <span class="nx">todo</span><span class="p">.</span><span class="nx">done</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><p>Getters are exposed as store.getters objects, and you can access these values as properties.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="nx">store</span><span class="p">.</span><span class="nx">getters</span><span class="p">.</span><span class="nx">doneTodos</span> <span class="c1">// -&gt; [{ id: 1, text: &#39;...&#39;, done: true }]
</span></code></pre></td></tr></table>
</div>
</div><h3 id="mutation">Mutation</h3>
<p>As mentioned above, the only way to change the state in Vuex&rsquo;s store is to commit mutation.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">createStore</span><span class="p">({</span>
  <span class="nx">state</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">count</span>: <span class="kt">1</span>
  <span class="p">},</span>
  <span class="nx">mutations</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">increment</span> <span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Change Status
</span><span class="c1"></span>      <span class="nx">state</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><p>The commit method is required to commit a call.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="nx">store</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="s1">&#39;increment&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>Multiple parameters can also be submitted, and the commit function will expand all parameters:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">// ...
</span><span class="c1"></span><span class="nx">mutations</span><span class="o">:</span> <span class="p">{</span>
  <span class="nx">increment</span> <span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">state</span><span class="p">.</span><span class="nx">count</span> <span class="o">+=</span> <span class="nx">n</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="nx">store</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="s1">&#39;increment&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="action">Action</h3>
<p>Action is similar to mutation, except that</p>
<ol>
<li>an Action commits a mutation instead of changing state directly.</li>
<li>Action can contain any asynchronous operation.</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">createStore</span><span class="p">({</span>
  <span class="nx">state</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">count</span><span class="o">:</span> <span class="mi">0</span>
  <span class="p">},</span>
  <span class="nx">mutations</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">increment</span> <span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">state</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">actions</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">increment</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="s1">&#39;increment&#39;</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><p>The Action function accepts a context object with the same methods and properties as the store instance, so you can call context.commit to submit a mutation, or context.state and context.getters to get the state and getters.</p>
<p>Action is triggered by the store.dispatch method.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="s1">&#39;increment&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>At first glance, it seems superfluous. Wouldn&rsquo;t it be easier to just distribute the mutation? Action is not bound by this restriction! We can perform asynchronous operations inside the action.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="nx">actions</span><span class="o">:</span> <span class="p">{</span>
  <span class="nx">incrementAsync</span> <span class="p">({</span> <span class="nx">commit</span> <span class="p">})</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="nx">commit</span><span class="p">(</span><span class="s1">&#39;increment&#39;</span><span class="p">)</span>
    <span class="p">},</span> <span class="mi">1000</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="module">Module</h3>
<p>Because of the use of a single state tree, all the state of the application is concentrated into one relatively large object. When the application becomes very complex, the store object can become quite bloated.</p>
<p>To solve this problem, Vuex allows us to split the store into modules. Each module has its own state, mutation, action, getter, and even nested submodules - split in the same way from top to bottom: the</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">const</span> <span class="kr">module</span><span class="nx">A</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">state</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="p">...</span> <span class="p">}),</span>
  <span class="nx">mutations</span><span class="o">:</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span>
  <span class="nx">actions</span><span class="o">:</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span>
  <span class="nx">getters</span><span class="o">:</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="kr">module</span><span class="nx">B</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">state</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="p">...</span> <span class="p">}),</span>
  <span class="nx">mutations</span><span class="o">:</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span>
  <span class="nx">actions</span><span class="o">:</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">createStore</span><span class="p">({</span>
  <span class="kr">module</span><span class="nx">s</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">a</span>: <span class="kt">moduleA</span><span class="p">,</span>
    <span class="nx">b</span>: <span class="kt">moduleB</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="nx">store</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">a</span> <span class="c1">// -&gt; Status of moduleA
</span><span class="c1"></span><span class="nx">store</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">b</span> <span class="c1">// -&gt; Status of moduleB
</span></code></pre></td></tr></table>
</div>
</div><p>For mutation and getter inside a module, the first argument received is the module&rsquo;s local state object.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">moduleA</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">state</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">({</span>
    <span class="nx">count</span><span class="o">:</span> <span class="mi">0</span>
  <span class="p">}),</span>
  <span class="nx">mutations</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">increment</span> <span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Here the `state` object is the local state of the module
</span><span class="c1"></span>      <span class="nx">state</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">getters</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">doubleCount</span> <span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">state</span><span class="p">.</span><span class="nx">count</span> <span class="o">*</span> <span class="mi">2</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Similarly, for actions inside the module, the local state is exposed through context.state, and the root state is context.rootState.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">moduleA</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// ...
</span><span class="c1"></span>  <span class="nx">actions</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">incrementIfOddOnRootSum</span> <span class="p">({</span> <span class="nx">state</span><span class="p">,</span> <span class="nx">commit</span><span class="p">,</span> <span class="nx">rootState</span> <span class="p">})</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">((</span><span class="nx">state</span><span class="p">.</span><span class="nx">count</span> <span class="o">+</span> <span class="nx">rootState</span><span class="p">.</span><span class="nx">count</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">commit</span><span class="p">(</span><span class="s1">&#39;increment&#39;</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>By default, actions and mutations inside modules are still registered in the global namespace - this allows multiple modules to respond to the same action or mutation. getter is also registered in the global namespace by default, but this is not currently the case for functional purpose (just maintaining the status quo to avoid non-compatible changes). Care must be taken not to define two different getters in different, namespace-less modules, leading to errors.</p>
<p>If you want your module to be more encapsulated and reusable, you can make it namespaced by adding namespaced: true. When a module is registered, all its getters, actions and mutations are automatically namespaced according to the path of the module registration. Example.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">createStore</span><span class="p">({</span>
  <span class="nx">modules</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">account</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">namespaced</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

      <span class="c1">// Module assets
</span><span class="c1"></span>      <span class="nx">state</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">({</span> <span class="p">...</span> <span class="p">}),</span> <span class="c1">// The state within the module is already nested, and using the `namespaced` attribute will have no effect on it
</span><span class="c1"></span>      <span class="nx">getters</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">isAdmin</span> <span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span> <span class="c1">// -&gt; getters[&#39;account/isAdmin&#39;]
</span><span class="c1"></span>      <span class="p">},</span>
      <span class="nx">actions</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">login</span> <span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span> <span class="c1">// -&gt; dispatch(&#39;account/login&#39;)
</span><span class="c1"></span>      <span class="p">},</span>
      <span class="nx">mutations</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">login</span> <span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span> <span class="c1">// -&gt; commit(&#39;account/login&#39;)
</span><span class="c1"></span>      <span class="p">},</span>

      <span class="c1">// Nested Modules
</span><span class="c1"></span>      <span class="nx">modules</span><span class="o">:</span> <span class="p">{</span>
        <span class="c1">// Inherit the namespace of the parent module
</span><span class="c1"></span>        <span class="nx">myPage</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">state</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">({</span> <span class="p">...</span> <span class="p">}),</span>
          <span class="nx">getters</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">profile</span> <span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span> <span class="c1">// -&gt; getters[&#39;account/profile&#39;]
</span><span class="c1"></span>          <span class="p">}</span>
        <span class="p">},</span>

        <span class="c1">// Further nested namespaces
</span><span class="c1"></span>        <span class="nx">posts</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">namespaced</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

          <span class="nx">state</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">({</span> <span class="p">...</span> <span class="p">}),</span>
          <span class="nx">getters</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">popular</span> <span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span> <span class="c1">// -&gt; getters[&#39;account/posts/popular&#39;]
</span><span class="c1"></span>          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><p>Namespace-enabled getters and actions receive localized getters, dispatches, and commits; in other words, you don&rsquo;t need to add additional spatial prefixes within the same module when using module assets. Changing the namespaced attribute does not require any changes to the code within the module.</p>
<h2 id="with-typescript">with TypeScript</h2>
<p>Vuex4 still has some trouble using TypeScript, and Vue provides an InjectionKey interface, which is a generic type that extends Symbol. It can be used to synchronize the type of the inject value between the provider and the consumer.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">createStore</span><span class="p">,</span> <span class="nx">Store</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vuex&#39;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">InjectionKey</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Menu</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./settings&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="kr">interface</span> <span class="nx">Menu</span> <span class="p">{</span>
    <span class="nx">icon</span><span class="o">?:</span> <span class="nx">string</span><span class="p">;</span>
    <span class="nx">text</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
    <span class="nx">url</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
    <span class="nx">id</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">MenuState</span> <span class="p">{</span>
  <span class="nx">menus</span><span class="o">:</span> <span class="nx">Menu</span><span class="p">[];</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">MenuKey</span><span class="o">:</span> <span class="nx">InjectionKey</span><span class="o">&lt;</span><span class="nx">Store</span><span class="o">&lt;</span><span class="nx">MenuState</span><span class="o">&gt;&gt;</span> <span class="o">=</span> <span class="nx">Symbol</span><span class="p">()</span>

<span class="kr">const</span> <span class="nx">menuStore</span> <span class="o">=</span> <span class="nx">createStore</span><span class="o">&lt;</span><span class="nx">MenuState</span><span class="o">&gt;</span><span class="p">({</span>
  <span class="nx">state</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">menus</span><span class="o">:</span> <span class="p">[]</span>
  <span class="p">},</span>
  <span class="nx">mutations</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">add</span><span class="p">(</span><span class="nx">state</span><span class="o">:</span> <span class="nx">MenuState</span><span class="p">,</span> <span class="nx">menu</span><span class="o">:</span> <span class="nx">Menu</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">state</span><span class="p">.</span><span class="nx">menus</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">menu</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">actions</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">add</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">menu</span><span class="o">:</span> <span class="nx">Menu</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="s1">&#39;add&#39;</span><span class="p">,</span> <span class="nx">menu</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">getters</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">menus</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">state</span><span class="p">.</span><span class="nx">menus</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="kr">export</span> <span class="p">{</span> <span class="nx">Menu</span><span class="p">,</span> <span class="nx">MenuKey</span><span class="p">,</span> <span class="nx">menuStore</span> <span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div><p>Inject the dependency in main.ts.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">MenuKey</span><span class="p">,</span> <span class="nx">menuStore</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./store&#39;</span>
<span class="c1">// ...
</span><span class="c1"></span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">menuStore</span><span class="p">,</span> <span class="nx">MenuKey</span><span class="p">);</span>

<span class="c1">// ...
</span></code></pre></td></tr></table>
</div>
</div><hr>
<p>Reference <code>https://blog.justforlxz.com/2021/08/10/Vuex%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</code></p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/vuex/">vuex</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-09/jetbrains-dataspell/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">JetBrains Launches DataSpell, a New Data Science IDE</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-09/deploy-k8s-by-kubeplay/">
            <span class="next-text nav-default">Using kubeplay to deploy a kubernetes cluster offline</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
