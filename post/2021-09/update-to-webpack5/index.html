<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Project upgrade to webpack5 Practices and Summary - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="This is a year-long summary of webpack5 upgrade practice. I started this project in April 2020 when webpack5 was in beta phase, and then I made a few more attempts, all of which were stuck in different branches due to compatibility between self-published and third-party plugins. 2020-04 : webpack5@5.0.0-beta.15&#43; 2020-07 : webpack5@5.0.0-beta.21&#43; 2020-10 : webpack5@5.0.0 Release 2021-01 to 04 : WEB New project, webpack5, React17&amp;hellip; 2021-07 : webpack@5.4x The following" /><meta name="keywords" content="Webpack5, Update" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-09/update-to-webpack5/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Project upgrade to webpack5 Practices and Summary" />
<meta property="og:description" content="This is a year-long summary of webpack5 upgrade practice. I started this project in April 2020 when webpack5 was in beta phase, and then I made a few more attempts, all of which were stuck in different branches due to compatibility between self-published and third-party plugins. 2020-04 : webpack5@5.0.0-beta.15&#43; 2020-07 : webpack5@5.0.0-beta.21&#43; 2020-10 : webpack5@5.0.0 Release 2021-01 to 04 : WEB New project, webpack5, React17&hellip; 2021-07 : webpack@5.4x The following" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-09/update-to-webpack5/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-09-21T13:32:44+08:00" />
<meta property="article:modified_time" content="2021-09-21T13:32:44+08:00" />

<meta itemprop="name" content="Project upgrade to webpack5 Practices and Summary">
<meta itemprop="description" content="This is a year-long summary of webpack5 upgrade practice. I started this project in April 2020 when webpack5 was in beta phase, and then I made a few more attempts, all of which were stuck in different branches due to compatibility between self-published and third-party plugins. 2020-04 : webpack5@5.0.0-beta.15&#43; 2020-07 : webpack5@5.0.0-beta.21&#43; 2020-10 : webpack5@5.0.0 Release 2021-01 to 04 : WEB New project, webpack5, React17&hellip; 2021-07 : webpack@5.4x The following"><meta itemprop="datePublished" content="2021-09-21T13:32:44+08:00" />
<meta itemprop="dateModified" content="2021-09-21T13:32:44+08:00" />
<meta itemprop="wordCount" content="2583">
<meta itemprop="keywords" content="webpack," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Project upgrade to webpack5 Practices and Summary"/>
<meta name="twitter:description" content="This is a year-long summary of webpack5 upgrade practice. I started this project in April 2020 when webpack5 was in beta phase, and then I made a few more attempts, all of which were stuck in different branches due to compatibility between self-published and third-party plugins. 2020-04 : webpack5@5.0.0-beta.15&#43; 2020-07 : webpack5@5.0.0-beta.21&#43; 2020-10 : webpack5@5.0.0 Release 2021-01 to 04 : WEB New project, webpack5, React17&hellip; 2021-07 : webpack@5.4x The following"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Project upgrade to webpack5 Practices and Summary</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-09-21 13:32:44 </span>
        <div class="post-category">
            <a href="/categories/skills/"> skills </a>
            </div>
          <span class="more-meta"> 2583 words </span>
          <span class="more-meta"> 6 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#upgrade-of-webpack-and-dependency-versions">Upgrade of webpack and dependency versions</a>
          <ul>
            <li><a href="#upgrade-dependency-versions-with-npm-check-updates">Upgrade dependency versions with npm-check-updates</a></li>
            <li><a href="#writing-webpack-configuration-with-typescript">Writing webpack configuration with TypeScript</a></li>
          </ul>
        </li>
        <li><a href="#webpack-build-configuration-updates-and-compatibility">webpack build configuration updates and compatibility</a>
          <ul>
            <li><a href="#compatibility-of-webpack-plugins">Compatibility of webpack plugins</a></li>
            <li><a href="#css-loader-与-cssmodule">css-loader 与 cssModule</a></li>
            <li><a href="#output-err-error-problem">output err error problem</a></li>
            <li><a href="#deprecated-file-loader-and-url-loader">Deprecated file-loader and url-loader</a></li>
            <li><a href="#about-sass-node-sass-and-dart-sass">About sass: node-sass and dart-sass</a></li>
          </ul>
        </li>
        <li><a href="#building-performance-efficiency-persistent-caching-and-multithreading">Building Performance Efficiency: Persistent Caching and Multithreading</a>
          <ul>
            <li><a href="#build-performance-optimization-for-webpack4-and-earlier">Build performance optimization for webpack4 and earlier</a></li>
            <li><a href="#cache-configuration-in-webpack5">cache configuration in webpack5</a></li>
            <li><a href="#go-further-thread-loader-and-esbuild-loader">Go further: thread-loader and esbuild-loader</a></li>
            <li><a href="#efficiency-of-next-generation-build-tool-solutions">Efficiency of next generation build tool solutions</a></li>
          </ul>
        </li>
        <li><a href="#a-brief-overview-of-other-configuration-updates-for-webpack5">A brief overview of other configuration updates for webpack5</a>
          <ul>
            <li><a href="#optimization">optimization</a></li>
            <li><a href="#node-environment-compatibility">node environment compatibility</a></li>
            <li><a href="#warning-message-for-deprecating-apis">Warning message for deprecating APIs</a></li>
            <li><a href="#other">Other</a></li>
          </ul>
        </li>
        <li><a href="#next-generation-build-tool">Next generation build tool?</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>This is a year-long summary of webpack5 upgrade practice. I started this project in April 2020 when webpack5 was in <code>beta</code> phase, and then I made a few more attempts, all of which were stuck in different branches due to compatibility between self-published and third-party plugins.</p>
<ul>
<li><code>2020-04</code> : <a href="mailto:webpack5@5.0.0-beta.15">webpack5@5.0.0-beta.15</a>+</li>
<li><code>2020-07</code> : <a href="mailto:webpack5@5.0.0-beta.21">webpack5@5.0.0-beta.21</a>+</li>
<li><code>2020-10</code> : <a href="mailto:webpack5@5.0.0">webpack5@5.0.0</a> Release</li>
<li><code>2021-01 to 04</code> : WEB New project, webpack5, React17&hellip;</li>
<li><code>2021-07</code> : <a href="mailto:webpack@5.4x">webpack@5.4x</a></li>
</ul>
<p>The following is a record of the practice related to the upgrade after it was finally completed in the project.</p>
<h2 id="upgrade-of-webpack-and-dependency-versions">Upgrade of webpack and dependency versions</h2>
<p>Install the latest version of webpack.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="c1"># 早期</span>
yarn add webpack@next -D
<span class="c1"># webpack5 正式发布后</span>
yarn add webpack -D
</code></pre></td></tr></table>
</div>
</div><p>Plugin Dependency Upgrade: Update the relevant plugins used in the project to their latest versions on demand. There may be various compatibility issues in this process, which need to be analyzed and solved according to the actual situation.</p>
<h3 id="upgrade-dependency-versions-with-npm-check-updates">Upgrade dependency versions with npm-check-updates</h3>
<p>Question: <code>160+</code> Third-party dependencies, how to quickly confirm the latest version and whether it needs to be upgraded?</p>
<p>Options.</p>
<ul>
<li><code>npm outdated</code> and <code>npm update</code> are too simple and brutal</li>
<li>Manual update: In Microsoft Visual Code editor, when you hover over a dependency line and hold it, it will look up the latest version of that dependency line.</li>
<li>Helper tool: <code>npm-check-updates</code></li>
</ul>
<p>Install and use <code>npm-check-updates</code> :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="c1"># 全局安装</span>
npm i -g npm-check-updates
ncu
<span class="c1"># 或者使用 npx</span>
npx npm-check-updates
</code></pre></td></tr></table>
</div>
</div><p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/09/21/c7e0bc27445e4098aea3a632e375acde.png" alt=""></p>
<p>Example usage of the <code>npm-check-updates</code> command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="c1"># 交互式升级：每一个依赖的修改都需手工确认</span>
ncu -u -i
<span class="c1"># 只更新补丁版本 -- 按指定的&lt;target&gt;级别更新。target 可选值：latest, newest, greatest, minor, patch</span>
ncu -u --target patch
<span class="c1"># 仅更新 devDependenties 下的依赖。dep 可选参数： prod, dev, peer, optional, bundle（多个可用逗号分隔）</span>
ncu -u --dep dev
<span class="c1"># 仅更新包名称包含 react 字符串的依赖</span>
ncu -u --filter /react/
<span class="c1"># 不更新包名称包含 electron 字符串的依赖</span>
ncu -u --reject /electron/
<span class="c1"># 检查更新是否可以通过测试(npm test)，并指定项目管理器为 yarn</span>
ncu -u --doctor -p yarn
</code></pre></td></tr></table>
</div>
</div><p>Project Upgrade Practice.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="c1"># devDependencies 依赖：全部快速升级至最新(types 类型定义等少数无需升级的手动修正还原)</span>
ncu -u -p yarn --dep dev
 
<span class="c1"># dependencies 依赖：交互式逐个确认</span>
ncu -u -i -p yarn --reject /react/ --dep prod
</code></pre></td></tr></table>
</div>
</div><p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/09/21/34f9deada86143c8ae6a0baa6c84a154.png" alt=""></p>
<h3 id="writing-webpack-configuration-with-typescript">Writing webpack configuration with TypeScript</h3>
<p>It is recommended to use TypeScript to write webpack configuration files. With TypeScript&rsquo;s type detection, you can quickly determine which property configurations are valid, no longer valid, or incorrect. Example.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="nx">webpack</span> <span class="nx">from</span> <span class="s1">&#39;webpack&#39;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">config</span><span class="o">:</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">Configuration</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;lzwme&#39;</span><span class="p">,</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
<span class="p">};</span>
<span class="nx">webpack</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="nx">config</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">stats</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{});</span>
</code></pre></td></tr></table>
</div>
</div><p>Start webpack.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">ts-node -T webpack.config.ts
<span class="c1">#或者</span>
node --max_old_space_size<span class="o">=</span><span class="m">8192</span> -r ts-node/register/transpile-only webpack.config.ts
</code></pre></td></tr></table>
</div>
</div><p>Of course, for js-formatted configuration files, you can also add <code>@ts-check</code> to the top of the configuration file to enable TS type checking capability for js files. Example.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">// @ts-check
</span><span class="c1"></span> 
<span class="cm">/** @type {import(&#39;webpack&#39;).Configuration} */</span>
<span class="kr">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{};</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="webpack-build-configuration-updates-and-compatibility">webpack build configuration updates and compatibility</h2>
<ul>
<li>Coding quality and efficiency
<ul>
<li>ESLint upgrade</li>
<li><code>husky</code> upgrades: git hook performance is greatly improved in large projects</li>
<li>Public modules, ESLint / TS Check related
<ul>
<li><code>combokeys</code> -&gt; <code>Shortcut</code> coding TS refactoring</li>
<li>More&hellip;</li>
</ul>
</li>
</ul>
</li>
<li><code>webpack</code> configuration and related dependency plugins
<ul>
<li>Custom plugin updates and development: <code>BuilderManager</code>, <code>Benchmark</code>, <code>PluginsBuilder</code>, <code>caseSensitiveSassLoader</code>, etc.</li>
<li><code>html-webpack-plugin</code> : API changes, custom logic debugging analysis and compatibility updates that depend on its API</li>
<li><code>css-loader</code> and cssModule changes</li>
<li><code>CopyWebpackPlugin</code> usage changes, parameter configuration changes</li>
<li><code>webpack.IgnorePlugin</code> parameter configuration changes</li>
<li>DLL-related configuration</li>
<li>More&hellip;</li>
</ul>
</li>
<li>Remove the <code>webpack</code> plugin that is no longer used
<ul>
<li><code>script-ext-html-webpack-plugin</code> : Support for feature requests in the latest version of the <code>html-webpack-plugin</code> plugin</li>
<li><code>thread-loader</code>, <code>cache-loader</code> : change to use webpack5&rsquo;s built-in caching and multithreading configuration, etc.</li>
<li><code>file-loader</code>, <code>url-loader</code></li>
<li>More&hellip;</li>
</ul>
</li>
<li>Business dependency plugin compatibility
<ul>
<li>Huge impact, may lead to unpredictable accidents: minimal changes, confirmed by the business caller on an application-by-application basis</li>
</ul>
</li>
</ul>
<blockquote>
<p>Compatibility details are the most complex and the problem is quite time-consuming to analyze, which is the main reason why it is difficult to upgrade smoothly.
Heavy reliance on third-party libraries can deepen the complexity of project upgrades.</p>
</blockquote>
<h3 id="compatibility-of-webpack-plugins">Compatibility of webpack plugins</h3>
<p>Generally speaking three-party plugin compatibility is the main issue with upgrading <code>webpack5</code>. Early on, the degree of compatibility follow up varied across plugins, and there were quite a few details of odd performance issues.</p>
<ul>
<li><code>webpack API changes, requiring development of plugin-compatible versions. </code> Because some APIs were changed or deprecated, many plugins needed to be partially rewritten for compatibility.</li>
<li><code>Self-coded plugin compatibility.</code> Basically all webpack plugins that are self-coded for specific needs need to be interface-level compatible, which increases the development and debugging effort significantly.</li>
<li><code>Large differences between old and new versions of three-way plugins.</code> Some plugins may have large changes in the default parameter behavior in new versions, which can also lead to a variety of strange problems, debugging is more complex, and requires careful step-by-step analysis. For example, the problem of <code>css-loader</code> changing the default handling of <code>cssModule</code>.</li>
</ul>
<h3 id="css-loader-与-cssmodule">css-loader 与 cssModule</h3>
<p>The <code>options.modules</code> parameter needs to be configured to keep the logic consistent with previous versions of <code>css-loader@2</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
    <span class="nx">loader</span><span class="o">:</span> <span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s1">&#39;css-loader&#39;</span><span class="p">),</span>
    <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">importLoaders</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nx">modules</span><span class="o">:</span> <span class="p">{</span> <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;global&#39;</span><span class="p">,</span> <span class="p">},</span>
        <span class="c1">// localIdentName: &#39;[name]__[local]__[hash:base64:5]&#39;,
</span><span class="c1"></span>    <span class="p">},</span>
<span class="p">},</span>
</code></pre></td></tr></table>
</div>
</div><p>Changes to esModules default rules (standard ESM).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">// 旧的用法失效
</span><span class="c1"></span><span class="kr">import</span> <span class="o">*</span> <span class="nx">as</span> <span class="nx">styles</span> <span class="nx">from</span> <span class="s1">&#39;./style.scss&#39;</span><span class="p">;</span>
 
<span class="c1">// 批量替换为
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">styles</span> <span class="nx">from</span> <span class="s1">&#39;./style.scss&#39;</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="output-err-error-problem">output err error problem</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="nx">pluginDesc</span><span class="p">,</span>
    <span class="nx">chunkFilename</span><span class="o">:</span> <span class="s1">&#39;[id].chunk.js&#39;</span><span class="p">,</span>
    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;[name].js&#39;</span><span class="p">,</span>
    <span class="c1">// @see https://github.com/webpack/webpack/issues/11660
</span><span class="c1"></span>    <span class="c1">// chunkLoading: false,
</span><span class="c1"></span>    <span class="nx">wasmLoading</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="deprecated-file-loader-and-url-loader">Deprecated file-loader and url-loader</h3>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/09/21/cc487470a0b645e1a24f74f68d8bfc7c.png" alt=""></p>
<blockquote>
<p>DEPRECATED for v5: please consider migrating to asset modules.</p>
</blockquote>
<ul>
<li><code>raw-loader</code>: to import a file as a string</li>
<li><code>file-loader</code>: handle file dependencies loaded by <code>import/require</code> etc.</li>
<li><code>url-loader</code>: relies on <code>file-loader</code>, contains all its capabilities, and can convert files to <code>base64</code></li>
</ul>
<p>Resource processing in webpack5 <a href="https://webpack.js.org/guides/asset-modules/">asset modules</a>:</p>
<ul>
<li><code>asset/source</code>: exports the source code of the asset. Previously achievable by using <code>raw-loader</code>.</li>
<li><code>asset/resource</code>: emits a separate file and exports the URL. Previously achievable by using <code>file-loader</code>.</li>
<li><code>asset/inline</code>: exports a data URI of the asset. Previously achievable by using <code>url-loader</code>.</li>
<li><code>asset</code>: automatically chooses between exporting a data URI and emitting a separate file. Previously achievable by using <code>url-loader</code> with asset size limit.</li>
</ul>
<h4 id="using-url-loader-in-webpack5">Using url-loader in webpack5</h4>
<p>If the url-loader dependency of an old project is difficult to modify and remove, there is still a corresponding configuration that can be implemented</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.(png|jpg|gif|svg)$/i</span><span class="p">,</span>
        <span class="c1">// 避免被 asset modules 处理
</span><span class="c1"></span>        <span class="nx">dependency</span><span class="o">:</span> <span class="p">{</span> <span class="nx">not</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">]</span> <span class="p">},</span>
        <span class="c1">// 避免 webpack5 重复处理
</span><span class="c1"></span>        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;javascript/auto&#39;</span><span class="p">,</span>
        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;url-loader&#39;</span><span class="p">,</span>
            <span class="nx">options</span><span class="o">:</span> <span class="p">{</span> <span class="nx">limit</span><span class="o">:</span> <span class="mi">8192</span> <span class="p">},</span>
          <span class="p">},</span>
        <span class="p">],</span>
      <span class="p">},</span>
    <span class="p">],</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nx">Re</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="asset-modules-configuration-and-usage-examples">asset modules configuration and usage examples</h4>
<p>If possible, using asset modules directly is the best way to be future-proof.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
    <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;main.js&#39;</span><span class="p">,</span>
        <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span>
        <span class="c1">// 自定义输出路径 -- urlLoader.outputPath
</span><span class="c1"></span>        <span class="nx">assetModuleFilename</span><span class="o">:</span> <span class="s1">&#39;images/[hash][ext][query]&#39;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">rules</span><span class="o">:</span> <span class="p">[{</span>
            <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.(png|jpg|gif|svg)$/i</span><span class="p">,</span>
            <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;asset/resource&#39;</span><span class="p">,</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.html/</span><span class="p">,</span>
            <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;asset/resource&#39;</span><span class="p">,</span>
            <span class="c1">// 配置独立的输出路径
</span><span class="c1"></span>            <span class="nx">generator</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;static/[hash][ext][query]&#39;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">},</span> <span class="p">{</span> <span class="c1">// 文件内联
</span><span class="c1"></span>            <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.svg/</span><span class="p">,</span>
            <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;asset/inline&#39;</span><span class="p">,</span>
        <span class="p">},</span> <span class="p">{</span> <span class="c1">// 根据文件大小采用不同处理 -- url-loader
</span><span class="c1"></span>          <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.txt/</span><span class="p">,</span>
          <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;asset&#39;</span><span class="p">,</span>
          <span class="nx">parser</span><span class="o">:</span> <span class="p">{</span>
              <span class="nx">dataUrlCondition</span><span class="o">:</span> <span class="p">{</span>
                  <span class="nx">maxSize</span><span class="o">:</span> <span class="mi">4</span> <span class="o">*</span> <span class="mi">1024</span> <span class="c1">// 4kb
</span><span class="c1"></span>              <span class="p">}</span>
          <span class="p">}</span>
      <span class="p">}],</span>
    <span class="p">},</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="about-sass-node-sass-and-dart-sass">About sass: node-sass and dart-sass</h3>
<ul>
<li><code>sass</code> : css extension language</li>
<li><code>node-sass</code> : C++ module with system platform and Node.js version dependency
<ul>
<li>Pros: high performance, fast compilation speed</li>
<li>Disadvantages: installation failure due to high platform dependency</li>
</ul>
</li>
<li><code>dart-sass</code> : <code>dart</code> written and compiled as <code>wasm</code> module
<ul>
<li>Pros: cross-platform, less problems with installation, etc., has become the main official choice</li>
</ul>
</li>
<li><code>sass-loader</code> has changed the default interpreter to <code>dart-sass</code></li>
</ul>
<p>Can I switch directly to <code>dart-sass</code> now?</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/09/21/f676fc8847c8452ea5a385b5f2e79a12.png" alt=""></p>
<p>Business code compatibility updates are cumbersome and require extensive regression testing.</p>
<h2 id="building-performance-efficiency-persistent-caching-and-multithreading">Building Performance Efficiency: Persistent Caching and Multithreading</h2>
<p>The most time consuming part of the webpack build process is the compilation of the various source files. The main ideas to improve build efficiency are <strong>multi-threaded parallelism</strong> and <strong>avoid duplicate compilation</strong> (caching of compilation results).</p>
<h3 id="build-performance-optimization-for-webpack4-and-earlier">Build performance optimization for webpack4 and earlier</h3>
<p>Long-term development and maintenance of large projects often take tens to hundreds of seconds to build.
Before webpack4, plugins like <code>happypack</code>, <code>hard-source-webpack-plugin</code>, <code>thread-loader</code>, <code>cache-loader</code>, etc. were almost standard for project builds in order to use caching to improve build efficiency, but even then it was often unsatisfactory, as these third-party plugins could not work together perfectly and integrate into all parts of the build process.</p>
<ul>
<li><a href="https://www.npmjs.com/package/cache-loader">cache-loader</a>: cache build results to <code>node_modules/.cache-loader</code> directory (you can specify the location)</li>
<li>Enable the <code>babel-loader</code> configuration item: <code>cacheDirectory: true</code>, similar to <code>cache-loader</code></li>
<li><a href="https://www.npmjs.com/package/hard-source-webpack-plugin">hard-source-webpack-plugin</a>: cache build results to the <code>node_modules/.cache/hard-source</code> directory (you can specify the location)</li>
<li><a href="https://www.npmjs.com/package/thread-loader">thread-loader</a>: execute the <code>loader</code> build process using multiple threads</li>
<li><a href="https://www.npmjs.com/package/happypack">happypack</a> : An early multi-threaded solution implemented by a third party, not updated since the official <code>thread-loader</code> was released.</li>
<li><code>webpack dll</code> : Pre-compiled resources that are not frequently modified</li>
<li>more&hellip;</li>
</ul>
<h3 id="cache-configuration-in-webpack5">cache configuration in webpack5</h3>
<p>In webpack5, the cache configuration is implemented through the cache field, and it performs better.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
  <span class="c1">// The number of parallel processed modules in the compilation.
</span><span class="c1"></span>  <span class="nx">parallelism</span><span class="o">:</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;os&#39;</span><span class="p">).</span><span class="nx">cups</span><span class="p">().</span><span class="nx">length</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
  <span class="nx">cache</span><span class="o">:</span> <span class="nx">isProd</span>
      <span class="o">?</span> <span class="p">{</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;memory&#39;</span> <span class="p">}</span>
      <span class="o">:</span> <span class="p">{</span>
            <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;filesystem&#39;</span><span class="p">,</span>
            <span class="nx">name</span><span class="o">:</span> <span class="sb">`test-</span><span class="si">${</span><span class="nx">subModuleName</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
            <span class="nx">version</span><span class="o">:</span> <span class="kr">package</span><span class="p">.</span><span class="nx">version</span><span class="p">,</span>
        <span class="p">},</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Comparison of webpack5 caching effects</p>
<p>webpack5 first build.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/09/21/84a570f2aa03426e8d0f7117e0956d17.png" alt=""></p>
<p>webpack5 secondary build (with caching).</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/09/21/c009f209d41046f0831e6900c61b71ae.png" alt=""></p>
<p>Comparison of webpack4 caching effects</p>
<p>webpack4 first build (with thread-loader).</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/09/21/8ce27ba2fb0f48b5a7d460a8270807e5.png" alt=""></p>
<p>webpack4 secondary build (with caching).</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/09/21/ca08f9db60e448aeba1f81e501f90113.png" alt=""></p>
<h3 id="go-further-thread-loader-and-esbuild-loader">Go further: thread-loader and esbuild-loader</h3>
<p>In <code>webpack5</code>, the <code>thread-loader</code> still has its place. While <code>parallelism</code> simply specifies the number of threads for parallel builds, <code>thread-loader</code> allows for separate multi-threaded build testing and optimization for special loader classes such as <code>ts-loader</code>.</p>
<p>In addition, using <code>esbuild-loader</code> instead of <code>babel-loader</code> to achieve compilation acceleration is also an option to speed up build efficiency. The pros and cons lie in the dependency of the build output and development experience on their respective ecologies, where the difference in hot update is a big contrast in the development experience.</p>
<p>webpack5 first build (thread-loader).</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/09/21/609c6277699c410b8035868ce60aeb5c.png" alt=""></p>
<h3 id="efficiency-of-next-generation-build-tool-solutions">Efficiency of next generation build tool solutions</h3>
<p>The development experience is undoubtedly quite comfortable for next-generation front-end build solutions like vite and snowpack with no Bundles. Thanks to the no-build, compile-on-demand feature, projects can be launched in seconds, no matter how large they are.</p>
<p>However, from simple tests and community feedback, there are many details that are difficult to handle perfectly when dealing with complex and personalized requirements. webpack has a long way to go.</p>
<h2 id="a-brief-overview-of-other-configuration-updates-for-webpack5">A brief overview of other configuration updates for webpack5</h2>
<h3 id="optimization">optimization</h3>
<p>Optimization is an important configuration property that has changed significantly in webpack5. Some optimization features that used to be enabled using the built-in plugins have been turned on or off as configuration items here. See here for details.</p>
<p><a href="https://github.com/webpack/changelog-v5/blob/master/MIGRATION%20GUIDE.md#update-outdated-options">https://github.com/webpack/changelog-v5/blob/master/MIGRATION%20GUIDE.md#update-outdated-options</a></p>
<h3 id="node-environment-compatibility">node environment compatibility</h3>
<p>Previously, the goal of <code>webpack</code> was to build applications that could run browser-side, so there was default compatibility support for some variables that were only available in the <code>Node.js</code> environment. In <code>webpack5</code>, these compatibility handles are no longer supported by default. Now the <code>node</code> property can only be configured with a single <code>global</code> property, and all other compatibility is achieved through <code>resolve.fallback</code> itself. For example, for compatibility with <code>nodejs</code> native modules such as <code>fs</code>, <code>path</code>, <code>buffer</code>, etc.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
  <span class="nx">node</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">global</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="p">}</span>
  <span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">fallback</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">crypto</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">fs</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">child_process</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">electron</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="c1">// 不作处理：例如对运行环境有检测逻辑，只在 node/Electron 环境下才会实际执行调用
</span><span class="c1"></span>      <span class="nx">path</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="c1">// 浏览器端兼容
</span><span class="c1"></span>      <span class="c1">// path: require.resolve(&#39;path-browserify&#39;),
</span><span class="c1"></span>      <span class="nx">buffer</span><span class="o">:</span> <span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s1">&#39;buffer/&#39;</span><span class="p">),</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>A value of <code>false</code> means that nothing is done, which is basically similar to the effect of <code>dll</code> filtering in <code>externals</code>.</p>
<p>Compatibility with <code>Buffer</code> also requires the <code>ProvidePlugin</code> plug-in.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">ProvidePlugin</span><span class="p">({</span>
    <span class="nx">Buffer</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;buffer&#34;</span><span class="p">,</span> <span class="s2">&#34;Buffer&#34;</span><span class="p">]</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="warning-message-for-deprecating-apis">Warning message for deprecating APIs</h3>
<p>For some deprecating APIs, webpack5 wraps them with <a href="http://nodejs.cn/api/util/util_deprecate_fn_msg_code.html">util.deprecate</a>. It makes these APIs print a warning message on the command line when they are called.</p>
<p>During the upgrade to webpack5, you should set <code>process.traceDeprecation=true</code> or add the command line argument <code>-trace-deprecation</code> to debug to see where API calls are deprecated and try to update or use the latest version of the plugin in question.</p>
<p>If the latest versions of some plugins you must use also do not handle such API calls yet, you can set <code>-process.noDeprecation=true</code> to turn it off: <code>-process.noDeprecation=true</code>.</p>
<h3 id="other">Other</h3>
<ul>
<li><code>webpack5</code> defaults some common configurations, such as <code>entry: 'src/index.js'</code></li>
<li>If you are using <code>Yarn PnP</code> and have <code>pnp-resolver-plugin</code> configured, then you can remove the relevant configuration, which is now built-in.</li>
</ul>
<p>You can start by referring to the official <code>webpack4 -&gt; webpack5</code> migration guide at</p>
<p><a href="https://github.com/webpack/changelog-v5/blob/master/MIGRATION%20GUIDE.md">https://github.com/webpack/changelog-v5/blob/master/MIGRATION%20GUIDE.md</a></p>
<h2 id="next-generation-build-tool">Next generation build tool?</h2>
<p>The main popular build tools currently available are.</p>
<ul>
<li><a href="https://webpack.js.org/">webpack</a> webpack is a static module bundler for modern JavaScript applications</li>
<li><a href="https://rollupjs.org/guide/en/">rollup</a> Rollup is a module bundler for JavaScript</li>
<li><a href="https://www.parceljs.cn/">Parcel</a> Extreme zero-configuration web application packaging tool</li>
<li><a href="https://www.snowpack.dev/">Snowpack</a> The faster frontend build tool.</li>
<li><a href="https://cn.vitejs.dev/">vite</a> The next generation frontend development and build tool</li>
</ul>
<p>Javascript / typescript compilers.</p>
<ul>
<li><a href="https://babeljs.io/">babel</a> Babel is a JavaScript compiler</li>
<li>tsc(typescript)</li>
<li><a href="https://www.npmjs.com/package/esbuild">esbuild</a> Written in <code>Go</code> and mainly used for build acceleration
<ul>
<li><a href="https://www.npmjs.com/package/esbuild-loader">esbuild-loader</a></li>
</ul>
</li>
<li><a href="https://swc.rs/">swc</a> Super fast javascript / typescript compiler. written with <code>Rust</code></li>
</ul>
<p>The core idea of <code>Snowpack</code> and <code>vite</code>, currently known as the next generation of build tools, is based on the ES20200 specification&rsquo;s <code>ES Modules</code> native support, where the build process essentially compiles the source code into the <code>ES Module</code> specification format and directly references it in the browser.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&#34;module&#34;</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&#34;index.js&#34;</span> <span class="o">&gt;&lt;</span><span class="err">/script&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>Key features/objectives.</p>
<ul>
<li>No bundles, true compile-on-demand, load-on-demand</li>
<li>Extremely fast cold start</li>
<li>Extremely fast hot updates</li>
<li>Significantly improved development efficiency and experience</li>
<li>More&hellip;</li>
</ul>
<p>Main problems.</p>
<ul>
<li>Compatibility, compile result differences: migration of old projects is risky</li>
<li>Some feature usage/syntax not easy to convert support</li>
<li>Not enough richness of plug-in support</li>
<li>Cost of self-coded plug-in development</li>
<li>More&hellip;</li>
</ul>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/webpack/">webpack</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-09/react-17-find-react-element-by-dom/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Get React component examples based on DOM nodes in React 17</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-09/browser-gzip-compression/">
            <span class="next-text nav-default">Browser Gzip Compression</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
