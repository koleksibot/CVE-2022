<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>TensorFlow to depart from YAML due to code execution vulnerability, recommends developers switch to JSON - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="Tensorflow is a Python based machine learning and artificial intelligence project developed by Google. Recently TensorFlow has dropped support for YAML in order to fix a critical code execution vulnerability.
AML or YAML Ain&amp;rsquo;t Markup Language is a human-readable data serialization language used to pass objects and store data between processes and applications, and many Python applications use YAML to serialize and deserialize objects.
The CVE ID for this vulnerability is CVE-2021-37678, and the maintainers of TensorFlow and Keras, a wrapper project for TensorFlow, say that the vulnerability stems from an insecure parsing of YAML, which could allow an attacker to execute arbitrary code when an application deserializes a Keras model served in YAML format." /><meta name="keywords" content="tensorflow, code execution vulnerability" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-09/deserialization-bug-in-tensorflow/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="TensorFlow to depart from YAML due to code execution vulnerability, recommends developers switch to JSON" />
<meta property="og:description" content="Tensorflow is a Python based machine learning and artificial intelligence project developed by Google. Recently TensorFlow has dropped support for YAML in order to fix a critical code execution vulnerability.
AML or YAML Ain&rsquo;t Markup Language is a human-readable data serialization language used to pass objects and store data between processes and applications, and many Python applications use YAML to serialize and deserialize objects.
The CVE ID for this vulnerability is CVE-2021-37678, and the maintainers of TensorFlow and Keras, a wrapper project for TensorFlow, say that the vulnerability stems from an insecure parsing of YAML, which could allow an attacker to execute arbitrary code when an application deserializes a Keras model served in YAML format." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-09/deserialization-bug-in-tensorflow/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-09-07T23:08:00+08:00" />
<meta property="article:modified_time" content="2021-09-07T23:08:00+08:00" />

<meta itemprop="name" content="TensorFlow to depart from YAML due to code execution vulnerability, recommends developers switch to JSON">
<meta itemprop="description" content="Tensorflow is a Python based machine learning and artificial intelligence project developed by Google. Recently TensorFlow has dropped support for YAML in order to fix a critical code execution vulnerability.
AML or YAML Ain&rsquo;t Markup Language is a human-readable data serialization language used to pass objects and store data between processes and applications, and many Python applications use YAML to serialize and deserialize objects.
The CVE ID for this vulnerability is CVE-2021-37678, and the maintainers of TensorFlow and Keras, a wrapper project for TensorFlow, say that the vulnerability stems from an insecure parsing of YAML, which could allow an attacker to execute arbitrary code when an application deserializes a Keras model served in YAML format."><meta itemprop="datePublished" content="2021-09-07T23:08:00+08:00" />
<meta itemprop="dateModified" content="2021-09-07T23:08:00+08:00" />
<meta itemprop="wordCount" content="386">
<meta itemprop="keywords" content="tensorflow," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="TensorFlow to depart from YAML due to code execution vulnerability, recommends developers switch to JSON"/>
<meta name="twitter:description" content="Tensorflow is a Python based machine learning and artificial intelligence project developed by Google. Recently TensorFlow has dropped support for YAML in order to fix a critical code execution vulnerability.
AML or YAML Ain&rsquo;t Markup Language is a human-readable data serialization language used to pass objects and store data between processes and applications, and many Python applications use YAML to serialize and deserialize objects.
The CVE ID for this vulnerability is CVE-2021-37678, and the maintainers of TensorFlow and Keras, a wrapper project for TensorFlow, say that the vulnerability stems from an insecure parsing of YAML, which could allow an attacker to execute arbitrary code when an application deserializes a Keras model served in YAML format."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">TensorFlow to depart from YAML due to code execution vulnerability, recommends developers switch to JSON</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-09-07 23:08:00 </span>
        <div class="post-category">
            <a href="/categories/information/"> information </a>
            </div>
          <span class="more-meta"> 386 words </span>
          <span class="more-meta"> 2 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents"></nav>
  </div>
</div>
    <div class="post-content">
      <p>Tensorflow is a Python based machine learning and artificial intelligence project developed by Google. Recently TensorFlow has dropped support for YAML in order to fix a <a href="https://github.com/advisories/GHSA-r6jx-9g48-2r5r">critical code execution vulnerability</a>.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/09/07/3ce318b1e5bf4122aea340f193698b61.png" alt=" "></p>
<p>AML or YAML Ain&rsquo;t Markup Language is a human-readable data serialization language used to pass objects and store data between processes and applications, and many Python applications use YAML to serialize and deserialize objects.</p>
<p>The CVE ID for this vulnerability is CVE-2021-37678, and the maintainers of TensorFlow and Keras, a wrapper project for TensorFlow, say that the vulnerability stems from an insecure parsing of YAML, which could allow an attacker to execute arbitrary code when an application deserializes a Keras model served in YAML format. Deserialisation vulnerabilities typically occur when an application reads bad or malicious data from a non-genuine source.</p>
<p>This YAML deserialisation vulnerability is rated at 9.3 for severity and was reported to the TensorFlow maintainers by security researcher Arjun Shibu.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/09/07/2d38ed3fdb5741a5ab37bbceef261862.png" alt=" "></p>
<p>The source of the vulnerability was the infamous &ldquo;yaml.unsafe_load()&rdquo; function in TensorFlow code.</p>
<p>Security researcher Arjun Shibu said, &ldquo;I searched for deserialization patterns in TensorFlow for Pickle and PyYAML, and surprisingly, I found a call to the dangerous function yaml.unsafe_load().&rdquo;</p>
<p>The &ldquo;unsafe_load&rdquo; function is known to allow fairly liberal deserialisation of YAML data - it parses all tags, even those that are known to be unsafe on untrusted input. The function loads the YAML input directly without cleaning it up, which makes it possible to inject data using malicious code.</p>
<p>The use of serialisation is very common in machine learning applications. Training a model can be an expensive and slow process. Therefore, developers often use pre-trained models that are already stored in YAML or other formats supported by ML libraries such as TensorFlow.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/09/07/9583428aee1a44caa0cf9ef43fd5a939.png" alt=" "></p>
<p>Following the disclosure of the vulnerability, the maintainers of TensorFlow decided to drop support for YAML altogether and use JSON for deserialisation. It is worth noting that TensorFlow is not the first, nor the only, project to be found to use YAML unsafe_load. The use of this function is quite common in Python projects.</p>
<p>The maintainers of TensorFlow have stated that the CVE-2021-37678 vulnerability will be fixed in the TensorFlow 2.6.0 update and will also be backported to previous versions 2.5.1, 2.4.3 and 2.3.4. Since the beginning of the year, Google has fixed more than <a href="https://github.com/tensorflow/tensorflow/blob/master/tensorflow/security/README.md">100 security vulnerabilities</a> in TensorFlow.</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/tensorflow/">tensorflow</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-09/npm-package-had-a-severe-vulnerability/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Critical vulnerability in NPM package, downloaded over 3 million times per week, has affected many Node.js applications</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-09/linus-torvalds-github/">
            <span class="next-text nav-default">Linus Torvalds: GitHub creates absolutely useless rubbish merge</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
