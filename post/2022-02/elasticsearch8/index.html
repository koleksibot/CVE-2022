<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>After three years, Elastic 8 is officially released - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="Elasticsearch is a search engine based on the Lucene library. It provides a distributed, multi-tenant-enabled, full-text search engine with an HTTP Web interface and schemaless JSON documents.Elasticsearch is developed in Java and distributed as open source software under the Apache license. The official client is available in Java, .NET (C#), PHP, Python, Apache Groovy, Ruby, and many other languages.
After nearly three years, Elasticsearch 8 has been released with the following new features." /><meta name="keywords" content="Elasticsearch 8, released" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-02/elasticsearch8/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="After three years, Elastic 8 is officially released" />
<meta property="og:description" content="Elasticsearch is a search engine based on the Lucene library. It provides a distributed, multi-tenant-enabled, full-text search engine with an HTTP Web interface and schemaless JSON documents.Elasticsearch is developed in Java and distributed as open source software under the Apache license. The official client is available in Java, .NET (C#), PHP, Python, Apache Groovy, Ruby, and many other languages.
After nearly three years, Elasticsearch 8 has been released with the following new features." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-02/elasticsearch8/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-02-11T15:55:01+08:00" />
<meta property="article:modified_time" content="2022-02-11T15:55:01+08:00" />

<meta itemprop="name" content="After three years, Elastic 8 is officially released">
<meta itemprop="description" content="Elasticsearch is a search engine based on the Lucene library. It provides a distributed, multi-tenant-enabled, full-text search engine with an HTTP Web interface and schemaless JSON documents.Elasticsearch is developed in Java and distributed as open source software under the Apache license. The official client is available in Java, .NET (C#), PHP, Python, Apache Groovy, Ruby, and many other languages.
After nearly three years, Elasticsearch 8 has been released with the following new features."><meta itemprop="datePublished" content="2022-02-11T15:55:01+08:00" />
<meta itemprop="dateModified" content="2022-02-11T15:55:01+08:00" />
<meta itemprop="wordCount" content="1095">
<meta itemprop="keywords" content="Elasticsearch," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="After three years, Elastic 8 is officially released"/>
<meta name="twitter:description" content="Elasticsearch is a search engine based on the Lucene library. It provides a distributed, multi-tenant-enabled, full-text search engine with an HTTP Web interface and schemaless JSON documents.Elasticsearch is developed in Java and distributed as open source software under the Apache license. The official client is available in Java, .NET (C#), PHP, Python, Apache Groovy, Ruby, and many other languages.
After nearly three years, Elasticsearch 8 has been released with the following new features."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">After three years, Elastic 8 is officially released</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-02-11 15:55:01 </span>
        <div class="post-category">
            <a href="/categories/news/"> news </a>
            </div>
          <span class="more-meta"> 1095 words </span>
          <span class="more-meta"> 6 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li>
          <ul>
            <li><a href="#7x-rest-api-compatibility">7.x REST API Compatibility</a></li>
            <li><a href="#security-features-are-enabled-and-configured-by-default">Security features are enabled and configured by default</a></li>
            <li><a href="#better-protection-for-system-indexes">Better protection for system indexes</a></li>
            <li><a href="#new-knn-search-api">New KNN Search API</a></li>
            <li><a href="#save-storage-space-for-keyword-match_only_text-and-text-fields">Save storage space for <code>keyword</code>, <code>match_only_text</code> and <code>text</code> fields</a></li>
            <li><a href="#speed-up-indexing-of-geo_point-geo_shape-and-range-fields">Speed up indexing of <code>geo_point</code>, <code>geo_shape</code> and range fields</a></li>
            <li><a href="#pytorch-models-support-natural-language-processing-nlp">PyTorch Models Support Natural Language Processing (NLP)</a></li>
            <li><a href="#other-changes">Other changes</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>Elasticsearch is a search engine based on the Lucene library. It provides a distributed, multi-tenant-enabled, full-text search engine with an HTTP Web interface and schemaless JSON documents.Elasticsearch is developed in Java and distributed as open source software under the Apache license. The official client is available in Java, .NET (C#), PHP, Python, Apache Groovy, Ruby, and many other languages.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/02/11/0f133f59bf594316992b84e64f010763.png" alt="Elasticsearch"></p>
<p>After nearly three years, Elasticsearch 8 has been released with the following new features.</p>
<h3 id="7x-rest-api-compatibility">7.x REST API Compatibility</h3>
<p>8.0 introduces some significant changes to the Elasticsearch REST APIs. While it&rsquo;s important to update your application to accommodate these changes, finding and updating every API call after an upgrade can be painful and error-prone for developers. To make this process easier, Elasticsearch has added support for 7.x-compatible header in the REST API. These optional header files let you make 7.x-compatible requests to 8.0 clusters and receive 7.x-compatible responses.</p>
<p>While it is still officially recommended that developers update your application to use native 8.0 requests and responses, the 7.x API-compatible header files allow you to make these changes safely over a longer period of time.</p>
<h3 id="security-features-are-enabled-and-configured-by-default">Security features are enabled and configured by default</h3>
<p>Running Elasticsearch without security exposes your cluster to any user who can send requests to Elasticsearch. In previous versions, you had to explicitly enable Elasticsearch&rsquo;s security features such as authentication, authorization, and network encryption (TLS). Starting with Elasticsearch 8.0, security features are enabled and configured by default when starting Elasticsearch for the first time.</p>
<p>At startup, Elasticsearch 8.0 generates registration tokens that you can use to connect to Kibana instances or register other nodes in a secure Elasticsearch cluster without having to generate security certificates or update YAML configuration files. Simply use the generated registration token when starting a new node or Kibana instance, and Elastic Stack will handle all the security configuration for you.</p>
<p><strong>Known issues:</strong></p>
<ul>
<li>
<p>If you install Elasticsearch from an archive on an arch64 platform such as Linux ARM or macOS M1, the <code>elastic</code> user password and Kibana registration token are not automatically generated when the node is first started. The <code>elastic</code> password needs to be generated with the <code>bin/elasticsearch-reset-password</code> utility after the node starts.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">bin/elasticsearch-reset-password -u elastic
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Then, use the <code>bin/elasticsearch-create-enrollment-token</code> tool to create a registration token for Kibana.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">bin/elasticsearch-create-enrollment-token -s kibana
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="better-protection-for-system-indexes">Better protection for system indexes</h3>
<p>System indexes store configuration and internal data for Elastic functions. In general, the system index is reserved for internal use by these functions only. While possible, direct access to or changes to the system index can cause instability and other problems.</p>
<p>Several changes have been made in Elasticsearch 8.0 to protect the system index from direct access. To access the system index, users must now set the <code>allow_restricted_indices</code> permission to <code>true</code>.</p>
<p>The <code>superuser</code> role also no longer gives write access to the system index. As a result, the built-in <code>elastic</code> superuser cannot change the system index by default.</p>
<p>Thereafter, developers should use Kibana or the associated Elasticsearch APIs to manage the data for a function, rather than accessing the system index. If you access the system index directly, Elasticsearch will return a warning in the header of the API response and in the deprecation log.</p>
<h3 id="new-knn-search-api">New KNN Search API</h3>
<p>A technical preview of the KNN search API is available in Elasticsearch 8.0. By using the <code>dense_vector</code> field, a k-nearest neighbor (KNN) search finds the k nearest vectors to the query vector (which is measured by the similarity metric). KNN is commonly used to support relevance ranking in recommendation engines and natural language processing (NLP) based algorithms.</p>
<p>Previously, Elasticsearch only supported exact KNN searches, using <code>script_score</code> queries with vector functions. While this approach guaranteed accurate results, it often resulted in slow searches and did not scale well on large datasets. In exchange for slower indexing and imperfect accuracy, the new KNN search API lets you run approximate KNN searches on larger datasets at a much faster speed.</p>
<h3 id="save-storage-space-for-keyword-match_only_text-and-text-fields">Save storage space for <code>keyword</code>, <code>match_only_text</code> and <code>text</code> fields</h3>
<p>This release updates the inverted index, which is an internal data structure that allows for more space-efficient encoding to be used. This change will benefit the <code>keyword</code> and <code>match_only_text</code> fields as well as the <code>text</code> field. In benchmark tests using application logs, this shift reduced the index size of the <code>message</code> field (mapped to <code>match_only_text</code>) by 14.4% and reduced the overall disk footprint by 3.5%.</p>
<h3 id="speed-up-indexing-of-geo_point-geo_shape-and-range-fields">Speed up indexing of <code>geo_point</code>, <code>geo_shape</code> and range fields</h3>
<p>The new version optimizes the indexing speed of multi-dimensional points, the internal data structures used for <code>geo_point</code>, <code>geo_shape</code> and range fields. lucene-level benchmarking shows a 10-15% improvement in indexing speed for these field types. Elasticsearch indexes and data flows consisting primarily of these fields may show significant improvements in indexing speed.</p>
<h3 id="pytorch-models-support-natural-language-processing-nlp">PyTorch Models Support Natural Language Processing (NLP)</h3>
<p>It is now possible to upload PyTorch models trained outside of Elasticsearch and use them for inference. Third-party model support brings modern natural language processing (NLP) and search use cases to Elastic Stack.</p>
<h3 id="other-changes">Other changes</h3>
<p>Aggregations</p>
<ul>
<li>Remove the adjacency matrix setting #46327 (issues: #46257, #46324)</li>
<li>Remove <code>MovingAverage</code> pipeline aggregation #39328</li>
<li>Remove deprecated <code>_time</code> and <code>_term</code> sorting #39450</li>
<li>Remove deprecated date history intervals #75000</li>
</ul>
<p>Allocation</p>
<ul>
<li>Delete <code>include_relocations</code> set #47717 (issues: #46079, #47443)</li>
</ul>
<p>Analysis</p>
<ul>
<li>Clean up versioned deprecations in Analysis #41560 (issue: #41164)</li>
<li>Remove pre-configured <code>delimited_payload_filter</code> #43686 (issues: #41560, #43684)</li>
</ul>
<p>Authentication</p>
<ul>
<li>Always add file and native Realm #69096 (issue: #50892) unless explicitly disabled</li>
<li>Do not set the NameID format in Policy by default #44090 (issue: #40353)</li>
<li>Force set order for Realm configuration #51195 (issue: #37614)</li>
</ul>
<p>Cluster Coordination</p>
<ul>
<li>Remove connection timeout #60873 (issue: #60872)</li>
<li>Removed support for delayed state recovery hang masters #53845 (issue: #51806)</li>
</ul>
<p>Distributed</p>
<ul>
<li>Removed synchronous refresh #50882 (issues: #50776, #50835)</li>
<li>Removed <code>cluster.remote.connect</code> setting #54175 (issue: #53924)</li>
</ul>
<p>Engine</p>
<ul>
<li>Forced merge should reject requests with <code>only_expunge_deletes</code> and <code>max_num_segments</code> set #44761 (issue: #43102)</li>
<li>Remove per-type indexing statistics #47203 (issue: #41059)</li>
<li>Remove translog reservation setting #51697 (issue: #50775)</li>
</ul>
<p>Features/CAT APIs</p>
<ul>
<li>Remove deprecated <code>local</code> parameter for <code>_cat/indices</code> #64868 (issue: #62198)</li>
<li>Remove deprecated <code>local</code> parameter for <code>_cat/shards</code> #64867 (issue: #62197)</li>
</ul>
<p>Features/ILM+SLM</p>
<ul>
<li>Default <code>cluster.routing.allocation.enable_default_tier_preference</code> to <code>true</code> #79275 (issues: #76147, #79210)</li>
</ul>
<p>Features/Indices APIs</p>
<ul>
<li>Set <code>prefer_v2_templates</code> parameter default value to <code>true</code> #55489 (issues: #53101, #55411)</li>
<li>Remove the deprecated <code>_upgrade</code> API #64732 (issue: #21337)</li>
<li>Remove parameter <code>include_type_name</code> from REST layer</li>
<li>Remove the <code>template</code> field from index templates #49460 (issue: #21009)</li>
</ul>
<p>Infra/Core</p>
<ul>
<li>Remove the <code>nodes/0</code> folder prefix from the datapath</li>
<li>Remove <code>bootstrap.system_call_filter</code> setting #72848</li>
<li>Remove <code>node.max_local_storage_nodes</code> #42428 (issue: #42426)</li>
<li>Remove Joda dependency #79007</li>
<li>Remove humped case from named date/time formats #60044</li>
<li>&hellip;&hellip;</li>
</ul>
<p>Packaging</p>
<ul>
<li>Remove SysV initialization support #51716</li>
<li>Removed support for <code>JAVA_HOME</code> #69149</li>
<li>Requires Java 17 to run Elasticsearch #79873</li>
</ul>
<p>&hellip;&hellip;</p>
<p>See more details at: <a href="https://www.elastic.co/cn/blog/whats-new-elastic-8-0-0">https://www.elastic.co/cn/blog/whats-new-elastic-8-0-0</a></p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/elasticsearch/">Elasticsearch</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-02/php-everywhere-wordpress-plugin-bug/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">WordPress plugin has a high-risk RCE vulnerability, only 50% of sites fixed</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-02/linux-thread-local-storage/">
            <span class="next-text nav-default">Linux Thread Local Storage</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
