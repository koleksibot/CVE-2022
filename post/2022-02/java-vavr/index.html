<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Functional programming class library vavr - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="Whenever a new version of the JDK is released, some people say &amp;ldquo;I won&amp;rsquo;t upgrade, I&amp;rsquo;ll keep using Java 8&amp;rdquo;, but many people at work are still not very good at using the new features of Java8, and these features often make Java less &amp;ldquo;bloated&amp;rdquo;. However, I personally think that the most representative of all the new features of Java8 must be functional programming. Some may say that this style" /><meta name="keywords" content="java, vavr" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-02/java-vavr/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Functional programming class library vavr" />
<meta property="og:description" content="Whenever a new version of the JDK is released, some people say &ldquo;I won&rsquo;t upgrade, I&rsquo;ll keep using Java 8&rdquo;, but many people at work are still not very good at using the new features of Java8, and these features often make Java less &ldquo;bloated&rdquo;. However, I personally think that the most representative of all the new features of Java8 must be functional programming. Some may say that this style" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-02/java-vavr/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-02-11T09:53:47+08:00" />
<meta property="article:modified_time" content="2022-02-11T09:53:47+08:00" />

<meta itemprop="name" content="Functional programming class library vavr">
<meta itemprop="description" content="Whenever a new version of the JDK is released, some people say &ldquo;I won&rsquo;t upgrade, I&rsquo;ll keep using Java 8&rdquo;, but many people at work are still not very good at using the new features of Java8, and these features often make Java less &ldquo;bloated&rdquo;. However, I personally think that the most representative of all the new features of Java8 must be functional programming. Some may say that this style"><meta itemprop="datePublished" content="2022-02-11T09:53:47+08:00" />
<meta itemprop="dateModified" content="2022-02-11T09:53:47+08:00" />
<meta itemprop="wordCount" content="1261">
<meta itemprop="keywords" content="java,vavr," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Functional programming class library vavr"/>
<meta name="twitter:description" content="Whenever a new version of the JDK is released, some people say &ldquo;I won&rsquo;t upgrade, I&rsquo;ll keep using Java 8&rdquo;, but many people at work are still not very good at using the new features of Java8, and these features often make Java less &ldquo;bloated&rdquo;. However, I personally think that the most representative of all the new features of Java8 must be functional programming. Some may say that this style"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Functional programming class library vavr</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-02-11 09:53:47 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 1261 words </span>
          <span class="more-meta"> 3 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#vavr">Vavr</a>
          <ul>
            <li><a href="#observable-side-effects">Observable side effects</a></li>
            <li><a href="#immutable-data-structures">Immutable data structures</a></li>
          </ul>
        </li>
        <li><a href="#some-of-vavrs-features">Some of Vavr&rsquo;s features</a>
          <ul>
            <li><a href="#tuple">Tuple</a></li>
            <li><a href="#function">Function</a></li>
            <li><a href="#value-containers-with-properties">Value containers with properties</a></li>
            <li><a href="#pattern-matching">Pattern matching</a></li>
          </ul>
        </li>
        <li><a href="#summary">Summary</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>Whenever a new version of the JDK is released, some people say &ldquo;I won&rsquo;t upgrade, I&rsquo;ll keep using Java 8&rdquo;, but many people at work are still not very good at using the new features of Java8, and these features often make Java less &ldquo;bloated&rdquo;. However, I personally think that the most representative of all the new features of Java8 must be functional programming. Some may say that this style is too abstract and difficult to understand, but when you master this setting, you will feel great. Slowly you will also appreciate the charm and essence of functional programming. Today, we introduce a functional Java toolkit that exhibits many excellent functional programming ideas. The previously introduced alternative to the fusion downgrade component Hystrix, resilience4j, is based on the vavr library.</p>
<h2 id="vavr">Vavr</h2>
<p>Vavr is a Java8 function library that uses a large number of functional programming paradigms . Creatively encapsulates some persistent data structures and functional control structures. And there are many useful programming ideas to learn from it.</p>
<h3 id="observable-side-effects">Observable side effects</h3>
<p>There are often invisible traps in our code that are unobservable from the code semantics. For example.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kt">int</span> <span class="nf">divide</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">){</span>
 <span class="k">return</span> <span class="n">a</span><span class="o">/</span><span class="n">b</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>We know that <code>a/b</code> will give us an integer, but it is not clear from the code that if <code>b=0</code> an <code>java.lang.ArithmeticException</code> will be thrown; whereas if it is <code>a+b</code> it will not give any side effects. So we need to make this side effect observable. For this Vavr has made a design.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">Try</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">divide</span><span class="o">(</span><span class="n">Integer</span> <span class="n">a</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Try</span><span class="o">.</span><span class="na">of</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Encapsulating possible side effects in a container makes it clear what can fail, and when you see that <code>Try&lt;Integer&gt;</code> is returned, it means that the result may not be &ldquo;good&rdquo; so that you can target it for prevention.</p>
<h3 id="immutable-data-structures">Immutable data structures</h3>
<p>Many languages use immutable data structures, such as Golang and Kotlin, mainly because immutable values have the following properties.</p>
<ul>
<li>are intrinsically thread-safe and therefore do not require synchronization</li>
<li>is reliable for <em>equals</em> and <em>hashCode</em></li>
<li>does not require cloning</li>
<li>is type-safe in unchecked <code>unchecked</code> type conversions</li>
<li>immutable values are the most transparent for functional programming</li>
</ul>
<p>For this reason Vavr has designed a collection class library designed to replace the collection framework in Java.Vavr&rsquo;s collection library contains a rich set of functional data structures built on top of lambdas. The only interface they share with Java&rsquo;s original collections is <code>Iterable</code> . These data structures are persistent, and once initialized are inherently immutable; you can use some operations to return a changed copy. An example is the classic data structure of a one-way linked table.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">// 1   2  3
</span><span class="c1"></span><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">source</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">1</span><span class="o">,</span> <span class="n">2</span><span class="o">,</span> <span class="n">3</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/02/11/818391a5dcbf428b868132043d12a65c.png" alt="java"></p>
<p>If we put a new element <code>0</code> in front of the end of the original chain.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">//  0  2  3
</span><span class="c1"></span><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">newHeadList</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="na">tail</span><span class="o">().</span><span class="na">prepend</span><span class="o">(</span><span class="n">0</span><span class="o">);</span>
<span class="c1">//  1  2  3
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">source</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/02/11/6301f2fd528d4632bf58d00147643ca0.png" alt="sobyte"></p>
<p>The original chain remains unchanged, and the new chain is replaced with elements of the same size. Of course you can use other APIs to generate a copy of the changed size, but you can be sure that the original linked table will not change.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">// 0 1 2 3
</span><span class="c1"></span><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">prepend</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="na">prepend</span><span class="o">(</span><span class="n">0</span><span class="o">);</span>
<span class="c1">// 1 2 3 0
</span><span class="c1"></span><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">append</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">0</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>This is just part of the programming ideas, next I will introduce some of the features of Vavr.</p>
<h2 id="some-of-vavrs-features">Some of Vavr&rsquo;s features</h2>
<p>Vavr provides some very useful and distinctive APIs.</p>
<h3 id="tuple">Tuple</h3>
<p>Anyone familiar with Python will be familiar with tuples. A tuple groups a fixed number of elements together so that they can be passed as a whole. Unlike arrays or lists, a tuple can contain different types of objects, <strong>but it is also immutable</strong> . Vavr currently provides a tuple structure with up to 8 elements.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">// (felord.cn, 22)
</span><span class="c1"></span><span class="n">Tuple2</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">java8</span> <span class="o">=</span> <span class="n">Tuple</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">&#34;felord.cn&#34;</span><span class="o">,</span> <span class="n">22</span><span class="o">);</span> 
<span class="c1">// felord.cn
</span><span class="c1"></span><span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="n">java8</span><span class="o">.</span><span class="na">_1</span><span class="o">;</span> 
<span class="c1">// 22
</span><span class="c1"></span><span class="n">Integer</span> <span class="n">i</span> <span class="o">=</span> <span class="n">java8</span><span class="o">.</span><span class="na">_2</span><span class="o">;</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>This can be used to simulate the multiple return value feature that is not available in Java.</p>
</blockquote>
<h3 id="function">Function</h3>
<p>Java itself provides the <code>Function</code> interface, but Vavr provides richer <code>Function</code> extensions, such as the ability to combine multiple <code>Functions</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">Function1</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">multiplyByTwo</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">*</span> <span class="n">2</span><span class="o">;</span>
<span class="n">Function1</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">compose</span> <span class="o">=</span> <span class="n">multiplyByTwo</span><span class="o">.</span><span class="na">compose</span><span class="o">(</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">+</span> <span class="n">1</span><span class="o">);</span>
<span class="c1">// 6
</span><span class="c1"></span><span class="n">Integer</span> <span class="n">apply</span> <span class="o">=</span> <span class="n">compose</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">2</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>In addition to this, it is possible to allow potential side effects to be downgraded (lift), somewhat similar to microservice fusion, to avoid handling exceptions during function execution.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">Function2</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">divide</span> <span class="o">=</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span><span class="o">;</span>
<span class="c1">// 降级 
</span><span class="c1"></span><span class="n">Function2</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">,</span> <span class="n">Option</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;&gt;</span> <span class="n">safeDivide</span> <span class="o">=</span> <span class="n">Function2</span><span class="o">.</span><span class="na">lift</span><span class="o">(</span><span class="n">divide</span><span class="o">);</span>
<span class="c1">// 返回一个加强版的Optional
</span><span class="c1"></span><span class="n">Option</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">apply</span> <span class="o">=</span> <span class="n">safeDivide</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">1</span><span class="o">,</span> <span class="n">0</span><span class="o">);</span>
<span class="kt">boolean</span> <span class="n">empty</span> <span class="o">=</span> <span class="n">apply</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">();</span>
<span class="c1">// true
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">empty</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>There are also derivative operations.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"> <span class="n">Function2</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">divide</span> <span class="o">=</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span><span class="o">;</span>
 <span class="n">Function1</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">divide</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">4</span><span class="o">);</span>
 <span class="n">Integer</span> <span class="n">apply</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">2</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>This is somewhat analogous to collinearization, which only becomes more apparent when we use more inclusions.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">Function3</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">sum</span> <span class="o">=</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span><span class="o">;</span>
<span class="kd">final</span> <span class="n">Function1</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Function1</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;&gt;</span> <span class="n">add2</span> <span class="o">=</span> <span class="n">sum</span><span class="o">.</span><span class="na">curried</span><span class="o">().</span><span class="na">apply</span><span class="o">(</span><span class="n">1</span><span class="o">);</span>
<span class="n">Integer</span> <span class="n">apply</span> <span class="o">=</span> <span class="n">add2</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">2</span><span class="o">).</span><span class="na">apply</span><span class="o">(</span><span class="n">3</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Guess what the answer is?</p>
</blockquote>
<h3 id="value-containers-with-properties">Value containers with properties</h3>
<p>Vavr provides a number of value containers with unique properties, such as the <code>Try</code> mentioned at the beginning, to explicitly indicate that an exception may be encountered.</p>
<h4 id="option">Option</h4>
<p>Similar to <code>Optional</code>, but more powerful than <code>Optional</code>.</p>
<h4 id="lazy">Lazy</h4>
<p>Lazy is a container for inert computation, indicating that it will be computed when used and only once.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">Lazy</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="n">lazy</span> <span class="o">=</span> <span class="n">Lazy</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">Math</span><span class="o">::</span><span class="n">random</span><span class="o">);</span>
<span class="n">lazy</span><span class="o">.</span><span class="na">isEvaluated</span><span class="o">();</span> <span class="c1">// = false
</span><span class="c1"></span><span class="n">lazy</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>         <span class="c1">// = 0.123  
</span><span class="c1"></span><span class="n">lazy</span><span class="o">.</span><span class="na">isEvaluated</span><span class="o">();</span> <span class="c1">// = true
</span><span class="c1"></span><span class="n">lazy</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>         <span class="c1">// = 0.123 
</span><span class="c1">// 需要使用数据时才从数据源加载
</span><span class="c1"></span><span class="n">Data</span> <span class="n">lazyData</span> <span class="o">=</span> <span class="n">Lazy</span><span class="o">.</span><span class="na">val</span><span class="o">(</span><span class="n">DataSourceService</span><span class="o">::</span><span class="n">get</span><span class="o">,</span> <span class="n">Data</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>There are some other very useful containers, you can try them.</p>
<h3 id="pattern-matching">Pattern matching</h3>
<p>Most functional programming languages support pattern matching, which is available in Scala, the same JVM language, but not in Java at the moment. It can be useful to help us reduce <code>if-else</code>, as an example.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java">   <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">convert</span><span class="o">(</span><span class="kt">int</span> <span class="n">input</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">String</span> <span class="n">output</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">input</span> <span class="o">==</span> <span class="n">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">output</span> <span class="o">=</span> <span class="s">&#34;one&#34;</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">input</span> <span class="o">==</span> <span class="n">2</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">output</span> <span class="o">=</span> <span class="s">&#34;two&#34;</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">input</span> <span class="o">==</span> <span class="n">3</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">output</span> <span class="o">=</span> <span class="s">&#34;three&#34;</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">output</span> <span class="o">=</span> <span class="s">&#34;unknown&#34;</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">output</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Does it feel a bit confusing? Vavr is much more refreshing.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">vavrMatch</span><span class="o">(</span><span class="kt">int</span> <span class="n">input</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Match</span><span class="o">(</span><span class="n">input</span><span class="o">).</span><span class="na">of</span><span class="o">(</span>
                <span class="n">Case</span><span class="o">(</span><span class="n">$</span><span class="o">(</span><span class="n">1</span><span class="o">),</span> <span class="s">&#34;one&#34;</span><span class="o">),</span>
                <span class="n">Case</span><span class="o">(</span><span class="n">$</span><span class="o">(</span><span class="n">2</span><span class="o">),</span> <span class="s">&#34;two&#34;</span><span class="o">),</span>
                <span class="n">Case</span><span class="o">(</span><span class="n">$</span><span class="o">(</span><span class="n">3</span><span class="o">),</span> <span class="s">&#34;three&#34;</span><span class="o">),</span>
                <span class="n">Case</span><span class="o">(</span><span class="n">$</span><span class="o">(),</span> <span class="s">&#34;unknown&#34;</span><span class="o">)</span>
        <span class="o">);</span>
    <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Of course there are other ways to play that you need to discover for yourself.</p>
<h2 id="summary">Summary</h2>
<p>Functional programming, one of the biggest highlights of Java8 (in my opinion), is not easy for developers who are used to traditional OOP programming to accept. You may want to start with the Vavr class library to learn the idea of functional programming. Today&rsquo;s introduction is only a very small part of it, there are more waiting for you to discover, to learn from. I forgot to mention that if you want to use it in your project, you can import this coordinate below.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="c">&lt;!-- https://mvnrepository.com/artifact/io.vavr/vavr --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>io.vavr<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>vavr<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>0.10.3<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></td></tr></table>
</div>
</div>
    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/java/">java</a>
          <a href="/tags/vavr/">vavr</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-02/simple-java-bean/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">How Java beans abstract and simplify</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-02/debezium/">
            <span class="next-text nav-default">Database synchronization tool Debezium</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
