<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Flutter Raw Image Provider - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="The Image Widget in Flutter has built-in support for files in the form of file, network, and memory. However, these only support regular compressed image files or binary data, such as jpg, png, webp files, etc. There is no support for raw rgba binary data. Raw binary data here refers to the array of bytes consisting of the color values of each pixel of an image. A picture has width x height pixel points, the color value of a pixel point is stored with 32bit, divided into 4 channels, each channel occupies 8bit, respectively, red, green, blue, transparency (RGBA), this array is the collection of color values of each pixel point, dart in general use Uint8List." /><meta name="keywords" content="flutter, Raw Image Provider" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-02/flutter-raw-image-provider/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Flutter Raw Image Provider" />
<meta property="og:description" content="The Image Widget in Flutter has built-in support for files in the form of file, network, and memory. However, these only support regular compressed image files or binary data, such as jpg, png, webp files, etc. There is no support for raw rgba binary data. Raw binary data here refers to the array of bytes consisting of the color values of each pixel of an image. A picture has width x height pixel points, the color value of a pixel point is stored with 32bit, divided into 4 channels, each channel occupies 8bit, respectively, red, green, blue, transparency (RGBA), this array is the collection of color values of each pixel point, dart in general use Uint8List." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-02/flutter-raw-image-provider/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-02-28T10:23:10+08:00" />
<meta property="article:modified_time" content="2022-02-28T10:23:10+08:00" />

<meta itemprop="name" content="Flutter Raw Image Provider">
<meta itemprop="description" content="The Image Widget in Flutter has built-in support for files in the form of file, network, and memory. However, these only support regular compressed image files or binary data, such as jpg, png, webp files, etc. There is no support for raw rgba binary data. Raw binary data here refers to the array of bytes consisting of the color values of each pixel of an image. A picture has width x height pixel points, the color value of a pixel point is stored with 32bit, divided into 4 channels, each channel occupies 8bit, respectively, red, green, blue, transparency (RGBA), this array is the collection of color values of each pixel point, dart in general use Uint8List."><meta itemprop="datePublished" content="2022-02-28T10:23:10+08:00" />
<meta itemprop="dateModified" content="2022-02-28T10:23:10+08:00" />
<meta itemprop="wordCount" content="717">
<meta itemprop="keywords" content="flutter," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Flutter Raw Image Provider"/>
<meta name="twitter:description" content="The Image Widget in Flutter has built-in support for files in the form of file, network, and memory. However, these only support regular compressed image files or binary data, such as jpg, png, webp files, etc. There is no support for raw rgba binary data. Raw binary data here refers to the array of bytes consisting of the color values of each pixel of an image. A picture has width x height pixel points, the color value of a pixel point is stored with 32bit, divided into 4 channels, each channel occupies 8bit, respectively, red, green, blue, transparency (RGBA), this array is the collection of color values of each pixel point, dart in general use Uint8List."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Flutter Raw Image Provider</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-02-28 10:23:10 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 717 words </span>
          <span class="more-meta"> 4 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents"></nav>
  </div>
</div>
    <div class="post-content">
      <p>The Image Widget in Flutter has built-in support for files in the form of file, network, and memory.
However, these only support regular compressed image files or binary data, such as jpg, png, webp files, etc. There is no support for raw <code>rgba</code> binary data.
Raw binary data here refers to the array of bytes consisting of the color values of each pixel of an image. A picture has width x height pixel points, the color value of a pixel point is stored with 32bit, divided into 4 channels, each channel occupies 8bit, respectively, red, green, blue, transparency (RGBA), this array is the collection of color values of each pixel point, dart in general use <code>Uint8List</code>.</p>
<p>In general, considering the efficiency of network transmission, algorithms are used to compress this data, so you will see that there are various image compression algorithms and file formats.</p>
<p>You may ask when there is a need to load the raw rgba data of a picture directly?</p>
<p>Here&rsquo;s a simple example: loading an image in chunks. After decoding the image, split it into rectangular areas, each rectangle will have a raw rgba data, and give it to Image to render, which can reduce a certain GPU memory pressure and reduce the probability of GPU OOM or black screen.</p>
<p>To support raw rgba, it is actually very simple, there is a method <code>decodeImageFromPixels</code> under <code>dart:ui</code> package that can be used directly, provided that the raw binary data, width and height are available.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dart" data-lang="dart"><span class="k">import</span> <span class="s1">&#39;dart:ui&#39;</span><span class="p">;</span>

<span class="n">Future</span><span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;</span> <span class="n">decodeRawRgba</span><span class="p">(</span><span class="n">ByteData</span> <span class="n">bytes</span><span class="p">,</span> <span class="kt">int</span> <span class="n">width</span><span class="p">,</span> <span class="kt">int</span> <span class="n">height</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">Completer</span><span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;</span> <span class="n">completer</span> <span class="o">=</span> <span class="n">Completer</span><span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;</span><span class="p">();</span>
  <span class="n">decodeImageFromPixels</span><span class="p">(</span>
    <span class="n">bytes</span><span class="p">.</span><span class="n">buffer</span><span class="p">.</span><span class="n">asUint8List</span><span class="p">(),</span>
    <span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="p">,</span>
    <span class="n">PixelFormat</span><span class="p">.</span><span class="n">rgba8888</span><span class="p">,</span>
    <span class="n">completer</span><span class="p">.</span><span class="n">complete</span><span class="p">,</span>
  <span class="p">);</span>
  <span class="k">return</span> <span class="n">completer</span><span class="p">.</span><span class="n">future</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>With this <code>Image</code> (dart:ui) object you can leave it to the <code>RawImage</code> widget to load. But <code>RawImage</code> is too low-level, can we just use the <code>Image</code> widget? Because we need to reuse the <code>LoadingBuilder</code> logic.</p>
<p>Of course you can. A quick look at the constructor of the <code>Image</code> widget shows that we need an <code>ImageProvider</code>, so the problem is further reduced to how to write an <code>ImageProvider</code> to support raw rgba data.</p>
<p>To implement an <code>ImageProvider</code>, we need to implement the key method <code>load</code>. Let&rsquo;s take <code>MemoryImage</code> as an example.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dart" data-lang="dart"><span class="kd">class</span> <span class="nc">MemoryImage</span> <span class="kd">extends</span> <span class="n">ImageProvider</span><span class="o">&lt;</span><span class="n">MemoryImage</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">override</span>
  <span class="n">ImageStreamCompleter</span> <span class="n">load</span><span class="p">(</span><span class="n">MemoryImage</span> <span class="n">key</span><span class="p">,</span> <span class="n">DecoderCallback</span> <span class="n">decode</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">MultiFrameImageStreamCompleter</span><span class="p">(</span>
      <span class="nl">codec:</span> <span class="n">_loadAsync</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">decode</span><span class="p">),</span>
      <span class="nl">scale:</span> <span class="n">key</span><span class="p">.</span><span class="n">scale</span><span class="p">,</span>
      <span class="nl">debugLabel:</span> <span class="s1">&#39;MemoryImage(</span><span class="si">${</span><span class="n">describeIdentity</span><span class="p">(</span><span class="n">key</span><span class="p">.</span><span class="n">bytes</span><span class="p">)</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">,</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="n">Future</span><span class="o">&lt;</span><span class="n">ui</span><span class="p">.</span><span class="n">Codec</span><span class="o">&gt;</span> <span class="n">_loadAsync</span><span class="p">(</span><span class="n">MemoryImage</span> <span class="n">key</span><span class="p">,</span> <span class="n">DecoderCallback</span> <span class="n">decode</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">decode</span><span class="p">(</span><span class="n">bytes</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Obviously, we need to think of a way to construct a <code>Codec</code> for raw rgba data.</p>
<p>The secret is in the implementation of the <code>decodeImageFromPixels</code> method.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dart" data-lang="dart"><span class="kt">void</span> <span class="n">decodeImageFromPixels</span><span class="p">(</span>
  <span class="n">Uint8List</span> <span class="n">pixels</span><span class="p">,</span>
  <span class="kt">int</span> <span class="n">width</span><span class="p">,</span>
  <span class="kt">int</span> <span class="n">height</span><span class="p">,</span>
  <span class="n">PixelFormat</span> <span class="n">format</span><span class="p">,</span>
  <span class="n">ImageDecoderCallback</span> <span class="n">callback</span><span class="p">,</span> <span class="p">{</span>
  <span class="kt">int</span><span class="o">?</span> <span class="n">rowBytes</span><span class="p">,</span>
  <span class="kt">int</span><span class="o">?</span> <span class="n">targetWidth</span><span class="p">,</span>
  <span class="kt">int</span><span class="o">?</span> <span class="n">targetHeight</span><span class="p">,</span>
  <span class="kt">bool</span> <span class="n">allowUpscaling</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">})</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">targetWidth</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">allowUpscaling</span> <span class="o">||</span> <span class="n">targetWidth</span> <span class="o">&lt;=</span> <span class="n">width</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">targetHeight</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">allowUpscaling</span> <span class="o">||</span> <span class="n">targetHeight</span> <span class="o">&lt;=</span> <span class="n">height</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="n">ImmutableBuffer</span><span class="p">.</span><span class="n">fromUint8List</span><span class="p">(</span><span class="n">pixels</span><span class="p">)</span>
    <span class="p">.</span><span class="n">then</span><span class="p">((</span><span class="n">ImmutableBuffer</span> <span class="n">buffer</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">final</span> <span class="n">ImageDescriptor</span> <span class="n">descriptor</span> <span class="o">=</span> <span class="n">ImageDescriptor</span><span class="p">.</span><span class="n">raw</span><span class="p">(</span>
        <span class="n">buffer</span><span class="p">,</span>
        <span class="nl">width:</span> <span class="n">width</span><span class="p">,</span>
        <span class="nl">height:</span> <span class="n">height</span><span class="p">,</span>
        <span class="nl">rowBytes:</span> <span class="n">rowBytes</span><span class="p">,</span>
        <span class="nl">pixelFormat:</span> <span class="n">format</span><span class="p">,</span>
      <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">allowUpscaling</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">targetWidth</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">targetWidth</span><span class="o">!</span> <span class="o">&gt;</span> <span class="n">descriptor</span><span class="p">.</span><span class="n">width</span><span class="p">)</span> <span class="p">{</span>
          <span class="n">targetWidth</span> <span class="o">=</span> <span class="n">descriptor</span><span class="p">.</span><span class="n">width</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">targetHeight</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">targetHeight</span><span class="o">!</span> <span class="o">&gt;</span> <span class="n">descriptor</span><span class="p">.</span><span class="n">height</span><span class="p">)</span> <span class="p">{</span>
          <span class="n">targetHeight</span> <span class="o">=</span> <span class="n">descriptor</span><span class="p">.</span><span class="n">height</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="n">descriptor</span>
        <span class="p">.</span><span class="n">instantiateCodec</span><span class="p">(</span>
          <span class="nl">targetWidth:</span> <span class="n">targetWidth</span><span class="p">,</span>
          <span class="nl">targetHeight:</span> <span class="n">targetHeight</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="p">.</span><span class="n">then</span><span class="p">((</span><span class="n">Codec</span> <span class="n">codec</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">codec</span><span class="p">.</span><span class="n">getNextFrame</span><span class="p">())</span>
        <span class="p">.</span><span class="n">then</span><span class="p">((</span><span class="n">FrameInfo</span> <span class="n">frameInfo</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">callback</span><span class="p">(</span><span class="n">frameInfo</span><span class="p">.</span><span class="n">image</span><span class="p">));</span>
  <span class="p">});</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>First construct <code>ImageDescriptor</code> from the data, and then extract the step <code>descriptor.installCodec()</code> to get the <code>Codec</code> of the raw rgba data, and then implement a <code>RawImageProvider</code> of your own.</p>
<p>For example.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dart" data-lang="dart"><span class="kd">class</span> <span class="nc">RawImageProvider</span> <span class="kd">extends</span> <span class="n">ImageProvider</span><span class="o">&lt;</span><span class="n">_RawImageKey</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">RawImageData</span> <span class="n">image</span><span class="p">;</span>
  <span class="c1">/// see [ui.decodeImageFromPixels]
</span><span class="c1"></span>  <span class="n">Future</span><span class="o">&lt;</span><span class="n">ui</span><span class="p">.</span><span class="n">Codec</span><span class="o">&gt;</span> <span class="n">_loadAsync</span><span class="p">(</span><span class="n">_RawImageKey</span> <span class="n">key</span><span class="p">)</span> <span class="kd">async</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="n">buffer</span> <span class="o">=</span> <span class="kd">await</span> <span class="n">ui</span><span class="p">.</span><span class="n">ImmutableBuffer</span><span class="p">.</span><span class="n">fromUint8List</span><span class="p">(</span><span class="n">image</span><span class="p">.</span><span class="n">pixels</span><span class="p">);</span>

    <span class="kd">final</span> <span class="n">descriptor</span> <span class="o">=</span> <span class="n">ui</span><span class="p">.</span><span class="n">ImageDescriptor</span><span class="p">.</span><span class="n">raw</span><span class="p">(</span>
      <span class="n">buffer</span><span class="p">,</span>
      <span class="nl">width:</span> <span class="n">image</span><span class="p">.</span><span class="n">width</span><span class="p">,</span>
      <span class="nl">height:</span> <span class="n">image</span><span class="p">.</span><span class="n">height</span><span class="p">,</span>
      <span class="nl">pixelFormat:</span> <span class="n">image</span><span class="p">.</span><span class="n">pixelFormat</span><span class="p">,</span>
    <span class="p">);</span>
    <span class="k">return</span> <span class="n">descriptor</span><span class="p">.</span><span class="n">instantiateCodec</span><span class="p">(</span>
        <span class="nl">targetWidth:</span> <span class="n">targetWidth</span><span class="p">,</span> <span class="nl">targetHeight:</span> <span class="n">targetHeight</span><span class="p">);</span>
  <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Detailed code is available at: <a href="https://github.com/yrom/flutter_raw_image_provider/blob/master/lib/raw_image_provider.dart">https://github.com/yrom/flutter_raw_image_provider/blob/master/lib/raw_image_provider.dart</a></p>
<p>If you also happen to have this need, you can add the pub dependency directly.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">dependencies</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">raw_image_provider</span><span class="p">:</span><span class="w"> </span><span class="l">^0.1.0</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div>
    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/flutter/">flutter</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-02/how-to-detecting-memory-leaks-in-flutter-app/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">How to quickly locate Flutter APP memory leaks</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-02/the-most-often-errors-in-flutter/">
            <span class="next-text nav-default">The most common mistakes that beginners make when practicing Flutter</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
