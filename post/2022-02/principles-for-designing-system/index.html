<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Some of my principles for designing system architecture - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="After working for more than 20 years, I have seen many companies&#39; system architecture and many problems in the past 20 years. When I communicate and discuss with these companies, including implementation and program comparison, there are a lot of comparisons and compromises of various programs. Today, I would like to write this article to summarize my personal experience and ideas in the hope that more people can refer to and learn from them, and be able to make a better architecture." /><meta name="keywords" content="Principles, Designing System" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-02/principles-for-designing-system/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Some of my principles for designing system architecture" />
<meta property="og:description" content="After working for more than 20 years, I have seen many companies&#39; system architecture and many problems in the past 20 years. When I communicate and discuss with these companies, including implementation and program comparison, there are a lot of comparisons and compromises of various programs. Today, I would like to write this article to summarize my personal experience and ideas in the hope that more people can refer to and learn from them, and be able to make a better architecture." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-02/principles-for-designing-system/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-02-17T10:03:47+08:00" />
<meta property="article:modified_time" content="2022-02-17T10:03:47+08:00" />

<meta itemprop="name" content="Some of my principles for designing system architecture">
<meta itemprop="description" content="After working for more than 20 years, I have seen many companies&#39; system architecture and many problems in the past 20 years. When I communicate and discuss with these companies, including implementation and program comparison, there are a lot of comparisons and compromises of various programs. Today, I would like to write this article to summarize my personal experience and ideas in the hope that more people can refer to and learn from them, and be able to make a better architecture."><meta itemprop="datePublished" content="2022-02-17T10:03:47+08:00" />
<meta itemprop="dateModified" content="2022-02-17T10:03:47+08:00" />
<meta itemprop="wordCount" content="4655">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Some of my principles for designing system architecture"/>
<meta name="twitter:description" content="After working for more than 20 years, I have seen many companies&#39; system architecture and many problems in the past 20 years. When I communicate and discuss with these companies, including implementation and program comparison, there are a lot of comparisons and compromises of various programs. Today, I would like to write this article to summarize my personal experience and ideas in the hope that more people can refer to and learn from them, and be able to make a better architecture."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Some of my principles for designing system architecture</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-02-17 10:03:47 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 4655 words </span>
          <span class="more-meta"> 22 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#principle-1-focus-on-the-real-benefits-rather-than-the-technology-itself">Principle 1: Focus on the real benefits rather than the technology itself</a></li>
        <li><a href="#principle-2-application-services-and-api-as-the-perspective-rather-than-resources-and-technology-as-the-perspective">principle 2: application services and API as the perspective, rather than resources and technology as the perspective</a></li>
        <li><a href="#principle-3-choose-the-most-mainstream-and-mature-technology">principle 3: choose the most mainstream and mature technology</a></li>
        <li><a href="#principle-4-completeness-will-be-more-important-than-performance">Principle 4: Completeness will be more important than performance</a></li>
        <li><a href="#principle-5-develop-and-follow-obedience-to-standards-specifications-and-best-practices">Principle 5: Develop and follow obedience to standards, specifications and best practices</a></li>
        <li><a href="#principle-6-focus-on-architectural-scalability-and-maintainability">Principle 6: Focus on architectural scalability and maintainability</a></li>
        <li><a href="#principle-7-full-closure-of-the-control-logic">Principle 7: Full closure of the control logic</a></li>
        <li><a href="#principle-8-dont-accommodate-technical-debt-for-older-systems">Principle 8: Don&rsquo;t Accommodate Technical Debt for Older Systems</a></li>
        <li><a href="#principle-9-dont-rely-on-your-experience-rely-on-data-and-learning">Principle 9: Don&rsquo;t rely on your experience, rely on data and learning</a></li>
        <li><a href="#principle-10-be-careful-with-x---y-problems-ask-the-original-requirements">Principle 10: Be careful with X - Y problems, ask the original requirements</a></li>
        <li><a href="#principle-11-radical-is-better-than-conservative-innovation-and-practicality-do-not-conflict">Principle 11: Radical is better than conservative, innovation and practicality do not conflict</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>After working for more than 20 years, I have seen many companies' system architecture and many problems in the past 20 years. When I communicate and discuss with these companies, including implementation and program comparison, there are a lot of comparisons and compromises of various programs. Today, I would like to write this article to summarize my personal experience and ideas in the hope that more people can refer to and learn from them, and be able to make a better architecture. In addition, my way of thinking and principles are aimed at the existing market many unreasonable architecture and program, so, it is also a kind of &ldquo;correction&rdquo; &hellip;&hellip;</p>
<blockquote>
<p>Note that the architectural principles described in this article are generally applicable to relatively complex business, if it is just some simple and not very accessible applications, then you may come to the opposite conclusion.</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/02/17/abeab052704845d4958c969b16be3a2d.png" alt="sobyte"></p>
<h2 id="principle-1-focus-on-the-real-benefits-rather-than-the-technology-itself">Principle 1: Focus on the real benefits rather than the technology itself</h2>
<p>For software architecture, I think the first important thing is the benefits of the architecture, if not the benefits, just for the sake of technology, and there is no point. For technical gains, I think the following gains are very important.</p>
<ul>
<li>
<p><strong>Whether the technical threshold can be lowered to speed up the development process of the whole team</strong> . Being able to speed up the engineering process of the whole team and release quickly is a problem that software engineering has been solving, so the system architecture needs to be able to perform parallel development, parallel go-live and parallel O&amp;M without making a team a bottleneck point. (Note: Even if the drag on the team is the organizational structure, it does not prevent us from making a parallel system architecture design)</p>
</li>
<li>
<p><strong>Does it allow the whole system to run more stable</strong> . To make the whole system more stable and improve the SLA of the whole system, we need to make solutions for planned and unplanned downtime.</p>
</li>
<li>
<p><strong>Whether costs can be reduced through simplification and automation</strong>. The highest optimization cost is the human cost, which is not only slow and expensive, but also the constant human error. if you can&rsquo;t reduce the human cost, but need more people, then the architecture design must be a failure. In addition, is the cost of time, capital costs.</p>
</li>
</ul>
<p>If a system architecture can not play a role in the above three things, then there is no point.</p>
<h2 id="principle-2-application-services-and-api-as-the-perspective-rather-than-resources-and-technology-as-the-perspective">principle 2: application services and API as the perspective, rather than resources and technology as the perspective</h2>
<p>Many companies in China will have a lot of division of labor, basically will be divided into operations and development, operations and maintenance will be divided into basic operations and application operations and maintenance, development will be divided into basic core development and business development. Different divisions will lead to completely different perspectives and starting points. For example, basic operations and development colleagues are more concerned about resource utilization and performance, while application operations and business development are more concerned about the application and service stuff. The two would have been related, but because of the evolution of distributed architecture, there are some systems that are not clear whether they are basic or application layer, for example, things like service governance, in which there are underlying basic technologies that also require business colleagues to work with, including k8s, which has underlying technologies such as networking, but also requires business cooperation with readniess and liveness such as health checks, and business applications need to configMap and so on &hellip;&hellip;</p>
<p><strong>All these things make me feel that the so-called DevOps is actually because many technologies and components are already indistinguishable from Dev or Ops, so there is a need to merge Dev and Ops</strong>. Also, the entire organization and architecture can no longer be optimized by tuning a single division of labor or a single component. It requires a top-down, holistic planning and unified design approach to achieve overall improvement (think of urban traffic optimization, when the city scale to a certain level, the overall performance you can not optimize a few roads or a few blocks to complete, you need to do the overall functional body of the city planning to achieve overall efficiency). And in order to achieve the overall improvement, all people need to have a unified perspective and goal, and over the past few years, I think this goal is - <strong>to stand in the service and external API perspective to see the problem, rather than the technical and underlying perspective.</strong></p>
<h2 id="principle-3-choose-the-most-mainstream-and-mature-technology">principle 3: choose the most mainstream and mature technology</h2>
<p>I&rsquo;ve seen cases over the past few years where users have migrated their PHP, Python, .NET, or Node.js architectures completely to Java + Go as systems have become more complex. This is still a painful process. It&rsquo;s a painful process, but you can&rsquo;t help it. As your system gets more complex and larger, you can&rsquo;t play around with toy technologies anymore, you need more industrial technologies.</p>
<ul>
<li>
<p><strong>Use more mature and industrialized technology stacks as much as possible, rather than the technology stacks you are familiar with</strong>. The so-called industrialized technology stack, you can look at the technology stack used by most companies, such as: Internet, finance, telecommunications &hellip;&hellip; and so on , large companies will have more technical input, but also need to be more large-scale production, so the technology they use is usually more industrialized. In the technology selection, do not be - &ldquo;look at a video company is also using this technology&rdquo;, or some in the forum to see some programmers spit technology views (without any data, only their own preferences) to decide their own technology. It would be more reliable to look at the technology stack that most of the mainstream companies are actually using.</p>
</li>
<li>
<p><strong>Choose the technology that is popular globally, not the technology that is popular in China</strong> . Technology must be a global thing, not a localized thing. So, must choose the international will be better. In addition, don&rsquo;t be fooled by the &ldquo;special case&rdquo; of some companies, even if the case is very sexy, the key is to look at the problem-solving ideas and the use of technology is universal. Only universal technology has a stronger vitality.</p>
</li>
<li>
<p><strong>Use the mainstream technology with big dividends as much as possible, rather than inventing your own wheel, let alone magical changes</strong> . I&rsquo;ve seen a number of companies that have modified open source software, such as a company that modified mesos and ended up inventing another kubernetes, and I&rsquo;ve seen many companies or technology teams that like to invent their own specialized wheels that end up being replaced by mainstream open source software. It&rsquo;s completely unnecessary. Not reinventing the wheel, not magic, not because your own technology can&rsquo;t, but because, the world is long past the days of doing everything yourself, this era is about finding ways to integrate and collaborate with the entire industry, the entire technology community, so that you can get the most bang for your buck. Those who try to make their own set of play because a special case needs to be made, short-term no problem, but in the long run, I do not even look good.</p>
</li>
<li>
<p><strong>In the vast majority of cases, you can&rsquo;t go wrong with Java if you don&rsquo;t have very specific requirements</strong>. On the one hand, this is because the productivity of Java business development is very good, and with the Spring framework to protect the code is difficult to write bad, in addition, the community of Java is too mature, you need a variety of architecture and technology can be easily obtained, the technical dividend is too big. There are so many benefits to a language that runs on the JVM. On the Java technology stack, your architectural risks and architectural costs (both in terms of labor, time, and money) are optimal in the long run</p>
</li>
</ul>
<p>In the companies I have seen, the architecture of some companies is kidnapped by the personal preferences, expertise and personal experience of the technology leader, not at all from an objective point of view to make technology selection. In fact, from the stage of 0 to 1, you can use any kind of technology, if you make a simple application, no transaction processing, no complex transaction process, such as some forums, social applications, you can use any language. NET to Java, Taobao from PHP to Java&hellip; &hellip;</p>
<p>Note, some people with subjective preferences must feel uncomfortable with my above description of Java, and I&rsquo;ll use some evidence to illustrate - all e-commerce platforms in China, hundreds of banks, three major telecom operators, all insurance companies, securities companies' systems, systems in hospitals, electronic government systems, etc., are basically developed in Java. Java development, including the mainstream language of AWS is also Java, Ali cloud at the beginning with C++/Python write control system, later also began to use Java &hellip;&hellip; you may say B station is using go language, but you may not know B station&rsquo;s e-commerce and big data is using Java &hellip;&hellip; If you know about data analysis, it is recommended to search the number of Java jobs on major job sites, you will know whether a technology is mainstream and popular &hellip;&hellip;</p>
<h2 id="principle-4-completeness-will-be-more-important-than-performance">Principle 4: Completeness will be more important than performance</h2>
<p>I found that when architects in some companies do architecture, the primary consideration is whether the performance of the architecture can hold up to a large or large amount of traffic, rather than considering the completeness and scalability of the system. So, I have seen many cases where they started using non-relational databases like MongoDB or put data directly in Redis and abandoned the data integrity model of relational databases, and later when they needed to do relational queries on the data, they found that the NoSQL databases performed too poorly on Join, and then started all kinds of In order not to do Join, we start to redundant data, but we can&rsquo;t maintain the data consistency problem after redundant data, which leads to all kinds of data disorder and loss.</p>
<p>Therefore, I give the following some of the following architectural principles.</p>
<ul>
<li>
<p><strong>Use the most scientifically rigorous technical model as the main, and supplement it with an undisciplined model</strong> . For the case above, that means - always use a fully ACID-enabled relational database, and then supplement it with NoSQL, rather than abandoning the relational database altogether. The principle here is the so-called &ldquo;tighten first, then loosen&rdquo;, at first tight, you can slowly loosen, but start loosening, later you want to tighten never tighten over.</p>
</li>
<li>
<p><strong>There are always many solutions to performance stuff</strong>. My experience over the years tells me that there are always solutions to performance things, and the means are the most, and this is really nothing to worry too much about compared to the completeness and scalability of the architecture.</p>
</li>
</ul>
<p>In order to pursue the so-called performance, the integrity of the entire system is lost, rather than worth the loss.</p>
<h2 id="principle-5-develop-and-follow-obedience-to-standards-specifications-and-best-practices">Principle 5: Develop and follow obedience to standards, specifications and best practices</h2>
<p>This principle is very important, because only by obeying standards can your architecture have better scalability. For example: I regularly see many companies whose systems neither obey industry standards nor form their own company standards, feeling like a bunch of rabble-rousers. The most typical example is the status return code for HTTP calls. The industry standard for you is 200 for success, 3xx for jump, 4xx for error on the caller side, and 5xx for error on the server side. I really don&rsquo;t understand why everyone likes to return 200 regardless of success and failure, and then point out in the body whether it is error (two years ago I saw a famous Internet veteran in a WeChat public number recommending the use of both correct and error). return 200 practice, I double-checked in the background, I found that such architects really hurt people). The biggest problem with this is - the monitoring system will work in an inefficient state. The monitoring system needs to open all the network request packets before it knows if it is an error, and it has absolutely no idea if it is an error on the caller side or the server side, so some control systems like retry or fuse have no idea what to do (if it is a 4xx error, then retry or fuse is pointless, only 5xx makes sense). <strong>Sometimes, I will have a feeling that the more I live, the more I regress, the error code design of such a basic and most basic thing why there is no? And a company would let people mess up? How can these basic skills just be lost?</strong></p>
<p>I have also seen companies that do not have a unified user ID design throughout their organization, and synchronize user data between systems by user ID, yes, the real-world ID, including the user whitelist set up on the gateway is actually using ID ID. I have great concerns about user privacy management within this company. A company, an organization, without standards and norms, will also have abstraction, which is bound to be all kinds of chaos.</p>
<p>Below, I list some standards and specifications that you need to be aware of (including but not limited to).</p>
<ul>
<li><strong>Protocol standards and specifications for inter-service calls</strong> . This includes Restful API paths, HTTP methods, status codes, standard headers, custom headers, etc., return data JSon Scheme &hellip;&hellip;, etc.</li>
<li><strong>Some naming standards and specifications</strong>. These include e.g. user ID, service name, tag name, status name, error code, message, database &hellip;&hellip;, etc.</li>
<li><strong>Logging and monitoring specifications</strong>. This includes: log format, monitoring data, sampling requirements, alarms &hellip;&hellip;, etc.</li>
<li><strong>Configuration specifications</strong> . This includes: operating system configuration, middleware configuration, package &hellip;&hellip;, etc.</li>
<li><strong>Specifications for middleware usage</strong> . Databases, caches, message queues &hellip;&hellip; and so on</li>
<li><strong>Software and development library version harmonization</strong> . It is desirable that software or development library versions are upgraded once a year throughout the organization and then unified across teams.</li>
</ul>
<p>Two things are important to mention here.</p>
<ul>
<li>
<p><strong>Restful API specification</strong> . I think it&rsquo;s very important to give two references that I think are the best written: <a href="https://github.com/paypal/api-standards/blob/master/api-style-guide.md">Paypal</a> and <a href="https://github.com/microsoft/api-guidelines">Microsoft</a>. The biggest benefit of having a standard and specification for Restful APIs is that monitoring can easily do all kinds of statistical analysis, and control systems can easily do traffic scheduling and dispatching.</p>
</li>
<li>
<p><strong>Another one is service call chain tracking</strong> . For service call chain tracing, we basically refer to the paper <a href="https://research.google/pubs/pub36356/">Google Dapper</a>, and there are many implementations, the most rigorous one is <a href="https://zipkin.io/">Zipkin</a>, which is also The benefit of Zipkin&rsquo;s proximity to the Google Dapper paper is that it is stateless, gets the span out quickly, and does not consume memory or CPU on the application side of the service. applications.</p>
</li>
<li>
<p><strong>Software Upgrade</strong> . I have found that many companies, including BAT, have no software upgrade activity at all and rely on developers to do it on their own. However, this kind of systematic activity can never be formed by the spontaneity of the public. A company should have a software version upgrade review at least once a year, and then form a unified and consistent software version, which will extremely too simplify the complexity of the system architecture.</p>
</li>
</ul>
<h2 id="principle-6-focus-on-architectural-scalability-and-maintainability">Principle 6: Focus on architectural scalability and maintainability</h2>
<p>In many architectures I have seen, the technical staff only consider the present, but never consider the future scalability and maintainability of the system. The so-called management of the birth of the child, regardless of the nurturing. If you give birth to a child with fewer arms and legs, severely deformed, then the future is very difficult to play. Because the architecture and software is not written and finished, it is necessary to constantly modify the constant maintenance, 80% of the software costs are in the maintenance. So, how to make your architecture has better scalability, can be easier to operate and maintain, this is more important. By scalability, I mean that I can easily add more features or systems, and by maintainability, I mean that I can make any changes to the online system. Scalability requires a standardized and uncoupled business architecture, while maintainability requires the ability to control, i.e., a set of various control systems.</p>
<ul>
<li>
<p><strong>Service orchestration architecture to reduce coupling between services</strong> . For example, a dedicated service for a business process or middleware like Workflow, Event Driven Architecture, Broker, Gateway, Service Discovery, etc. to reduce the dependencies between services.</p>
</li>
<li>
<p><strong>Reducing O&amp;M complexity of service dependencies through service discovery or service gateways</strong>. Service Discovery can be a great way to reduce the complexity of operations and maintenance for dependent services, allowing you to easily bring services online or offline, or scale services.</p>
</li>
<li>
<p><strong>Be sure to use a variety of software design principles</strong> . For example, principles like SOLID, best practices for architectures like IoC/DIP, SOA or Spring Cloud, practices related to distributed system architecture, or microsoft&rsquo;s <a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/">Cloud Design Patterns</a>&quot;) &hellip;&hellip;, etc.</p>
</li>
</ul>
<h2 id="principle-7-full-closure-of-the-control-logic">Principle 7: Full closure of the control logic</h2>
<p>All programs will have two kinds of logic, one is business logic, one is control logic, business logic is the logic to complete the business, control logic is auxiliary, such as you use multi-threaded, or distributed, is the use of database or file, how to configure, deployment, operations and maintenance, monitoring, transaction control, service discovery, elastic scaling, grayscale release, high concurrency, etc., etc. &hellip;&hellip; these are control logic, and business logic has nothing to do with a dime. The technical depth of the control logic will usually be deeper than the business logic, the threshold will also be higher, so it is best to professional programmers to be responsible for the development of control logic, unified planning and unified management, to close the mouth. This includes.</p>
<ul>
<li>
<p><strong>Traffic Closure</strong> . Including the scheduling of north-south and east-west traffic, mainly through the traffic gateway, development framework SDK or Service Mesh such technology.</p>
</li>
<li>
<p><strong>Service Governance Gateways</strong>. Including: service discovery, health checks, configuration management, transactions, events, retries, fusion, flow limiting &hellip;&hellip; mainly through the development of frameworks SDK - such as: Spring Cloud, or technologies such as Service Mesh Service Mesh.</p>
</li>
<li>
<p><strong>Monitoring data intake</strong> . Including: logs, metrics, call chains &hellip;&hellip; mainly through some standard mainstream probes, plus backend data cleansing and data storage to complete, preferably using non-intrusive techniques. The monitored data must be unified in one place for correlation so that the information is generated.</p>
</li>
<li>
<p><strong>Resource Scheduling has the closing point for application deployment</strong> . This includes: closures for compute, network and storage, mainly done through containerized solutions such as k8s.</p>
</li>
<li>
<p><strong>Receiving port for middleware</strong> . Includes: database, messaging, caching, service discovery, gateway &hellip;&hellip;, etc. This type of harvesting is generally done by unifying a shared cloud-based middleware resource pool within the enterprise.</p>
</li>
</ul>
<p>In this regard, the principle here is.</p>
<ul>
<li>
<p><strong>You want to choose technologies that make it easy to separate business logic from control logic</strong> . Here, Java&rsquo;s JVM + bytecode injection + AOP-style Spring development framework will give you too many advantages.</p>
</li>
<li>
<p><strong>You need to choose a technology</strong> that can enjoy the technical dividends of &ldquo;those who have gone before you, those who will come after you&rdquo;. For example, there is a large community of mutually compatible technologies, such as Java, Docker, Ansible, HTTP, Telegraf/Collectd &hellip;&hellip;</p>
</li>
<li>
<p><strong>Middleware you want to use technologies that can support HA clusters and multi-tenancy</strong> . Basically all major middleware here will support HA clustering approach.</p>
</li>
</ul>
<h2 id="principle-8-dont-accommodate-technical-debt-for-older-systems">Principle 8: Don&rsquo;t Accommodate Technical Debt for Older Systems</h2>
<p>I have found that many companies have very, very large technical debts that are manifested as follows.</p>
<ul>
<li><strong>use old technology</strong> . For example, the use of HTTP 1.0, Java 1.6, Websphere, ESB, socket-based communication protocols, outdated models &hellip;&hellip;, etc.</li>
<li><strong>Irrational design</strong>. For example, writing a lot of business logic in gateway, monolithic architecture, deep coupling of data and business logic, wrong system architecture (treating cache as database, synchronizing data with message queue) &hellip;&hellip; etc.</li>
<li><strong>Lack of supporting facilities</strong> . For example, no automated testing, no good software documentation, no good quality code, no standards and specifications &hellip;&hellip; etc.</li>
</ul>
<p>People who come to me for technical help have all kinds of problems. I say the same thing to them all - &quot; <strong>If you come to me case-by-case to solve a problem, I am not interested, because you should not hope that you can simply change a Charly into a Ferrari, or put a foundation of a crooked building not properly built crooked building to make it right. Previous technical debts, have to be repaid, did not lay a good foundation to re-build, did not build supporting facilities are to be built. These infrastructure if not built in accordance with the correct scientific way, you can not have a good system, I also have no way to help you case-by-case problem solving &hellip;&hellip;</strong> &ldquo;At first, they will all say to me, no problem, we just have to pay off the debt, but At the end, they found that they had a lot of debt to pay, and they couldn&rsquo;t afford it, so they started to show up.</p>
<p>They started to find all kinds of rationalizations for their &ldquo;technical debt&rdquo; - explaining to you all kinds of historical reasons and reasons why they had to do it. As we talked, I got the impression that they wanted a mindset of progress without changing or paying for anything, and they would rather let the new technology go down to accommodate these technical debts and misuse the new technology in a messy way. There is a company, their system architecture and technology selection are basically wrong, using the wrong model to build the system, resulting in very poor performance of the whole system, only tens of millions of data, but they do not want to pay off the debt, not to build the foundation and supporting facilities, and to repair the building higher, on more systems - they think The existing system is quite good, the reason for the performance problem is that they don&rsquo;t have a big data platform, so they want to build a big data platform &hellip;&hellip;</p>
<p>I&rsquo;ve seen many, many companies, including big ones like BAT, build more on the original technical debt, and then, the technical debt gets bigger and bigger, the interest gets bigger and bigger, and eventually becomes a loan shark, never to be repaid.</p>
<p>Here are a few principles and approaches that I hold very close to my heart and share with you.</p>
<ul>
<li><strong>Instead of spending a lot of effort to accommodate technical debt, it is better to just pay off the technical debt. It is the so-called long pain is better than short pain.</strong></li>
<li><strong>Build a &ldquo;new city&rdquo; without technical debt, and pass the &ldquo;<a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/anti-corruption-layer">corruption-layer</a>&rdquo; architecture model, do not let technical debt invade the &ldquo;new city&rdquo;</strong> .</li>
</ul>
<h2 id="principle-9-dont-rely-on-your-experience-rely-on-data-and-learning">Principle 9: Don&rsquo;t rely on your experience, rely on data and learning</h2>
<p>Several people have come to me to tell me their technical problems, and then expect me to give them an answer. I said, I need to understand the situation of your existing system, that is, you need to do a diagnosis first, I only get the data, I may understand what the real cause is , I may give you a better technical solution. I personally feel that this is a responsible approach to the other party, because there are too many technical means, all of which have adapted scenarios and have various trade-offs, so a decision can only be made after research. This is the same as a doctor&rsquo;s visit, to confirm the cause of the disease can not rely on experience, or rely on diagnostic data. In front of science, all experience is not reliable &hellip;&hellip;</p>
<p>Also, if one day you start to rely on your past experience when making technical decisions, then you are no longer able to grow. No one can progress by constantly repeating the past, and people never progress by learning what they don&rsquo;t know. So, never rely on your own experience to make decisions. Before making any decision, it is better to spend a little time to look up relevant information, technical blogs, articles, papers, etc., and also to see how each company, or each open source software they do? Then, compare the Pros/Cons of multiple solutions and finally form your own decision, so that you can make a better decision.</p>
<h2 id="principle-10-be-careful-with-x---y-problems-ask-the-original-requirements">Principle 10: Be careful with X - Y problems, ask the original requirements</h2>
<p>For the X-Y problem, that is, the user to solve the X problem, he felt that Y can be solved, so I asked Y how to do, but in the end, found that the original X problem to be solved, the best solution is not Y, but Z. This X-Y problem is really quite a lot, I have seen too much. So, every time a user comes to me, I have to keep asking what is the X problem.</p>
<p>For example, several users would come to me and ask for a big data streaming process, only to find out that their problem was due to the large amount of state in the service, the need to put the same user&rsquo;s data requests on the same service, and a slow function by design that slowed down the entire application service. Ultimately it&rsquo;s just a matter of doing a little performance tuning, there&rsquo;s no need to get on any big data streaming.</p>
<p>I love to ask why, and this kind of questioning will make customers follow along to rethink. For example, a customer came to me to evaluate a technical architecture decision, which, in theory, seemed to be very good in the user&rsquo;s scenario. However, this scenario and this architecture was something I had never seen before in my career. So, I started to ask why this was such a scenario? As I pursued the question, I found that the users all felt that this scenario was unreasonable in various ways. Finally it caused a very deep discussion, and after the end user fixed that scenario, and the architecture suddenly became a common and mature model &hellip;&hellip;</p>
<h2 id="principle-11-radical-is-better-than-conservative-innovation-and-practicality-do-not-conflict">Principle 11: Radical is better than conservative, innovation and practicality do not conflict</h2>
<p>My attitude towards technology is rather radical, but the so-called radical is not blind, nor is it new technology, but actively embracing new technologies that will change the future, such as Docker/Go, I am very fast to follow, but like blockchain or Rust, I am not very active. Because, it doesn&rsquo;t hit several characteristics of what I consider to be technology trends. Of course, I don&rsquo;t stop learning what I don&rsquo;t like. I learn as much about blockchain and Rust as I do, and I know the advantages of these technologies, but I don&rsquo;t use them on a large scale. Also, I respect the conservative decision, there is no right or wrong in it. However, I personally feel there are too many benefits to being radical about technology over being conservative. On the one hand, for users, to a large extent, new technologies are often superficially competitive, and I&rsquo;ve seen too many successful companies actively embrace new technologies, while conservative ones are generally getting worse.</p>
<p>Some people will tell me that we are pragmatic, we don&rsquo;t need to innovate, we can solve the problems of the moment, so we don&rsquo;t need new technology, we just need to use the existing technology. This kind of company, their technology design on the first day in debt, although can solve the current problem, but immediately new problems will appear, and then they will be tired of solving all kinds of problems. In the end, what happens is that they end up going to new technologies.</p>
<p>The logic here is simple &ndash; <strong>progress always comes from exploration, and exploration comes at a cost, but the benefits are greater</strong> . For me, not daring to take risks is the biggest risk, not daring to make mistakes is the biggest mistake, and fear of losing will make you lose more &hellip;&hellip;</p>

    </div>

    
<footer class="post-footer">
      
      <nav class="post-nav">
        <a class="prev" href="/post/2022-02/dns-intro/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">DNS Introduction</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-02/go-pipline/">
            <span class="next-text nav-default">Go Programming Patterns - Pipeline</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
