<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Tips for using Bash History - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="Bash is a common shell environment and most Linux distributions also come with Bash, so using history efficiently can save the time of manually typing repetitive commands. In this article, I share a few tips and configurations that I use myself.
Search This technique should be more or less known to everyone, that is, press Ctrl-R in the input screen to search, the returned result is the latest matching command, and then press enter to execute." /><meta name="keywords" content="Bash, History Tricks" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-02/bash-history-tricks/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Tips for using Bash History" />
<meta property="og:description" content="Bash is a common shell environment and most Linux distributions also come with Bash, so using history efficiently can save the time of manually typing repetitive commands. In this article, I share a few tips and configurations that I use myself.
Search This technique should be more or less known to everyone, that is, press Ctrl-R in the input screen to search, the returned result is the latest matching command, and then press enter to execute." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-02/bash-history-tricks/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-02-08T10:39:05+08:00" />
<meta property="article:modified_time" content="2022-02-08T10:39:05+08:00" />

<meta itemprop="name" content="Tips for using Bash History">
<meta itemprop="description" content="Bash is a common shell environment and most Linux distributions also come with Bash, so using history efficiently can save the time of manually typing repetitive commands. In this article, I share a few tips and configurations that I use myself.
Search This technique should be more or less known to everyone, that is, press Ctrl-R in the input screen to search, the returned result is the latest matching command, and then press enter to execute."><meta itemprop="datePublished" content="2022-02-08T10:39:05+08:00" />
<meta itemprop="dateModified" content="2022-02-08T10:39:05+08:00" />
<meta itemprop="wordCount" content="552">
<meta itemprop="keywords" content="bash," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Tips for using Bash History"/>
<meta name="twitter:description" content="Bash is a common shell environment and most Linux distributions also come with Bash, so using history efficiently can save the time of manually typing repetitive commands. In this article, I share a few tips and configurations that I use myself.
Search This technique should be more or less known to everyone, that is, press Ctrl-R in the input screen to search, the returned result is the latest matching command, and then press enter to execute."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Tips for using Bash History</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-02-08 10:39:05 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 552 words </span>
          <span class="more-meta"> 3 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li>
          <ul>
            <li><a href="#search">Search</a></li>
            <li><a href="#histignore">HISTIGNORE</a></li>
            <li><a href="#histcontrol">HISTCONTROL</a></li>
            <li><a href="#history-problem-between-parallel-windows">History problem between parallel windows</a></li>
            <li><a href="#use--to-execute-the-commands-in-the-history">Use ! to execute the commands in the history</a></li>
            <li><a href="#use-the-parameters-of-the-previous-command">Use the parameters of the previous command</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>Bash is a common shell environment and most Linux distributions also come with Bash, so using history efficiently can save the time of manually typing repetitive commands. In this article, I share a few tips and configurations that I use myself.</p>
<h3 id="search">Search</h3>
<p>This technique should be more or less known to everyone, that is, press <code>Ctrl-R</code> in the input screen to search, the returned result is the latest matching command, and then press enter to execute.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/02/08/69d4a6fd69d84d43897c99894a0326f5.png" alt="sobyte"></p>
<p>But sometimes the search results are only very similar to what I want, but not exactly the same, I want to be able to make small changes to the command before execution, so how? In fact, at this time, press Esc to exit and edit.</p>
<p>Another way is to use <code>:p</code>, which means print but not execute in Bash, so if we want to see a command with a certain prefix, we can use <code>!prefix:p</code> to print it.</p>
<h3 id="histignore">HISTIGNORE</h3>
<p>HISTIGNORE is an environment variable that instructs Bash what commands not to add to history, for example a variable like this.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">export</span> <span class="nv">HISTIGNORE</span><span class="o">=</span><span class="s1">&#39;pwd:exit:fg:bg:top:clear:history:ls:uptime:df&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>It is possible to remove meaningless interactive commands from the HISTORY. If you often use abbreviations like <code>ll</code> or <code>la</code>, it might be a good idea to add them to HISTIGNORE.</p>
<h3 id="histcontrol">HISTCONTROL</h3>
<p>HISTCONTROL is also an environment variable, and it has a few options</p>
<ul>
<li>ignorespace: all commands that start with a space are not added to HISTORY</li>
<li>ignoredups: duplicate commands will not be added to the history</li>
<li>ignoreboth: turns on both of the above features</li>
</ul>
<p>Usually some distributions already come with the ignoredups option, so if you want to avoid some specific commands to be counted in history, then you can turn on the ignorespace option.</p>
<h3 id="history-problem-between-parallel-windows">History problem between parallel windows</h3>
<p>I believe many students will have this problem. When managing servers remotely, we usually use various window multiplexing tools, such as <code>tmux</code> or <code>screen</code>, in order to monitor certain tasks or time-consuming tasks without blocking human operations, so since Bash writes history to the <code>.bash_history</code> file only when it is closed, then Most of the time when we close these windows, only the history of the last closed window is recorded.</p>
<p>We can use</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">shopt</span> -s histappend
</code></pre></td></tr></table>
</div>
</div><p>to instruct Bash to append the history to the original history instead of overwriting it.</p>
<h3 id="use--to-execute-the-commands-in-the-history">Use ! to execute the commands in the history</h3>
<p>! can be used to execute commands, e.g. <code>!10</code> is to execute the 10th command in the history. Of course, you can also execute the most recent command, for example <code>!-3</code> is the third last command.</p>
<p>Here you can also use it in combination with <code>:p</code> to avoid the risks associated with direct execution.</p>
<p>If you must avoid all the risks and want to check the command each time before executing it, and don&rsquo;t want to type <code>:p</code>, then Bash has another option to do that: <code>shopt -s histverify</code>. This option will make all commands executed with ! command will require you to press Enter to confirm before it will execute.</p>
<h3 id="use-the-parameters-of-the-previous-command">Use the parameters of the previous command</h3>
<p><code>!$</code> and <code>!*</code> will fill in the last argument of the previous command and all arguments to this position, respectively, e.g.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ mv list.txt items.txt
$ vim !$
vim items.txt
$ cp !$ shopping.txt
cp items.txt shopping.txt
</code></pre></td></tr></table>
</div>
</div>
    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/bash/">bash</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-02/github-new-sponsors-only-repositories/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Github launches &#34;sponsor-only&#34; repository, develops new features based on sponsorship amounts</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-02/getting-to-know-the-power-of-ast/">
            <span class="next-text nav-default">Getting to Know the Power of Ast</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
