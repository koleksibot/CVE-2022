<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Dateparse Usage Guide - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="Handling time is always a headache, no matter what time it is. The time format is too diverse, and it is even more difficult to deal with time zones, daylight saving time, leap seconds and other minor details. Therefore, we usually use standard libraries or time libraries provided by third parties to handle time in our programs. The dateparse we are going to introduce today focuses on a very small area of time processing - parsing strings in date time format." /><meta name="keywords" content="dateparse" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-07/dateparse-usage-guide/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Dateparse Usage Guide" />
<meta property="og:description" content="Handling time is always a headache, no matter what time it is. The time format is too diverse, and it is even more difficult to deal with time zones, daylight saving time, leap seconds and other minor details. Therefore, we usually use standard libraries or time libraries provided by third parties to handle time in our programs. The dateparse we are going to introduce today focuses on a very small area of time processing - parsing strings in date time format." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-07/dateparse-usage-guide/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-07-03T15:56:37+08:00" />
<meta property="article:modified_time" content="2021-07-03T15:56:37+08:00" />

<meta itemprop="name" content="Dateparse Usage Guide">
<meta itemprop="description" content="Handling time is always a headache, no matter what time it is. The time format is too diverse, and it is even more difficult to deal with time zones, daylight saving time, leap seconds and other minor details. Therefore, we usually use standard libraries or time libraries provided by third parties to handle time in our programs. The dateparse we are going to introduce today focuses on a very small area of time processing - parsing strings in date time format."><meta itemprop="datePublished" content="2021-07-03T15:56:37+08:00" />
<meta itemprop="dateModified" content="2021-07-03T15:56:37+08:00" />
<meta itemprop="wordCount" content="1415">
<meta itemprop="keywords" content="golang,dateparse," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Dateparse Usage Guide"/>
<meta name="twitter:description" content="Handling time is always a headache, no matter what time it is. The time format is too diverse, and it is even more difficult to deal with time zones, daylight saving time, leap seconds and other minor details. Therefore, we usually use standard libraries or time libraries provided by third parties to handle time in our programs. The dateparse we are going to introduce today focuses on a very small area of time processing - parsing strings in date time format."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Dateparse Usage Guide</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-07-03 15:56:37 </span>
        <div class="post-category">
            <a href="/categories/skills/"> skills </a>
            <a href="/categories/tools/"> tools </a>
            </div>
          <span class="more-meta"> 1415 words </span>
          <span class="more-meta"> 7 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#quick-use">Quick Use</a></li>
        <li><a href="#format">Format</a></li>
        <li><a href="#time-zone">Time Zone</a></li>
        <li><a href="#cli">cli</a></li>
        <li><a href="#summary">Summary</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>Handling time is always a headache, no matter what time it is. The time format is too diverse, and it is even more difficult to deal with time zones, daylight saving time, leap seconds and other minor details. Therefore, we usually use standard libraries or time libraries provided by third parties to handle time in our programs. The <a href="https://github.com/araddon/dateparse">dateparse</a> we are going to introduce today focuses on a very small area of time processing - parsing strings in date time format.</p>
<h2 id="quick-use">Quick Use</h2>
<p>Create the directory and initialize.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ mkdir dateparse <span class="o">&amp;&amp;</span> <span class="nb">cd</span> dateparse
$ go mod init github.com/darjun/go-daily-lib/dateparse
</code></pre></td></tr></table>
</div>
</div><p>Install the <code>dateparse</code> library</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">go get -u github.com/araddon/dateparse
</code></pre></td></tr></table>
</div>
</div><p>Use.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
  <span class="s">&#34;fmt&#34;</span>
  <span class="s">&#34;log&#34;</span>
  <span class="s">&#34;github.com/araddon/dateparse&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">t1</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">dateparse</span><span class="p">.</span><span class="nf">ParseAny</span><span class="p">(</span><span class="s">&#34;3/1/2014&#34;</span><span class="p">)</span>
  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">t1</span><span class="p">.</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-01-02 15:04:05&#34;</span><span class="p">))</span>

  <span class="nx">t2</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">dateparse</span><span class="p">.</span><span class="nf">ParseAny</span><span class="p">(</span><span class="s">&#34;mm/dd/yyyy&#34;</span><span class="p">)</span>
  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">t2</span><span class="p">.</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-01-02 15:04:05&#34;</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>The <code>ParseAny()</code> method takes a datetime string, parses the string, and returns a value of type <code>time.Time</code>. If the passed string <code>dateparse</code> is not recognized by the library, an error is returned. The above program runs the output.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">$ go run main.go
2014-03-01 00:00:00
2021/06/24 14:52:39 Could not find format for &#34;mm/dd/yyyy&#34;
exit status 1
</code></pre></td></tr></table>
</div>
</div><p>Note that when we write the time &ldquo;3/1/2014&rdquo;, it can be interpreted as either March 1, 2014 or January 3, 2014. This has a different meaning, as dateparse defaults to mm/dd/yyyy, which is March 1, 2014. We can also make such strings with different meanings fail to parse using the <code>ParseStrict()</code> function.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">t</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">dateparse</span><span class="p">.</span><span class="nf">ParseStrict</span><span class="p">(</span><span class="s">&#34;3/1/2014&#34;</span><span class="p">)</span>
  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-01-02 15:04:05&#34;</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>run</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run main.go
2021/06/24 14:57:18 This date has ambiguous mm/dd vs dd/mm <span class="nb">type</span> format
<span class="nb">exit</span> status <span class="m">1</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="format">Format</h2>
<p><code>dateparse</code> supports a rich set of datetime formats, including basically all commonly used formats. It supports all the formats predefined in the standard library time.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="c1">// src/time/format.go
</span><span class="c1"></span><span class="kd">const</span> <span class="p">(</span>
  <span class="nx">ANSIC</span>       <span class="p">=</span> <span class="s">&#34;Mon Jan _2 15:04:05 2006&#34;</span>
  <span class="nx">UnixDate</span>    <span class="p">=</span> <span class="s">&#34;Mon Jan _2 15:04:05 MST 2006&#34;</span>
  <span class="nx">RubyDate</span>    <span class="p">=</span> <span class="s">&#34;Mon Jan 02 15:04:05 -0700 2006&#34;</span>
  <span class="nx">RFC822</span>      <span class="p">=</span> <span class="s">&#34;02 Jan 06 15:04 MST&#34;</span>
  <span class="nx">RFC822Z</span>     <span class="p">=</span> <span class="s">&#34;02 Jan 06 15:04 -0700&#34;</span> <span class="c1">// RFC822 with numeric zone
</span><span class="c1"></span>  <span class="nx">RFC850</span>      <span class="p">=</span> <span class="s">&#34;Monday, 02-Jan-06 15:04:05 MST&#34;</span>
  <span class="nx">RFC1123</span>     <span class="p">=</span> <span class="s">&#34;Mon, 02 Jan 2006 15:04:05 MST&#34;</span>
  <span class="nx">RFC1123Z</span>    <span class="p">=</span> <span class="s">&#34;Mon, 02 Jan 2006 15:04:05 -0700&#34;</span> <span class="c1">// RFC1123 with numeric zone
</span><span class="c1"></span>  <span class="nx">RFC3339</span>     <span class="p">=</span> <span class="s">&#34;2006-01-02T15:04:05Z07:00&#34;</span>
  <span class="nx">RFC3339Nano</span> <span class="p">=</span> <span class="s">&#34;2006-01-02T15:04:05.999999999Z07:00&#34;</span>
  <span class="nx">Kitchen</span>     <span class="p">=</span> <span class="s">&#34;3:04PM&#34;</span>
  <span class="c1">// Handy time stamps.
</span><span class="c1"></span>  <span class="nx">Stamp</span>      <span class="p">=</span> <span class="s">&#34;Jan _2 15:04:05&#34;</span>
  <span class="nx">StampMilli</span> <span class="p">=</span> <span class="s">&#34;Jan _2 15:04:05.000&#34;</span>
  <span class="nx">StampMicro</span> <span class="p">=</span> <span class="s">&#34;Jan _2 15:04:05.000000&#34;</span>
  <span class="nx">StampNano</span>  <span class="p">=</span> <span class="s">&#34;Jan _2 15:04:05.000000000&#34;</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>See <a href="https://github.com/araddon/dateparse">dateparse README</a></p>
<p>for the full format supported.</p>
<h2 id="time-zone">Time Zone</h2>
<p><code>dateparse</code> supports parsing datetime strings in specific time zones. We can get a time zone object by calling the <code>time.LoadLocation()</code> method of the standard library and passing in a time zone identifier string. The time zone identifier string is something like <code>Asia/Shanghai</code>, <code>America/Chicago</code>, which represents a specific time zone, Shanghai for the former and Los Angeles for the latter. The <code>dateparse.ParseIn()</code> method is called to pass in a timezone object to be parsed in the specified timezone. There are also two time zone objects predefined in the <code>time</code> package, <code>time.Local</code> for the local time zone and <code>time.UTC</code> for the <code>UTC</code> time zone. See <code>IANA</code> for authoritative data on time zones.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">tz1</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">LoadLocation</span><span class="p">(</span><span class="s">&#34;America/Chicago&#34;</span><span class="p">)</span>
  <span class="nx">t1</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">dateparse</span><span class="p">.</span><span class="nf">ParseIn</span><span class="p">(</span><span class="s">&#34;2021-06-24 15:50:30&#34;</span><span class="p">,</span> <span class="nx">tz1</span><span class="p">)</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">t1</span><span class="p">.</span><span class="nf">Local</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-01-02 15:04:05&#34;</span><span class="p">))</span>

  <span class="nx">t2</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">dateparse</span><span class="p">.</span><span class="nf">ParseIn</span><span class="p">(</span><span class="s">&#34;2021-06-24 15:50:30&#34;</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Local</span><span class="p">)</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">t2</span><span class="p">.</span><span class="nf">Local</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-01-02 15:04:05&#34;</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>run</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">$ go run main.go
2021-06-25 04:50:30
2021-06-24 15:50:30
</code></pre></td></tr></table>
</div>
</div><p>June 24, 2021 15:30:30 in the Los Angeles time zone is equal to June 25, 2021 04:50:30 in the local time zone (Beijing time).</p>
<h2 id="cli">cli</h2>
<p>dateparse also provides a command line tool for extremely fast viewing of date time formats. Installation.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go install github.com/araddon/dateparse/dateparse
</code></pre></td></tr></table>
</div>
</div><p>By default it will be installed under <code>$GOPATH</code> path, I used to put <code>$GOPATH/bin</code> into <code>$PATH</code>. So the <code>dateparse</code> command can be used directly.</p>
<p>The <code>dateparse</code> command takes a string, and an optional timezone option.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ dateparse --timezone<span class="o">=</span><span class="s2">&#34;Asia/Shanghai&#34;</span> <span class="s2">&#34;2021-06-24 06:46:08&#34;</span>

Your Current time.Local zone is CST

Layout String: dateparse.ParseFormat<span class="o">()</span> <span class="o">=</span>&gt; 2006-01-02 15:04:05

Your Using time.Local <span class="nb">set</span> to <span class="nv">location</span><span class="o">=</span>Asia/Shanghai CST

+-------------+---------------------------+-------------------------------+-------------------------------------+
<span class="p">|</span> method      <span class="p">|</span> Zone Source               <span class="p">|</span> Parsed                        <span class="p">|</span> Parsed: t.In<span class="o">(</span>time.UTC<span class="o">)</span>              <span class="p">|</span>
+-------------+---------------------------+-------------------------------+-------------------------------------+
<span class="p">|</span> ParseAny    <span class="p">|</span> time.Local <span class="o">=</span> nil          <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC <span class="nv">day</span><span class="o">=</span><span class="m">4</span> <span class="p">|</span>
<span class="p">|</span> ParseAny    <span class="p">|</span> time.Local <span class="o">=</span> timezone arg <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC <span class="nv">day</span><span class="o">=</span><span class="m">4</span> <span class="p">|</span>
<span class="p">|</span> ParseAny    <span class="p">|</span> time.Local <span class="o">=</span> time.UTC     <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC <span class="nv">day</span><span class="o">=</span><span class="m">4</span> <span class="p">|</span>
<span class="p">|</span> ParseIn     <span class="p">|</span> time.Local <span class="o">=</span> nil          <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC       <span class="p">|</span>
<span class="p">|</span> ParseIn     <span class="p">|</span> time.Local <span class="o">=</span> timezone arg <span class="p">|</span> 2021-06-24 06:46:08 +0800 CST <span class="p">|</span> 2021-06-23 22:46:08 +0000 UTC       <span class="p">|</span>
<span class="p">|</span> ParseIn     <span class="p">|</span> time.Local <span class="o">=</span> time.UTC     <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC       <span class="p">|</span>
<span class="p">|</span> ParseLocal  <span class="p">|</span> time.Local <span class="o">=</span> nil          <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC       <span class="p">|</span>
<span class="p">|</span> ParseLocal  <span class="p">|</span> time.Local <span class="o">=</span> timezone arg <span class="p">|</span> 2021-06-24 06:46:08 +0800 CST <span class="p">|</span> 2021-06-23 22:46:08 +0000 UTC       <span class="p">|</span>
<span class="p">|</span> ParseLocal  <span class="p">|</span> time.Local <span class="o">=</span> time.UTC     <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC       <span class="p">|</span>
<span class="p">|</span> ParseStrict <span class="p">|</span> time.Local <span class="o">=</span> nil          <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC       <span class="p">|</span>
<span class="p">|</span> ParseStrict <span class="p">|</span> time.Local <span class="o">=</span> timezone arg <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC       <span class="p">|</span>
<span class="p">|</span> ParseStrict <span class="p">|</span> time.Local <span class="o">=</span> time.UTC     <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC <span class="p">|</span> 2021-06-24 06:46:08 +0000 UTC       <span class="p">|</span>
+-------------+---------------------------+-------------------------------+-------------------------------------+
</code></pre></td></tr></table>
</div>
</div><p>Outputs the current local time zone, a format string (which can be used to generate a datetime string in the same format) and a table. The data inside the table is the result of calling <code>ParseAny/ParseIn/ParseLocal/ParseStrict</code> for different time zones respectively.</p>
<p>The <code>method</code> column indicates the method called, the <code>Zone Source</code> column indicates the value set to the local time zone, the <code>Parsed</code> column is the result of calling the <code>Format()</code> method on the <code>time.Time</code> object returned by <code>ParseAny()</code> with a datetime string, and the <code>Parsed: t.In(time. UTC)</code> column converts the returned <code>time.Time</code> object to <code>UTC</code> time before the <code>Format()</code> method is called on it.</p>
<p>Since <code>ParseAny/ParseStrict</code> does not take into account the local time zone and parses the string under <code>UTC</code>, the last two columns of these <code>6</code> rows have the same result.</p>
<p>In the second line of <code>ParseIn</code>, set <code>time.Local</code> to the time zone we set via the command line option, which I set to <code>Asia/Shanghai</code> above, corresponding to an 8-hour difference in <code>UTC</code> time. The same is true for <code>ParseLocal</code>.</p>
<p>The following is part of the source code of the <code>dateparse</code> command line, you can check it against.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">parsers</span> <span class="o">:=</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="nx">parser</span><span class="p">{</span>
    <span class="s">&#34;ParseAny&#34;</span><span class="p">:</span>    <span class="nx">parseAny</span><span class="p">,</span>
    <span class="s">&#34;ParseIn&#34;</span><span class="p">:</span>     <span class="nx">parseIn</span><span class="p">,</span>
    <span class="s">&#34;ParseLocal&#34;</span><span class="p">:</span>  <span class="nx">parseLocal</span><span class="p">,</span>
    <span class="s">&#34;ParseStrict&#34;</span><span class="p">:</span> <span class="nx">parseStrict</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">parser</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">parsers</span> <span class="p">{</span>
    <span class="nx">time</span><span class="p">.</span><span class="nx">Local</span> <span class="p">=</span> <span class="kc">nil</span>
    <span class="nx">table</span><span class="p">.</span><span class="nf">AddRow</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="s">&#34;time.Local = nil&#34;</span><span class="p">,</span> <span class="nf">parser</span><span class="p">(</span><span class="nx">datestr</span><span class="p">,</span> <span class="kc">nil</span><span class="p">,</span> <span class="kc">false</span><span class="p">),</span> <span class="nf">parser</span><span class="p">(</span><span class="nx">datestr</span><span class="p">,</span> <span class="kc">nil</span><span class="p">,</span> <span class="kc">true</span><span class="p">))</span>
    <span class="k">if</span> <span class="nx">timezone</span> <span class="o">!=</span> <span class="s">&#34;&#34;</span> <span class="p">{</span>
      <span class="nx">time</span><span class="p">.</span><span class="nx">Local</span> <span class="p">=</span> <span class="nx">loc</span>
      <span class="nx">table</span><span class="p">.</span><span class="nf">AddRow</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="s">&#34;time.Local = timezone arg&#34;</span><span class="p">,</span> <span class="nf">parser</span><span class="p">(</span><span class="nx">datestr</span><span class="p">,</span> <span class="nx">loc</span><span class="p">,</span> <span class="kc">false</span><span class="p">),</span> <span class="nf">parser</span><span class="p">(</span><span class="nx">datestr</span><span class="p">,</span> <span class="nx">loc</span><span class="p">,</span> <span class="kc">true</span><span class="p">))</span>
    <span class="p">}</span>
    <span class="nx">time</span><span class="p">.</span><span class="nx">Local</span> <span class="p">=</span> <span class="nx">time</span><span class="p">.</span><span class="nx">UTC</span>
    <span class="nx">table</span><span class="p">.</span><span class="nf">AddRow</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="s">&#34;time.Local = time.UTC&#34;</span><span class="p">,</span> <span class="nf">parser</span><span class="p">(</span><span class="nx">datestr</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nx">UTC</span><span class="p">,</span> <span class="kc">false</span><span class="p">),</span> <span class="nf">parser</span><span class="p">(</span><span class="nx">datestr</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nx">UTC</span><span class="p">,</span> <span class="kc">true</span><span class="p">))</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">parseIn</span><span class="p">(</span><span class="nx">datestr</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">loc</span> <span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Location</span><span class="p">,</span> <span class="nx">utc</span> <span class="kt">bool</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
  <span class="nx">t</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">dateparse</span><span class="p">.</span><span class="nf">ParseIn</span><span class="p">(</span><span class="nx">datestr</span><span class="p">,</span> <span class="nx">loc</span><span class="p">)</span>
  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">()</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="nx">utc</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">t</span><span class="p">.</span><span class="nf">In</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">UTC</span><span class="p">).</span><span class="nf">String</span><span class="p">()</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">t</span><span class="p">.</span><span class="nf">String</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Note that the local time zone of the output is CST, which can represent different time zones.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">Central Standard Time (USA) UT-6:00
Central Standard Time (Australia) UT+9:30
China Standard Time UT+8:00
Cuba Standard Time UT-4:00
</code></pre></td></tr></table>
</div>
</div><p>CST can represent the standard time of four countries at the same time: USA, Australia, China and Cuba.</p>
<h2 id="summary">Summary</h2>
<p>Using dateparse it is easy to parse time objects and formats (layouts) from datetime strings. Also dateparse command line is a great little tool to quickly view and convert the time in the corresponding time zone.</p>
<hr>
<p>Reference <code>https://darjun.github.io/2021/06/24/godailylib/dateparse/</code></p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/golang/">golang</a>
          <a href="/tags/dateparse/">dateparse</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-07/tracking-users-via-js/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Tracking Users via Js</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-07/go-channel-vs-java-blockingqueue/">
            <span class="next-text nav-default">Go Channel vs Java BlockingQueue</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
