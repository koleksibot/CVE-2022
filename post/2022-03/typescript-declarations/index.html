<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>The Complete Guide to TypeScirpt Type Declarations - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="A Type Declaration or Type Definition file is a TypeScript file with a .d.ts file extension. What is the difference between them and a normal .ts file? What are their characteristics? Next, let&amp;rsquo;s take a deeper look. I. The .d.ts files Type declaration files have the suffix .d.ts and contain only type-related code, not logical code. Their purpose is to provide type information to the developer, so they are only" /><meta name="keywords" content="typescript, Declarations" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-03/typescript-declarations/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="The Complete Guide to TypeScirpt Type Declarations" />
<meta property="og:description" content="A Type Declaration or Type Definition file is a TypeScript file with a .d.ts file extension. What is the difference between them and a normal .ts file? What are their characteristics? Next, let&rsquo;s take a deeper look. I. The .d.ts files Type declaration files have the suffix .d.ts and contain only type-related code, not logical code. Their purpose is to provide type information to the developer, so they are only" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-03/typescript-declarations/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-03-05T10:49:44+08:00" />
<meta property="article:modified_time" content="2022-03-05T10:49:44+08:00" />

<meta itemprop="name" content="The Complete Guide to TypeScirpt Type Declarations">
<meta itemprop="description" content="A Type Declaration or Type Definition file is a TypeScript file with a .d.ts file extension. What is the difference between them and a normal .ts file? What are their characteristics? Next, let&rsquo;s take a deeper look. I. The .d.ts files Type declaration files have the suffix .d.ts and contain only type-related code, not logical code. Their purpose is to provide type information to the developer, so they are only"><meta itemprop="datePublished" content="2022-03-05T10:49:44+08:00" />
<meta itemprop="dateModified" content="2022-03-05T10:49:44+08:00" />
<meta itemprop="wordCount" content="1963">
<meta itemprop="keywords" content="typescript," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="The Complete Guide to TypeScirpt Type Declarations"/>
<meta name="twitter:description" content="A Type Declaration or Type Definition file is a TypeScript file with a .d.ts file extension. What is the difference between them and a normal .ts file? What are their characteristics? Next, let&rsquo;s take a deeper look. I. The .d.ts files Type declaration files have the suffix .d.ts and contain only type-related code, not logical code. Their purpose is to provide type information to the developer, so they are only"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">The Complete Guide to TypeScirpt Type Declarations</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-03-05 10:49:44 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 1963 words </span>
          <span class="more-meta"> 4 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#i-the-dts-files">I. The <code>.d.ts</code> files</a></li>
        <li><a href="#ii-global-declarations">II. Global declarations</a></li>
        <li><a href="#iii-declarations-modularity">III. Declarations Modularity</a></li>
        <li><a href="#iv-third-party-declarations">IV. Third-party declarations</a></li>
        <li><a href="#v-environment-related-declarations">V. Environment-related declarations</a></li>
        <li><a href="#vi-namespace-declarations">VI. Namespace declarations</a></li>
        <li><a href="#vii-type-extensions">VII. Type Extensions</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>A <strong>Type Declaration</strong> or <strong>Type Definition</strong> file is a TypeScript file with a <code>.d.ts</code> file extension. What is the difference between them and a normal <code>.ts</code> file? What are their characteristics? Next, let&rsquo;s take a deeper look.</p>
<h2 id="i-the-dts-files">I. The <code>.d.ts</code> files</h2>
<p>Type declaration files have the suffix <code>.d.ts</code> and contain only type-related code, not logical code. Their purpose is to provide type information to the developer, so they are only useful during the development phase.</p>
<p>Type declarations, i.e. declarations of types, such as <code>interface</code>, <code>function</code> and <code>class</code>, are shown below as an <code>interface</code> declaration.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">// Person接口类型声明
</span><span class="c1"></span><span class="kr">interface</span> <span class="nx">Person</span> <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
    <span class="nx">age</span><span class="o">:</span> <span class="nx">number</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 使用Person接口
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">xm</span><span class="o">:</span> <span class="nx">Person</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;XiaoMing&#34;</span><span class="p">,</span>
    <span class="nx">age</span><span class="o">:</span> <span class="mi">8</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="ii-global-declarations">II. Global declarations</h2>
<p><strong>global declaration</strong> works in any TypeScript project or TypeScript code fragment. For example, when you write <code>const p = new Promise();</code>, TypeScript compiler will not compile your code, because <code>const p = new Promise();</code> syntax error, if you are using vscode IDE, then vscode prompt you as in the following figure (personal code, used to use white) background, vscode&rsquo;s default background color is black, although the theme color is different, but the prompt is the same).</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/03/05/bc347aeea1b04610b295e107e3ce1cc3.png" alt="global declaration"></p>
<p>vscode detects your syntax errors based on global declarations. Every TypeScript program can use global declarations without the need to display them imported with the <code>import</code> statement.</p>
<p>From the IDE prompt, you can see that the <code>Promise</code> type is defined in the <code>lib.es2015.promise.d.ts</code> file, provided by TypeScript, which provides many of these declaration files, called <strong>Standard Library</strong> (these declaration files are installed with TypeScript).</p>
<blockquote>
<p>Using the <code>lib</code> compiler option, you can control which standard libraries are introduced into the current project. You can also set <code>noLib</code> to <code>true</code>, which will disable all standard libraries in the project. More on this can be found at <a href="http://pengfeixc.com/blogs/javascript/tsconfig">Compilation</a>.</p>
</blockquote>
<p>In order to manually go through and load some global declaration files, we need to tell the TypeScript compiler where the declaration files are located. This can be set via the <code>typeRoots</code> and <code>types</code> compiler options.</p>
<p>Next, get hands-on. Create the following file structure.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">project/
    types/
        common/
            main.d.ts
            package.json
    program.ts
    tsconfig.json
</code></pre></td></tr></table>
</div>
</div><p>In our project, we need some public types that are available in each ts file, so I&rsquo;m going to store these public type declarations in <code>project/types/common/main.d.ts</code>, using <code>typeRoots</code> to tell TypeScript the location of the declaration file. The TypeScript compiler will import the declaration files in the directory specified by <code>typeRoots</code> according to the <a href="https://pengfeixc.com/blogs/javascript/typescript-module-system"><strong>Node module location policy</strong></a>, and if the <code>typeRoots</code> option, the declaration files in the <code>node_modules/@types</code> folder will be imported by default.</p>
<p><code>node_modules/@types</code> is the default for <code>typeRoots</code>. The purpose of <code>node_modules/@types</code> is only to provide type declarations for public packages, and each declaration module in the directory should contain an <code>index.d.ts</code> file in the root directory to be used as the typescirpt If there is no <code>index.d.ts</code> file, it should have a <code>package.json</code> file, and the <code>package.json</code> file needs to point to the location of the entry declaration file.</p>
<p>Now I need to use the <code>project/types/common/main.d.ts</code> file as the entry declaration file, so I need to add the following to the <code>project/types/common/package.json</code> file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;common&#34;</span><span class="p">,</span>
    <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0.0&#34;</span><span class="p">,</span>
    <span class="nt">&#34;typings&#34;</span><span class="p">:</span> <span class="s2">&#34;main.d.ts&#34;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p><code>typings</code> is used to indicate the location of the entry declaration file.</p>
<p>Next, configure <code>typeRoots</code> to tell TypeScript to customize the location of the global declaration by modifying the <code>tsconfig.json</code> file as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;files&#34;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&#34;./program.ts&#34;</span>
    <span class="p">],</span>
    <span class="nt">&#34;compilerOptions&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;typeRoots&#34;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&#34;./types&#34;</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Add the declaration information to the <code>main.d.ts</code> file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">interface</span> <span class="nx">Person</span> <span class="p">{</span>
    <span class="nx">firstName</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
    <span class="nx">lastName</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
    <span class="nx">age</span><span class="o">:</span> <span class="nx">number</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>With the declaration information, you can use the type in <code>program.ts</code>.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/03/05/4c84ae1d63834169aac874916689ea85.png" alt="program.ts"></p>
<p>As shown in the image, the <code>ross</code> variable of type <code>Person</code> is defined and the IDE reports an error because the assignment is not compatible with the type, and the IDE also gives the location of the declaration file. Modify the program.ts file as follows to fix the error.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">const</span> <span class="nx">ross</span>: <span class="kt">Person</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">firstName</span><span class="o">:</span> <span class="s2">&#34;Ross&#34;</span><span class="p">,</span>
    <span class="nx">lastName</span><span class="o">:</span> <span class="s2">&#34;Geller&#34;</span><span class="p">,</span>
    <span class="nx">age</span>: <span class="kt">20</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="iii-declarations-modularity">III. Declarations Modularity</h2>
<p>In the above example, TypeScript only knows the <code>main.d.ts</code> declaration file. If the project contains thousands of declarations, putting them all in the <code>main.d.ts</code> file will make the project very bad and unmaintainable. Therefore, declarations need to be modularized.</p>
<p>First add the <code>functions.d.ts</code> and <code>interfaces.d.ts</code> files to the <code>project/types/common/</code> folder.</p>
<p><code>interfaces.d.ts</code> provides information about all the interface types in the <code>common</code> package, and <code>functions.d.ts</code> provides information about all the function types in the <code>common</code> package. And introduce them in the <code>main.d.ts</code> file using the <code>&lt;reference /&gt;</code> directive.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="c1">// types/common/main.d.ts
</span><span class="c1">/// &lt;reference path=&#34;./interfaces.d.ts&#34; /&gt;
</span><span class="c1">/// &lt;reference path=&#34;./functions.d.ts&#34; /&gt;
</span><span class="c1"></span>
<span class="o">-----------------------------------------------</span>
<span class="c1">// types/common/interfaces.d.ts
</span><span class="c1"></span><span class="kr">interface</span> <span class="nx">Person</span> <span class="p">{</span>
    <span class="nx">firstName</span>: <span class="kt">string</span><span class="p">;</span>
    <span class="nx">lastName</span>: <span class="kt">string</span><span class="p">;</span>
    <span class="nx">age</span>: <span class="kt">number</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">------------------------------------------------</span>
<span class="c1">// types/common/functions.d.ts
</span><span class="c1"></span><span class="kr">type</span> <span class="nx">GetFullName</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">p</span>: <span class="kt">Person</span> <span class="p">)</span> <span class="o">=&gt;</span> <span class="kt">string</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><p>One thing worth noting is that we can use the <code>Person</code> interface defined in the <code>interfaces.d.ts</code> file in the <code>functions.d.ts</code> file, because with the <code>&lt;reference /&gt;</code> designation, the specified files can share type declarations.</p>
<p>Modify the <code>program.ts</code> file to use the defined types.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">const</span> <span class="nx">ross</span>: <span class="kt">Person</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">firstName</span><span class="o">:</span> <span class="s2">&#34;Ross&#34;</span><span class="p">,</span>
    <span class="nx">lastName</span><span class="o">:</span> <span class="s2">&#34;Geller&#34;</span><span class="p">,</span>
    <span class="nx">age</span>: <span class="kt">20</span>
<span class="p">};</span>

<span class="kr">const</span> <span class="nx">getPersonName</span>: <span class="kt">GetFullName</span> <span class="o">=</span> <span class="p">(</span><span class="nx">p</span>: <span class="kt">Person</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="sb">`</span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">firstName</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">lastName</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">getPersonName</span><span class="p">(</span><span class="nx">ross</span><span class="p">));</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="iv-third-party-declarations">IV. Third-party declarations</h2>
<p>So far, it is known how to create custom global declaration files. In some cases, we need to install the npm declaration file package provided by a third party.</p>
<p>The <a href="https://github.com/DefinitelyTyped/DefinitelyTyped">DefinitelyTyped</a> community, they provide us with many third-party npm declaration file packages, such as <code>@types/lodash</code> and <code>@types/node</code> and so on. You can use npm to install the declaration packages under <a href="https://www.npmjs.com/org/types"><code>@types</code></a>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="nx">npm</span> <span class="nx">install</span> <span class="o">-</span><span class="nx">D</span> <span class="err">@</span><span class="nx">types</span><span class="o">/</span><span class="nx">node</span>
</code></pre></td></tr></table>
</div>
</div><p>These packages are downloaded to the <code>node_modules/@types</code> folder, which is why the default value for <code>typeRoots</code> is <code>node_modules/@types</code>. If you want to add an additional declaration folder directory to the default value, you need to specify two values for <code>typeRoots</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
    <span class="s2">&#34;files&#34;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&#34;./program.ts&#34;</span>
    <span class="p">],</span>
    <span class="s2">&#34;compilerOptions&#34;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&#34;typeRoots&#34;</span><span class="o">:</span> <span class="p">[</span>
            <span class="s2">&#34;./node_modules/@types&#34;</span><span class="p">,</span>
            <span class="s2">&#34;./types&#34;</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="v-environment-related-declarations">V. Environment-related declarations</h2>
<p>Certain values that exist only at runtime. For example, the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window"><code>window</code></a> object, which exists only in the browser environment, and similarly the <a href="https://nodejs.org/api/"><code>global</code></a> in node globals.html#globals_global).</p>
<p>If you use <code>window</code> or <code>glbal</code> in a TypeScript program, the typescirpt compiler reports an error <code>cannot find name 'window'</code>. This is normal, because the <code>window</code> variable is not defined. So, how can we use the <code>window</code> object if it is not defined?</p>
<p>We need to use the <code>declare</code> keyword to tell the TypeScript compiler that the <code>window</code> variable exists and to stop reporting errors.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="nx">declare</span> <span class="kd">var</span> <span class="nb">window</span><span class="o">:</span> <span class="nx">any</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><p>This code is called <strong>ambient declaration</strong>, where <code>window</code> is called <strong>ambient value</strong>. With this declaration, TypeScript assumes that the <code>window</code> variable of type <code>any</code> is already defined, so no errors will be reported anywhere the <code>window</code> variable is used.</p>
<p>You can also provide a specified type for the environment value, for example <code>declare var window: Person;</code></p>
<p>Next, add an environment value <code>XiaoMing</code> to the <code>main.d.ts</code> file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">/// &lt;reference path=&#34;./interfaces.d.ts&#34; /&gt;
</span><span class="c1">/// &lt;reference path=&#34;./functions.d.ts&#34; /&gt;
</span><span class="c1"></span>
<span class="nx">declare</span> <span class="kd">var</span> <span class="nx">XiaoMing</span><span class="o">:</span> <span class="nx">Person</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><p>Then use it in <code>program.ts</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">XiaoMing</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p>TypeScript does not report an error if it is not written incorrectly.</p>
<h2 id="vi-namespace-declarations">VI. Namespace declarations</h2>
<p>In the previous example, we provided the <code>types/common</code> declaration package, which defines the global <code>Person</code> interface type. The global interface type has the disadvantage that it is easily overwritten by the types of declaration files in other packages (type conflict).</p>
<p>To avoid this problem, the best solution is to define the types in namespaces.</p>
<p>Modify the contents of the declaration file as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="c1">// types/common/main.d.ts
</span><span class="c1">/// &lt;reference path=&#34;./interfaces.d.ts&#34; /&gt;
</span><span class="c1">/// &lt;reference path=&#34;./functions.d.ts&#34; /&gt;
</span><span class="c1"></span>
<span class="o">--------------------------------------------------------------------</span>
<span class="c1">// types/common/interfaces.d.ts
</span><span class="c1"></span><span class="kr">declare</span> <span class="kr">namespace</span> <span class="nx">common</span> <span class="p">{</span>
    <span class="kr">interface</span> <span class="nx">Person</span> <span class="p">{</span>
        <span class="nx">firstName</span>: <span class="kt">string</span><span class="p">;</span>
        <span class="nx">lastName</span>: <span class="kt">string</span><span class="p">;</span>
        <span class="nx">age</span>: <span class="kt">number</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="o">--------------------------------------------------------------------</span>
<span class="c1">// types/common/functions.d.ts
</span><span class="c1"></span><span class="kr">declare</span> <span class="kr">namespace</span> <span class="nx">common</span> <span class="p">{</span>
    <span class="kr">type</span> <span class="nx">GetFullName</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">p</span>: <span class="kt">Person</span> <span class="p">)</span> <span class="o">=&gt;</span> <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Again, only declaration information is allowed in the declaration file, because a namespace is an object, so you can&rsquo;t define it in the declaration file, but we can define the namespace as an environment value.</p>
</blockquote>
<p>Also, when the namespace is defined in the declaration file, the <code>export</code> keyword is not needed, and all types inside the namespace are implicitly exported. in addition, you cannot export a value from the namespace, only the type is allowed to be exported.</p>
<h2 id="vii-type-extensions">VII. Type Extensions</h2>
<p>When typescript foresees multiple interface types with the same name, it automatically merges these interface types into a single declaration.</p>
<p>Namespace has similar behavior. When declaring an existing namespace, typescript will automatically extend the existing namespace. So when interfaces and namespaces are in the global environment, they can be redeclared for the purpose of extending them.</p>
<p>Update the declaration file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="c1">// types/common/main.d.ts
</span><span class="c1">/// &lt;reference path=&#34;./interfaces.d.ts&#34; /&gt;
</span><span class="c1">/// &lt;reference path=&#34;./functions.d.ts&#34; /&gt;
</span><span class="c1"></span>
<span class="o">--------------------------------------------------------</span>
<span class="c1">// types/common/interfaces.d.ts
</span><span class="c1"></span><span class="kr">interface</span> <span class="nx">Person</span> <span class="p">{</span>
    <span class="nx">firstName</span>: <span class="kt">string</span><span class="p">;</span>
    <span class="nx">lastName</span>: <span class="kt">string</span><span class="p">;</span>
    <span class="nx">age</span>: <span class="kt">number</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">--------------------------------------------------------</span>
<span class="c1">// types/common/functions.d.ts
</span><span class="c1"></span><span class="kr">declare</span> <span class="kr">namespace</span> <span class="nx">common</span> <span class="p">{</span>
    <span class="kr">type</span> <span class="nx">GetFullName</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">p</span>: <span class="kt">Person</span> <span class="p">)</span> <span class="o">=&gt;</span> <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Update <code>program.ts</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">interface</span> <span class="nx">Person</span> <span class="p">{</span>
    <span class="nx">email</span>: <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nb">Number</span> <span class="p">{</span>
    <span class="nx">isEven</span><span class="p">()</span><span class="o">:</span> <span class="kr">boolean</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">ross</span>: <span class="kt">Person</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">firstName</span><span class="o">:</span> <span class="s2">&#34;Ross&#34;</span><span class="p">,</span>
    <span class="nx">lastName</span><span class="o">:</span> <span class="s2">&#34;Geller&#34;</span><span class="p">,</span>
    <span class="nx">age</span>: <span class="kt">29</span><span class="p">,</span>
    <span class="nx">email</span><span class="o">:</span> <span class="s2">&#34;ross@geller.com&#34;</span>
<span class="p">};</span>

<span class="kr">const</span> <span class="nx">isAgeEven</span> <span class="o">=</span> <span class="nx">ross</span><span class="p">.</span><span class="nx">age</span><span class="p">.</span><span class="nx">isEven</span><span class="p">();</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;isAgeEven&#34;</span><span class="p">,</span> <span class="nx">isAgeEven</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p>At this point typescript does not report an error. The <code>Person</code> interface and the <code>Number</code> (built-in type) interface have been extended in <code>program.ts</code>.</p>
<p>However, this does not apply to the module system; values and types can only be shared in <strong>script</strong> files, which are files that do not contain the <code>import</code> and <code>export</code> statements.</p>
<p>You can add a line of code <code>export {}</code> to the end of the <code>program.ts</code> file. At this point typescript should give the following error message.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="nx">Type</span> <span class="s1">&#39;{ firstName: string; lastName: string; age: number; email: string; }&#39;</span> <span class="k">is</span> <span class="nx">not</span> <span class="nx">assignable</span> <span class="nx">to</span> <span class="kr">type</span> <span class="s1">&#39;Person&#39;</span><span class="p">.</span>
<span class="nb">Object</span> <span class="nx">literal</span> <span class="nx">may</span> <span class="nx">only</span> <span class="nx">specify</span> <span class="nx">known</span> <span class="nx">properties</span><span class="p">,</span> <span class="nx">and</span> <span class="s1">&#39;firstName&#39;</span> <span class="nx">does</span> <span class="nx">not</span> <span class="nx">exist</span> <span class="k">in</span> <span class="kr">type</span> <span class="s1">&#39;Person&#39;</span><span class="p">.</span><span class="nx">ts</span><span class="p">(</span><span class="mi">2322</span><span class="p">)</span>

<span class="nx">Property</span> <span class="s1">&#39;age&#39;</span> <span class="nx">does</span> <span class="nx">not</span> <span class="nx">exist</span> <span class="nx">on</span> <span class="kr">type</span> <span class="s1">&#39;Person&#39;</span><span class="p">.</span><span class="nx">ts</span><span class="p">(</span><span class="mi">2339</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>Because adding the <code>export {}</code> code converts the <code>program.ts</code> file into a module, in this case typeScript does not extend the type in the global environment, but redeclares the type within the current module.</p>
<p>TypeScript provides a <code>declare global</code> environment declaration statement, which can be used to add declarations to the global scope within a module.</p>
<p>To update <code>program.ts</code>, use the <code>declare global</code> statement.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">declare</span> <span class="kr">global</span> <span class="p">{</span>
    <span class="c1">// 扩展全局Person接口
</span><span class="c1"></span>    <span class="kr">interface</span> <span class="nx">Person</span> <span class="p">{</span>
        <span class="nx">email</span>: <span class="kt">string</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kr">declare</span> <span class="kr">global</span> <span class="p">{</span>
    <span class="c1">// 扩展全局Number接口
</span><span class="c1"></span>    <span class="kr">interface</span> <span class="nb">Number</span> <span class="p">{</span>
        <span class="nx">isEven</span><span class="p">()</span><span class="o">:</span> <span class="kr">boolean</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">version</span>: <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">ross</span>: <span class="kt">Person</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">firstName</span><span class="o">:</span> <span class="s1">&#39;Ross&#39;</span><span class="p">,</span>
    <span class="nx">lastName</span><span class="o">:</span> <span class="s1">&#39;Geller&#39;</span><span class="p">,</span>
    <span class="nx">age</span>: <span class="kt">29</span><span class="p">,</span>
    <span class="nx">email</span><span class="o">:</span> <span class="s1">&#39;ross@geller.com&#39;</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">isAgeEven</span> <span class="o">=</span> <span class="nx">ross</span><span class="p">.</span><span class="nx">age</span><span class="p">.</span><span class="nx">isEven</span><span class="p">();</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="s1">&#39;isAgeEven&#39;</span><span class="p">,</span> <span class="nx">isAgeEven</span> <span class="p">);</span>

<span class="kr">export</span> <span class="p">{}</span>
</code></pre></td></tr></table>
</div>
</div><p>This time typescript does not report an error and successfully extends the global type within the module.</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/typescript/">typescript</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-03/typescript-namespace/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Using namespace to encapsulate data in TypeScript</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-03/javascript-this/">
            <span class="next-text nav-default">Comprehensive analysis of the JS this keyword</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
