<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Comprehensive analysis of the JS this keyword - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="The this problem is one of the most complex problems in JavaScript, and even experienced programmers can inadvertently fall into the this keyword pit. Whenever a function is defined, this is automatically defined inside the function (even if the this keyword is not used inside the function). Function call location Before understanding this, let&amp;rsquo;s understand function call location. The call position of a function is where the function is called," /><meta name="keywords" content="javascript, this" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-03/javascript-this/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Comprehensive analysis of the JS this keyword" />
<meta property="og:description" content="The this problem is one of the most complex problems in JavaScript, and even experienced programmers can inadvertently fall into the this keyword pit. Whenever a function is defined, this is automatically defined inside the function (even if the this keyword is not used inside the function). Function call location Before understanding this, let&rsquo;s understand function call location. The call position of a function is where the function is called," />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-03/javascript-this/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-03-05T10:39:55+08:00" />
<meta property="article:modified_time" content="2022-03-05T10:39:55+08:00" />

<meta itemprop="name" content="Comprehensive analysis of the JS this keyword">
<meta itemprop="description" content="The this problem is one of the most complex problems in JavaScript, and even experienced programmers can inadvertently fall into the this keyword pit. Whenever a function is defined, this is automatically defined inside the function (even if the this keyword is not used inside the function). Function call location Before understanding this, let&rsquo;s understand function call location. The call position of a function is where the function is called,"><meta itemprop="datePublished" content="2022-03-05T10:39:55+08:00" />
<meta itemprop="dateModified" content="2022-03-05T10:39:55+08:00" />
<meta itemprop="wordCount" content="1536">
<meta itemprop="keywords" content="javascript," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Comprehensive analysis of the JS this keyword"/>
<meta name="twitter:description" content="The this problem is one of the most complex problems in JavaScript, and even experienced programmers can inadvertently fall into the this keyword pit. Whenever a function is defined, this is automatically defined inside the function (even if the this keyword is not used inside the function). Function call location Before understanding this, let&rsquo;s understand function call location. The call position of a function is where the function is called,"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Comprehensive analysis of the JS this keyword</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-03-05 10:39:55 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 1536 words </span>
          <span class="more-meta"> 4 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#function-call-location">Function call location</a></li>
        <li><a href="#binding-rules">Binding rules</a>
          <ul>
            <li><a href="#default-binding">Default Binding</a></li>
            <li><a href="#implicit-binding">Implicit binding</a></li>
            <li><a href="#show-bindings">Show bindings</a></li>
            <li><a href="#new-binding">new binding</a></li>
          </ul>
        </li>
        <li><a href="#complete-steps">Complete steps</a></li>
        <li><a href="#exceptions">Exceptions</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>The <code>this</code> problem is one of the most complex problems in JavaScript, and even experienced programmers can inadvertently fall into the <code>this</code> keyword pit. Whenever a function is defined, <code>this</code> is automatically defined inside the function (even if the <code>this</code> keyword is not used inside the function).</p>
<h2 id="function-call-location">Function call location</h2>
<p>Before understanding <code>this</code>, let&rsquo;s understand <strong>function call location</strong>. The <strong>call position of a function is where the function is called, not where it is declared</strong>. In order to understand call location, it is important to analyze a function&rsquo;s <strong>call stack</strong> , which is a chain of function executions, to understand the call stack and call location by following a few examples.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js">    <span class="kd">function</span> <span class="nx">f1</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// 当前调用栈：f1
</span><span class="c1"></span>
        <span class="nx">f2</span><span class="p">();</span> <span class="c1">// f2的调用位置
</span><span class="c1"></span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;f1&#34;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">f2</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// 当前调用栈为 f1 -- &gt;f2
</span><span class="c1"></span>
        <span class="nx">f3</span><span class="p">();</span> <span class="c1">// f3的调用位置
</span><span class="c1"></span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;f2&#34;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">f3</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// 当前调用栈为 f1 --&gt; f2 --&gt; f3
</span><span class="c1"></span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;f3&#34;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">f1</span><span class="p">();</span>
</code></pre></td></tr></table>
</div>
</div><p>We define three functions <code>f1</code>, <code>f2</code> and <code>f3</code>, execute <code>f1()</code>, because <code>f2</code> is called inside <code>f1</code>, and <code>f3</code> is called inside <code>f2</code>, so the program will execute <code>f2()</code> and <code>f3()</code> one after another, the call stack is f1 when executing f1, when executing <code>f2</code>, the call stack is <code>f1</code> &ndash;&gt; <code>f2</code>, when executing <code>f3</code>, the call stack is <code>f1 --&gt; f2 --&gt; f3</code>, so the call stack is similar to a single chain table, from the head of the table to the end of the table in order of execution.</p>
<p>Some debugging tools have a special call stack panel that shows the call stack of the current program execution. In Google Chrome, you can press <code>F12</code> to open Developer Tools and switch to the <code>Sources</code> page, you can see the <code>call stack</code> panel, which will show the call stack when the program is executed.</p>
<h2 id="binding-rules">Binding rules</h2>
<p>Below, I have summarized four binding rules for <code>this</code>. Before applying the following rules, you need to analyze the call stack to find where the function is called, and then judge to apply one of the four rules below.</p>
<h3 id="default-binding">Default Binding</h3>
<p>This is the default rule for <code>this</code> binding, which is used when no other rule can be applied.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">f</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="nx">f</span><span class="p">();</span> <span class="c1">// 输出：2
</span></code></pre></td></tr></table>
</div>
</div><p>A variable declared in a global scope in JavaScript is a property of the same name of the global object. In the browser environment, this global object is <code>window</code>, so <code>var a = 2</code> is equivalent to <code>window.a = 2</code>.</p>
<p>When using default binding, <code>this</code> is bound to the global object. In the above example, when the function <code>f()</code> is executed, <code>this</code> is <strong>default bound</strong> to the global object, i.e., <code>this</code> is pointing to the global object, so the output is 2.</p>
<p>Note that when the program is declared <code>&quot;use strict&quot;</code>, the global object cannot be used for default binding.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">f</span><span class="p">()</span> <span class="p">{</span>
    <span class="s2">&#34;use strict&#34;</span><span class="p">;</span>

    <span class="c1">// 此时this绑定到undefined
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="nx">f</span><span class="p">();</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Note: Try to use strict patterns in your code, non-strict patterns tend to write code that is difficult to maintain. And don&rsquo;t use a mix of strict and non-strict patterns.</p>
</blockquote>
<h3 id="implicit-binding">Implicit binding</h3>
<p>When a function is executed, it belongs to some object Object, then <code>this</code> is bound to that object at that time.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">f</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">a</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="nx">f</span><span class="o">:</span> <span class="nx">f</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="nx">obj</span><span class="p">.</span><span class="nx">f</span><span class="p">();</span> <span class="c1">// 输出：3
</span></code></pre></td></tr></table>
</div>
</div><p>Although the function <code>f</code> is defined in the global scope, it is added to obj as a reference, and when <code>obj.f()</code> is executed, <code>f</code> &lsquo;belongs&rsquo; to <code>obj</code>, so the output is 3.</p>
<p>Change the above example a bit.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">a</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="nx">f</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">f</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="nx">f</span><span class="p">();</span> <span class="c1">// 输出：2
</span></code></pre></td></tr></table>
</div>
</div><p>At this point, the output is 2. Why? Because strictly speaking functions do not belong to any one object, the <code>obj.f</code> and <code>f</code> in the above example are just a reference to a function, so <code>f</code> and <code>obj.f</code> are not directly related, just the same function referenced, so the execution of <code>f()</code>, at this time the execution environment in the global scope, will automatically apply the default binding rules to bind <code>this</code> to the global object. The second example, a more common this binding problem, is called <strong>implicit loss of this</strong> .</p>
<p>The problem of implicit loss is often encountered in callback functions.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">f1</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">f2</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// f引用的是f1
</span><span class="c1"></span>    <span class="nx">f</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">a</span><span class="o">:</span> <span class="s2">&#34;obj&#34;</span><span class="p">,</span>
    <span class="nx">f</span><span class="o">:</span> <span class="nx">f1</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="s2">&#34;global&#34;</span>

<span class="nx">f2</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">f</span><span class="p">);</span> <span class="c1">// 输出：&#34;global&#34;
</span></code></pre></td></tr></table>
</div>
</div><p>When executing <code>f2(obj.f)</code>, you actually try to assign <code>f1</code> to the argument <code>f</code> of <code>f2</code>, which is actually just a reference to the function, so the result is <code>&quot;global&quot;</code>.</p>
<h3 id="show-bindings">Show bindings</h3>
<p>The bind this value can be displayed with the <code>call</code>, <code>apply</code> and <code>bind</code> functions.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">f</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">a</span><span class="o">:</span> <span class="mi">2</span>
<span class="p">};</span>
<span class="nx">f</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span> <span class="c1">// 输出：2
</span></code></pre></td></tr></table>
</div>
</div><p>With the <code>call</code> method, the display specifies that this is bound to the <code>obj</code> object, and the output is 2. Multiple arguments can be passed to <code>call</code>, with the first argument specifying the <code>this</code> binding object and the subsequent arguments specifying the arguments needed to execute the function.</p>
<p>The <code>apply</code> method is similar to <code>call</code>, except that the <code>call</code> method takes a list of arguments, while the <code>apply</code> method takes an array of multiple arguments.</p>
<p>The <code>bind</code> method creates a new function, and when <code>bind</code> is called, <code>this</code> of this new function is specified as the first argument of <code>bind</code>, and the rest of the arguments will be used as arguments of the new function for the call.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">module</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">x</span><span class="o">:</span> <span class="mi">42</span><span class="p">,</span>
    <span class="nx">getX</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kr">const</span> <span class="nx">unboundGetX</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">getX</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">unboundGetX</span><span class="p">());</span> <span class="c1">// The function gets invoked at the global scope
</span><span class="c1">// expected output: undefined
</span><span class="c1"></span>
<span class="kr">const</span> <span class="nx">boundGetX</span> <span class="o">=</span> <span class="nx">unboundGetX</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">module</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">boundGetX</span><span class="p">());</span>
<span class="c1">// expected output: 42
</span></code></pre></td></tr></table>
</div>
</div><h3 id="new-binding">new binding</h3>
<p>If you haven&rsquo;t worked in a language other than JavaScript, you&rsquo;ll probably rarely use the <code>new</code> keyword, because there are no actual <code>classes</code> in JavaScript (classes in Es6 are actually functions at the bottom). new<code>operator, they do not belong to a class, nor do they instantiate a class, they are just ordinary functions that are called by the</code>new` operator.</p>
<p>Calling a function (constructor) with <code>new</code> will automatically perform the following steps.</p>
<ol>
<li>Create a new empty object as an instance of the object to be returned.</li>
<li>Prototype the empty object to the function&rsquo;s <code>prototype</code> property.</li>
<li>Bind the empty object to the <code>this</code> keyword inside the function.</li>
<li>Execute the code inside the function (usually by assigning a value to the this attribute and initializing the object).</li>
</ol>
<p>The third step above, is the new binding.</p>
<h2 id="complete-steps">Complete steps</h2>
<p>After describing the four binding rules, the next step is to describe the complete steps to determine the priority of each method.</p>
<ol>
<li>new binding, if the function is called in <code>new</code>, then <code>this</code> is bound to the newly created object.</li>
<li>display binding, if the function is called in <code>call</code>, <code>apply</code> or <code>bind</code>, then <code>this</code> binds to the specified object.</li>
<li>implicit binding, if the function is called in some context object, if yes, then <code>this</code> is bound to that context object. 4.</li>
<li>If none of the above, the default binding is used, which is <code>undefined</code> in strict mode and the global object in non-strict mode.</li>
</ol>
<h2 id="exceptions">Exceptions</h2>
<p>There are always exceptions to everything, and here is one of the more common exceptions - the arrow function <code>=&gt;</code>.</p>
<p>Instead of using the four binding rules of <code>this</code>, arrow functions determine who to bind <code>this</code> to based on the outer (function or global) scope.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">myObject</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">myMethod</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">myObject</span><span class="p">.</span><span class="nx">myMethod</span><span class="p">();</span> <span class="c1">// this === global object
</span></code></pre></td></tr></table>
</div>
</div><p>Why is the this of the above <code>myMethod()</code> execution a global object? Because the this of an arrow function inherits from its outer (function or global) scope.</p>
<p>Continue with an example.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">myObject</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">myArrowFunction</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">myMethod</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">myArrowFunction</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">)};</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">myObject</span><span class="p">.</span><span class="nx">myMethod</span><span class="p">();</span> <span class="c1">// this === myObject
</span><span class="c1"></span>
<span class="nx">myObject</span><span class="p">.</span><span class="nx">myArrowFunctoin</span><span class="p">();</span> <span class="c1">// this === myObject
</span><span class="c1"></span>
<span class="kr">const</span> <span class="nx">myArrowFunction</span> <span class="o">=</span> <span class="nx">myObject</span><span class="p">.</span><span class="nx">myArrowFunction</span><span class="p">;</span>
<span class="nx">myArrowFunction</span><span class="p">();</span> <span class="c1">// this === myObject
</span></code></pre></td></tr></table>
</div>
</div>
    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/javascript/">javascript</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-03/typescript-declarations/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">The Complete Guide to TypeScirpt Type Declarations</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-03/web-workers-simple-introduction/">
            <span class="next-text nav-default">A brief introduction to Web Workers</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
