<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Find and Replace in Vim/Vi - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="This article describes how to find and replace text in Vim/Vi.
Vim is the most popular command line text editor. It comes pre-installed on macOS and most Linux distributions. Finding and replacing text in Vim is very easy.
Basic Find and Replace In Vim, you can use the :substitute (:s) command to find and replace text.
To run commands in Vim, you must be in normal mode, which is the default mode when you start the editor." /><meta name="keywords" content="vim, find, Replace" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-03/vim-find-replace/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Find and Replace in Vim/Vi" />
<meta property="og:description" content="This article describes how to find and replace text in Vim/Vi.
Vim is the most popular command line text editor. It comes pre-installed on macOS and most Linux distributions. Finding and replacing text in Vim is very easy.
Basic Find and Replace In Vim, you can use the :substitute (:s) command to find and replace text.
To run commands in Vim, you must be in normal mode, which is the default mode when you start the editor." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-03/vim-find-replace/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-03-01T09:18:16+08:00" />
<meta property="article:modified_time" content="2022-03-01T09:18:16+08:00" />

<meta itemprop="name" content="Find and Replace in Vim/Vi">
<meta itemprop="description" content="This article describes how to find and replace text in Vim/Vi.
Vim is the most popular command line text editor. It comes pre-installed on macOS and most Linux distributions. Finding and replacing text in Vim is very easy.
Basic Find and Replace In Vim, you can use the :substitute (:s) command to find and replace text.
To run commands in Vim, you must be in normal mode, which is the default mode when you start the editor."><meta itemprop="datePublished" content="2022-03-01T09:18:16+08:00" />
<meta itemprop="dateModified" content="2022-03-01T09:18:16+08:00" />
<meta itemprop="wordCount" content="909">
<meta itemprop="keywords" content="vim," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Find and Replace in Vim/Vi"/>
<meta name="twitter:description" content="This article describes how to find and replace text in Vim/Vi.
Vim is the most popular command line text editor. It comes pre-installed on macOS and most Linux distributions. Finding and replacing text in Vim is very easy.
Basic Find and Replace In Vim, you can use the :substitute (:s) command to find and replace text.
To run commands in Vim, you must be in normal mode, which is the default mode when you start the editor."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Find and Replace in Vim/Vi</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-03-01 09:18:16 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 909 words </span>
          <span class="more-meta"> 5 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#basic-find-and-replace">Basic Find and Replace</a></li>
        <li><a href="#case-sensitive">Case-sensitive</a></li>
        <li><a href="#search-range">Search range</a></li>
        <li><a href="#replace-whole-words">Replace whole words</a></li>
        <li><a href="#alternate-history">Alternate History</a></li>
        <li><a href="#example">Example</a></li>
        <li><a href="#conclusion">Conclusion</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/03/01/6e981843ad5b40e0b2dc6cedf87a09f1.png" alt="vim"></p>
<p>This article describes how to find and replace text in Vim/Vi.</p>
<p>Vim is the most popular command line text editor. It comes pre-installed on macOS and most Linux distributions. Finding and replacing text in Vim is very easy.</p>
<h2 id="basic-find-and-replace">Basic Find and Replace</h2>
<p>In Vim, you can use the <code>:substitute</code> (<code>:s</code>) command to find and replace text.</p>
<p>To run commands in Vim, you must be in normal mode, which is the default mode when you start the editor. To return to normal mode from any other mode, simply press the &ldquo;Esc&rdquo; key.</p>
<p>The general form of the replace command is as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">:[range]s/{pattern}/{string}/[flags] [count]
</code></pre></td></tr></table>
</div>
</div><p>This command searches for <code>{pattern}</code> in each line of <code>[range]</code> and replaces it with <code>{string}</code>. is a positive integer multiplied by the command <code>[count]</code>.</p>
<p>If <code>[range]</code> and <code>[count]</code> are not given, only the <code>pattern</code> found in the current line is replaced. The current line is the line where the cursor is located.</p>
<p>For example, to search for the first match of the string <code>foo</code> in the current line and replace it with <code>bar</code>, you would use the following command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">:s/foo/bar/
</code></pre></td></tr></table>
</div>
</div><p>To replace all occurrences of the search pattern in the current line, add the <code>g</code> flag.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">:s/foo/bar/g
</code></pre></td></tr></table>
</div>
</div><p>To search and replace all matching patterns in the entire file, use the percentage character <code>%</code> as <code>range</code>. This character indicates the range from the first line of the file to the last line.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">:%s/foo/bar/g
</code></pre></td></tr></table>
</div>
</div><p>If the <code>{string}</code> part is omitted, it will be treated as an empty string and the matching pattern will be deleted. The following command removes all matches for the string &ldquo;foo&rdquo; in the current line.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">:s/foo//g
</code></pre></td></tr></table>
</div>
</div><p>In addition to the slash character (<code>/</code>), you can use any other non-alphanumeric single-byte character as a separator. This option is useful when you include the &quot; / &quot; character in the search pattern or when replacing strings.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">:s<span class="p">|</span>foo<span class="p">|</span>bar<span class="p">|</span>
</code></pre></td></tr></table>
</div>
</div><p>To confirm each replacement, use the <code>c</code> flag.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">:s/foo/bar/gc
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">replace with bar <span class="o">(</span>y/n/a/q/l/^E/^Y<span class="o">)</span>?
</code></pre></td></tr></table>
</div>
</div><p>Press <code>y</code> to replace the match, or press <code>l</code> to replace the match and exit. Press <code>n</code> to skip, <code>q</code> or <code>Esc</code> to exit. The <code>a</code> option replaces the match and all remaining matches. To scroll down the screen, use <code>CTRL+Y</code> and to scroll up, use <code>CTRL+E</code>.</p>
<p>You can also use regular expressions as search mode. The following command replaces all lines starting with &ldquo;foo&rdquo; with &ldquo;Vim is the best&rdquo;.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">:%s/^foo.*/Vim is the best/gc
</code></pre></td></tr></table>
</div>
</div><p>The <code>^</code> symbol matches the beginning of the line, and <code>. *</code> matches any number of characters.</p>
<h2 id="case-sensitive">Case-sensitive</h2>
<p>By default, the search operation is case-sensitive; a search for <code>FOO</code> will not match <code>Foo</code>.</p>
<p>To ignore the case of the search pattern, use the <code>i</code> flag.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">:s/Foo/bar/gi
</code></pre></td></tr></table>
</div>
</div><p>Another way to force case ignoring is to append <code>\c</code> to the search pattern. For example, <code>/Linux\c</code> performs a case ignored search.</p>
<p>If you have changed the default case setting and want to perform a case-sensitive search, use the <code>I</code> flag.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">:s/foo/bar/gi
</code></pre></td></tr></table>
</div>
</div><p>An uppercase <code>\C</code> after the pattern will also force a case-matching search.</p>
<h2 id="search-range">Search range</h2>
<p>When no range is specified, the alternative command runs only on the current line.</p>
<p>The range can be one line or a range between two lines. Line specifiers are separated by the <code>,</code> or <code>;</code> characters. A range can be specified using absolute line numbers or special symbols.</p>
<p>For example, to replace all occurrences of <code>foo' with</code> bar' in all lines from line 3 to line 10, you would use the following command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">:3,10s/foo/bar/g
</code></pre></td></tr></table>
</div>
</div><p>The range includes all content, which means that the range includes the first and last row.</p>
<p>The dot <code>.</code> character indicates the current line, and <code>$</code> - the dollar sign indicates the last line. Replace <code>foo</code> in all lines from the current line to the last line.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">:.,$s/foo/bar/
</code></pre></td></tr></table>
</div>
</div><p>You can also use the &quot; +&quot; or &ldquo;-&rdquo; symbol to set the line descriptor followed by the number added to or subtracted from the previous line number. If the number after the symbol is omitted, the default is 1.</p>
<p>For example, to replace each &ldquo;foo&rdquo; with &ldquo;bar&rdquo; starting from the current line and the next four lines, enter the following command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">:.,+4s/foo/bar/g
</code></pre></td></tr></table>
</div>
</div><h2 id="replace-whole-words">Replace whole words</h2>
<p>The replace command finds the pattern as a string, not as an entire word. For example, if you are searching for &ldquo;gnu&rdquo;, the search results match &ldquo;gnu&rdquo; embedded in a larger word (such as &ldquo;cygnus&rdquo; or &quot; magnum&quot;) in a larger word.</p>
<p>To search for an entire word, type <code>\&lt;</code> to mark the beginning of the word, enter a search pattern, and type <code>\&gt;</code> to mark the end of the word.</p>
<p>For example, to search for the word &ldquo;foo&rdquo;, you would use <code>\&lt;foo\&gt;</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">:s/\&lt;foo\&gt;/bar/
</code></pre></td></tr></table>
</div>
</div><h2 id="alternate-history">Alternate History</h2>
<p>Vim keeps track of all the commands you have run in the current session. To browse the history to find previous alternative commands, type <code>:s</code> and use the up/down arrow keys to find previous alternative actions. To run a command, simply press <code>Enter</code>. You can also edit the command before executing the action.</p>
<h2 id="example">Example</h2>
<p>Comment lines (add <code>#</code> in front of the line) from 5 to 20.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">:5,20s/^/#/
</code></pre></td></tr></table>
</div>
</div><p>Uncomment lines 5 through 20 to restore the previous changes.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">:5,20s/^#//
</code></pre></td></tr></table>
</div>
</div><p>Replace all instances of &ldquo;Apple&rdquo;, &ldquo;Orange&rdquo; and &ldquo;Mango&rdquo; with &ldquo;Fruit.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">:%s/apple\|orange\|mango/fruit/g
</code></pre></td></tr></table>
</div>
</div><p>Delete trailing spaces at the end of each line.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">:%s/\s\+$//e
</code></pre></td></tr></table>
</div>
</div><h2 id="conclusion">Conclusion</h2>
<p>Search and replace is a powerful feature of Vim that allows you to change text quickly.</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/vim/">vim</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-03/typescript-dependency-injection-containers/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Top 5 Typescript Dependency Injection Container</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-02/inherits-source-code/">
            <span class="next-text nav-default">Who inherits the code after the death of an open source author?</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
