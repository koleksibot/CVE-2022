<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Top 5 Typescript Dependency Injection Container - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="The original JavaScript environment lacked a static type system and had little support for containerized dependency injection, making the code I wrote prone to obvious errors and nearly impossible to test.
TypeScript&amp;rsquo;s compile-time type system changes all that, allowing continuous development of complex projects. It has brought back design patterns such as dependency injection, proper typing and passing of dependencies during object construction, which promotes more structured programming and helps write tests without the need for patching." /><meta name="keywords" content="typescript, Dependency, Injection, Containers" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-03/typescript-dependency-injection-containers/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Top 5 Typescript Dependency Injection Container" />
<meta property="og:description" content="The original JavaScript environment lacked a static type system and had little support for containerized dependency injection, making the code I wrote prone to obvious errors and nearly impossible to test.
TypeScript&rsquo;s compile-time type system changes all that, allowing continuous development of complex projects. It has brought back design patterns such as dependency injection, proper typing and passing of dependencies during object construction, which promotes more structured programming and helps write tests without the need for patching." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-03/typescript-dependency-injection-containers/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-03-01T09:30:16+08:00" />
<meta property="article:modified_time" content="2022-03-01T09:30:16+08:00" />

<meta itemprop="name" content="Top 5 Typescript Dependency Injection Container">
<meta itemprop="description" content="The original JavaScript environment lacked a static type system and had little support for containerized dependency injection, making the code I wrote prone to obvious errors and nearly impossible to test.
TypeScript&rsquo;s compile-time type system changes all that, allowing continuous development of complex projects. It has brought back design patterns such as dependency injection, proper typing and passing of dependencies during object construction, which promotes more structured programming and helps write tests without the need for patching."><meta itemprop="datePublished" content="2022-03-01T09:30:16+08:00" />
<meta itemprop="dateModified" content="2022-03-01T09:30:16+08:00" />
<meta itemprop="wordCount" content="2356">
<meta itemprop="keywords" content="typescript," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Top 5 Typescript Dependency Injection Container"/>
<meta name="twitter:description" content="The original JavaScript environment lacked a static type system and had little support for containerized dependency injection, making the code I wrote prone to obvious errors and nearly impossible to test.
TypeScript&rsquo;s compile-time type system changes all that, allowing continuous development of complex projects. It has brought back design patterns such as dependency injection, proper typing and passing of dependencies during object construction, which promotes more structured programming and helps write tests without the need for patching."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Top 5 Typescript Dependency Injection Container</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-03-01 09:30:16 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 2356 words </span>
          <span class="more-meta"> 12 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#prerequisites">Prerequisites</a></li>
        <li><a href="#explicitly-injecting-dependencies">Explicitly injecting dependencies</a>
          <ul>
            <li><a href="#dependency-graph">Dependency Graph</a></li>
          </ul>
        </li>
        <li><a href="#dependency-injection-container">Dependency Injection Container</a></li>
        <li><a href="#type-binding">Type binding</a></li>
        <li><a href="#resolving-dependencies">Resolving Dependencies</a></li>
        <li><a href="#dependency-injection-containers-overview">Dependency Injection Containers Overview</a>
          <ul>
            <li><a href="#typed-inject"><strong>Typed Inject</strong></a></li>
            <li><a href="#inversifyjs"><strong>InversifyJS</strong></a></li>
            <li><a href="#typedi"><strong>TypeDI</strong></a></li>
            <li><a href="#nestjs"><strong>NestJS</strong></a></li>
          </ul>
        </li>
        <li><a href="#summary">Summary</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/03/01/66c39270b57b42ba8792fc357870bd8e.png" alt="typescript DI"></p>
<p>The original JavaScript environment lacked a static type system and had little support for containerized dependency injection, making the code I wrote prone to obvious errors and nearly impossible to test.</p>
<p>TypeScript&rsquo;s compile-time type system changes all that, allowing continuous development of complex projects. It has brought back design patterns such as dependency injection, proper typing and passing of dependencies during object construction, which promotes more structured programming and helps write tests without the need for patching.</p>
<p>In this article, we&rsquo;ll review five containerized dependency injection tools for writing dependency injection systems in TypeScript!</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>To study this article, you should be familiar with the following concepts.</p>
<ul>
<li>Inversion of Control (IoC): a design pattern that states that frameworks should call user-state code instead of user-state code calling library code</li>
<li>Dependency Injection (DI): a variant of IoC in which objects receive other objects as dependencies instead of constructors or setters</li>
<li>Decorators: functions that support composition and can be wrapped around classes, functions, methods, accessors, properties, and parameters</li>
<li>Decorator metadata: a way to store language structure configuration at runtime by using decorator definition targets</li>
</ul>
<h2 id="explicitly-injecting-dependencies">Explicitly injecting dependencies</h2>
<p>Interfaces allow developers to separate abstract requirements from the actual implementation, which is very helpful when writing tests. Note that interfaces only define functionality, not dependencies. Finally, interfaces do not leave runtime traces, but classes do.</p>
<p>Let&rsquo;s consider three example interfaces.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">Logger</span> <span class="p">{</span>
    <span class="nx">log</span><span class="o">:</span> <span class="p">(</span><span class="nx">s</span>: <span class="kt">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="kr">interface</span> <span class="nx">FileSystem</span><span class="p">&lt;</span><span class="nt">D</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="nx">createFile</span><span class="p">(</span><span class="nx">descriptor</span>: <span class="kt">D</span><span class="p">,</span> <span class="nx">buffer</span>: <span class="kt">Buffer</span><span class="p">)</span><span class="o">:</span> <span class="nx">Promise</span><span class="p">&lt;</span><span class="nt">void</span><span class="p">&gt;;</span>
    <span class="nx">readFile</span><span class="p">(</span><span class="nx">descriptor</span>: <span class="kt">D</span><span class="p">)</span><span class="o">:</span> <span class="nx">Promise</span><span class="p">&lt;</span><span class="nt">Buffer</span><span class="p">&gt;;</span>
    <span class="nx">updateFile</span><span class="p">(</span><span class="nx">descriptor</span>: <span class="kt">D</span><span class="p">,</span> <span class="nx">buffer</span>: <span class="kt">Buffer</span><span class="p">)</span><span class="o">:</span> <span class="nx">Promise</span><span class="p">&lt;</span><span class="nt">void</span><span class="p">&gt;;</span>
    <span class="nx">deleteFile</span><span class="p">(</span><span class="nx">descriptor</span>: <span class="kt">D</span><span class="p">)</span><span class="o">:</span> <span class="nx">Promise</span><span class="p">&lt;</span><span class="nt">void</span><span class="p">&gt;;</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="kr">interface</span> <span class="nx">SettingsService</span> <span class="p">{</span>
    <span class="nx">upsertSettings</span><span class="p">(</span><span class="nx">buffer</span>: <span class="kt">Buffer</span><span class="p">)</span><span class="o">:</span> <span class="nx">Promise</span><span class="p">&lt;</span><span class="nt">void</span><span class="p">&gt;;</span>
    <span class="nx">readSettings</span><span class="p">()</span><span class="o">:</span> <span class="nx">Promise</span><span class="p">&lt;</span><span class="nt">Buffer</span><span class="p">&gt;;</span>
    <span class="nx">deleteSettings</span><span class="p">()</span><span class="o">:</span> <span class="nx">Promise</span><span class="p">&lt;</span><span class="nt">void</span><span class="p">&gt;;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>The <code>Logger</code> interface abstracts synchronous logging, while the generic <code>FileSystem</code> interface abstracts file CRUD operations. Finally, the <code>SettingsService</code> interface provides a business logic abstraction for settings management.</p>
<p>We can infer that any implementation of <code>SettingsService</code> depends on some implementation of the <code>Logger</code> and <code>FileSystem</code> interfaces. For example, we could create a <code>ConsoleLogger</code> class to print logs to console output, a <code>LocalFileSystem</code> to manage files on the local disk, or a <code>SettingsTxtService</code> class to write application settings to a file. <code>settings.txt</code></p>
<p>Dependencies can be passed explicitly using special functions.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">export</span> <span class="kr">class</span> <span class="nx">ConsoleLogger</span> <span class="kr">implements</span> <span class="nx">Logger</span> <span class="p">{</span>
    <span class="c1">// ...
</span><span class="c1"></span><span class="p">}</span>

<span class="kr">export</span> <span class="kr">class</span> <span class="nx">LocalFileSystem</span> <span class="kr">implements</span> <span class="nx">FileSystem</span><span class="p">&lt;</span><span class="nt">string</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="c1">// ...
</span><span class="c1"></span><span class="p">}</span>

<span class="kr">export</span> <span class="kr">class</span> <span class="nx">SettingsTxtService</span> <span class="kr">implements</span> <span class="nx">SettingsService</span> <span class="p">{</span>
    <span class="kr">protected</span> <span class="nx">logger</span><span class="o">!:</span> <span class="nx">Logger</span><span class="p">;</span>
    <span class="kr">protected</span> <span class="nx">fileSystem</span><span class="o">!:</span> <span class="nx">FileSystem</span><span class="p">&lt;</span><span class="nt">string</span><span class="p">&gt;;</span>

    <span class="kr">public</span> <span class="nx">setLogger</span><span class="p">(</span><span class="nx">logger</span>: <span class="kt">SettingsTxtService</span><span class="p">[</span><span class="s2">&#34;logger&#34;</span><span class="p">])</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">logger</span> <span class="o">=</span> <span class="nx">logger</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kr">public</span> <span class="nx">setFileSystem</span><span class="p">(</span><span class="nx">fileSystem</span>: <span class="kt">SettingsTxtService</span><span class="p">[</span><span class="s2">&#34;fileSystem&#34;</span><span class="p">])</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">fileSystem</span> <span class="o">=</span> <span class="nx">fileSystem</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// ...
</span><span class="c1"></span><span class="p">}</span>

<span class="kr">const</span> <span class="nx">logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ConsoleLogger</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">fileSystem</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">LocalFileSystem</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">settingsService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SettingsTxtService</span><span class="p">();</span>

<span class="nx">settingsService</span><span class="p">.</span><span class="nx">setLogger</span><span class="p">(</span><span class="nx">logger</span><span class="p">);</span>
<span class="nx">settingsService</span><span class="p">.</span><span class="nx">setFileSystem</span><span class="p">(</span><span class="nx">fileSystem</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p><code>SettingsTxtService</code> This class does not depend on <code>ConsoleLogger</code> or a similar implementation of <code>LocalFileSystem</code>. Instead, it depends on the above interfaces <code>Logger</code> and . <code>FileSystem&lt;string&gt;</code>.</p>
<p>However, explicitly managing dependencies can cause problems for every DI container, since the interface does not exist at runtime.</p>
<h3 id="dependency-graph">Dependency Graph</h3>
<p>Most injectable components of any system depend on other components. You should always be able to graph them, and the graph of a well-thought-out system will be loop-free. In my experience, circular dependencies are a code error, not a pattern.</p>
<p>The more complex the project, the more complex the dependency graph will be. In other words, managing dependencies explicitly does not scale well. We can solve this problem by automating dependency management, which makes it implicit. For this, we need a DI container.</p>
<h2 id="dependency-injection-container">Dependency Injection Container</h2>
<p>The DI container requires the following.</p>
<ul>
<li><code>ConsoleLogger</code> class association with the <code>Logger</code> interface</li>
<li>the association of the <code>LocalFileSystem</code> class with the interface <code>FileSystem&lt;string&gt;</code></li>
<li>Correlation of <code>SettingsTxtService</code> on both <code>Logger</code> and interface <code>FileSystem&lt;string&gt;</code></li>
</ul>
<h2 id="type-binding">Type binding</h2>
<p>Binding a specific type or class to a specific interface at runtime can happen in two ways.</p>
<ul>
<li>specifying the name or token to bind the implementation to it</li>
<li>elevating the interface to an abstract class and allowing the latter to leave a runtime trace</li>
</ul>
<p>For example, we can use the container&rsquo;s API to explicitly declare <code>ConsoleLogger</code> that the class is associated with a <code>logger</code> token. Alternatively, we can use a class-level decorator that accepts the name of the token as its argument. The decorator will then use the container&rsquo;s API to register the binding.</p>
<p>If the <code>Logger</code> interface becomes an abstract class, we can apply class-level decorators to it and all its derived classes. When doing so, the decorator will call the container&rsquo;s API to keep track of the runtime associations.</p>
<h2 id="resolving-dependencies">Resolving Dependencies</h2>
<p>Dependencies can be resolved at runtime in two ways.</p>
<ul>
<li>Passing all dependencies during object construction</li>
<li>Passing all dependencies after object construction using setter and getter</li>
</ul>
<p>We will focus on the first option. the DI container is responsible for instantiating and maintaining the lifecycle of each component. Therefore, the container needs to know where to inject dependencies.</p>
<p>We have two ways to provide this information.</p>
<ol>
<li>using a constructor parameter decorator that can call the DI container API</li>
<li>use the DI container&rsquo;s API directly to inform it of the dependencies</li>
</ol>
<p>Although decorators and metadata (such as <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect">Reflect API</a>) are experimental features, they reduce the overhead when using the DI containers to reduce overhead.</p>
<h2 id="dependency-injection-containers-overview">Dependency Injection Containers Overview</h2>
<p>Now, let&rsquo;s look at five popular dependency injection containers. Note that the order used in this tutorial reflects how DI evolved as a pattern when it was applied to the TypeScript community.</p>
<h3 id="typed-inject"><strong>Typed Inject</strong></h3>
<p>The focus of the <strong>Typed Inject</strong> project is type safety and explicitness. It uses neither decorators nor decorator metadata, opting instead to declare dependencies manually. It allows the existence of multiple DI containers and the dependencies are qualified as single instance or transient objects.</p>
<p>The following code snippet outlines the conversion from contextual DI (shown in the previous code snippet) to typed injected DI.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">export</span> <span class="kr">class</span> <span class="nx">TypedInjectLogger</span> <span class="kr">implements</span> <span class="nx">Logger</span> <span class="p">{</span>
    <span class="c1">// ...
</span><span class="c1"></span><span class="p">}</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">TypedInjectFileSystem</span> <span class="kr">implements</span> <span class="nx">FileSystem</span><span class="p">&lt;</span><span class="nt">string</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="c1">// ...
</span><span class="c1"></span><span class="p">}</span>

<span class="kr">export</span> <span class="kr">class</span> <span class="nx">TypedInjectSettingsTxtService</span> <span class="kr">extends</span> <span class="nx">SettingsTxtService</span> <span class="p">{</span>
    <span class="kr">public</span> <span class="kr">static</span> <span class="nx">inject</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;logger&#34;</span><span class="p">,</span> <span class="s2">&#34;fileSystem&#34;</span><span class="p">]</span> <span class="kr">as</span> <span class="kr">const</span><span class="p">;</span>

    <span class="kr">constructor</span><span class="p">(</span>
        <span class="kr">protected</span> <span class="nx">logger</span>: <span class="kt">Logger</span><span class="p">,</span>
        <span class="kr">protected</span> <span class="nx">fileSystem</span>: <span class="kt">FileSystem</span><span class="p">&lt;</span><span class="nt">string</span><span class="p">&gt;,</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>The <code>TypedInjectLogger</code> and <code>TypedInjectFileSystem</code> classes serve as concrete implementations of the required interfaces. Type binding is defined at the class level by listing object dependencies using the <code>inject</code> static variable.</p>
<p>The following code snippet demonstrates all the major container operations in the Typed Inject environment.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">const</span> <span class="nx">appInjector</span> <span class="o">=</span> <span class="nx">createInjector</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">provideClass</span><span class="p">(</span><span class="s2">&#34;logger&#34;</span><span class="p">,</span> <span class="nx">TypedInjectLogger</span><span class="p">,</span> <span class="nx">Scope</span><span class="p">.</span><span class="nx">Singleton</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">provideClass</span><span class="p">(</span><span class="s2">&#34;fileSystem&#34;</span><span class="p">,</span> <span class="nx">TypedInjectFileSystem</span><span class="p">,</span> <span class="nx">Scope</span><span class="p">.</span><span class="nx">Singleton</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">logger</span> <span class="o">=</span> <span class="nx">appInjector</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s2">&#34;logger&#34;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">fileSystem</span> <span class="o">=</span> <span class="nx">appInjector</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s2">&#34;fileSystem&#34;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">settingsService</span> <span class="o">=</span> <span class="nx">appInjector</span><span class="p">.</span><span class="nx">injectClass</span><span class="p">(</span><span class="nx">TypedInjectSettingsTxtService</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p>Use the <code>createInjector</code> function to instantiate the container and explicitly declare the token-to-class binding. Developers can use this <code>resolve</code> function to access instances of the provided class. The injectable classes can be obtained using this <code>injectClass</code> method.</p>
<h3 id="inversifyjs"><strong>InversifyJS</strong></h3>
<p>The <a href="https://github.com/inversify/InversifyJS">InversifyJS</a> project provides a lightweight DI container that creates application interfaces by tokenization. It uses decorators and decorator metadata for injection. However, binding the implementation to the interface still requires some manual work.</p>
<p>Dependency scoping is supported. The scope of an object can be a single instance object or a transient object, or it can be bound to a request. If necessary, developers can use separate DI containers.</p>
<p>The following code snippet demonstrates how to convert a contextual DI interface to use InversifyJS.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">TYPES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">Logger</span>: <span class="kt">Symbol.for</span><span class="p">(</span><span class="s2">&#34;Logger&#34;</span><span class="p">),</span>
    <span class="nx">FileSystem</span>: <span class="kt">Symbol.for</span><span class="p">(</span><span class="s2">&#34;FileSystem&#34;</span><span class="p">),</span>
    <span class="nx">SettingsService</span>: <span class="kt">Symbol.for</span><span class="p">(</span><span class="s2">&#34;SettingsService&#34;</span><span class="p">),</span>
<span class="p">};</span>

<span class="kd">@injectable</span><span class="p">()</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">InversifyLogger</span> <span class="kr">implements</span> <span class="nx">Logger</span> <span class="p">{</span>
    <span class="c1">// ...
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">@injectable</span><span class="p">()</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">InversifyFileSystem</span> <span class="kr">implements</span> <span class="nx">FileSystem</span><span class="p">&lt;</span><span class="nt">string</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="c1">// ...
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">@injectable</span><span class="p">()</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">InversifySettingsTxtService</span> <span class="kr">implements</span> <span class="nx">SettingsService</span> <span class="p">{</span>
    <span class="kr">constructor</span><span class="p">(</span>
        <span class="kd">@inject</span><span class="p">(</span><span class="nx">TYPES</span><span class="p">.</span><span class="nx">Logger</span><span class="p">)</span> <span class="kr">protected</span> <span class="kr">readonly</span> <span class="nx">logger</span>: <span class="kt">Logger</span><span class="p">,</span>
        <span class="kd">@inject</span><span class="p">(</span><span class="nx">TYPES</span><span class="p">.</span><span class="nx">FileSystem</span><span class="p">)</span> <span class="kr">protected</span> <span class="kr">readonly</span> <span class="nx">fileSystem</span>: <span class="kt">FileSystem</span><span class="p">&lt;</span><span class="nt">string</span><span class="p">&gt;,</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ...
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Following the <a href="https://inversify.io/">official documentation</a>, I created a mapping called <code>TYPES</code> that contains all the tokens we will use for injection later on. I implemented the necessary interfaces, and <code>@injectable</code> added class-level decorators for each interface. The arguments to the <code>InversifySettingsTxtService</code> constructor use the <code>@injectable</code> decorator to help the DI container resolve dependencies at runtime.</p>
<p>The code for the DI container is shown in the following code snippet.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">const</span> <span class="nx">container</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Container</span><span class="p">();</span>
<span class="nx">container</span><span class="p">.</span><span class="nx">bind</span><span class="p">&lt;</span><span class="nt">Logger</span><span class="p">&gt;(</span><span class="nx">TYPES</span><span class="p">.</span><span class="nx">Logger</span><span class="p">).</span><span class="nx">to</span><span class="p">(</span><span class="nx">InversifyLogger</span><span class="p">).</span><span class="nx">inSingletonScope</span><span class="p">();</span>
<span class="nx">container</span><span class="p">.</span><span class="nx">bind</span><span class="p">&lt;</span><span class="nt">FileSystem</span><span class="err">&lt;</span><span class="na">string</span><span class="p">&gt;</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">TYPES</span><span class="p">.</span><span class="nx">FileSystem</span><span class="p">).</span><span class="nx">to</span><span class="p">(</span><span class="nx">InversifyFileSystem</span><span class="p">).</span><span class="nx">inSingletonScope</span><span class="p">();</span>
<span class="nx">container</span><span class="p">.</span><span class="nx">bind</span><span class="p">&lt;</span><span class="nt">SettingsService</span><span class="p">&gt;(</span><span class="nx">TYPES</span><span class="p">.</span><span class="nx">SettingsService</span><span class="p">).</span><span class="nx">to</span><span class="p">(</span><span class="nx">InversifySettingsTxtService</span><span class="p">).</span><span class="nx">inSingletonScope</span><span class="p">();</span>

<span class="kr">const</span> <span class="nx">logger</span> <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="kr">get</span><span class="p">&lt;</span><span class="nt">InversifyLogger</span><span class="p">&gt;(</span><span class="nx">TYPES</span><span class="p">.</span><span class="nx">Logger</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">fileSystem</span> <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="kr">get</span><span class="p">&lt;</span><span class="nt">InversifyFileSystem</span><span class="p">&gt;(</span><span class="nx">TYPES</span><span class="p">.</span><span class="nx">FileSystem</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">settingsService</span> <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="kr">get</span><span class="p">&lt;</span><span class="nt">SettingsTxtService</span><span class="p">&gt;(</span><span class="nx">TYPES</span><span class="p">.</span><span class="nx">SettingsService</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p>InversifyJS uses a fluent interface pattern. the IoC container implements type binding between tokens and classes by explicitly declaring it in code. Getting an instance of a managed class requires only one call for proper conversion.</p>
<h3 id="typedi"><strong>TypeDI</strong></h3>
<p>The <a href="https://github.com/typestack/typedi">TypeDI</a> project is intended for simplicity by making use of decorated and decorated metadata. It supports single instance and transient object dependency scopes and allows the existence of multiple DI containers. You have two options for using TypeDI.</p>
<ul>
<li>Class-based injection</li>
<li>Token-based injection</li>
</ul>
<h4 id="class-based-injection"><strong>Class-based injection</strong></h4>
<p>Class-based injection allows classes to be inserted by passing interface class relationships.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kd">@Service</span><span class="p">({</span> <span class="kr">global</span><span class="o">:</span> <span class="kc">true</span> <span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">TypeDiLogger</span> <span class="kr">implements</span> <span class="nx">Logger</span> <span class="p">{}</span>

<span class="kd">@Service</span><span class="p">({</span> <span class="kr">global</span><span class="o">:</span> <span class="kc">true</span> <span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">TypeDiFileSystem</span> <span class="kr">implements</span> <span class="nx">FileSystem</span><span class="p">&lt;</span><span class="nt">string</span><span class="p">&gt;</span> <span class="p">{}</span>

<span class="kd">@Service</span><span class="p">({</span> <span class="kr">global</span><span class="o">:</span> <span class="kc">true</span> <span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">TypeDiSettingsTxtService</span> <span class="kr">extends</span> <span class="nx">SettingsTxtService</span> <span class="p">{</span>
    <span class="kr">constructor</span><span class="p">(</span>
        <span class="kr">protected</span> <span class="nx">logger</span>: <span class="kt">TypeDiLogger</span><span class="p">,</span>
        <span class="kr">protected</span> <span class="nx">fileSystem</span>: <span class="kt">TypeDiFileSystem</span><span class="p">,</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Each class uses the class-level <code>@Service</code> decorator. The <code>global</code> option means that all classes will be instantiated globally as a singleton. The class constructor parameter <code>TypeDiSettingsTxtService</code> explicitly declares that it requires an instance of the <code>TypeDiLogger</code> class and a <code>TypeDiFileSystem</code> class.</p>
<p>Once we have declared all the dependencies, we can use the TypeDI container as shown below.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">const</span> <span class="nx">container</span> <span class="o">=</span> <span class="nx">Container</span><span class="p">.</span><span class="k">of</span><span class="p">();</span>

<span class="kr">const</span> <span class="nx">logger</span> <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="nx">TypeDiLogger</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">fileSystem</span> <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="nx">TypeDiFileSystem</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">settingsService</span> <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="nx">TypeDiSettingsTxtService</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="token-based-injection-in-typedi"><strong>Token-based Injection in TypeDI</strong></h4>
<p>Token-based injection uses tokens as intermediaries to bind interfaces to their implementations. The only change over class-based injections is the declaration of the <code>@Inject</code> decoration that uses the appropriate token for each structural parameter.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kd">@Service</span><span class="p">({</span> <span class="kr">global</span><span class="o">:</span> <span class="kc">true</span> <span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">TypeDiLogger</span> <span class="kr">extends</span> <span class="nx">FakeLogger</span> <span class="p">{}</span>

<span class="kd">@Service</span><span class="p">({</span> <span class="kr">global</span><span class="o">:</span> <span class="kc">true</span> <span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">TypeDiFileSystem</span> <span class="kr">extends</span> <span class="nx">FakeFileSystem</span> <span class="p">{}</span>

<span class="kd">@Service</span><span class="p">({</span> <span class="kr">global</span><span class="o">:</span> <span class="kc">true</span> <span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">ServiceNamedTypeDiSettingsTxtService</span> <span class="kr">extends</span> <span class="nx">SettingsTxtService</span> <span class="p">{</span>
    <span class="kr">constructor</span><span class="p">(</span>
        <span class="kd">@Inject</span><span class="p">(</span><span class="s2">&#34;logger&#34;</span><span class="p">)</span> <span class="kr">protected</span> <span class="nx">logger</span>: <span class="kt">Logger</span><span class="p">,</span>
        <span class="kd">@Inject</span><span class="p">(</span><span class="s2">&#34;fileSystem&#34;</span><span class="p">)</span> <span class="kr">protected</span> <span class="nx">fileSystem</span>: <span class="kt">FileSystem</span><span class="p">&lt;</span><span class="nt">string</span><span class="p">&gt;,</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>We have to construct instances of the classes we need and connect them to the container.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">const</span> <span class="nx">container</span> <span class="o">=</span> <span class="nx">Container</span><span class="p">.</span><span class="k">of</span><span class="p">();</span>

<span class="kr">const</span> <span class="nx">logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TypeDiLogger</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">fileSystem</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TypeDiFileSystem</span><span class="p">();</span>

<span class="nx">container</span><span class="p">.</span><span class="kr">set</span><span class="p">(</span><span class="s2">&#34;logger&#34;</span><span class="p">,</span> <span class="nx">logger</span><span class="p">);</span>
<span class="nx">container</span><span class="p">.</span><span class="kr">set</span><span class="p">(</span><span class="s2">&#34;fileSystem&#34;</span><span class="p">,</span> <span class="nx">fileSystem</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">settingsService</span> <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="nx">ServiceNamedTypeDiSettingsTxtService</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="tsyringe"><strong>TSyringe</strong></h4>
<p>The <a href="https://github.com/microsoft/tsyringe">TSyringe</a> project is a DI container maintained by Microsoft. It is a versatile container that supports almost all standard DI container features, including resolving circular dependencies. Similar to TypeDI, TSyringe supports both class-based and token-based injection.</p>
<h4 id="class-based-injection-in-tsyringe"><strong>Class-based injection in Tsyringe</strong></h4>
<p>Developers must use Tsyringe&rsquo;s class-level decorators to mark target classes. In the following code snippet, we use the <code>@singleton</code> decorator.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kd">@singleton</span><span class="p">()</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">TsyringeLogger</span> <span class="kr">implements</span> <span class="nx">Logger</span> <span class="p">{</span>
    <span class="c1">// ...
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">@singleton</span><span class="p">()</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">TsyringeFileSystem</span> <span class="kr">implements</span> <span class="nx">FileSystem</span> <span class="p">{</span>
    <span class="c1">// ...
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">@singleton</span><span class="p">()</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">TsyringeSettingsTxtService</span> <span class="kr">extends</span> <span class="nx">SettingsTxtService</span> <span class="p">{</span>
    <span class="kr">constructor</span><span class="p">(</span>
        <span class="kr">protected</span> <span class="nx">logger</span>: <span class="kt">TsyringeLogger</span><span class="p">,</span>
        <span class="kr">protected</span> <span class="nx">fileSystem</span>: <span class="kt">TsyringeFileSystem</span><span class="p">,</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>The Tsyringe container can then automatically resolve the dependencies.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">const</span> <span class="nx">childContainer</span> <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="nx">createChildContainer</span><span class="p">();</span>

<span class="kr">const</span> <span class="nx">logger</span> <span class="o">=</span> <span class="nx">childContainer</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">TsyringeLogger</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">fileSystem</span> <span class="o">=</span> <span class="nx">childContainer</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">TsyringeFileSystem</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">settingsService</span> <span class="o">=</span> <span class="nx">childContainer</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">TsyringeSettingsTxtService</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="token-based-injection-in-tsyringe"><strong>Token-based injection in Tsyringe</strong></h4>
<p>Similar to other libraries, TSyringe requires programmers to use constructor parameter decorators for token-based injection.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kd">@singleton</span><span class="p">()</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">TsyringeLogger</span> <span class="kr">implements</span> <span class="nx">Logger</span> <span class="p">{</span>
    <span class="c1">// ...
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">@singleton</span><span class="p">()</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">TsyringeFileSystem</span> <span class="kr">implements</span> <span class="nx">FileSystem</span> <span class="p">{</span>
    <span class="c1">// ...
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">@singleton</span><span class="p">()</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">TokenedTsyringeSettingsTxtService</span> <span class="kr">extends</span> <span class="nx">SettingsTxtService</span> <span class="p">{</span>
    <span class="kr">constructor</span><span class="p">(</span>
        <span class="kd">@inject</span><span class="p">(</span><span class="s2">&#34;logger&#34;</span><span class="p">)</span> <span class="kr">protected</span> <span class="nx">logger</span>: <span class="kt">Logger</span><span class="p">,</span>
        <span class="kd">@inject</span><span class="p">(</span><span class="s2">&#34;fileSystem&#34;</span><span class="p">)</span> <span class="kr">protected</span> <span class="nx">fileSystem</span>: <span class="kt">FileSystem</span><span class="p">&lt;</span><span class="nt">string</span><span class="p">&gt;,</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>After declaring the target class, we can register a token class tuple with an associated lifecycle. In the following code snippet, I am using a singleton case.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">const</span> <span class="nx">childContainer</span> <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="nx">createChildContainer</span><span class="p">();</span>

<span class="nx">childContainer</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&#34;logger&#34;</span><span class="p">,</span> <span class="nx">TsyringeLogger</span><span class="p">,</span> <span class="p">{</span> <span class="nx">lifecycle</span>: <span class="kt">Lifecycle.Singleton</span> <span class="p">});</span>
<span class="nx">childContainer</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&#34;fileSystem&#34;</span><span class="p">,</span> <span class="nx">TsyringeFileSystem</span><span class="p">,</span> <span class="p">{</span> <span class="nx">lifecycle</span>: <span class="kt">Lifecycle.Singleton</span> <span class="p">});</span>

<span class="kr">const</span> <span class="nx">logger</span> <span class="o">=</span> <span class="nx">childContainer</span><span class="p">.</span><span class="nx">resolve</span><span class="p">&lt;</span><span class="nt">FakeLogger</span><span class="p">&gt;(</span><span class="s2">&#34;logger&#34;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">fileSystem</span> <span class="o">=</span> <span class="nx">childContainer</span><span class="p">.</span><span class="nx">resolve</span><span class="p">&lt;</span><span class="nt">FakeFileSystem</span><span class="p">&gt;(</span><span class="s2">&#34;fileSystem&#34;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">settingsService</span> <span class="o">=</span> <span class="nx">childContainer</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">TokenedTsyringeSettingsTxtService</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="nestjs"><strong>NestJS</strong></h3>
<p><a href="https://nestjs.com/">NestJS</a> is a framework that uses custom DI containers at the <a href="https://nestjs.com/">bottom</a>. NestJS can be run as a standalone application as a wrapper for its DI container. It uses decorators and their metadata for injection. Scope is allowed and you can choose from single instance, transient object or request bound object.</p>
<p>The following code snippet includes a demonstration of NestJS functionality, starting with the declaration of the core class.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kd">@Injectable</span><span class="p">()</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">NestLogger</span> <span class="kr">implements</span> <span class="nx">Logger</span> <span class="p">{</span>
    <span class="c1">// ...
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">@Injectable</span><span class="p">()</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">NestFileSystem</span> <span class="kr">extends</span> <span class="nx">FileSystem</span><span class="p">&lt;</span><span class="nt">string</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="c1">// ...
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">@Injectable</span><span class="p">()</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">NestSettingsTxtService</span> <span class="kr">extends</span> <span class="nx">SettingsTxtService</span> <span class="p">{</span>
    <span class="kr">constructor</span><span class="p">(</span>
        <span class="kr">protected</span> <span class="nx">logger</span>: <span class="kt">NestLogger</span><span class="p">,</span>
        <span class="kr">protected</span> <span class="nx">fileSystem</span>: <span class="kt">NestFileSystem</span><span class="p">,</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>In the above code block, all target classes are marked with <code>@Injectable</code> decorators. Next, we define the core class of the <code>AppModule</code> application and specify its dependencies <code>providers</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kd">@Module</span><span class="p">({</span>
    <span class="nx">providers</span><span class="o">:</span> <span class="p">[</span><span class="nx">NestLogger</span><span class="p">,</span> <span class="nx">NestFileSystem</span><span class="p">,</span> <span class="nx">NestSettingsTxtService</span><span class="p">],</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">AppModule</span> <span class="p">{}</span>
</code></pre></td></tr></table>
</div>
</div><p>Finally, we can create application contexts and get instances of the above classes.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">const</span> <span class="nx">applicationContext</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">NestFactory</span><span class="p">.</span><span class="nx">createApplicationContext</span><span class="p">(</span>
    <span class="nx">AppModule</span><span class="p">,</span>
    <span class="p">{</span> <span class="nx">logger</span>: <span class="kt">false</span> <span class="p">},</span>
<span class="p">);</span>

<span class="kr">const</span> <span class="nx">logger</span> <span class="o">=</span> <span class="nx">applicationContext</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="nx">NestLogger</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">fileSystem</span> <span class="o">=</span> <span class="nx">applicationContext</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="nx">NestFileSystem</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">settingsService</span> <span class="o">=</span> <span class="nx">applicationContext</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="nx">NestSettingsTxtService</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="summary">Summary</h2>
<p>In this tutorial, we introduced what a dependency injection container is and why you should use it. We then explored five different TypeScript dependency injection containers and walked through examples of how to use each one.</p>
<p>Now that TypeScript is a dominant programming language, using established design patterns such as dependency injection can help developers make the transition from other languages.</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/typescript/">typescript</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-03/nginx-concepts/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Some concepts of nginx</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-03/vim-find-replace/">
            <span class="next-text nav-default">Find and Replace in Vim/Vi</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
