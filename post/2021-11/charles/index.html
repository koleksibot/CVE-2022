<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>HTTP packet capture tool of Charles - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="Introduction to Charles Charles is an HTTP proxy server that allows Charles to monitor all data sent and received by a browser when it connects to Charles&#39; proxy to access the Internet. It allows a developer to view all HTTP traffic connected to the Internet, these include requests, responses and HTTP headers (containing cookies and caching information).
Charles main features.
 Support SSL proxy. Can intercept and analyze SSL requests. Support for traffic control." /><meta name="keywords" content="Charles" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-11/charles/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="HTTP packet capture tool of Charles" />
<meta property="og:description" content="Introduction to Charles Charles is an HTTP proxy server that allows Charles to monitor all data sent and received by a browser when it connects to Charles&#39; proxy to access the Internet. It allows a developer to view all HTTP traffic connected to the Internet, these include requests, responses and HTTP headers (containing cookies and caching information).
Charles main features.
 Support SSL proxy. Can intercept and analyze SSL requests. Support for traffic control." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-11/charles/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-11-08T20:49:15+08:00" />
<meta property="article:modified_time" content="2021-11-08T20:49:15+08:00" />

<meta itemprop="name" content="HTTP packet capture tool of Charles">
<meta itemprop="description" content="Introduction to Charles Charles is an HTTP proxy server that allows Charles to monitor all data sent and received by a browser when it connects to Charles&#39; proxy to access the Internet. It allows a developer to view all HTTP traffic connected to the Internet, these include requests, responses and HTTP headers (containing cookies and caching information).
Charles main features.
 Support SSL proxy. Can intercept and analyze SSL requests. Support for traffic control."><meta itemprop="datePublished" content="2021-11-08T20:49:15+08:00" />
<meta itemprop="dateModified" content="2021-11-08T20:49:15+08:00" />
<meta itemprop="wordCount" content="635">
<meta itemprop="keywords" content="charles," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="HTTP packet capture tool of Charles"/>
<meta name="twitter:description" content="Introduction to Charles Charles is an HTTP proxy server that allows Charles to monitor all data sent and received by a browser when it connects to Charles&#39; proxy to access the Internet. It allows a developer to view all HTTP traffic connected to the Internet, these include requests, responses and HTTP headers (containing cookies and caching information).
Charles main features.
 Support SSL proxy. Can intercept and analyze SSL requests. Support for traffic control."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">HTTP packet capture tool of Charles</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-11-08 20:49:15 </span>
        <div class="post-category">
            <a href="/categories/skills/"> skills </a>
            </div>
          <span class="more-meta"> 635 words </span>
          <span class="more-meta"> 3 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#introduction-to-charles">Introduction to Charles</a></li>
        <li><a href="#charles-packet-capture-principle">Charles packet capture principle</a></li>
        <li><a href="#use-of-charles">Use of Charles</a>
          <ul>
            <li><a href="#https-request-packet-capture-under-windows">HTTPS request packet capture under Windows</a></li>
            <li><a href="#packet-grabbing-for-https-requests-under-ios">Packet grabbing for HTTPS requests under iOS</a></li>
            <li><a href="#https-request-packet-capture-under-android">HTTPS request packet capture under Android</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h2 id="introduction-to-charles">Introduction to Charles</h2>
<p>Charles is an HTTP proxy server that allows Charles to monitor all data sent and received by a browser when it connects to Charles' proxy to access the Internet. It allows a developer to view all HTTP traffic connected to the Internet, these include requests, responses and HTTP headers (containing cookies and caching information).</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/11/08/c381eefba2e44a64a8434fd3a16addd9.png" alt=""></p>
<p>Charles main features.</p>
<ul>
<li>Support SSL proxy. Can intercept and analyze SSL requests.</li>
<li>Support for traffic control. Can simulate slow networks and requests with long waiting time (latency).</li>
<li>Support AJAX debugging. Automatically formats json or xml data for easy viewing.</li>
<li>Support AMF debugging. Flash Remoting or Flex Remoting information can be formatted for easy viewing.</li>
<li>Support retransmitting network requests for back-end debugging.</li>
<li>Support modifying network request parameters.</li>
<li>Support intercepting and dynamically modifying network requests.</li>
<li>Check HTML, CSS and RSS content for W3C compliance.</li>
</ul>
<p>The above describes the main features of Charles, personally in the use of the process is mainly used to crawl HTTP and HTTPS requests. In particular, HTTPS requests, there is still some trouble to capture, so here is a record.</p>
<h2 id="charles-packet-capture-principle">Charles packet capture principle</h2>
<p>The principle behind most of the packet-capturing software on the market is the man-in-the-middle attack (MITM).</p>
<p>Wikipedia defines MITM as a man-in-the-middle attack in the field of cryptography and computer security, in which an attacker establishes separate connections with each end of a communication and exchanges the data he receives, making the two ends of the communication believe they are talking directly to each other over a private connection, when in fact the entire session is completely controlled by the attacker.</p>
<p>The above definition is clear, and the flow of HTTP Packets can be seen in the following diagram combined with the direction of the arrows.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/11/08/b862200986e449ad97a4494f60fd2c69.png" alt=""></p>
<h2 id="use-of-charles">Use of Charles</h2>
<p>The installation process of Charles is relatively simple, just go to <a href="https://www.charlesproxy.com/">official website</a> and download and install it. What is more difficult is the configuration of HTTPS requests.</p>
<h3 id="https-request-packet-capture-under-windows">HTTPS request packet capture under Windows</h3>
<ol>
<li>Configure SSL support. Click [Proxy] -&gt; [SSL Proxying Settings&hellip;], in the pop-up tab, check [Enable SSL Proxying] and click [add], enter [<em>] in Host to receive any host, enter [</em>] in Prot to receive any port and finally click [ok] to save.</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/11/08/9f07dfd8948e49ac8c475df7df166f93.png" alt=""></p>
<ol start="2">
<li>Install the certificate. Click [Help]-&gt;[SSL Proxying]-&gt;[Install Charles Root Certificate], follow the guide to install the certificate.</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/11/08/92a93ecf295941cb96741bb88e4b80c3.png" alt=""></p>
<p>Open IE for testing after completion: Certificate error!</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/11/08/51c06d6661634f7b94952029d49b8e8d.png" alt=""></p>
<p>Open Chrome to test.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/11/08/619d4271f6784f90b7d1ca8354205dcc.png" alt=""></p>
<p>Open Edge test.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/11/08/b56f6d84bfa24ad494c4eedb99e7ba9b.png" alt=""></p>
<p>All blocked by security, installed the certificate are not working.</p>
<p><strong>Solution: install Firefox!</strong></p>
<p>After installation in the opening of Charles, use Firefox to open, <a href="http://chls.pro/ssl">http://chls.pro/ssl</a>, the following page pops up.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/11/08/37c240b8bda34cc68ba25b88ca1ba6f1.png" alt=""></p>
<p>Select Save file and press OK. The file is saved to the download folder by default.</p>
<p>Open Firefox [Settings] -&gt; [Privacy and Security] -&gt; [Certificates] -&gt; [View Certificate]</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/11/08/0d05d936bfec4656bc7ea54b8f482c82.png" alt=""></p>
<p>Use [Certificate Manager] -&gt; [Certificate Scheme Authority] -&gt; [Import] for import operation.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/11/08/7f19ce1910774cb0a7b287166caa7ee9.png" alt=""></p>
<h3 id="packet-grabbing-for-https-requests-under-ios">Packet grabbing for HTTPS requests under iOS</h3>
<p>Turn on the shared network on the PC. Connect the phone to the WIFI shared by the PC.</p>
<p>Set the proxy address on the phone, the proxy IP is the PC&rsquo;s IP and the port is Charles' port.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/11/08/8b517a4e6414468f9afd61beabe78db8.png" alt=""></p>
<p>Enter chls.pro in your phone&rsquo;s own browser Safari, and you need to enter [Settings] to install the description file after you finish. After installation, if it is iOS 10 or later, you need to enter [Settings] -&gt; [General] -&gt; [About this machine] -&gt; [Certificate trust settings] to turn on the certificate.</p>
<h3 id="https-request-packet-capture-under-android">HTTPS request packet capture under Android</h3>
<p>Turn on the shared network on the PC. Connect the phone to the WIFI shared by the PC.</p>
<p>Set the proxy address on the phone, the proxy IP is the PC&rsquo;s IP and the port is Charles' port.</p>
<p>Type chls.pro in the default browser of your phone, download the downloadfile.crt file, then open it in [My Downloads] and follow the guide to install it.</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/charles/">charles</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-11/mongodb-windows/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">MongoDB Installation and Use in Windows</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-11/linux-desktop-environment/">
            <span class="next-text nav-default">Linux terminal/graphic interface and desktop environment</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
