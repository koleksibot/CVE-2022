<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Python Date and Time Processing Explained - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="Python&amp;rsquo;s time processing module is used more often in everyday use, but when using it, you basically have to look up the information, which is still a bit of a hassle, so comb through it to make it easier to use in the future. Time-related concepts Second At the 13th International Conference on Weights and Measures in 1967, it was decided to use the second, defined in atomic time, as" /><meta name="keywords" content="Python, datetime" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2021-11/python-datetime/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Python Date and Time Processing Explained" />
<meta property="og:description" content="Python&rsquo;s time processing module is used more often in everyday use, but when using it, you basically have to look up the information, which is still a bit of a hassle, so comb through it to make it easier to use in the future. Time-related concepts Second At the 13th International Conference on Weights and Measures in 1967, it was decided to use the second, defined in atomic time, as" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2021-11/python-datetime/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-11-05T13:18:51+08:00" />
<meta property="article:modified_time" content="2021-11-05T13:18:51+08:00" />

<meta itemprop="name" content="Python Date and Time Processing Explained">
<meta itemprop="description" content="Python&rsquo;s time processing module is used more often in everyday use, but when using it, you basically have to look up the information, which is still a bit of a hassle, so comb through it to make it easier to use in the future. Time-related concepts Second At the 13th International Conference on Weights and Measures in 1967, it was decided to use the second, defined in atomic time, as"><meta itemprop="datePublished" content="2021-11-05T13:18:51+08:00" />
<meta itemprop="dateModified" content="2021-11-05T13:18:51+08:00" />
<meta itemprop="wordCount" content="4782">
<meta itemprop="keywords" content="python," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Python Date and Time Processing Explained"/>
<meta name="twitter:description" content="Python&rsquo;s time processing module is used more often in everyday use, but when using it, you basically have to look up the information, which is still a bit of a hassle, so comb through it to make it easier to use in the future. Time-related concepts Second At the 13th International Conference on Weights and Measures in 1967, it was decided to use the second, defined in atomic time, as"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SoByte</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/ukraine/">
        <li class="mobile-menu-item">UKRAINE</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SoByte</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/ukraine/">UKRAINE</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Python Date and Time Processing Explained</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-11-05 13:18:51 </span>
        <div class="post-category">
            <a href="/categories/skills/"> skills </a>
            </div>
          <span class="more-meta"> 4782 words </span>
          <span class="more-meta"> 10 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#time-related-concepts">Time-related concepts</a></li>
        <li><a href="#python-time-module">Python time module</a>
          <ul>
            <li><a href="#time-formatting">Time formatting</a></li>
            <li><a href="#timer-function">Timer function</a></li>
            <li><a href="#other-built-in-functions-of-the-time-module">Other built-in functions of the time module</a></li>
            <li><a href="#the-time-module-contains-the-attributes">The time module contains the attributes</a></li>
          </ul>
        </li>
        <li><a href="#datetime-module">datetime module</a>
          <ul>
            <li><a href="#date-class">date class</a></li>
            <li><a href="#time-class">time class</a></li>
            <li><a href="#datetime-class">datetime class</a></li>
            <li><a href="#timedelta-class">timedelta class</a></li>
            <li><a href="#tzinfo-class">tzinfo class</a></li>
          </ul>
        </li>
        <li><a href="#pytz-module">pytz module</a>
          <ul>
            <li><a href="#time-zone-conversion">Time zone conversion</a></li>
            <li><a href="#daylight-saving-time-processing">Daylight saving time processing</a></li>
          </ul>
        </li>
        <li><a href="#dateutil-module">dateutil module</a>
          <ul>
            <li><a href="#parserparse">parser.parse()</a></li>
            <li><a href="#rrulerrule">rrule.rrule()</a></li>
          </ul>
        </li>
        <li><a href="#arrow">Arrow</a>
          <ul>
            <li><a href="#utc-time">UTC time</a></li>
            <li><a href="#local-time">Local time</a></li>
            <li><a href="#parsing-time">Parsing time</a></li>
            <li><a href="#unix-timestamps">Unix timestamps</a></li>
            <li><a href="#formatting-the-date-and-time">Formatting the date and time</a></li>
            <li><a href="#convert-to-regional-time">Convert to regional time</a></li>
            <li><a href="#working-days">Working days</a></li>
            <li><a href="#move-time">Move time</a></li>
            <li><a href="#daylight-saving-time">Daylight Saving Time</a></li>
            <li><a href="#humanized-date-and-time">Humanized date and time</a></li>
          </ul>
        </li>
        <li><a href="#iso-8601-class">ISO 8601 class</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>Python&rsquo;s time processing module is used more often in everyday use, but when using it, you basically have to look up the information, which is still a bit of a hassle, so comb through it to make it easier to use in the future.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/11/05/de6f484e54d04215a6daf4d717a831de.png" alt=""></p>
<h2 id="time-related-concepts">Time-related concepts</h2>
<p><strong>Second</strong> At the 13th International Conference on Weights and Measures in 1967, it was decided to use the second, defined in atomic time, as the international standard unit of time: the duration of the 9,192,631,770 cycles of radiation corresponding to the leap between the two hyperfine energy levels of the cesium 133 atomic ground state, with the starting calendar element set at 0:00 on January 1, 1958.</p>
<p>An atomic clock is a clock that calculates and maintains accurate time using the atomic resonance frequency standard. The atomic clock is the most accurate time measurement and frequency standard known in the world.</p>
<p><strong>GMT</strong> Greenwich Mean Time (GMT), is the standard time at the Royal Greenwich Observatory on the outskirts of London, as the prime meridian is defined as the line of longitude passing through there. GMT is also called Universal Time UT.</p>
<p><strong>UTC</strong> Coordinated Universal Time (UTC), also known as Universal Standard Time, is based on the international atomic clock and has an error of a few nanoseconds per day. The second length of Coordinated Universal Time is the same as the second length of Atomic Time, and it is required to be as close as possible to UTC in terms of time (the difference between the two is kept within 0.9 seconds).</p>
<p><strong>Leap seconds</strong> There are not only leap years, but also leap seconds. A leap second is an adjustment that adds or subtracts one second from Coordinated Universal Time at the end of the year or in the middle of the year (and possibly at the end of the quarter), as uniformly prescribed by the International Bureau of Weights and Measures, in order to keep Coordinated Universal Time close to the Universal Time moment. Due to the unevenness of the Earth&rsquo;s rotation and long-term chronicity (mainly caused by tidal friction), it will make the difference between UTC (civil time) and atomic time exceed to ±0.9 seconds, then UTC will be set forward by 1 second (negative leap second, 59 seconds in the last minute) or backward by 1 second (positive leap second, 61 seconds in the last minute); leap seconds are usually added at the end of the Gregorian year or the end of June of the Gregorian calendar.</p>
<p><strong>Time Zones</strong> are regions of the Earth that use the same definition of time. The relevant international conferences decided to divide the Earth&rsquo;s surface into 24 time zones, from south to north, according to longitude lines, and to define the time difference between adjacent zones as 1 hour. When people cross a region, they correct their clocks by one hour (subtract one hour to the west and add one hour to the east), and add or subtract a few hours when they cross several regions. For example, if my country is in the eastern eight zone, it is expressed as GMT+8.</p>
<p><strong>Daylight Saving Time</strong> (DST), also known as Daylight Saving Time, Daylight Saving Time or Summer Time. This is a system to save energy and artificially set the local time, in the summer time, the day time will be longer, so in order to save electricity, so in the summer time certain areas will set their time one hour earlier, that is, the original time zone is 8 o&rsquo;clock well, but because the sun appears earlier in the summer, so move the time forward, in the original 8 o&rsquo;clock, set as 9 o&rsquo;clock of that day ( Time one hour earlier) ~ so that we can use the sun to illuminate, save the time spent on electricity, which is why it is called summer time savings!</p>
<p><strong>Unix timestamp</strong> refers to the total number of seconds from 0:0:0 UTC on January 1, 1970 to the present, regardless of leap seconds.</p>
<h2 id="python-time-module">Python time module</h2>
<p>In the Python documentation, time is categorized under Generic Operating System Services, in other words, it provides functionality that is closer to the operating system level. As you can see from reading through the documentation, the time module is based around the Unix timestamp.</p>
<p>The module mainly consists of a class struct_time, several other functions and related constants. It is important to note that most of the functions in this module call the C library of the platform where they are located, so it is important to note that some functions are platform specific and may have different effects on different platforms. Another point is that, since it is based on Unix Timestamp, the date range is limited to 1970 - 2038, so if you write code that needs to handle dates outside the range described above, you may want to consider using the datetime module.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/11/05/9c188a7de84e4577b548a776d77a718c.png" alt=""></p>
<p>Get the current time and convert it to time format</p>
<ul>
<li>time() returns the time in timestamp format (offset in seconds relative to 1.1 00:00:00)</li>
<li>ctime() returns the time in string form, you can pass in the time stamp format time, used for conversion</li>
<li>asctime() returns the time in string form, you can pass in the struct_time form time, used for conversion</li>
<li>localtime() returns the current time in struct_time form, can be passed in timestamp format and used to do the conversion</li>
<li>gmtime() returns the current time in struct_time form, UTC time zone (0 time zone), can be passed in timestamp format time, used to do the conversion</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">time</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="mf">1473386416.954</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">ctime</span><span class="p">()</span>
<span class="s1">&#39;Fri Sep 09 10:00:25 2016&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">ctime</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
<span class="s1">&#39;Fri Sep 09 10:28:08 2016&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">asctime</span><span class="p">()</span>
<span class="s1">&#39;Fri Sep 09 10:22:40 2016&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">asctime</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">())</span>
<span class="s1">&#39;Fri Sep 09 10:33:00 2016&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">()</span>
<span class="n">time</span><span class="o">.</span><span class="n">struct_time</span><span class="p">(</span><span class="n">tm_year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span> <span class="n">tm_mon</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">tm_mday</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">tm_hour</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">tm_min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tm_sec</span><span class="o">=</span><span class="mi">19</span><span class="p">,</span> <span class="n">tm_wday</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">tm_yday</span><span class="o">=</span><span class="mi">253</span><span class="p">,</span> <span class="n">tm_isdst</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
<span class="n">time</span><span class="o">.</span><span class="n">struct_time</span><span class="p">(</span><span class="n">tm_year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span> <span class="n">tm_mon</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">tm_mday</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">tm_hour</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">tm_min</span><span class="o">=</span><span class="mi">19</span><span class="p">,</span> <span class="n">tm_sec</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">tm_wday</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">tm_yday</span><span class="o">=</span><span class="mi">253</span><span class="p">,</span> <span class="n">tm_isdst</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">()</span>
<span class="n">time</span><span class="o">.</span><span class="n">struct_time</span><span class="p">(</span><span class="n">tm_year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span> <span class="n">tm_mon</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">tm_mday</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">tm_hour</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">tm_min</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span> <span class="n">tm_sec</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">tm_wday</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">tm_yday</span><span class="o">=</span><span class="mi">253</span><span class="p">,</span> <span class="n">tm_isdst</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
<span class="n">time</span><span class="o">.</span><span class="n">struct_time</span><span class="p">(</span><span class="n">tm_year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span> <span class="n">tm_mon</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">tm_mday</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">tm_hour</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">tm_min</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">tm_sec</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">tm_wday</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">tm_yday</span><span class="o">=</span><span class="mi">253</span><span class="p">,</span> <span class="n">tm_isdst</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>struct_time has a total of 9 elements, of which the first 6 are the year, month, day, hour, minute and second, and the last three represent the following respectively</p>
<ul>
<li>tm_wday the first day of the week (Sunday is 0)</li>
<li>tm_yday The first day of the year</li>
<li>tm_isdst whether it is daylight saving time</li>
</ul>
<h3 id="time-formatting">Time formatting</h3>
<p><strong>time.mktime()</strong></p>
<p>Convert a timestamp in struct_time format</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="o">&gt;&gt;&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">mktime</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">())</span>
<span class="mf">1473388585.0</span>
</code></pre></td></tr></table>
</div>
</div><p>time.strftime(format[,t]) Converts a struct_time time into a formatted time string. If t is not specified, it will be passed to time.localtime(). If any element of the tuple is out of bounds, a ValueError error will be thrown.</p>
<ul>
<li>%c local corresponding date and time representation</li>
<li>%x local corresponding date</li>
<li>%X local corresponding time</li>
<li>%y The year with the century removed (00 - 99)</li>
<li>%Y Complete year</li>
<li>%m month (01 - 12)</li>
<li>%b Local simplified month name</li>
<li>%B Local full month name</li>
<li>%d The first day of a month (01 - 31)</li>
<li>%j Number of days in a year (001 - 366)</li>
<li>%U Number of days of the week in a year. (00 - 53 Sundays are the beginning of a week.) All days before the first Sunday are placed in week 0.</li>
<li>%W is basically the same as %U, except that %W starts a week with Monday.</li>
<li>%w The first few days of a week (0 - 6, 0 being Sunday)</li>
<li>%a Local (locale) simplified week name</li>
<li>%A local complete week name</li>
<li>%H The hour of the day (24-hour system, 00 - 23)</li>
<li>%I The first few hours (12-hour system, 01 - 12)</li>
<li>%p Local am or pm equivalent, &ldquo;%p&rdquo; only works in combination with &ldquo;%I&rdquo;.</li>
<li>%M number of minutes (00 - 59)</li>
<li>%S seconds (01 - 61), the documentation emphasizes that it is indeed 0 - 61, not 59, leap year seconds account for two seconds</li>
<li>%Z Name of the time zone (null character if not present)</li>
<li>%% &lsquo;%&rsquo; character</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="o">&gt;&gt;&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&#34;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&#34;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">())</span>
<span class="s1">&#39;2016-09-09 10:54:21&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>time.strptime(string[,format])</strong></p>
<p>Converts a formatted time string to struct_time. it is actually the inverse of strftime().</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="o">&gt;&gt;&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">ctime</span><span class="p">())</span>
<span class="n">time</span><span class="o">.</span><span class="n">struct_time</span><span class="p">(</span><span class="n">tm_year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span> <span class="n">tm_mon</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">tm_mday</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">tm_hour</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">tm_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">tm_sec</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">tm_wday</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">tm_yday</span><span class="o">=</span><span class="mi">253</span><span class="p">,</span> <span class="n">tm_isdst</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="timer-function">Timer function</h3>
<p><strong>time.sleep(secs)</strong></p>
<p>The thread delays running for the specified amount of time. The unit is seconds.</p>
<p><strong>time.clock()</strong></p>
<p>Note that this means different things on different systems. On UNIX systems, it returns the &ldquo;process time&rdquo;, which is a floating point number (timestamp) expressed in seconds. In WINDOWS, the first call returns the actual time the process was running. The call after the second time is the running time from the first call to the present. (actually based on QueryPerformanceCounter() on WIN32, which is more accurate than millisecond representation)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">time</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&#34;clock1:</span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="n">time</span><span class="o">.</span><span class="n">clock</span><span class="p">())</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&#34;clock2:</span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="n">time</span><span class="o">.</span><span class="n">clock</span><span class="p">())</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&#34;clock3:</span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="n">time</span><span class="o">.</span><span class="n">clock</span><span class="p">())</span>
</code></pre></td></tr></table>
</div>
</div><p>The results of the run are.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">clock1:1.57895443216e-06
clock2:1.00064381867
clock3:2.00158724394
</code></pre></td></tr></table>
</div>
</div><p>where the first clock() output is the program run time, the second and third clock() output is the time interval with the first clock</p>
<h3 id="other-built-in-functions-of-the-time-module">Other built-in functions of the time module</h3>
<ul>
<li>altzone() returns the number of seconds offset for the daylight saving time region west of Greenwich. If the region is east of Greenwich it will return a negative value (e.g. Western Europe, including the UK). Only available for daylight saving time enabled regions.</li>
<li>tzset() reinitializes time-related settings based on the environment variable TZ.</li>
</ul>
<h3 id="the-time-module-contains-the-attributes">The time module contains the attributes</h3>
<ul>
<li>timezone is the local time zone (without daylight saving time) offset in seconds from Greenwich (&gt;0, Americas; &lt;=0 most of Europe, Asia, Africa).</li>
<li>tzname contains a pair of strings that differ depending on the case, the name of the local time zone with daylight saving time and without.</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">time</span>

<span class="nb">print</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">timezone</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">tzname</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">tzname</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&#34;GBK&#34;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">tzname</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&#34;GBK&#34;</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>Running results</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">-28800
(&#39;\xd6\xd0\xb9\xfa\xb1\xea\xd7\xbc\xca\xb1\xbc\xe4&#39;, &#39;\xd6\xd0\xb9\xfa\xcf\xc4\xc1\xee\xca\xb1&#39;)
中国标准时间
中国夏令时
</code></pre></td></tr></table>
</div>
</div><h2 id="datetime-module">datetime module</h2>
<p>datetime is much more advanced than time, which can be understood as datetime is wrapped based on time and provides more useful functions.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/11/05/616411d67f0a46fb8e9a0b83c9586200.png" alt=""></p>
<p>The datetime module defines the following classes.</p>
<ul>
<li>date: A class that represents a date. Commonly used properties are year, month, day</li>
<li>time: A class that represents time. Common properties are hour, minute, second, microsecond</li>
<li>datetime: the date and time.</li>
<li>timedelta: represents the time interval, i.e. the length between two points in time</li>
<li>tzinfo: information related to the time zone</li>
</ul>
<p>Note: All of these types of objects are immutable.</p>
<h3 id="date-class">date class</h3>
<p>The date class defines some common class methods and class properties:</p>
<ul>
<li>max, min: the maximum and minimum dates that the date object can represent</li>
<li>resolution: the smallest unit in which the date object can represent the date. Here is the day</li>
<li>today(): returns a date object that represents the current local date</li>
<li>fromtimestamp(timestamp): return a date object based on the given time kill</li>
<li>fromordinal(ordinal): converts Gregorian calendar time to a date object (not used for special calendars)</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;date.max:&#39;</span><span class="p">,</span> <span class="n">date</span><span class="o">.</span><span class="n">max</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;date.min:&#39;</span><span class="p">,</span> <span class="n">date</span><span class="o">.</span><span class="n">min</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;date.resolution:&#39;</span><span class="p">,</span> <span class="n">date</span><span class="o">.</span><span class="n">resolution</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;date.today():&#39;</span><span class="p">,</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;date.fromtimestamp():&#39;</span><span class="p">,</span> <span class="n">date</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()))</span>
</code></pre></td></tr></table>
</div>
</div><p>Implementation results.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">date.max: 9999-12-31
date.min: 0001-01-01
date.resolution: 1 day, 0:00:00
date.today(): 2016-09-12
date.fromtimestamp(): 2016-09-12
</code></pre></td></tr></table>
</div>
</div><p>The instance methods and properties provided by date.</p>
<ul>
<li>.year: returns the year</li>
<li>.month: returns the month</li>
<li>.day: return the day</li>
<li>.replace(year, month, day): Generate a new date object, replacing the properties of the original object with the year, month, and day specified by the parameters. (The original object remains unchanged)</li>
<li>.weekday(): return weekday, if it is Monday, return 0; if it is week 2, return 1, and so on</li>
<li>.isoweekday(): return weekday, if it&rsquo;s Monday, return 1; if it&rsquo;s week 2, return 2, and so on</li>
<li>.isocalendar(): return format like (year, wk num, wk day)</li>
<li>.isoformat(): returns a string in format like &lsquo;YYYY-MM-DD&rsquo;</li>
<li>.strftime(fmt): custom formatted string. Similar to strftime in the time module.</li>
<li>.toordinal(): return the Gregorian Calendar date corresponding to the date</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>

<span class="n">today</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;today:&#39;</span><span class="p">,</span> <span class="n">today</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;.year:&#39;</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;.month:&#39;</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">month</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;.replace():&#39;</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2017</span><span class="p">)</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;.weekday():&#39;</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">weekday</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;.isoweekday():&#39;</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">isoweekday</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;.isocalendar():&#39;</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;.isoformat():&#39;</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">isoformat</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;.strftime():&#39;</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;.toordinal():&#39;</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">toordinal</span><span class="p">())</span>
</code></pre></td></tr></table>
</div>
</div><p>Implementation results.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="n">today</span><span class="p">:</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">12</span>
<span class="o">.</span><span class="n">year</span><span class="p">:</span> <span class="mi">2016</span>
<span class="o">.</span><span class="n">month</span><span class="p">:</span> <span class="mi">9</span>
<span class="o">.</span><span class="n">replace</span><span class="p">():</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">12</span>
<span class="o">.</span><span class="n">weekday</span><span class="p">():</span> <span class="mi">0</span>
<span class="o">.</span><span class="n">isoweekday</span><span class="p">():</span> <span class="mi">1</span>
<span class="o">.</span><span class="n">isocalendar</span><span class="p">():</span> <span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="o">.</span><span class="n">isoformat</span><span class="p">():</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">12</span>
<span class="o">.</span><span class="n">strftime</span><span class="p">():</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">12</span>
<span class="o">.</span><span class="n">toordinal</span><span class="p">():</span> <span class="mi">736219</span>
</code></pre></td></tr></table>
</div>
</div><p>date also overloads certain operations which allow us to do some of the following with dates.</p>
<ul>
<li>date2 = date1 + timedelta # date plus an interval, returning a new date object</li>
<li>date2 = date1 - timedelta # date minus an interval, returning a new date object</li>
<li>timedelta = date1 - date2 # two dates subtracted, return an interval object</li>
<li>date1 &lt; date2 # Two dates are compared</li>
</ul>
<h3 id="time-class">time class</h3>
<p>The constructor for the time class is as follows: (where the parameter tzinfo, which represents the time zone information.)</p>
<p>class datetime.time(hour[, minute[, second[, microsecond[, tzinfo]]]])</p>
<p>Class properties defined by the time class.</p>
<ul>
<li>min, max: the minimum and maximum time that the time class can represent. where time.min = time(0, 0, 0, 0), time.max = time(23, 59, 59, 999999)</li>
<li>resolution: the minimum unit of time, here is 1 microsecond</li>
</ul>
<p>The time class provides instance methods and properties.</p>
<ul>
<li>.hour, .minute, .second, .microsecond: hour, minute, second, microsecond</li>
<li>.tzinfo: time zone information</li>
<li>.replace([hour[, minute[, second[, microsecond[, tzinfo]]]]]): creates a new time object, replacing the attributes in the original object with the hours, minutes, seconds, microseconds specified by the parameters (the original object remains unchanged).</li>
<li>.isoformat(): return a string representation of the format &ldquo;HH:MM:SS&rdquo;.</li>
<li>.strftime(fmt): returns a custom formatted string.</li>
</ul>
<p>Like date, two time objects can be compared or subtracted to return a time interval object. No example will be provided here.</p>
<h3 id="datetime-class">datetime class</h3>
<p>datetime is the combination of date and time, including all information of date and time. Its constructor is as follows: datetime.datetime(year, month, day[, hour[, minute[, second[, microsecond[, tzinfo]]]]]), the meaning of the parameters is the same as in the constructor of date and time, pay attention to the range of parameter values.</p>
<p>The datetime class defines the following class properties and methods.</p>
<ul>
<li>min, max: the minimum and maximum values that datetime can represent.</li>
<li>resolution: the minimum unit of datetime.</li>
<li>today(): returns a datetime object that represents the current local time.</li>
<li>now([tz]): returns a datetime object that represents the current local time, and if the parameter tz is provided, gets the local time in the time zone referred to by the tz parameter; * utcnow(): returns a datetime object that represents the current local time.</li>
<li>utcnow(): returns a datetime object representing the current utc time.</li>
<li>fromtimestamp(timestamp[, tz]): creates a datetime object based on the time kill, with the parameter tz specifying the time zone information.</li>
<li>utcfromtimestamp(timestamp): creates a datetime object based on the time kill.</li>
<li>combine(date, time): creates a datetime object based on date and time.</li>
<li>strptime(date_string, format): converts a format string to a datetime object.</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;datetime.max:&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">max</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;datetime.min:&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">min</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;datetime.resolution:&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">resolution</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;today():&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;now():&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;utcnow():&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;fromtimestamp(tmstmp):&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;utcfromtimestamp(tmstmp):&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()))</span>
</code></pre></td></tr></table>
</div>
</div><p>Running results.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="n">datetime</span><span class="o">.</span><span class="n">max</span><span class="p">:</span> <span class="mi">9999</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">31</span> <span class="mi">23</span><span class="p">:</span><span class="mi">59</span><span class="p">:</span><span class="mf">59.999999</span>
<span class="n">datetime</span><span class="o">.</span><span class="n">min</span><span class="p">:</span> <span class="mi">0001</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="n">datetime</span><span class="o">.</span><span class="n">resolution</span><span class="p">:</span> <span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000001</span>
<span class="n">today</span><span class="p">():</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">12</span> <span class="mi">19</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mf">00.761000</span>
<span class="n">now</span><span class="p">():</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">12</span> <span class="mi">19</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mf">00.761000</span>
<span class="n">utcnow</span><span class="p">():</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">12</span> <span class="mi">11</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mf">00.761000</span>
<span class="n">fromtimestamp</span><span class="p">(</span><span class="n">tmstmp</span><span class="p">):</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">12</span> <span class="mi">19</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mf">00.761000</span>
<span class="n">utcfromtimestamp</span><span class="p">(</span><span class="n">tmstmp</span><span class="p">):</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">12</span> <span class="mi">11</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mf">00.761000</span>
</code></pre></td></tr></table>
</div>
</div><p>datetime class provides examples of methods and properties (many properties or methods have appeared in date and time, here have a similar meaning, here only list the names of these methods, the specific meaning will not be introduced one by one, you can refer to the above explanation of the date and time class. (For more details, please refer to the above explanation of date and time)</p>
<p>year, month, day, hour, minute, second, microsecond, tzinfo.</p>
<ul>
<li>date(): get the date object.</li>
<li>time(): get time object.</li>
<li>replace([year[, month[, day[, hour[, minute[, second[, microsecond[, tzinfo]]]]]]]]).</li>
<li>timetuple()</li>
<li>utctimetuple()</li>
<li>toordinal()</li>
<li>weekday()</li>
<li>isocalendar()</li>
<li>isoformat([sep])</li>
<li>ctime(): returns a C-format string of the datetime, equivalent to ctime(time.mktime(dt.timetuple())).</li>
<li>strftime(format)</li>
</ul>
<p>Like date, it is possible to compare two datetime objects, either by subtracting them to return a time interval object, or by adding an interval to the datetime to return a new datetime object.</p>
<h3 id="timedelta-class">timedelta class</h3>
<p>The timedelta function returns a timedelta object, which is an object that represents a time interval. The parameters of the function are shown below:</p>
<p>class datetime.timedelta([days[, seconds[, microseconds[, milliseconds[, minutes[, hours[, weeks]]]]]]])</p>
<p>There are no required parameters, but the first integer is the number of days in the interval if it is a simple control:</p>
<p>datetime.timedelta(10)</p>
<p>Two time interval objects can be added or subtracted from each other and still return a time interval object. And more convenient is a datetime object if you subtract a time interval object, then the return corresponds to the subtracted datetime object, and then two datetime objects if you subtract the return is a time interval object. This is very convenient.</p>
<h3 id="tzinfo-class">tzinfo class</h3>
<p>tzinfo is an abstract class and cannot be instantiated directly. It requires derived subclasses that provide the corresponding standard methods. datetime module does not provide any subclasses of tzinfo. The easiest way is to use the pytz module.</p>
<h2 id="pytz-module">pytz module</h2>
<p>pytz is a time zone processing module for Python (also includes daylight saving time). Before understanding the time zone processing module, you need to understand some time zone concepts.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/11/05/335512843e4c4a42b2aaea072f47cbe6.png" alt=""></p>
<p>To know the conversion relationship between time zones, it is actually very simple: subtract the local time from the local time zone, and what is left is Greenwich Mean Time. For example, 18:00 Beijing time is 18:00 + 08:00, and after subtracting that, it&rsquo;s 10:00 + 00:00, so it&rsquo;s 10:00 Greenwich Mean Time.</p>
<p>Python&rsquo;s datetime can handle two types of time, offset-naive and offset-aware, the former being times that do not contain time zone information, and the latter being times that contain time zone information, and only times of the same type can be subtracted and compared.</p>
<p>The functions of the datetime module generate only offset-naive type datetime objects by default, such as now(), utcnow(), fromtimestamp(), utcfromtimestamp() and strftime(). Among them, now() and fromtimestamp() can accept a tzinfo object to generate a datetime object of type offset-aware, but the standard library does not provide any implemented tzinfo class, you have to implement it yourself.</p>
<p>The following is an example of a tzinfo class that implements Greenwich Mean Time and Beijing Time.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="n">ZERO_TIME_DELTA</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">LOCAL_TIME_DELTA</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="c1"># 本地时区偏差</span>

<span class="k">class</span> <span class="nc">UTC</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ZERO_TIME_DELTA</span>

    <span class="k">def</span> <span class="nf">dst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ZERO_TIME_DELTA</span>

<span class="k">class</span> <span class="nc">LocalTimezone</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">LOCAL_TIME_DELTA</span>

    <span class="k">def</span> <span class="nf">dst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ZERO_TIME_DELTA</span>

    <span class="k">def</span> <span class="nf">tzname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;+08:00&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>A tzinfo class needs to implement the 3 methods utcoffset, dst and tzname. Of these, utcoffset needs to return the time difference adjustment for summer time; tzname needs to return the time zone name, or not if you don&rsquo;t need to use it.</p>
<p>Once a datetime object of type offset-aware is generated, we can call its astimezone() method to generate the time in other time zones (which will be calculated based on the time difference). And if we get a datetime object of type offset-naive, we can also call its replace() method to replace tzinfo, but this replacement will not adjust other time properties according to the time difference. So, if you get a datetime object of offset-naive type with Greenwich Mean Time, you can call replace(tzinfo=UTC()) directly to convert it to offset-aware type, and then call astimezone() to generate datetime objects of other time zones.</p>
<p>It all looks very simple, but I don&rsquo;t know if you still remember the summer time zone mentioned above. When it comes to summer time, it really gives me a headache because there are no rules to follow: some countries have summer time, some countries don&rsquo;t, some countries only have summer time in some areas, some areas only have summer time in some years, the start and end of summer time in each area are not necessarily the same, and some places don&rsquo;t use the fucking days of the month to specify the start and end of summer time, but use In some places, TMD does not specify the start and end of summer season in terms of days of the month, but in terms of days of the week.</p>
<p>The pytz module, using the Olson TZ Database, solves the problem of consistency of time zone calculation across platforms, and solves the calculation problems caused by daylight saving time. Since countries and regions can choose their own time zones and whether or not to use daylight saving time, the pytz module can update its own time zone and daylight saving time related information if needed.</p>
<p>pytz provides full timezone information, such as</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">pytz</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pytz</span><span class="o">.</span><span class="n">all_timezones</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pytz</span><span class="o">.</span><span class="n">common_timezones</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>Running results.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">588
436
</code></pre></td></tr></table>
</div>
</div><p>If you need to get the time zone of a country, you can use the following.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">pytz</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pytz</span><span class="o">.</span><span class="n">country_timezones</span><span class="p">(</span><span class="s1">&#39;cn&#39;</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>Implementation results.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">[u&#39;Asia/Shanghai&#39;, u&#39;Asia/Urumqi&#39;]
</code></pre></td></tr></table>
</div>
</div><p>China one has two time zones, one for Shanghai and one for Urumqi, let&rsquo;s see what we have the difference between.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">pytz</span>

<span class="nb">print</span><span class="p">(</span><span class="n">pytz</span><span class="o">.</span><span class="n">country_timezones</span><span class="p">(</span><span class="s1">&#39;cn&#39;</span><span class="p">))</span>

<span class="n">tz1</span> <span class="o">=</span> <span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="n">pytz</span><span class="o">.</span><span class="n">country_timezones</span><span class="p">(</span><span class="s1">&#39;cn&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tz1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">tz1</span><span class="p">))</span>

<span class="n">tz2</span> <span class="o">=</span> <span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="n">pytz</span><span class="o">.</span><span class="n">country_timezones</span><span class="p">(</span><span class="s1">&#39;cn&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tz2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">tz2</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>Implementation results.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;Asia/Shanghai&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;Asia/Urumqi&#39;</span><span class="p">]</span>
<span class="n">Asia</span><span class="o">/</span><span class="n">Shanghai</span>
<span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">14</span> <span class="mi">09</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mf">39.384000</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span>
<span class="n">Asia</span><span class="o">/</span><span class="n">Urumqi</span>
<span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">14</span> <span class="mi">07</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mf">39.385000</span><span class="o">+</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span>
</code></pre></td></tr></table>
</div>
</div><p>You can see that Shanghai is the eighth eastern district, while Urumqi is the sixth eastern district.</p>
<h3 id="time-zone-conversion">Time zone conversion</h3>
<p>The operation has but a relatively simple interchange of local time zone and UTC.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">pytz</span>

<span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">tz</span> <span class="o">=</span> <span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="s1">&#39;Asia/Shanghai&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tz</span><span class="o">.</span><span class="n">localize</span><span class="p">(</span><span class="n">now</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pytz</span><span class="o">.</span><span class="n">utc</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">tz</span><span class="o">.</span><span class="n">localize</span><span class="p">(</span><span class="n">now</span><span class="p">)))</span>
</code></pre></td></tr></table>
</div>
</div><p>Implementation results.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">14</span> <span class="mi">10</span><span class="p">:</span><span class="mi">25</span><span class="p">:</span><span class="mf">44.633000</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span>
<span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">14</span> <span class="mi">02</span><span class="p">:</span><span class="mi">25</span><span class="p">:</span><span class="mf">44.633000</span><span class="o">+</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
</code></pre></td></tr></table>
</div>
</div><p>Time zone to time zone conversion is possible using astimezone().</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">pytz</span>

<span class="n">utc</span> <span class="o">=</span> <span class="n">pytz</span><span class="o">.</span><span class="n">utc</span>
<span class="n">beijing_time</span> <span class="o">=</span> <span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="s1">&#39;Asia/Shanghai&#39;</span><span class="p">)</span>
<span class="n">japan_time</span> <span class="o">=</span> <span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="s1">&#39;Asia/Tokyo&#39;</span><span class="p">)</span>

<span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">beijing_time</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Beijing Time:&#34;</span><span class="p">,</span><span class="n">now</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&#34;UTC:&#34;</span><span class="p">,</span><span class="n">now</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">utc</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&#34;JAPAN TIME:&#34;</span><span class="p">,</span><span class="n">now</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">japan_time</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>Implementation results.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="n">Beijing</span> <span class="n">Time</span><span class="p">:</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">14</span> <span class="mi">10</span><span class="p">:</span><span class="mi">19</span><span class="p">:</span><span class="mf">22.671000</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span>
<span class="n">UTC</span><span class="p">:</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">14</span> <span class="mi">02</span><span class="p">:</span><span class="mi">19</span><span class="p">:</span><span class="mf">22.671000</span><span class="o">+</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="n">JAPAN</span> <span class="n">TIME</span><span class="p">:</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">14</span> <span class="mi">11</span><span class="p">:</span><span class="mi">19</span><span class="p">:</span><span class="mf">22.671000</span><span class="o">+</span><span class="mi">09</span><span class="p">:</span><span class="mi">00</span>
</code></pre></td></tr></table>
</div>
</div><p>Alternatively you can use replace to modify the time zone with an extra 6 minutes (do not use). The specific reasons are.</p>
<blockquote>
<p>17 years of the Republic of China (1928), the Nationalist government unified China, the former Central Observatory&rsquo;s business by the Nanjing government Central Research Institute of Astronomy and Meteorological Research Institute received respectively. Astronomical Research Institute compiled the calendar basically follow the practice of the Central Observatory, the country is still divided into five standard time zones, only in relation to the intersection of gas, the conjunction of the first day, the sun&rsquo;s time, etc., no longer use the local equinox in Beiping, but to Nanjing is located in the standard time zone of the regional time that is 120 ° East longitude standard time instead. There is a difference of 352 seconds between the local equinox of Beiping and 120°E Standard Time.</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">pytz</span>
<span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">now</span><span class="p">)</span>
<span class="n">tz</span> <span class="o">=</span> <span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="s1">&#39;Asia/Shanghai&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">tz</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>Implementation results.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">2016-09-14 10:29:20.200000
2016-09-14 10:29:20.200000+08:06
</code></pre></td></tr></table>
</div>
</div><h3 id="daylight-saving-time-processing">Daylight saving time processing</h3>
<p>Due to the relatively small number of scenarios used, no detailed study is done.</p>
<h2 id="dateutil-module">dateutil module</h2>
<p>Install the module: pip install python-dateutil</p>
<h3 id="parserparse">parser.parse()</h3>
<p>Parse time to datetime format, support most time strings. The default is 0:00 if no time is specified, today if no date is specified, and this year if no year is specified.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">from</span> <span class="nn">dateutil</span> <span class="kn">import</span> <span class="n">parser</span>

<span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&#34;8th March,2004&#34;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&#34;8 March,2004&#34;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&#34;March 8th,2004&#34;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&#34;March 8,2004&#34;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&#34;2016-09-14&#34;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&#34;20160914&#34;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&#34;2016/09/14&#34;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&#34;09/14/2016&#34;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&#34;09,14&#34;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&#34;12:00:00&#34;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&#34;Wed, Nov 12&#34;</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>Implementation results.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="mi">2004</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">08</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="mi">2004</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">08</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="mi">2004</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">08</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="mi">2004</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">08</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">14</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">14</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">14</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">14</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">09</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">14</span> <span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="mi">2016</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">12</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="rrulerrule">rrule.rrule()</h3>
<p>Main function: generate date and time according to the rules. The function prototype is as follows.</p>
<p>rrule(self, freq, dtstart=None, interval=1, wkst=None, count=None, until=None, bysetpos=None, bymonth=None, bymonthday=None, byyearday=None, byeaster=None, byweekno=None, byweekday=None, byhour=None, byminute=None, bysecond=None, cache=False)</p>
<p>where.</p>
<ul>
<li>freq: can be interpreted as units. It can be YEARLY, MONTHLY, WEEKLY, DAILY, HOURLY, MINUTELY, SECONDLY, i.e. year, month, week, hour, minute and second.</li>
<li>dtstart,until: is the start and end time.</li>
<li>wkst:Week start time.</li>
<li>interval:interval.</li>
<li>count:Specifies how many to generate.</li>
<li>byxxx:Specify the matching period. For example, byweekday=(MO,TU) then only Monday-Tuesday matches. byweekday can specify MO,TU,WE,TH,FR,SA,SU. i.e. Monday to Sunday.</li>
</ul>
<p>For more reference: <a href="http://dateutil.readthedocs.io/en/stable/index.html">http://dateutil.readthedocs.io/en/stable/index.html</a></p>
<h2 id="arrow">Arrow</h2>
<p><a href="https://arrow.readthedocs.io/en/stable/">Arrow</a> provides a friendly and very easy to understand method for creating times, calculating times, formatting times, and doing conversions, extractions, and compatibility with python datetime types. It includes the dateutil module, and according to its documentation Arrow is designed &ldquo;to help you handle dates and times with less code&rdquo;.</p>
<h3 id="utc-time">UTC time</h3>
<p>Use the utcnow() function to create the UTC time.</p>
<p>Using the to() method, we convert the UTC time to local time.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">arrow</span>

<span class="n">utc</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">utc</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">utc</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;local&#39;</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="local-time">Local time</h3>
<p>Local time is the time in a specific region or time zone.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">arrow</span>

<span class="n">now</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">now</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;UTC&#39;</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>Use the now() function to create a local time. The to() method is used to convert the local time to UTC time.</p>
<h3 id="parsing-time">Parsing time</h3>
<p>The get() method is used to parse the time.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">arrow</span>

<span class="n">d1</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;2012-06-05 16:20:03&#39;</span><span class="p">,</span> <span class="s1">&#39;YYYY-MM-DD HH:mm:ss&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span>

<span class="n">d2</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">1504384602</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>This example parses time from date and time strings and timestamps.</p>
<h3 id="unix-timestamps">Unix timestamps</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">arrow</span>

<span class="n">utc</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">utc</span><span class="p">)</span>

<span class="n">unix_time</span> <span class="o">=</span> <span class="n">utc</span><span class="o">.</span><span class="n">timestamp</span>
<span class="nb">print</span><span class="p">(</span><span class="n">unix_time</span><span class="p">)</span>

<span class="n">date</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">Arrow</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">unix_time</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>This example displays the local time and the Unix time. It then converts the Unix time back to the date object.</p>
<p>Using the fromtimestamp() method, we convert the Unix time back to the Arrow date object.</p>
<p>You can also format the date to Unix time.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">arrow</span>

<span class="n">utc</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">utc</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>By passing the &lsquo;X&rsquo; specifier to the format() method, we print the current local date as Unix time.</p>
<h3 id="formatting-the-date-and-time">Formatting the date and time</h3>
<p>The date and time can be formatted with the format() method.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">arrow</span>

<span class="n">now</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

<span class="n">year</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;YYYY&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Year: </span><span class="si">{0}</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">year</span><span class="p">))</span>

<span class="n">date</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;YYYY-MM-DD&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Date: </span><span class="si">{0}</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">date</span><span class="p">))</span>

<span class="n">date_time</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;YYYY-MM-DD HH:mm:ss&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Date and time: </span><span class="si">{0}</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">date_time</span><span class="p">))</span>

<span class="n">date_time_zone</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;YYYY-MM-DD HH:mm:ss ZZ&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Date and time and zone: </span><span class="si">{0}</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">date_time_zone</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>Format description.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2021/11/05/d163fc636726499a98516b479fe582e0.png" alt=""></p>
<h3 id="convert-to-regional-time">Convert to regional time</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">arrow</span>

<span class="n">utc</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">utc</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;US/Pacific&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;HH:mm:ss&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">utc</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;Europe/Bratislava&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;HH:mm:ss&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">utc</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;Europe/Moscow&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;HH:mm:ss&#39;</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="working-days">Working days</h3>
<p>The weekday() or format() method can be used to find the weekday of the date.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">arrow</span>

<span class="n">d1</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;1948-12-13&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">d1</span><span class="o">.</span><span class="n">weekday</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d1</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;dddd&#39;</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="move-time">Move time</h3>
<p>The shift() method is used to move the time.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">arrow</span>

<span class="n">now</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">date</span><span class="p">())</span>

<span class="nb">print</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="n">years</span><span class="o">=-</span><span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">date</span><span class="p">())</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="daylight-saving-time">Daylight Saving Time</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">arrow</span>

<span class="n">now</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&#34;YYYY-MM-DD HH:mm:ss ZZ&#34;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">dst</span><span class="p">())</span>
</code></pre></td></tr></table>
</div>
</div><p>This example uses dst() to display daylight saving time.</p>
<h3 id="humanized-date-and-time">Humanized date and time</h3>
<p>On social networking sites, we often see terms such as &ldquo;one hour ago&rdquo; or &ldquo;5 minutes ago&rdquo; that provide quick information about when a post was created or modified. Arrow includes the humanize() method to create such terms.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">arrow</span>

<span class="n">now</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

<span class="n">d1</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="n">minutes</span><span class="o">=-</span><span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">humanize</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span>

<span class="n">d2</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">humanize</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="iso-8601-class">ISO 8601 class</h2>
<p>The international standard ISO 8601, which is the International Organization for Standardization&rsquo;s representation of date and time, is called &ldquo;Data storage and exchange forms - Information exchange - Representation of date and time&rdquo;, and is more involved in API interface development.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">dateutil.parser</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dateutil</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;2008-09-03T20:56:35.450686Z&#39;</span><span class="p">)</span> <span class="c1"># RFC 3339 format</span>
<span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">450686</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">())</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dateutil</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;2008-09-03T20:56:35.450686&#39;</span><span class="p">)</span> <span class="c1"># ISO 8601 extended format</span>
<span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">450686</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dateutil</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;20080903T205635.450686&#39;</span><span class="p">)</span> <span class="c1"># ISO 8601 basic format</span>
<span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">450686</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dateutil</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;20080903&#39;</span><span class="p">)</span> <span class="c1"># ISO 8601 basic format, date only</span>
<span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>Or use the following parsing.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="o">&gt;&gt;&gt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="s2">&#34;2008-09-03T20:56:35.450686Z&#34;</span><span class="p">,</span> <span class="s2">&#34;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S.</span><span class="si">%f</span><span class="s2">Z&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>Also use the iso8601 module: <a href="http://pyiso8601.readthedocs.io/en/latest/">http://pyiso8601.readthedocs.io/en/latest/</a></p>
<p>Other date and time tools.</p>
<ul>
<li>Gregorian calendar to lunar calendar: <a href="https://pypi.python.org/pypi/LunarSolarConverter/">https://pypi.python.org/pypi/LunarSolarConverter/</a></li>
<li>Verbalized dates: <a href="https://github.com/scrapinghub/dateparser">https://github.com/scrapinghub/dateparser</a></li>
<li>Moment: <a href="https://github.com/zachwill/moment">https://github.com/zachwill/moment</a></li>
<li>Delorean: <a href="https://github.com/myusuf3/delorean">https://github.com/myusuf3/delorean</a></li>
<li>When: <a href="https://whenpy.readthedocs.io/en/latest/">https://whenpy.readthedocs.io/en/latest/</a></li>
<li>Pendulum: <a href="https://pendulum.eustace.io/">https://pendulum.eustace.io/</a></li>
<li>Time Machine: <a href="https://github.com/spulec/freezegun">https://github.com/spulec/freezegun</a></li>
<li>Work Calendar: <a href="https://github.com/peopledoc/workalendar">https://github.com/peopledoc/workalendar</a></li>
<li>Chinese Legal Holidays: <a href="https://github.com/NateScarlet/holiday-cn">https://github.com/NateScarlet/holiday-cn</a></li>
</ul>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/python/">python</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2021-11/string-hash/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">String Hashing Algorithm Compendium</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2021-11/how-dropbox-securely-stores-your-passwords/">
            <span class="next-text nav-default">Dropbox account password storage practices</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
